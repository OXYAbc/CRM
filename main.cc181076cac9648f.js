"use strict";(self.webpackChunkCRM=self.webpackChunkCRM||[]).push([[179],{2011:(ht,Se,N)=>{N.d(Se,{Dh:()=>ae,GT:()=>ge,cc:()=>Re,hO:()=>je,on:()=>Z,pX:()=>le,xv:()=>he});var s=N(4650),j=N(127),R=N(6351);ht=N.hmd(ht);const re=["ngOnDestroy"],le=(pe,Xe,Ke,Pe={})=>new Proxy(pe,{get:(xe,De)=>Ke.runOutsideAngular(()=>{var $e;if(pe[De])return!(null===($e=Pe?.spy)||void 0===$e)&&$e.get&&Pe.spy.get(De,pe[De]),pe[De];if(re.indexOf(De)>-1)return()=>{};const ie=Xe.toPromise().then(ue=>{const ye=ue&&ue[De];return"function"==typeof ye?ye.bind(ue):ye&&ye.then?ye.then(J=>Ke.run(()=>J)):Ke.run(()=>ye)});return new Proxy(()=>{},{get:(ue,ye)=>ie[ye],apply:(ue,ye,J)=>ie.then(X=>{var fe;const oe=X&&X(...J);return!(null===(fe=Pe?.spy)||void 0===fe)&&fe.apply&&Pe.spy.apply(De,J,oe),oe})})})}),ge=(pe,Xe)=>{Xe.forEach(Ke=>{Object.getOwnPropertyNames(Ke.prototype||Ke).forEach(Pe=>{Object.defineProperty(pe.prototype,Pe,Object.getOwnPropertyDescriptor(Ke.prototype||Ke,Pe))})})};class se{constructor(Xe){return Xe}}const ae=new s.OlP("angularfire2.app.options"),he=new s.OlP("angularfire2.app.name");function Z(pe,Xe,Ke){const xe="object"==typeof Ke&&Ke||{};xe.name=xe.name||"string"==typeof Ke&&Ke||"[DEFAULT]";const $e=j.Z.apps.filter(ie=>ie&&ie.name===xe.name)[0]||Xe.runOutsideAngular(()=>j.Z.initializeApp(pe,xe));try{JSON.stringify(pe)!==JSON.stringify($e.options)&&z("error",`${$e.name} Firebase App already initialized with different options${ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new se($e)}const z=(pe,...Xe)=>{(0,s.X6Q)()&&typeof console<"u"&&console[pe](...Xe)},Q={provide:se,useFactory:Z,deps:[ae,s.R0b,[new s.FiY,he]]};let je=(()=>{class pe{constructor(Ke){j.Z.registerVersion("angularfire",R.q4.full,"core"),j.Z.registerVersion("angularfire",R.q4.full,"app-compat"),j.Z.registerVersion("angular",s.q4F.full,Ke.toString())}static initializeApp(Ke,Pe){return{ngModule:pe,providers:[{provide:ae,useValue:Ke},{provide:he,useValue:Pe}]}}}return pe.\u0275fac=function(Ke){return new(Ke||pe)(s.LFG(s.Lbi))},pe.\u0275mod=s.oAB({type:pe}),pe.\u0275inj=s.cJS({providers:[Q]}),pe})();function Re(pe,Xe,Ke,Pe,xe){const[,De,$e]=globalThis.\u0275AngularfireInstanceCache.find(ie=>ie[0]===pe)||[];if(De)return function Ie(pe,Xe){try{return pe.toString()===Xe.toString()}catch{return pe===Xe}}(xe,$e)||(ve("error",`${Xe} was already initialized on the ${Ke} Firebase App with different settings.${st?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:xe,was:$e})),De;{const ie=Pe();return globalThis.\u0275AngularfireInstanceCache.push([pe,ie,xe]),ie}}const st=!!ht.hot,ve=(pe,...Xe)=>{(0,s.X6Q)()&&typeof console<"u"&&console[pe](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:(ht,Se,N)=>{N.d(Se,{q4:()=>mh,iC:()=>vi,HU:()=>Tl,vb:()=>Rc,JM:()=>ju,u3:()=>Zo});var s=N(4650),j=N(5867),R=N(5861),re=N(9681),le=N(2090),ge=N(4859),se=N(1877),ae=N(8766);const he="@firebase/installations",Z="0.5.14",Q=`w:${Z}`,je="FIS_v2",Xe=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ke(E){return E instanceof le.ZR&&E.code.includes("request-failed")}function Pe({projectId:E}){return`https://firebaseinstallations.googleapis.com/v1/projects/${E}/installations`}function xe(E){return{token:E.token,requestStatus:2,expiresIn:X(E.expiresIn),creationTime:Date.now()}}function De(E,S){return $e.apply(this,arguments)}function $e(){return($e=(0,R.Z)(function*(E,S){const U=(yield S.json()).error;return Xe.create("request-failed",{requestName:E,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function ie({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function ue(E,{refreshToken:S}){const k=ie(E);return k.append("Authorization",function fe(E){return`${je} ${E}`}(S)),k}function ye(E){return J.apply(this,arguments)}function J(){return(J=(0,R.Z)(function*(E){const S=yield E();return S.status>=500&&S.status<600?E():S})).apply(this,arguments)}function X(E){return Number(E.replace("s","000"))}function oe(E,S){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,R.Z)(function*({appConfig:E,heartbeatServiceProvider:S},{fid:k}){const U=Pe(E),W=ie(E),ce=S.getImmediate({optional:!0});if(ce){const Rt=yield ce.getHeartbeatsHeader();Rt&&W.append("x-firebase-client",Rt)}const Ze={method:"POST",headers:W,body:JSON.stringify({fid:k,authVersion:je,appId:E.appId,sdkVersion:Q})},ut=yield ye(()=>fetch(U,Ze));if(ut.ok){const Rt=yield ut.json();return{fid:Rt.fid||k,registrationStatus:2,refreshToken:Rt.refreshToken,authToken:xe(Rt.authToken)}}throw yield De("Create Installation",ut)})).apply(this,arguments)}function Ue(E){return new Promise(S=>{setTimeout(S,E)})}const tn=/^[cdef][\w-]{21}$/;function qe(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const k=function ln(E){return function yt(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return tn.test(k)?k:""}catch{return""}}function vn(E){return`${E.appName}!${E.appId}`}const en=new Map;function Qt(E,S){const k=vn(E);br(k,S),function Ti(E,S){const k=function xn(){return!xr&&"BroadcastChannel"in self&&(xr=new BroadcastChannel("[Firebase] FID Change"),xr.onmessage=E=>{br(E.data.key,E.data.fid)}),xr}();k&&k.postMessage({key:E,fid:S}),function zi(){0===en.size&&xr&&(xr.close(),xr=null)}()}(k,S)}function br(E,S){const k=en.get(E);if(k)for(const U of k)U(S)}let xr=null;const jn="firebase-installations-store";let gi=null;function qi(){return gi||(gi=(0,ae.X3)("firebase-installations-database",1,{upgrade:(E,S)=>{0===S&&E.createObjectStore(jn)}})),gi}function Je(E,S){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,R.Z)(function*(E,S){const k=vn(E),W=(yield qi()).transaction(jn,"readwrite"),ce=W.objectStore(jn),_e=yield ce.get(k);return yield ce.put(S,k),yield W.done,(!_e||_e.fid!==S.fid)&&Qt(E,S.fid),S})).apply(this,arguments)}function Hn(E){return yn.apply(this,arguments)}function yn(){return(yn=(0,R.Z)(function*(E){const S=vn(E),U=(yield qi()).transaction(jn,"readwrite");yield U.objectStore(jn).delete(S),yield U.done})).apply(this,arguments)}function ar(E,S){return Us.apply(this,arguments)}function Us(){return(Us=(0,R.Z)(function*(E,S){const k=vn(E),W=(yield qi()).transaction(jn,"readwrite"),ce=W.objectStore(jn),_e=yield ce.get(k),Ze=S(_e);return void 0===Ze?yield ce.delete(k):yield ce.put(Ze,k),yield W.done,Ze&&(!_e||_e.fid!==Ze.fid)&&Qt(E,Ze.fid),Ze})).apply(this,arguments)}function Cn(E){return wn.apply(this,arguments)}function wn(){return(wn=(0,R.Z)(function*(E){let S;const k=yield ar(E.appConfig,U=>{const W=mn(U),ce=gt(E,W);return S=ce.registrationPromise,ce.installationEntry});return""===k.fid?{installationEntry:yield S}:{installationEntry:k,registrationPromise:S}})).apply(this,arguments)}function mn(E){return Dt(E||{fid:qe(),registrationStatus:0})}function gt(E,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Xe.create("app-offline"))};const k={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},U=function mt(E,S){return It.apply(this,arguments)}(E,k);return{installationEntry:k,registrationPromise:U}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Br(E)}:{installationEntry:S}}function It(){return(It=(0,R.Z)(function*(E,S){try{const k=yield oe(E,S);return Je(E.appConfig,k)}catch(k){throw Ke(k)&&409===k.customData.serverCode?yield Hn(E.appConfig):yield Je(E.appConfig,{fid:S.fid,registrationStatus:0}),k}})).apply(this,arguments)}function Br(E){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,R.Z)(function*(E){let S=yield Dr(E.appConfig);for(;1===S.registrationStatus;)yield Ue(100),S=yield Dr(E.appConfig);if(0===S.registrationStatus){const{installationEntry:k,registrationPromise:U}=yield Cn(E);return U||k}return S})).apply(this,arguments)}function Dr(E){return ar(E,S=>{if(!S)throw Xe.create("installation-not-found");return Dt(S)})}function Dt(E){return function Rr(E){return 1===E.registrationStatus&&E.registrationTime+1e4<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function Lt(E,S){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,R.Z)(function*({appConfig:E,heartbeatServiceProvider:S},k){const U=Gt(E,k),W=ue(E,k),ce=S.getImmediate({optional:!0});if(ce){const Rt=yield ce.getHeartbeatsHeader();Rt&&W.append("x-firebase-client",Rt)}const Ze={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:Q,appId:E.appId}})},ut=yield ye(()=>fetch(U,Ze));if(ut.ok)return xe(yield ut.json());throw yield De("Generate Auth Token",ut)})).apply(this,arguments)}function Gt(E,{fid:S}){return`${Pe(E)}/${S}/authTokens:generate`}function ir(E){return In.apply(this,arguments)}function In(){return(In=(0,R.Z)(function*(E,S=!1){let k;const U=yield ar(E.appConfig,ce=>{if(!Kt(ce))throw Xe.create("not-registered");const _e=ce.authToken;if(!S&&G(_e))return ce;if(1===_e.requestStatus)return k=nt(E,S),ce;{if(!navigator.onLine)throw Xe.create("app-offline");const Ze=Y(ce);return k=Ct(E,Ze),Ze}});return k?yield k:U.authToken})).apply(this,arguments)}function nt(E,S){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,R.Z)(function*(E,S){let k=yield rt(E.appConfig);for(;1===k.authToken.requestStatus;)yield Ue(100),k=yield rt(E.appConfig);const U=k.authToken;return 0===U.requestStatus?ir(E,S):U})).apply(this,arguments)}function rt(E){return ar(E,S=>{if(!Kt(S))throw Xe.create("not-registered");return function B(E){return 1===E.requestStatus&&E.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Ct(E,S){return wt.apply(this,arguments)}function wt(){return(wt=(0,R.Z)(function*(E,S){try{const k=yield Lt(E,S),U=Object.assign(Object.assign({},S),{authToken:k});return yield Je(E.appConfig,U),k}catch(k){if(!Ke(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const U=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Je(E.appConfig,U)}else yield Hn(E.appConfig);throw k}})).apply(this,arguments)}function Kt(E){return void 0!==E&&2===E.registrationStatus}function G(E){return 2===E.requestStatus&&!function H(E){const S=Date.now();return S<E.creationTime||E.creationTime+E.expiresIn<S+36e5}(E)}function Y(E){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:S})}function L(){return(L=(0,R.Z)(function*(E){const S=E,{installationEntry:k,registrationPromise:U}=yield Cn(S);return U?U.catch(console.error):ir(S).catch(console.error),k.fid})).apply(this,arguments)}function Ne(){return(Ne=(0,R.Z)(function*(E,S=!1){const k=E;return yield ot(k),(yield ir(k,S)).token})).apply(this,arguments)}function ot(E){return at.apply(this,arguments)}function at(){return(at=(0,R.Z)(function*(E){const{registrationPromise:S}=yield Cn(E);S&&(yield S)})).apply(this,arguments)}function Bs(E){return Xe.create("missing-app-config-values",{valueName:E})}const _o="installations",js=E=>{const S=E.getProvider("app").getImmediate(),k=function bn(E){if(!E||!E.options)throw Bs("App Configuration");if(!E.name)throw Bs("App Name");const S=["projectId","apiKey","appId"];for(const k of S)if(!E.options[k])throw Bs(k);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(S);return{app:S,appConfig:k,heartbeatServiceProvider:(0,re._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},Hs=E=>{const S=E.getProvider("app").getImmediate(),k=(0,re._getProvider)(S,_o).getImmediate();return{getId:()=>function O(E){return L.apply(this,arguments)}(k),getToken:W=>function ne(E){return Ne.apply(this,arguments)}(k,W)}};(function ll(){(0,re._registerComponent)(new ge.wA(_o,js,"PUBLIC")),(0,re._registerComponent)(new ge.wA("installations-internal",Hs,"PRIVATE"))})(),(0,re.registerVersion)(he,Z),(0,re.registerVersion)(he,Z,"esm2017");const Yi="@firebase/remote-config",Zn=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class dc{constructor(S,k,U,W){this.client=S,this.storage=k,this.storageCache=U,this.logger=W}isCachedDataFresh(S,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-k,W=U<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${W}.`),W}fetch(S){var k=this;return(0,R.Z)(function*(){const[U,W]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(W&&k.isCachedDataFresh(S.cacheMaxAgeMillis,U))return W;S.eTag=W&&W.eTag;const ce=yield k.client.fetch(S),_e=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ce.status&&_e.push(k.storage.setLastSuccessfulFetchResponse(ce)),yield Promise.all(_e),ce})()}}function da(E=navigator){return E.languages&&E.languages[0]||E.language}class Gs{constructor(S,k,U,W,ce,_e){this.firebaseInstallations=S,this.sdkVersion=k,this.namespace=U,this.projectId=W,this.apiKey=ce,this.appId=_e}fetch(S){var k=this;return(0,R.Z)(function*(){var U,W,ce;const[_e,Ze]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Rt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},dt={sdk_version:k.sdkVersion,app_instance_id:_e,app_instance_id_token:Ze,app_id:k.appId,language_code:da()},kn={method:"POST",headers:Qe,body:JSON.stringify(dt)},Nn=fetch(Rt,kn),Ra=new Promise((Pi,si)=>{S.signal.addEventListener(()=>{const Ts=new Error("The operation was aborted.");Ts.name="AbortError",si(Ts)})});let hn;try{yield Promise.race([Nn,Ra]),hn=yield Nn}catch(Pi){let si="fetch-client-network";throw"AbortError"===(null===(U=Pi)||void 0===U?void 0:U.name)&&(si="fetch-timeout"),Zn.create(si,{originalErrorMessage:null===(W=Pi)||void 0===W?void 0:W.message})}let cr=hn.status;const Pa=hn.headers.get("ETag")||void 0;let Ss,er;if(200===hn.status){let Pi;try{Pi=yield hn.json()}catch(si){throw Zn.create("fetch-client-parse",{originalErrorMessage:null===(ce=si)||void 0===ce?void 0:ce.message})}Ss=Pi.entries,er=Pi.state}if("INSTANCE_STATE_UNSPECIFIED"===er?cr=500:"NO_CHANGE"===er?cr=304:("NO_TEMPLATE"===er||"EMPTY_CONFIG"===er)&&(Ss={}),304!==cr&&200!==cr)throw Zn.create("fetch-status",{httpStatus:cr});return{status:cr,eTag:Pa,config:Ss}})()}}class Ji{constructor(S,k){this.client=S,this.storage=k}fetch(S){var k=this;return(0,R.Z)(function*(){const U=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(S,U)})()}attemptFetch(S,{throttleEndTimeMillis:k,backoffCount:U}){var W=this;return(0,R.Z)(function*(){yield function ei(E,S){return new Promise((k,U)=>{const W=Math.max(S-Date.now(),0),ce=setTimeout(k,W);E.addEventListener(()=>{clearTimeout(ce),U(Zn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,k);try{const ce=yield W.client.fetch(S);return yield W.storage.deleteThrottleMetadata(),ce}catch(ce){if(!function yp(E){if(!(E instanceof le.ZR&&E.customData))return!1;const S=Number(E.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ce))throw ce;const _e={throttleEndTimeMillis:Date.now()+(0,le.$s)(U),backoffCount:U+1};return yield W.storage.setThrottleMetadata(_e),W.attemptFetch(S,_e)}})()}}class ha{constructor(S,k,U,W,ce){this.app=S,this._client=k,this._storageCache=U,this._storage=W,this._logger=ce,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function fa(E,S){var k;const U=E.target.error||void 0;return Zn.create(S,{originalErrorMessage:U&&(null===(k=U)||void 0===k?void 0:k.message)})}const vo="app_namespace_store";class hc{constructor(S,k,U,W=function wp(){return new Promise((E,S)=>{var k;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=W=>{S(fa(W,"storage-open"))},U.onsuccess=W=>{E(W.target.result)},U.onupgradeneeded=W=>{0===W.oldVersion&&W.target.result.createObjectStore(vo,{keyPath:"compositeKey"})}}catch(U){S(Zn.create("storage-open",{originalErrorMessage:null===(k=U)||void 0===k?void 0:k.message}))}})}()){this.appId=S,this.appName=k,this.namespace=U,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var k=this;return(0,R.Z)(function*(){const U=yield k.openDbPromise;return new Promise((W,ce)=>{var _e;const ut=U.transaction([vo],"readonly").objectStore(vo),Rt=k.createCompositeKey(S);try{const Qe=ut.get(Rt);Qe.onerror=dt=>{ce(fa(dt,"storage-get"))},Qe.onsuccess=dt=>{const kn=dt.target.result;W(kn?kn.value:void 0)}}catch(Qe){ce(Zn.create("storage-get",{originalErrorMessage:null===(_e=Qe)||void 0===_e?void 0:_e.message}))}})})()}set(S,k){var U=this;return(0,R.Z)(function*(){const W=yield U.openDbPromise;return new Promise((ce,_e)=>{var Ze;const Rt=W.transaction([vo],"readwrite").objectStore(vo),Qe=U.createCompositeKey(S);try{const dt=Rt.put({compositeKey:Qe,value:k});dt.onerror=kn=>{_e(fa(kn,"storage-set"))},dt.onsuccess=()=>{ce()}}catch(dt){_e(Zn.create("storage-set",{originalErrorMessage:null===(Ze=dt)||void 0===Ze?void 0:Ze.message}))}})})()}delete(S){var k=this;return(0,R.Z)(function*(){const U=yield k.openDbPromise;return new Promise((W,ce)=>{var _e;const ut=U.transaction([vo],"readwrite").objectStore(vo),Rt=k.createCompositeKey(S);try{const Qe=ut.delete(Rt);Qe.onerror=dt=>{ce(fa(dt,"storage-delete"))},Qe.onsuccess=()=>{W()}}catch(Qe){ce(Zn.create("storage-delete",{originalErrorMessage:null===(_e=Qe)||void 0===_e?void 0:_e.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Co{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,R.Z)(function*(){const k=S.storage.getLastFetchStatus(),U=S.storage.getLastSuccessfulFetchTimestampMillis(),W=S.storage.getActiveConfig(),ce=yield k;ce&&(S.lastFetchStatus=ce);const _e=yield U;_e&&(S.lastSuccessfulFetchTimestampMillis=_e);const Ze=yield W;Ze&&(S.activeConfig=Ze)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function m_(){return ul.apply(this,arguments)}function ul(){return(ul=(0,R.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}!function Cu(){(0,re._registerComponent)(new ge.wA("remote-config",function E(S,{instanceIdentifier:k}){const U=S.getProvider("app").getImmediate(),W=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Zn.create("registration-window");if(!(0,le.hl)())throw Zn.create("indexed-db-unavailable");const{projectId:ce,apiKey:_e,appId:Ze}=U.options;if(!ce)throw Zn.create("registration-project-id");if(!_e)throw Zn.create("registration-api-key");if(!Ze)throw Zn.create("registration-app-id");const ut=new hc(Ze,U.name,k=k||"firebase"),Rt=new Co(ut),Qe=new se.Yd(Yi);Qe.logLevel=se.in.ERROR;const dt=new Gs(W,re.SDK_VERSION,k,ce,_e,Ze),kn=new Ji(dt,ut),Nn=new dc(kn,ut,Rt,Qe),Ra=new ha(U,Nn,Rt,ut,Qe);return function Zt(E){const S=(0,le.m9)(E);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Ra),Ra},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(Yi,"0.3.13"),(0,re.registerVersion)(Yi,"0.3.13","esm2017")}();const fr="/firebase-messaging-sw.js",bo="/firebase-cloud-messaging-push-scope",ys="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",dl="google.c.a.c_id",fc="google.c.a.c_l",Du="google.c.a.ts",Do="google.c.a.e";var ti=(()=>{return(E=ti||(ti={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",ti;var E})();function Qi(E){const S=new Uint8Array(E);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $r(E){const k=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(k),W=new Uint8Array(U.length);for(let ce=0;ce<U.length;++ce)W[ce]=U.charCodeAt(ce);return W}const qs="fcm_token_details_db",Ws="fcm_token_object_Store";function bp(E){return pc.apply(this,arguments)}function pc(){return pc=(0,R.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ce=>ce.name).includes(qs))return null;let S=null;return(yield(0,ae.X3)(qs,5,{upgrade:(U=(0,R.Z)(function*(W,ce,_e,Ze){var ut;if(ce<2||!W.objectStoreNames.contains(Ws))return;const Rt=Ze.objectStore(Ws),Qe=yield Rt.index("fcmSenderId").get(E);if(yield Rt.clear(),Qe)if(2===ce){const dt=Qe;if(!dt.auth||!dt.p256dh||!dt.endpoint)return;S={token:dt.fcmToken,createTime:null!==(ut=dt.createTime)&&void 0!==ut?ut:Date.now(),subscriptionOptions:{auth:dt.auth,p256dh:dt.p256dh,endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:"string"==typeof dt.vapidKey?dt.vapidKey:Qi(dt.vapidKey)}}}else if(3===ce){const dt=Qe;S={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:Qi(dt.auth),p256dh:Qi(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:Qi(dt.vapidKey)}}}else if(4===ce){const dt=Qe;S={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:Qi(dt.auth),p256dh:Qi(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:Qi(dt.vapidKey)}}}}),function(ce,_e,Ze,ut){return U.apply(this,arguments)})})).close(),yield(0,ae.Lj)(qs),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),Rn(S)?S:null;var U}),pc.apply(this,arguments)}function Rn(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:S}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const mi="firebase-messaging-store";let pr=null;function hl(){return pr||(pr=(0,ae.X3)("firebase-messaging-database",1,{upgrade:(E,S)=>{0===S&&E.createObjectStore(mi)}})),pr}function Ys(E){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,R.Z)(function*(E){const S=ri(E),U=yield(yield hl()).transaction(mi).objectStore(mi).get(S);if(U)return U;{const W=yield bp(E.appConfig.senderId);if(W)return yield nn(E,W),W}})).apply(this,arguments)}function nn(E,S){return gc.apply(this,arguments)}function gc(){return(gc=(0,R.Z)(function*(E,S){const k=ri(E),W=(yield hl()).transaction(mi,"readwrite");return yield W.objectStore(mi).put(S,k),yield W.done,S})).apply(this,arguments)}function vs(E){return mc.apply(this,arguments)}function mc(){return(mc=(0,R.Z)(function*(E){const S=ri(E),U=(yield hl()).transaction(mi,"readwrite");yield U.objectStore(mi).delete(S),yield U.done})).apply(this,arguments)}function ri({appConfig:E}){return E.appId}const Vn=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Mt(E,S){return ga.apply(this,arguments)}function ga(){return(ga=(0,R.Z)(function*(E,S){var k;const U=yield ya(E),W=ke(S),ce={method:"POST",headers:U,body:JSON.stringify(W)};let _e;try{_e=yield(yield fetch(Ks(E.appConfig),ce)).json()}catch(Ze){throw Vn.create("token-subscribe-failed",{errorInfo:null===(k=Ze)||void 0===k?void 0:k.toString()})}if(_e.error)throw Vn.create("token-subscribe-failed",{errorInfo:_e.error.message});if(!_e.token)throw Vn.create("token-subscribe-no-token");return _e.token})).apply(this,arguments)}function Dp(E,S){return ma.apply(this,arguments)}function ma(){return(ma=(0,R.Z)(function*(E,S){var k;const U=yield ya(E),W=ke(S.subscriptionOptions),ce={method:"PATCH",headers:U,body:JSON.stringify(W)};let _e;try{_e=yield(yield fetch(`${Ks(E.appConfig)}/${S.token}`,ce)).json()}catch(Ze){throw Vn.create("token-update-failed",{errorInfo:null===(k=Ze)||void 0===k?void 0:k.toString()})}if(_e.error)throw Vn.create("token-update-failed",{errorInfo:_e.error.message});if(!_e.token)throw Vn.create("token-update-no-token");return _e.token})).apply(this,arguments)}function Iu(E,S){return _a.apply(this,arguments)}function _a(){return(_a=(0,R.Z)(function*(E,S){var k;const W={method:"DELETE",headers:yield ya(E)};try{const _e=yield(yield fetch(`${Ks(E.appConfig)}/${S}`,W)).json();if(_e.error)throw Vn.create("token-unsubscribe-failed",{errorInfo:_e.error.message})}catch(ce){throw Vn.create("token-unsubscribe-failed",{errorInfo:null===(k=ce)||void 0===k?void 0:k.toString()})}})).apply(this,arguments)}function Ks({projectId:E}){return`https://fcmregistrations.googleapis.com/v1/projects/${E}/registrations`}function ya(E){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,R.Z)(function*({appConfig:E,installations:S}){const k=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function ke({p256dh:E,auth:S,endpoint:k,vapidKey:U}){const W={web:{endpoint:k,auth:S,p256dh:E}};return U!==ys&&(W.web.applicationPubKey=U),W}const zt=6048e5;function nh(E){return Io.apply(this,arguments)}function Io(){return(Io=(0,R.Z)(function*(E){const S=yield rh(E.swRegistration,E.vapidKey),k={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:S.endpoint,auth:Qi(S.getKey("auth")),p256dh:Qi(S.getKey("p256dh"))},U=yield Ys(E.firebaseDependencies);if(U){if(Ep(U.subscriptionOptions,k))return Date.now()>=U.createTime+zt?fl(E,{token:U.token,createTime:Date.now(),subscriptionOptions:k}):U.token;try{yield Iu(E.firebaseDependencies,U.token)}catch(W){console.warn(W)}return pl(E.firebaseDependencies,k)}return pl(E.firebaseDependencies,k)})).apply(this,arguments)}function Jn(E){return So.apply(this,arguments)}function So(){return(So=(0,R.Z)(function*(E){const S=yield Ys(E.firebaseDependencies);S&&(yield Iu(E.firebaseDependencies,S.token),yield vs(E.firebaseDependencies));const k=yield E.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function fl(E,S){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,R.Z)(function*(E,S){try{const k=yield Dp(E.firebaseDependencies,S),U=Object.assign(Object.assign({},S),{token:k,createTime:Date.now()});return yield nn(E.firebaseDependencies,U),k}catch(k){throw yield Jn(E),k}})).apply(this,arguments)}function pl(E,S){return To.apply(this,arguments)}function To(){return(To=(0,R.Z)(function*(E,S){const U={token:yield Mt(E,S),createTime:Date.now(),subscriptionOptions:S};return yield nn(E,U),U.token})).apply(this,arguments)}function rh(E,S){return va.apply(this,arguments)}function va(){return(va=(0,R.Z)(function*(E,S){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$r(S)})})).apply(this,arguments)}function Ep(E,S){return S.vapidKey===E.vapidKey&&S.endpoint===E.endpoint&&S.auth===E.auth&&S.p256dh===E.p256dh}function Js(E){const S={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function Qn(E,S){if(!S.notification)return;E.notification={};const k=S.notification.title;k&&(E.notification.title=k);const U=S.notification.body;U&&(E.notification.body=U);const W=S.notification.image;W&&(E.notification.image=W)}(S,E),function Mi(E,S){!S.data||(E.data=S.data)}(S,E),function Ca(E,S){var k,U,W,ce,_e;if(!(S.fcmOptions||null!==(k=S.notification)&&void 0!==k&&k.click_action))return;E.fcmOptions={};const Ze=null!==(W=null===(U=S.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==W?W:null===(ce=S.notification)||void 0===ce?void 0:ce.click_action;Ze&&(E.fcmOptions.link=Ze);const ut=null===(_e=S.fcmOptions)||void 0===_e?void 0:_e.analytics_label;ut&&(E.fcmOptions.analyticsLabel=ut)}(S,E),S}function wa(E){return"object"==typeof E&&!!E&&dl in E}function Xi(E,S){const k=[];for(let U=0;U<E.length;U++)k.push(E.charAt(U)),U<S.length&&k.push(S.charAt(U));return k.join("")}function _c(E){return Vn.create("missing-app-config-values",{valueName:E})}Xi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Xi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Tu{constructor(S,k,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function Su(E){if(!E||!E.options)throw _c("App Configuration Object");if(!E.name)throw _c("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:k}=E;for(const U of S)if(!k[U])throw _c(U);return{appName:E.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:W,installations:k,analyticsProvider:U}}_delete(){return Promise.resolve()}}function ih(E){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,R.Z)(function*(E){var S;try{E.swRegistration=yield navigator.serviceWorker.register(fr,{scope:bo}),E.swRegistration.update().catch(()=>{})}catch(k){throw Vn.create("failed-service-worker-registration",{browserErrorMessage:null===(S=k)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function yc(E,S){return ba.apply(this,arguments)}function ba(){return(ba=(0,R.Z)(function*(E,S){if(!S&&!E.swRegistration&&(yield ih(E)),S||!E.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Vn.create("invalid-sw-registration");E.swRegistration=S}})).apply(this,arguments)}function vc(E,S){return Da.apply(this,arguments)}function Da(){return(Da=(0,R.Z)(function*(E,S){S?E.vapidKey=S:E.vapidKey||(E.vapidKey=ys)})).apply(this,arguments)}function Mo(){return(Mo=(0,R.Z)(function*(E,S){if(!navigator)throw Vn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Vn.create("permission-blocked");return yield vc(E,S?.vapidKey),yield yc(E,S?.serviceWorkerRegistration),nh(E)})).apply(this,arguments)}function sh(E,S,k){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,R.Z)(function*(E,S,k){const U=oh(S);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:k[dl],message_name:k[fc],message_time:k[Du],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function oh(E){switch(E){case ti.NOTIFICATION_CLICKED:return"notification_open";case ti.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Cs(){return(Cs=(0,R.Z)(function*(E,S){const k=S.data;if(!k.isFirebaseMessaging)return;E.onMessageHandler&&k.messageType===ti.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(Js(k)):E.onMessageHandler.next(Js(k)));const U=k.data;wa(U)&&"1"===U[Do]&&(yield sh(E,k.messageType,U))})).apply(this,arguments)}const ws="@firebase/messaging",Tn=E=>{const S=new Tu(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function Mu(E,S){return Cs.apply(this,arguments)}(S,k)),S},es=E=>{const S=E.getProvider("messaging").getImmediate();return{getToken:U=>function Au(E,S){return Mo.apply(this,arguments)}(S,U)}};function xu(){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,R.Z)(function*(){try{yield(0,le.eu)()}catch{return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function An(){(0,re._registerComponent)(new ge.wA("messaging",Tn,"PUBLIC")),(0,re._registerComponent)(new ge.wA("messaging-internal",es,"PRIVATE")),(0,re.registerVersion)(ws,"0.9.18"),(0,re.registerVersion)(ws,"0.9.18","esm2017")}();const Oo="analytics",Ru="firebase_id",Ec="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Pu="https://www.googletagmanager.com/gtag/js",Un=new se.Yd("@firebase/analytics");function ml(E){return Promise.all(E.map(S=>S.catch(k=>k)))}function _l(E,S){const k=document.createElement("script");k.src=`${Pu}?l=${E}&id=${S}`,k.async=!0,document.head.appendChild(k)}function lh(E,S,k,U,W,ce){return vl.apply(this,arguments)}function vl(){return(vl=(0,R.Z)(function*(E,S,k,U,W,ce){const _e=U[W];try{if(_e)yield S[_e];else{const ut=(yield ml(k)).find(Rt=>Rt.measurementId===W);ut&&(yield S[ut.appId])}}catch(Ze){Un.error(Ze)}E("config",W,ce)})).apply(this,arguments)}function ts(E,S,k,U,W){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,R.Z)(function*(E,S,k,U,W){try{let ce=[];if(W&&W.send_to){let _e=W.send_to;Array.isArray(_e)||(_e=[_e]);const Ze=yield ml(k);for(const ut of _e){const Rt=Ze.find(dt=>dt.measurementId===ut),Qe=Rt&&S[Rt.appId];if(!Qe){ce=[];break}ce.push(Qe)}}0===ce.length&&(ce=Object.values(S)),yield Promise.all(ce),E("event",U,W||{})}catch(ce){Un.error(ce)}})).apply(this,arguments)}function Nu(E){const S=window.document.getElementsByTagName("script");for(const k of Object.values(S))if(k.src&&k.src.includes(Pu)&&k.src.includes(E))return k;return null}const Xn=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ta=new class Sc{constructor(S={},k=1e3){this.throttleMetadata=S,this.intervalMillis=k}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,k){this.throttleMetadata[S]=k}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Ro(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function dh(E){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,R.Z)(function*(E){var S;const{appId:k,apiKey:U}=E,W={method:"GET",headers:Ro(U)},ce=Ec.replace("{app-id}",k),_e=yield fetch(ce,W);if(200!==_e.status&&304!==_e.status){let Ze="";try{const ut=yield _e.json();null!==(S=ut.error)&&void 0!==S&&S.message&&(Ze=ut.error.message)}catch{}throw Xn.create("config-fetch-failed",{httpStatus:_e.status,responseMessage:Ze})}return _e.json()})).apply(this,arguments)}function Fu(E){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,R.Z)(function*(E,S=Ta,k){const{appId:U,apiKey:W,measurementId:ce}=E.options;if(!U)throw Xn.create("no-app-id");if(!W){if(ce)return{measurementId:ce,appId:U};throw Xn.create("no-api-key")}const _e=S.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new Aa;return setTimeout((0,R.Z)(function*(){Ze.abort()}),void 0!==k?k:6e4),Lu({appId:U,apiKey:W,measurementId:ce},_e,Ze,S)})).apply(this,arguments)}function Lu(E,S,k){return ns.apply(this,arguments)}function ns(){return(ns=(0,R.Z)(function*(E,{throttleEndTimeMillis:S,backoffCount:k},U,W=Ta){var ce,_e;const{appId:Ze,measurementId:ut}=E;try{yield Tc(U,S)}catch(Rt){if(ut)return Un.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ut} provided in the "measurementId" field in the local Firebase config. [${null===(ce=Rt)||void 0===ce?void 0:ce.message}]`),{appId:Ze,measurementId:ut};throw Rt}try{const Rt=yield dh(E);return W.deleteThrottleMetadata(Ze),Rt}catch(Rt){const Qe=Rt;if(!Cl(Qe)){if(W.deleteThrottleMetadata(Ze),ut)return Un.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ut} provided in the "measurementId" field in the local Firebase config. [${Qe?.message}]`),{appId:Ze,measurementId:ut};throw Rt}const dt=503===Number(null===(_e=Qe?.customData)||void 0===_e?void 0:_e.httpStatus)?(0,le.$s)(k,W.intervalMillis,30):(0,le.$s)(k,W.intervalMillis),kn={throttleEndTimeMillis:Date.now()+dt,backoffCount:k+1};return W.setThrottleMetadata(Ze,kn),Un.debug(`Calling attemptFetch again in ${dt} millis`),Lu(E,kn,U,W)}})).apply(this,arguments)}function Tc(E,S){return new Promise((k,U)=>{const W=Math.max(S-Date.now(),0),ce=setTimeout(k,W);E.addEventListener(()=>{clearTimeout(ce),U(Xn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function Cl(E){if(!(E instanceof le.ZR&&E.customData))return!1;const S=Number(E.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Aa{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let Qs,bl;function Po(){return(Po=(0,R.Z)(function*(E,S,k,U,W){if(W&&W.global)E("event",k,U);else{const ce=yield S;E("event",k,Object.assign(Object.assign({},U),{send_to:ce}))}})).apply(this,arguments)}function Vo(E){bl=E}function Ac(E){Qs=E}function Ds(){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,R.Z)(function*(){var E;if(!(0,le.hl)())return Un.warn(Xn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(S){return Un.warn(Xn.create("indexeddb-unavailable",{errorInfo:null===(E=S)||void 0===E?void 0:E.toString()}).message),!1}return!0})).apply(this,arguments)}function Bo(){return(Bo=(0,R.Z)(function*(E,S,k,U,W,ce,_e){var Ze;const ut=Fu(E);ut.then(Nn=>{k[Nn.measurementId]=Nn.appId,E.options.measurementId&&Nn.measurementId!==E.options.measurementId&&Un.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${Nn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Nn=>Un.error(Nn)),S.push(ut);const Rt=Ds().then(Nn=>{if(Nn)return U.getId()}),[Qe,dt]=yield Promise.all([ut,Rt]);Nu(ce)||_l(ce,Qe.measurementId),bl&&(W("consent","default",bl),Vo(void 0)),W("js",new Date);const kn=null!==(Ze=_e?.config)&&void 0!==Ze?Ze:{};return kn.origin="firebase",kn.update=!0,null!=dt&&(kn[Ru]=dt),W("config",Qe.measurementId,kn),Qs&&(W("set",Qs),Ac(void 0)),Qe.measurementId})).apply(this,arguments)}class Dl{constructor(S){this.app=S}_delete(){return delete Ir[this.app.options.appId],Promise.resolve()}}let Ir={},jo=[];const Xs={};let $o,xi,Ho="dataLayer",Uu=!1;function ph(E,S,k){!function Ip(){const E=[];if((0,le.ru)()&&E.push("This is a browser extension environment."),(0,le.zI)()||E.push("Cookies are not available."),E.length>0){const S=E.map((U,W)=>`(${W+1}) ${U}`).join(" "),k=Xn.create("invalid-analytics-context",{errorInfo:S});Un.warn(k.message)}}();const U=E.options.appId;if(!U)throw Xn.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw Xn.create("no-api-key");Un.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ir[U])throw Xn.create("already-exists",{id:U});if(!Uu){!function yl(E){let S=[];Array.isArray(window[E])?S=window[E]:window[E]=S}(Ho);const{wrappedGtag:ce,gtagCore:_e}=function Sa(E,S,k,U,W){let ce=function(..._e){window[U].push(arguments)};return window[W]&&"function"==typeof window[W]&&(ce=window[W]),window[W]=function Ic(E,S,k,U){function ce(){return(ce=(0,R.Z)(function*(_e,Ze,ut){try{"event"===_e?yield ts(E,S,k,Ze,ut):"config"===_e?yield lh(E,S,k,U,Ze,ut):"consent"===_e?E("consent","update",ut):E("set",Ze)}catch(Rt){Un.error(Rt)}})).apply(this,arguments)}return function W(_e,Ze,ut){return ce.apply(this,arguments)}}(ce,E,S,k),{gtagCore:ce,wrappedGtag:window[W]}}(Ir,jo,Xs,Ho,"gtag");xi=ce,$o=_e,Uu=!0}return Ir[U]=function fh(E,S,k,U,W,ce,_e){return Bo.apply(this,arguments)}(E,jo,Xs,S,$o,Ho,k),new Dl(E)}function y_(){return gh.apply(this,arguments)}function gh(){return(gh=(0,R.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}const kc="@firebase/analytics";!function Fr(){(0,re._registerComponent)(new ge.wA(Oo,(S,{options:k})=>ph(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,re._registerComponent)(new ge.wA("analytics-internal",function E(S){try{const k=S.getProvider(Oo).getImmediate();return{logEvent:(U,W,ce)=>function Nr(E,S,k,U){E=(0,le.m9)(E),function Ma(E,S,k,U,W){return Po.apply(this,arguments)}(xi,Ir[E.app.options.appId],S,k,U).catch(W=>Un.error(W))}(k,U,W,ce)}}catch(k){throw Xn.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,re.registerVersion)(kc,"0.8.2"),(0,re.registerVersion)(kc,"0.8.2","esm2017")}();var yi=N(233),Il=N(4986),Es=N(9751),eo=N(8505),xa=N(9468),Sl=N(5363);const mh=new s.GfV("7.4.1"),Is="__angularfire_symbol__analyticsIsSupportedValue",Mn="__angularfire_symbol__analyticsIsSupported",Pn="__angularfire_symbol__remoteConfigIsSupportedValue",zn="__angularfire_symbol__remoteConfigIsSupported",rn="__angularfire_symbol__messagingIsSupportedValue",ze="__angularfire_symbol__messagingIsSupported";function ju(E,S,k){if(S){if(1===S.length)return S[0];const ce=S.filter(_e=>_e.app===k);if(1===ce.length)return ce[0]}return k.container.getProvider(E).getImmediate({optional:!0})}globalThis[Mn]||(globalThis[Mn]=y_().then(E=>globalThis[Is]=E).catch(()=>globalThis[Is]=!1)),globalThis[ze]||(globalThis[ze]=xu().then(E=>globalThis[rn]=E).catch(()=>globalThis[rn]=!1)),globalThis[zn]||(globalThis[zn]=m_().then(E=>globalThis[Pn]=E).catch(()=>globalThis[Pn]=!1));const Rc=(E,S)=>{const k=S?[S]:(0,j.C6)(),U=[];return k.forEach(W=>{W.container.getProvider(E).instances.forEach(_e=>{U.includes(_e)||U.push(_e)})}),U};function gr(){}class En{constructor(S,k=yi.N){this.zone=S,this.delegate=k}now(){return this.delegate.now()}schedule(S,k,U){const W=this.zone;return this.delegate.schedule(function(_e){W.runGuarded(()=>{S.apply(this,[_e])})},k,U)}}class We{constructor(S){this.zone=S,this.task=null}call(S,k){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gr,{},gr,gr)),k.pipe((0,eo.b)({next:U,complete:U,error:U})).subscribe(S).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Tl=(()=>{class E{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new En(Zone.current)),this.insideAngular=k.run(()=>new En(Zone.current,Il.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(k){return new(k||E)(s.LFG(s.R0b))},E.\u0275prov=s.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function Oi(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function to(E){return Oi().ngZone.runOutsideAngular(()=>E())}function Ri(E){return Oi().ngZone.run(()=>E())}function vi(E){return Oi(),function rs(E){return function(k){return(k=k.lift(new We(E.ngZone))).pipe((0,xa.R)(E.outsideAngular),(0,Sl.Q)(E.insideAngular))}}(Oi())(E)}const Oa=(E,S)=>function(){const U=arguments;return S&&setTimeout(()=>{"scheduled"===S.state&&S.invoke()},10),Ri(()=>E.apply(void 0,U))},Zo=(E,S)=>function(){let k;const U=arguments;for(let ce=0;ce<arguments.length;ce++)"function"==typeof U[ce]&&(S&&(k||(k=Ri(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gr,{},gr,gr)))),U[ce]=Oa(U[ce],k));const W=to(()=>E.apply(this,U));if(!S){if(W instanceof Es.y){const ce=Oi();return W.pipe((0,xa.R)(ce.outsideAngular),(0,Sl.Q)(ce.insideAngular))}return Ri(()=>W)}return W instanceof Es.y?W.pipe(vi):W instanceof Promise?Ri(()=>new Promise((ce,_e)=>W.then(Ze=>Ri(()=>ce(Ze)),Ze=>Ri(()=>_e(Ze))))):"function"==typeof W&&k?function(){return setTimeout(()=>{k&&"scheduled"===k.state&&k.invoke()},10),W.apply(this,arguments)}:Ri(()=>W)}},9934:(ht,Se,N)=>{N.d(Se,{$:()=>Ks,A:()=>z,B:()=>Re,G:()=>Hs,H:()=>jr,J:()=>Ji,L:()=>G,M:()=>ul,N:()=>bu,P:()=>mh,Q:()=>dl,R:()=>v_,T:()=>fc,U:()=>ys,V:()=>ti,W:()=>Qi,X:()=>bp,Y:()=>pa,Z:()=>Mt,_:()=>Dp,a:()=>bs,a0:()=>nh,a1:()=>Jn,a2:()=>fl,a3:()=>pl,a4:()=>rh,a5:()=>Ep,a6:()=>Qn,a7:()=>Mi,a8:()=>wa,a9:()=>Xi,aA:()=>Pa,aB:()=>kn,aC:()=>Oa,aD:()=>rs,aE:()=>vt,aI:()=>Ro,aL:()=>Do,aa:()=>ih,ab:()=>yc,ac:()=>vc,af:()=>sh,ag:()=>oh,ah:()=>Mu,ak:()=>mi,al:()=>wc,an:()=>Pu,ao:()=>vl,ap:()=>Tt,aq:()=>ye,ar:()=>Le,as:()=>ot,at:()=>Ke,au:()=>Dh,av:()=>si,aw:()=>Pe,ax:()=>ie,ay:()=>X,az:()=>H,b:()=>Xn,c:()=>Sp,d:()=>gr,e:()=>ju,f:()=>S,g:()=>Ze,h:()=>W,i:()=>Uo,j:()=>Qe,k:()=>T_,l:()=>xc,m:()=>Fa,n:()=>M_,o:()=>ae,r:()=>yi,s:()=>ct,u:()=>xa});var s=N(5861),j=N(2090),R=N(9681),re=N(1877),le=N(655),ge=N(4859);const ae={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Re=function Q(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ie=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},st=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),pe=new re.Yd("@firebase/auth");function Xe(v,...g){pe.logLevel<=re.in.ERROR&&pe.error(`Auth (${R.SDK_VERSION}): ${v}`,...g)}function Ke(v,...g){throw $e(v,...g)}function Pe(v,...g){return $e(v,...g)}function xe(v,g,m){const b=Object.assign(Object.assign({},Ie()),{[g]:m});return new j.LL("auth","Firebase",b).create(g,{appName:v.name})}function De(v,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&Ke(v,"argument-error"),xe(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(v,...g){if("string"!=typeof v){const m=g[0],b=[...g.slice(1)];return b[0]&&(b[0].appName=v.name),v._errorFactory.create(m,...b)}return st.create(v,...g)}function ie(v,g,...m){if(!v)throw $e(g,...m)}function ue(v){const g="INTERNAL ASSERTION FAILED: "+v;throw Xe(g),new Error(g)}function ye(v,g){v||ue(g)}const J=new Map;function X(v){ye(v instanceof Function,"Expected a class definition");let g=J.get(v);return g?(ye(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,J.set(v,g),g)}function Ve(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Ue(){return"http:"===yt()||"https:"===yt()}function yt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class qe{constructor(g,m){this.shortDelay=g,this.longDelay=m,ye(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function tn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ue()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ln(v,g){ye(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class vn{static initialize(g,m,b){this.fetchImpl=g,m&&(this.headersImpl=m),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ue("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ue("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ue("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const en={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qt=new qe(3e4,6e4);function Ht(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function Vt(v,g,m,b){return br.apply(this,arguments)}function br(){return(br=(0,s.Z)(function*(v,g,m,b,M={}){return Ti(v,M,(0,s.Z)(function*(){let P={},ee={};b&&("GET"===g?ee=b:P={body:JSON.stringify(b)});const Te=(0,j.xO)(Object.assign({key:v.config.apiKey},ee)).slice(1),it=yield v._getAdditionalHeaders();return it["Content-Type"]="application/json",v.languageCode&&(it["X-Firebase-Locale"]=v.languageCode),vn.fetch()(Gi(v,v.config.apiHost,m,Te),Object.assign({method:g,headers:it,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Ti(v,g,m){return xr.apply(this,arguments)}function xr(){return(xr=(0,s.Z)(function*(v,g,m){v._canInitEmulator=!1;const b=Object.assign(Object.assign({},en),g);try{const M=new Or(v),P=yield Promise.race([m(),M.promise]);M.clearNetworkTimeout();const ee=yield P.json();if("needConfirmation"in ee)throw jn(v,"account-exists-with-different-credential",ee);if(P.ok&&!("errorMessage"in ee))return ee;{const Te=P.ok?ee.errorMessage:ee.error.message,[it,bt]=Te.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===it)throw jn(v,"credential-already-in-use",ee);if("EMAIL_EXISTS"===it)throw jn(v,"email-already-in-use",ee);if("USER_DISABLED"===it)throw jn(v,"user-disabled",ee);const qt=b[it]||it.toLowerCase().replace(/[_\s]+/g,"-");if(bt)throw xe(v,qt,bt);Ke(v,qt)}}catch(M){if(M instanceof j.ZR)throw M;Ke(v,"network-request-failed")}})).apply(this,arguments)}function xn(v,g,m,b){return zi.apply(this,arguments)}function zi(){return(zi=(0,s.Z)(function*(v,g,m,b,M={}){const P=yield Vt(v,g,m,b,M);return"mfaPendingCredential"in P&&Ke(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Gi(v,g,m,b){const M=`${g}${m}?${b}`;return v.config.emulator?ln(v.config,M):`${v.config.apiScheme}://${M}`}class Or{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,b)=>{this.timer=setTimeout(()=>b(Pe(this.auth,"network-request-failed")),Qt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jn(v,g,m){const b={appName:v.name};m.email&&(b.email=m.email),m.phoneNumber&&(b.phoneNumber=m.phoneNumber);const M=Pe(v,g,b);return M.customData._tokenResponse=m,M}function qi(){return(qi=(0,s.Z)(function*(v,g){return Vt(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Je(v,g){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,s.Z)(function*(v,g){return Vt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Hn(v,g){return yn.apply(this,arguments)}function yn(){return(yn=(0,s.Z)(function*(v,g){return Vt(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function ar(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function wn(){return(wn=(0,s.Z)(function*(v,g=!1){const m=(0,j.m9)(v),b=yield m.getIdToken(g),M=gt(b);ie(M&&M.exp&&M.auth_time&&M.iat,m.auth,"internal-error");const P="object"==typeof M.firebase?M.firebase:void 0,ee=P?.sign_in_provider;return{claims:M,token:b,authTime:ar(mn(M.auth_time)),issuedAtTime:ar(mn(M.iat)),expirationTime:ar(mn(M.exp)),signInProvider:ee||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function mn(v){return 1e3*Number(v)}function gt(v){var g;const[m,b,M]=v.split(".");if(void 0===m||void 0===b||void 0===M)return Xe("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,j.tV)(b);return P?JSON.parse(P):(Xe("Failed to decode base64 JWT payload"),null)}catch(P){return Xe("Caught error parsing JWT payload as JSON",null===(g=P)||void 0===g?void 0:g.toString()),null}}function It(v,g){return Br.apply(this,arguments)}function Br(){return(Br=(0,s.Z)(function*(v,g,m=!1){if(m)return g;try{return yield g}catch(b){throw b instanceof j.ZR&&Yn(b)&&v.auth.currentUser===v&&(yield v.auth.signOut()),b}})).apply(this,arguments)}function Yn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Dr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const M=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const b=this.getInterval(g);this.timerId=setTimeout((0,s.Z)(function*(){yield m.iteration()}),b)}iteration(){var g=this;return(0,s.Z)(function*(){var m;try{yield g.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===(null===(m=b)||void 0===m?void 0:m.code)&&g.schedule(!0))}g.schedule()})()}}class Dt{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=ar(this.lastLoginAt),this.creationTime=ar(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Rr(v){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,s.Z)(function*(v){var g;const m=v.auth,b=yield v.getIdToken(),M=yield It(v,Hn(m,{idToken:b}));ie(M?.users.length,m,"internal-error");const P=M.users[0];v._notifyReloadListener(P);const ee=null!==(g=P.providerUserInfo)&&void 0!==g&&g.length?In(P.providerUserInfo):[],Te=ir(v.providerData,ee),qt=!!v.isAnonymous&&!(v.email&&P.passwordHash||Te?.length),Sn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:Te,metadata:new Dt(P.createdAt,P.lastLoginAt),isAnonymous:qt};Object.assign(v,Sn)})).apply(this,arguments)}function Gt(){return(Gt=(0,s.Z)(function*(v){const g=(0,j.m9)(v);yield Rr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function ir(v,g){return[...v.filter(b=>!g.some(M=>M.providerId===b.providerId)),...g]}function In(v){return v.map(g=>{var{providerId:m}=g,b=(0,le._T)(g,["providerId"]);return{providerId:m,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Ae(){return(Ae=(0,s.Z)(function*(v,g){const m=yield Ti(v,{},(0,s.Z)(function*(){const b=(0,j.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:M,apiKey:P}=v.config,ee=Gi(v,M,"/v1/token",`key=${P}`),Te=yield v._getAdditionalHeaders();return Te["Content-Type"]="application/x-www-form-urlencoded",vn.fetch()(ee,{method:"POST",headers:Te,body:b})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class rt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ie(g.idToken,"internal-error"),ie(typeof g.idToken<"u","internal-error"),ie(typeof g.refreshToken<"u","internal-error");const m="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function mt(v){const g=gt(v);return ie(g,"internal-error"),ie(typeof g.exp<"u","internal-error"),ie(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var b=this;return(0,s.Z)(function*(){return ie(!b.accessToken||b.refreshToken,g,"user-token-expired"),m||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(g,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var b=this;return(0,s.Z)(function*(){const{accessToken:M,refreshToken:P,expiresIn:ee}=yield function nt(v,g){return Ae.apply(this,arguments)}(g,m);b.updateTokensAndExpiration(M,P,Number(ee))})()}updateTokensAndExpiration(g,m,b){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(g,m){const{refreshToken:b,accessToken:M,expirationTime:P}=m,ee=new rt;return b&&(ie("string"==typeof b,"internal-error",{appName:g}),ee.refreshToken=b),M&&(ie("string"==typeof M,"internal-error",{appName:g}),ee.accessToken=M),P&&(ie("number"==typeof P,"internal-error",{appName:g}),ee.expirationTime=P),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new rt,this.toJSON())}_performRefresh(){return ue("not implemented")}}function Ct(v,g){ie("string"==typeof v||typeof v>"u","internal-error",{appName:g})}class wt{constructor(g){var{uid:m,auth:b,stsTokenManager:M}=g,P=(0,le._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=b,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Dt(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,s.Z)(function*(){const b=yield It(m,m.stsTokenManager.getToken(m.auth,g));return ie(b,m.auth,"internal-error"),m.accessToken!==b&&(m.accessToken=b,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),b})()}getIdTokenResult(g){return function Cn(v){return wn.apply(this,arguments)}(this,g)}reload(){return function Jr(v){return Gt.apply(this,arguments)}(this)}_assign(g){this!==g&&(ie(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new wt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var b=this;return(0,s.Z)(function*(){let M=!1;g.idToken&&g.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(g),M=!0),m&&(yield Rr(b)),yield b.auth._persistUserIfCurrent(b),M&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var g=this;return(0,s.Z)(function*(){const m=yield g.getIdToken();return yield It(g,function gi(v,g){return qi.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var b,M,P,ee,Te,it,bt,qt;const Sn=null!==(b=m.displayName)&&void 0!==b?b:void 0,os=null!==(M=m.email)&&void 0!==M?M:void 0,Al=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,Fp=null!==(ee=m.photoURL)&&void 0!==ee?ee:void 0,Lp=null!==(Te=m.tenantId)&&void 0!==Te?Te:void 0,Go=null!==(it=m._redirectEventId)&&void 0!==it?it:void 0,Vp=null!==(bt=m.createdAt)&&void 0!==bt?bt:void 0,Up=null!==(qt=m.lastLoginAt)&&void 0!==qt?qt:void 0,{uid:Eh,emailVerified:Bp,isAnonymous:Lc,providerData:Ih,stsTokenManager:qo}=m;ie(Eh&&qo,g,"internal-error");const zu=rt.fromJSON(this.name,qo);ie("string"==typeof Eh,g,"internal-error"),Ct(Sn,g.name),Ct(os,g.name),ie("boolean"==typeof Bp,g,"internal-error"),ie("boolean"==typeof Lc,g,"internal-error"),Ct(Al,g.name),Ct(Fp,g.name),Ct(Lp,g.name),Ct(Go,g.name),Ct(Vp,g.name),Ct(Up,g.name);const tr=new wt({uid:Eh,auth:g,email:os,emailVerified:Bp,displayName:Sn,isAnonymous:Lc,photoURL:Fp,phoneNumber:Al,tenantId:Lp,stsTokenManager:zu,createdAt:Vp,lastLoginAt:Up});return Ih&&Array.isArray(Ih)&&(tr.providerData=Ih.map(jw=>Object.assign({},jw))),Go&&(tr._redirectEventId=Go),tr}static _fromIdTokenResponse(g,m,b=!1){return(0,s.Z)(function*(){const M=new rt;M.updateFromServerResponse(m);const P=new wt({uid:m.localId,auth:g,stsTokenManager:M,isAnonymous:b});return yield Rr(P),P})()}}const G=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,s.Z)(function*(){return!0})()}_set(m,b){var M=this;return(0,s.Z)(function*(){M.storage[m]=b})()}_get(m){var b=this;return(0,s.Z)(function*(){const M=b.storage[m];return void 0===M?null:M})()}_remove(m){var b=this;return(0,s.Z)(function*(){delete b.storage[m]})()}_addListener(m,b){}_removeListener(m,b){}}return v.type="NONE",v})();function H(v,g,m){return`firebase:${v}:${g}:${m}`}class Y{constructor(g,m,b){this.persistence=g,this.auth=m,this.userKey=b;const{config:M,name:P}=this.auth;this.fullUserKey=H(this.userKey,M.apiKey,P),this.fullPersistenceKey=H("persistence",M.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,s.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?wt._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,s.Z)(function*(){if(m.persistence===g)return;const b=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,b?m.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,b="authUser"){return(0,s.Z)(function*(){if(!m.length)return new Y(X(G),g,b);const M=(yield Promise.all(m.map(function(){var bt=(0,s.Z)(function*(qt){if(yield qt._isAvailable())return qt});return function(qt){return bt.apply(this,arguments)}}()))).filter(bt=>bt);let P=M[0]||X(G);const ee=H(b,g.config.apiKey,g.name);let Te=null;for(const bt of m)try{const qt=yield bt._get(ee);if(qt){const Sn=wt._fromJSON(g,qt);bt!==P&&(Te=Sn),P=bt;break}}catch{}const it=M.filter(bt=>bt._shouldAllowMigration);return P._shouldAllowMigration&&it.length?(P=it[0],Te&&(yield P._set(ee,Te.toJSON())),yield Promise.all(m.map(function(){var bt=(0,s.Z)(function*(qt){if(qt!==P)try{yield qt._remove(ee)}catch{}});return function(qt){return bt.apply(this,arguments)}}())),new Y(P,g,b)):new Y(P,g,b)})()}}function B(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Ne(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(O(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(at(g))return"Blackberry";if(Me(g))return"Webos";if(L(g))return"Safari";if((g.includes("chrome/")||ne(g))&&!g.includes("edge/"))return"Chrome";if(ot(g))return"Android";{const b=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function O(v=(0,j.z$)()){return/firefox\//i.test(v)}function L(v=(0,j.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function ne(v=(0,j.z$)()){return/crios\//i.test(v)}function Ne(v=(0,j.z$)()){return/iemobile/i.test(v)}function ot(v=(0,j.z$)()){return/android/i.test(v)}function at(v=(0,j.z$)()){return/blackberry/i.test(v)}function Me(v=(0,j.z$)()){return/webos/i.test(v)}function Le(v=(0,j.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Tt(v=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function un(v=(0,j.z$)()){return Le(v)||ot(v)||Me(v)||at(v)||/windows phone/i.test(v)||Ne(v)}function bn(v,g=[]){let m;switch(v){case"Browser":m=B((0,j.z$)());break;case"Worker":m=`${B((0,j.z$)())}-${v}`;break;default:m=v}const b=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${R.SDK_VERSION}/${b}`}class Bs{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,m){const b=P=>new Promise((ee,Te)=>{try{ee(g(P))}catch(it){Te(it)}});b.onAbort=m,this.queue.push(b);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(g){var m=this;return(0,s.Z)(function*(){var b;if(m.auth.currentUser===g)return;const M=[];try{for(const P of m.queue)yield P(g),P.onAbort&&M.push(P.onAbort)}catch(P){M.reverse();for(const ee of M)try{ee()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(b=P)||void 0===b?void 0:b.message})}})()}}class _o{constructor(g,m,b){this.app=g,this.heartbeatServiceProvider=m,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new js(this),this.idTokenSubscription=new js(this),this.beforeStateQueue=new Bs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=st,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(g,m){var b=this;return m&&(this._popupRedirectResolver=X(m)),this._initializationPromise=this.queue((0,s.Z)(function*(){var M,P;if(!b._deleted&&(b.persistenceManager=yield Y.create(b,g),!b._deleted)){if(null!==(M=b._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(m),b.lastNotifiedUid=(null===(P=b.currentUser)||void 0===P?void 0:P.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,s.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m,!0)}})()}initializeCurrentUser(g){var m=this;return(0,s.Z)(function*(){var b;const M=yield m.assertedPersistence.getCurrentUser();let P=M,ee=!1;if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Te=null===(b=m.redirectUser)||void 0===b?void 0:b._redirectEventId,it=P?._redirectEventId,bt=yield m.tryRedirectSignIn(g);(!Te||Te===it)&&bt?.user&&(P=bt.user,ee=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(ee)try{yield m.beforeStateQueue.runMiddleware(P)}catch(Te){P=M,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Te))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return ie(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(g){var m=this;return(0,s.Z)(function*(){let b=null;try{b=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch{yield m._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,s.Z)(function*(){var b;try{yield Rr(g)}catch(M){if("auth/network-request-failed"!==(null===(b=M)||void 0===b?void 0:b.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Bt(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,s.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,s.Z)(function*(){const b=g?(0,j.m9)(g):null;return b&&ie(b.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(b&&b._clone(m))})()}_updateCurrentUser(g,m=!1){var b=this;return(0,s.Z)(function*(){if(!b._deleted)return g&&ie(b.tenantId===g.tenantId,b,"tenant-id-mismatch"),m||(yield b.beforeStateQueue.runMiddleware(g)),b.queue((0,s.Z)(function*(){yield b.directlySetCurrentUser(g),b.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,s.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var m=this;return this.queue((0,s.Z)(function*(){yield m.assertedPersistence.setPersistence(X(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new j.LL("auth","Firebase",g())}onAuthStateChanged(g,m,b){return this.registerStateListener(this.authStateSubscription,g,m,b)}beforeAuthStateChanged(g,m){return this.beforeStateQueue.pushCallback(g,m)}onIdTokenChanged(g,m,b){return this.registerStateListener(this.idTokenSubscription,g,m,b)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var b=this;return(0,s.Z)(function*(){const M=yield b.getOrInitRedirectPersistenceManager(m);return null===g?M.removeCurrentUser():M.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,s.Z)(function*(){if(!m.redirectPersistenceManager){const b=g&&X(g)||m._popupRedirectResolver;ie(b,m,"argument-error"),m.redirectPersistenceManager=yield Y.create(m,[X(b._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,s.Z)(function*(){var b,M;return m._isInitialized&&(yield m.queue((0,s.Z)(function*(){}))),(null===(b=m._currentUser)||void 0===b?void 0:b._redirectEventId)===g?m._currentUser:(null===(M=m.redirectUser)||void 0===M?void 0:M._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,s.Z)(function*(){if(g===m.currentUser)return m.queue((0,s.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,b,M){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),ee=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(ee,this,"internal-error"),ee.then(()=>P(this.currentUser)),"function"==typeof m?g.addObserver(m,b,M):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,s.Z)(function*(){m.currentUser&&m.currentUser!==g&&m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh(),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=bn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,s.Z)(function*(){var m;const b={"X-Client-Version":g.clientVersion};g.app.options.appId&&(b["X-Firebase-gmpid"]=g.app.options.appId);const M=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return M&&(b["X-Firebase-Client"]=M),b})()}}function vt(v){return(0,j.m9)(v)}class js{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,j.ne)(m=>this.observer=m)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Hs(v,g,m){const b=vt(v);ie(b._canInitEmulator,b,"emulator-config-failed"),ie(/^https?:\/\//.test(g),b,"invalid-emulator-scheme");const M=!!m?.disableWarnings,P=ll(g),{host:ee,port:Te}=function Yi(v){const g=ll(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!m)return{host:"",port:null};const b=m[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(b);if(M){const P=M[1];return{host:P,port:$n(b.substr(P.length+1))}}{const[P,ee]=b.split(":");return{host:P,port:$n(ee)}}}(g);b.config.emulator={url:`${P}//${ee}${null===Te?"":`:${Te}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:ee,port:Te,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function $s(){function v(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function ll(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function $n(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class jr{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return ue("not implemented")}_getIdTokenResponse(g){return ue("not implemented")}_linkToIdToken(g,m){return ue("not implemented")}_getReauthenticationResolver(g){return ue("not implemented")}}function Qr(v,g){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,s.Z)(function*(v,g){return Vt(v,"POST","/v1/accounts:resetPassword",Ht(v,g))})).apply(this,arguments)}function cl(v,g){return dn.apply(this,arguments)}function dn(){return(dn=(0,s.Z)(function*(v,g){return Vt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Xd(v,g){return la.apply(this,arguments)}function la(){return(la=(0,s.Z)(function*(v,g){return Vt(v,"POST","/v1/accounts:update",Ht(v,g))})).apply(this,arguments)}function Zs(){return(Zs=(0,s.Z)(function*(v,g){return xn(v,"POST","/v1/accounts:signInWithPassword",Ht(v,g))})).apply(this,arguments)}function Er(v,g){return zs.apply(this,arguments)}function zs(){return(zs=(0,s.Z)(function*(v,g){return Vt(v,"POST","/v1/accounts:sendOobCode",Ht(v,g))})).apply(this,arguments)}function Ki(v,g){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,s.Z)(function*(v,g){return Er(v,g)})).apply(this,arguments)}function eh(v,g){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,s.Z)(function*(v,g){return Er(v,g)})).apply(this,arguments)}function Xr(v,g){return yo.apply(this,arguments)}function yo(){return(yo=(0,s.Z)(function*(v,g){return Er(v,g)})).apply(this,arguments)}function cc(v,g){return ua.apply(this,arguments)}function ua(){return(ua=(0,s.Z)(function*(v,g){return Er(v,g)})).apply(this,arguments)}function uc(){return(uc=(0,s.Z)(function*(v,g){return xn(v,"POST","/v1/accounts:signInWithEmailLink",Ht(v,g))})).apply(this,arguments)}function dc(){return(dc=(0,s.Z)(function*(v,g){return xn(v,"POST","/v1/accounts:signInWithEmailLink",Ht(v,g))})).apply(this,arguments)}class da extends jr{constructor(g,m,b,M=null){super("password",b),this._email=g,this._password=m,this._tenantId=M}static _fromEmailAndPassword(g,m){return new da(g,m,"password")}static _fromEmailAndCode(g,m,b=null){return new da(g,m,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,s.Z)(function*(){switch(m.signInMethod){case"password":return function ca(v,g){return Zs.apply(this,arguments)}(g,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Hr(v,g){return uc.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:Ke(g,"internal-error")}})()}_linkToIdToken(g,m){var b=this;return(0,s.Z)(function*(){switch(b.signInMethod){case"password":return cl(g,{idToken:m,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function _p(v,g){return dc.apply(this,arguments)}(g,{idToken:m,email:b._email,oobCode:b._password});default:Ke(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Gs(v,g){return ei.apply(this,arguments)}function ei(){return(ei=(0,s.Z)(function*(v,g){return xn(v,"POST","/v1/accounts:signInWithIdp",Ht(v,g))})).apply(this,arguments)}class Ji extends jr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new Ji(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):Ke("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:M}=m,P=(0,le._T)(m,["providerId","signInMethod"]);if(!b||!M)return null;const ee=new Ji(b,M);return ee.idToken=P.idToken||void 0,ee.accessToken=P.accessToken||void 0,ee.secret=P.secret,ee.nonce=P.nonce,ee.pendingToken=P.pendingToken||null,ee}_getIdTokenResponse(g){return Gs(g,this.buildRequest())}_linkToIdToken(g,m){const b=this.buildRequest();return b.idToken=m,Gs(g,b)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Gs(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,j.xO)(m)}return g}}function vp(v,g){return yu.apply(this,arguments)}function yu(){return(yu=(0,s.Z)(function*(v,g){return Vt(v,"POST","/v1/accounts:sendVerificationCode",Ht(v,g))})).apply(this,arguments)}function fa(){return(fa=(0,s.Z)(function*(v,g){return xn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ht(v,g))})).apply(this,arguments)}function vu(){return(vu=(0,s.Z)(function*(v,g){const m=yield xn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ht(v,g));if(m.temporaryProof)throw jn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Cp={USER_NOT_FOUND:"user-not-found"};function hc(){return(hc=(0,s.Z)(function*(v,g){return xn(v,"POST","/v1/accounts:signInWithPhoneNumber",Ht(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Cp)})).apply(this,arguments)}class Co extends jr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new Co({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new Co({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function ha(v,g){return fa.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function vo(v,g){return vu.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function wp(v,g){return hc.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:b,verificationCode:M}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:b,code:M}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:b,phoneNumber:M,temporaryProof:P}=g;return b||m||M||P?new Co({verificationId:m,verificationCode:b,phoneNumber:M,temporaryProof:P}):null}}class wo{constructor(g){var m,b,M,P,ee,Te;const it=(0,j.zd)((0,j.pd)(g)),bt=null!==(m=it.apiKey)&&void 0!==m?m:null,qt=null!==(b=it.oobCode)&&void 0!==b?b:null,Sn=function Cu(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=it.mode)&&void 0!==M?M:null);ie(bt&&qt&&Sn,"argument-error"),this.apiKey=bt,this.operation=Sn,this.code=qt,this.continueUrl=null!==(P=it.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(ee=it.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(Te=it.tenantId)&&void 0!==Te?Te:null}static parseLink(g){const m=function wu(v){const g=(0,j.zd)((0,j.pd)(v)).link,m=g?(0,j.zd)((0,j.pd)(g)).deep_link_id:null,b=(0,j.zd)((0,j.pd)(v)).deep_link_id;return(b?(0,j.zd)((0,j.pd)(b)).link:null)||b||m||g||v}(g);try{return new wo(m)}catch{return null}}}let ul=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,b){return da._fromEmailAndPassword(m,b)}static credentialWithLink(m,b){const M=wo.parseLink(b);return ie(M,"argument-error"),da._fromEmailAndCode(m,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class fr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class bo extends fr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ys extends bo{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return ie("providerId"in m&&"signInMethod"in m,"argument-error"),Ji._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ie(g.idToken||g.accessToken,"argument-error"),Ji._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ys.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ys.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:b,oauthTokenSecret:M,pendingToken:P,nonce:ee,providerId:Te}=g;if(!b&&!M&&!m&&!P||!Te)return null;try{return new ys(Te)._credential({idToken:m,accessToken:b,nonce:ee,pendingToken:P})}catch{return null}}}let bu=(()=>{class v extends bo{constructor(){super("facebook.com")}static credential(m){return Ji._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),dl=(()=>{class v extends bo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,b){return Ji._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:b})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:b,oauthAccessToken:M}=m;if(!b&&!M)return null;try{return v.credential(b,M)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),fc=(()=>{class v extends bo{constructor(){super("github.com")}static credential(m){return Ji._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Do extends jr{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return Gs(g,this.buildRequest())}_linkToIdToken(g,m){const b=this.buildRequest();return b.idToken=m,Gs(g,b)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Gs(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:M,pendingToken:P}=m;return b&&M&&P&&b===M?new Do(b,P):null}static _create(g,m){return new Do(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ti extends fr{constructor(g){ie(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return ti.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return ti.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=Do.fromJSON(g);return ie(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:b}=g;if(!m||!b)return null;try{return Do._create(b,m)}catch{return null}}}let Qi=(()=>{class v extends bo{constructor(){super("twitter.com")}static credential(m,b){return Ji._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:b})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:b,oauthTokenSecret:M}=m;if(!b||!M)return null;try{return v.credential(b,M)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function $r(v,g){return qs.apply(this,arguments)}function qs(){return(qs=(0,s.Z)(function*(v,g){return xn(v,"POST","/v1/accounts:signUp",Ht(v,g))})).apply(this,arguments)}class ni{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,b,M=!1){return(0,s.Z)(function*(){const P=yield wt._fromIdTokenResponse(g,b,M),ee=Ws(b);return new ni({user:P,providerId:ee,_tokenResponse:b,operationType:m})})()}static _forOperation(g,m,b){return(0,s.Z)(function*(){yield g._updateTokensIfNecessary(b,!0);const M=Ws(b);return new ni({user:g,providerId:M,_tokenResponse:b,operationType:m})})()}}function Ws(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function bp(v){return pc.apply(this,arguments)}function pc(){return(pc=(0,s.Z)(function*(v){var g;const m=vt(v);if(yield m._initializationPromise,null!==(g=m.currentUser)&&void 0!==g&&g.isAnonymous)return new ni({user:m.currentUser,providerId:null,operationType:"signIn"});const b=yield $r(m,{returnSecureToken:!0}),M=yield ni._fromIdTokenResponse(m,"signIn",b,!0);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class Rn extends j.ZR{constructor(g,m,b,M){var P;super(m.code,m.message),this.operationType=b,this.user=M,Object.setPrototypeOf(this,Rn.prototype),this.customData={appName:g.name,tenantId:null!==(P=g.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(g,m,b,M){return new Rn(g,m,b,M)}}function Eu(v,g,m,b){return("reauthenticate"===g?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Rn._fromErrorAndOperation(v,P,g,b):P})}function th(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function mi(v,g){return pr.apply(this,arguments)}function pr(){return(pr=(0,s.Z)(function*(v,g){const m=(0,j.m9)(v);yield Ai(!0,m,g);const{providerUserInfo:b}=yield Je(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),M=th(b||[]);return m.providerData=m.providerData.filter(P=>M.has(P.providerId)),M.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function hl(v,g){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,s.Z)(function*(v,g,m=!1){const b=yield It(v,g._linkToIdToken(v.auth,yield v.getIdToken()),m);return ni._forOperation(v,"link",b)})).apply(this,arguments)}function Ai(v,g,m){return nn.apply(this,arguments)}function nn(){return(nn=(0,s.Z)(function*(v,g,m){yield Rr(g);const M=!1===v?"provider-already-linked":"no-such-provider";ie(th(g.providerData).has(m)===v,g.auth,M)})).apply(this,arguments)}function gc(v,g){return vs.apply(this,arguments)}function vs(){return(vs=(0,s.Z)(function*(v,g,m=!1){var b;const{auth:M}=v,P="reauthenticate";try{const ee=yield It(v,Eu(M,P,g,v),m);ie(ee.idToken,M,"internal-error");const Te=gt(ee.idToken);ie(Te,M,"internal-error");const{sub:it}=Te;return ie(v.uid===it,M,"user-mismatch"),ni._forOperation(v,P,ee)}catch(ee){throw"auth/user-not-found"===(null===(b=ee)||void 0===b?void 0:b.code)&&Ke(M,"user-mismatch"),ee}})).apply(this,arguments)}function mc(v,g){return ri.apply(this,arguments)}function ri(){return(ri=(0,s.Z)(function*(v,g,m=!1){const b="signIn",M=yield Eu(v,b,g),P=yield ni._fromIdTokenResponse(v,b,M);return m||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function pa(v,g){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,s.Z)(function*(v,g){return mc(vt(v),g)})).apply(this,arguments)}function Mt(v,g){return ga.apply(this,arguments)}function ga(){return(ga=(0,s.Z)(function*(v,g){const m=(0,j.m9)(v);return yield Ai(!1,m,g.providerId),hl(m,g)})).apply(this,arguments)}function Dp(v,g){return ma.apply(this,arguments)}function ma(){return(ma=(0,s.Z)(function*(v,g){return gc((0,j.m9)(v),g)})).apply(this,arguments)}function Iu(v,g){return _a.apply(this,arguments)}function _a(){return(_a=(0,s.Z)(function*(v,g){return xn(v,"POST","/v1/accounts:signInWithCustomToken",Ht(v,g))})).apply(this,arguments)}function Ks(v,g){return ya.apply(this,arguments)}function ya(){return(ya=(0,s.Z)(function*(v,g){const m=vt(v),b=yield Iu(m,{token:g,returnSecureToken:!0}),M=yield ni._fromIdTokenResponse(m,"signIn",b);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class Eo{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?ke._fromServerResponse(g,m):Ke(g,"internal-error")}}class ke extends Eo{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new ke(m)}}function zt(v,g,m){var b;ie((null===(b=m.url)||void 0===b?void 0:b.length)>0,v,"invalid-continue-uri"),ie(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ie(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(ie(m.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function nh(v,g,m){return Io.apply(this,arguments)}function Io(){return(Io=(0,s.Z)(function*(v,g,m){const b=(0,j.m9)(v),M={requestType:"PASSWORD_RESET",email:g};m&&zt(b,M,m),yield eh(b,M)})).apply(this,arguments)}function Jn(v,g,m){return So.apply(this,arguments)}function So(){return(So=(0,s.Z)(function*(v,g,m){yield Qr((0,j.m9)(v),{oobCode:g,newPassword:m})})).apply(this,arguments)}function fl(v,g){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,s.Z)(function*(v,g){yield Xd((0,j.m9)(v),{oobCode:g})})).apply(this,arguments)}function pl(v,g){return To.apply(this,arguments)}function To(){return(To=(0,s.Z)(function*(v,g){const m=(0,j.m9)(v),b=yield Qr(m,{oobCode:g}),M=b.requestType;switch(ie(M,m,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(b.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(b.mfaInfo,m,"internal-error");default:ie(b.email,m,"internal-error")}let P=null;return b.mfaInfo&&(P=Eo._fromServerResponse(vt(m),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:P},operation:M}})).apply(this,arguments)}function rh(v,g){return va.apply(this,arguments)}function va(){return(va=(0,s.Z)(function*(v,g){const{data:m}=yield pl((0,j.m9)(v),g);return m.email})).apply(this,arguments)}function Ep(v,g,m){return Js.apply(this,arguments)}function Js(){return(Js=(0,s.Z)(function*(v,g,m){const b=vt(v),M=yield $r(b,{returnSecureToken:!0,email:g,password:m}),P=yield ni._fromIdTokenResponse(b,"signIn",M);return yield b._updateCurrentUser(P.user),P})).apply(this,arguments)}function Qn(v,g,m){return pa((0,j.m9)(v),ul.credential(g,m))}function Mi(v,g,m){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,s.Z)(function*(v,g,m){const b=(0,j.m9)(v),M={requestType:"EMAIL_SIGNIN",email:g};ie(m.handleCodeInApp,b,"argument-error"),m&&zt(b,M,m),yield Xr(b,M)})).apply(this,arguments)}function wa(v,g){return"EMAIL_SIGNIN"===wo.parseLink(g)?.operation}function Xi(v,g,m){return Su.apply(this,arguments)}function Su(){return(Su=(0,s.Z)(function*(v,g,m){const b=(0,j.m9)(v),M=ul.credentialWithLink(g,m||Ve());return ie(M._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),pa(b,M)})).apply(this,arguments)}function _c(v,g){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,s.Z)(function*(v,g){return Vt(v,"POST","/v1/accounts:createAuthUri",Ht(v,g))})).apply(this,arguments)}function ih(v,g){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,s.Z)(function*(v,g){const b={identifier:g,continueUri:Ue()?Ve():"http://localhost"},{signinMethods:M}=yield _c((0,j.m9)(v),b);return M||[]})).apply(this,arguments)}function yc(v,g){return ba.apply(this,arguments)}function ba(){return(ba=(0,s.Z)(function*(v,g){const m=(0,j.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&zt(m.auth,M,g);const{email:P}=yield Ki(m.auth,M);P!==v.email&&(yield v.reload())})).apply(this,arguments)}function vc(v,g,m){return Da.apply(this,arguments)}function Da(){return(Da=(0,s.Z)(function*(v,g,m){const b=(0,j.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};m&&zt(b.auth,P,m);const{email:ee}=yield cc(b.auth,P);ee!==v.email&&(yield v.reload())})).apply(this,arguments)}function Au(v,g){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,s.Z)(function*(v,g){return Vt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function sh(v,g){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,s.Z)(function*(v,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const b=(0,j.m9)(v),P={idToken:yield b.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},ee=yield It(b,Au(b.auth,P));b.displayName=ee.displayName||null,b.photoURL=ee.photoUrl||null;const Te=b.providerData.find(({providerId:it})=>"password"===it);Te&&(Te.displayName=b.displayName,Te.photoURL=b.photoURL),yield b._updateTokensIfNecessary(ee)})).apply(this,arguments)}function oh(v,g){return Cs((0,j.m9)(v),g,null)}function Mu(v,g){return Cs((0,j.m9)(v),null,g)}function Cs(v,g,m){return ws.apply(this,arguments)}function ws(){return(ws=(0,s.Z)(function*(v,g,m){const{auth:b}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(P.email=g),m&&(P.password=m);const ee=yield It(v,cl(b,P));yield v._updateTokensIfNecessary(ee,!0)})).apply(this,arguments)}class Tn{constructor(g,m,b={}){this.isNewUser=g,this.providerId=m,this.profile=b}}class es extends Tn{constructor(g,m,b,M){super(g,m,b),this.username=M}}class An extends Tn{constructor(g,m){super(g,"facebook.com",m)}}class xu extends es{constructor(g,m){super(g,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Cc extends Tn{constructor(g,m){super(g,"google.com",m)}}class ah extends es{constructor(g,m,b){super(g,"twitter.com",m,b)}}function wc(v){const{user:g,_tokenResponse:m}=v;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function ku(v){var g,m;if(!v)return null;const{providerId:b}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!b&&v?.idToken){const ee=null===(m=null===(g=gt(v.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(ee)return new Tn(P,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!b)return null;switch(b){case"facebook.com":return new An(P,M);case"github.com":return new xu(P,M);case"google.com":return new Cc(P,M);case"twitter.com":return new ah(P,M,v.screenName||null);case"custom":case"anonymous":return new Tn(P,null);default:return new Tn(P,b,M)}}(m)}class ii{constructor(g,m,b){this.type=g,this.credential=m,this.auth=b}static _fromIdtoken(g,m){return new ii("enroll",g,m)}static _fromMfaPendingCredential(g){return new ii("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,b;if(g?.multiFactorSession){if(null!==(m=g.multiFactorSession)&&void 0!==m&&m.pendingCredential)return ii._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(b=g.multiFactorSession)&&void 0!==b&&b.idToken)return ii._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ec{constructor(g,m,b){this.session=g,this.hints=m,this.signInResolver=b}static _fromError(g,m){const b=vt(g),M=m.customData._serverResponse,P=(M.mfaInfo||[]).map(Te=>Eo._fromServerResponse(b,Te));ie(M.mfaPendingCredential,b,"internal-error");const ee=ii._fromMfaPendingCredential(M.mfaPendingCredential);return new Ec(ee,P,function(){var Te=(0,s.Z)(function*(it){const bt=yield it._process(b,ee);delete M.mfaInfo,delete M.mfaPendingCredential;const qt=Object.assign(Object.assign({},M),{idToken:bt.idToken,refreshToken:bt.refreshToken});switch(m.operationType){case"signIn":const Sn=yield ni._fromIdTokenResponse(b,m.operationType,qt);return yield b._updateCurrentUser(Sn.user),Sn;case"reauthenticate":return ie(m.user,b,"internal-error"),ni._forOperation(m.user,m.operationType,qt);default:Ke(b,"internal-error")}});return function(it){return Te.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,s.Z)(function*(){return m.signInResolver(g)})()}}function Pu(v,g){var m;const b=(0,j.m9)(v),M=g;return ie(g.customData.operationType,b,"argument-error"),ie(null===(m=M.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,b,"argument-error"),Ec._fromError(b,M)}function Un(v,g){return Vt(v,"POST","/v2/accounts/mfaEnrollment:start",Ht(v,g))}class yl{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(b=>Eo._fromServerResponse(g.auth,b)))})}static _fromUser(g){return new yl(g)}getSession(){var g=this;return(0,s.Z)(function*(){return ii._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,m){var b=this;return(0,s.Z)(function*(){const M=g,P=yield b.getSession(),ee=yield It(b.user,M._process(b.user.auth,P,m));return yield b.user._updateTokensIfNecessary(ee),b.user.reload()})()}unenroll(g){var m=this;return(0,s.Z)(function*(){var b;const M="string"==typeof g?g:g.uid,P=yield m.user.getIdToken(),ee=yield It(m.user,function _l(v,g){return Vt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ht(v,g))}(m.user.auth,{idToken:P,mfaEnrollmentId:M}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Te})=>Te!==M),yield m.user._updateTokensIfNecessary(ee);try{yield m.user.reload()}catch(Te){if("auth/user-token-expired"!==(null===(b=Te)||void 0===b?void 0:b.code))throw Te}})()}}const lh=new WeakMap;function vl(v){const g=(0,j.m9)(v);return lh.has(g)||lh.set(g,yl._fromUser(g)),lh.get(g)}const ts="__sak";class Ia{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(ts,"1"),this.storage.removeItem(ts),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Xn=(()=>{class v extends Ia{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,b)=>this.onStorageEvent(m,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ic(){const v=(0,j.z$)();return L(v)||Le(v)}()&&function Wi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=un(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const b of Object.keys(this.listeners)){const M=this.storage.getItem(b),P=this.localCache[b];M!==P&&m(b,P,M)}}onStorageEvent(m,b=!1){if(!m.key)return void this.forAllChangedKeys((Te,it,bt)=>{this.notifyListeners(Te,bt)});const M=m.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Te=this.storage.getItem(M);if(m.newValue!==Te)null!==m.newValue?this.storage.setItem(M,m.newValue):this.storage.removeItem(M);else if(this.localCache[M]===m.newValue&&!b)return}const P=()=>{const Te=this.storage.getItem(M);!b&&this.localCache[M]===Te||this.notifyListeners(M,Te)},ee=this.storage.getItem(M);!function Ot(){return(0,j.w1)()&&10===document.documentMode}()||ee===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,b){this.localCache[m]=b;const M=this.listeners[m];if(M)for(const P of Array.from(M))P(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,b,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:b,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,b){var M=()=>super._set,P=this;return(0,s.Z)(function*(){yield M().call(P,m,b),P.localCache[m]=JSON.stringify(b)})()}_get(m){var b=()=>super._get,M=this;return(0,s.Z)(function*(){const P=yield b().call(M,m);return M.localCache[m]=JSON.stringify(P),P})()}_remove(m){var b=()=>super._remove,M=this;return(0,s.Z)(function*(){yield b().call(M,m),delete M.localCache[m]})()}}return v.type="LOCAL",v})(),bs=(()=>{class v extends Ia{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,b){}_removeListener(m,b){}}return v.type="SESSION",v})();let Ta=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const b=this.receivers.find(P=>P.isListeningto(m));if(b)return b;const M=new v(m);return this.receivers.push(M),M}isListeningto(m){return this.eventTarget===m}handleEvent(m){var b=this;return(0,s.Z)(function*(){const M=m,{eventId:P,eventType:ee,data:Te}=M.data,it=b.handlersMap[ee];if(!it?.size)return;M.ports[0].postMessage({status:"ack",eventId:P,eventType:ee});const bt=Array.from(it).map(function(){var Sn=(0,s.Z)(function*(os){return os(M.origin,Te)});return function(os){return Sn.apply(this,arguments)}}()),qt=yield function Sc(v){return Promise.all(v.map(function(){var g=(0,s.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(b){return{fulfilled:!1,reason:b}}});return function(m){return g.apply(this,arguments)}}()))}(bt);M.ports[0].postMessage({status:"done",eventId:P,eventType:ee,response:qt})})()}_subscribe(m,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(b)}_unsubscribe(m,b){this.handlersMap[m]&&b&&this.handlersMap[m].delete(b),(!b||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ro(v="",g=10){let m="";for(let b=0;b<g;b++)m+=Math.floor(10*Math.random());return v+m}class dh{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,b=50){var M=this;return(0,s.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let ee,Te;return new Promise((it,bt)=>{const qt=Ro("",20);P.port1.start();const Sn=setTimeout(()=>{bt(new Error("unsupported_event"))},b);Te={messageChannel:P,onMessage(os){const Al=os;if(Al.data.eventId===qt)switch(Al.data.status){case"ack":clearTimeout(Sn),ee=setTimeout(()=>{bt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),it(Al.data.response);break;default:clearTimeout(Sn),clearTimeout(ee),bt(new Error("invalid_response"))}}},M.handlers.add(Te),P.port1.addEventListener("message",Te.onMessage),M.target.postMessage({eventType:g,eventId:qt,data:m},[P.port2])}).finally(()=>{Te&&M.removeMessageHandler(Te)})})()}}function Bn(){return window}function Zr(){return typeof Bn().WorkerGlobalScope<"u"&&"function"==typeof Bn().importScripts}function ns(){return(ns=(0,s.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Aa="firebaseLocalStorageDb",Ma="firebaseLocalStorage",Po="fbase_key";class No{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Fo(v,g){return v.transaction([Ma],g?"readwrite":"readonly").objectStore(Ma)}function wl(){const v=indexedDB.open(Aa,1);return new Promise((g,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const b=v.result;try{b.createObjectStore(Ma,{keyPath:Po})}catch(M){m(M)}}),v.addEventListener("success",(0,s.Z)(function*(){const b=v.result;b.objectStoreNames.contains(Ma)?g(b):(b.close(),yield function Vu(){const v=indexedDB.deleteDatabase(Aa);return new No(v).toPromise()}(),g(yield wl()))}))})}function ka(v,g,m){return ki.apply(this,arguments)}function ki(){return(ki=(0,s.Z)(function*(v,g,m){const b=Fo(v,!0).put({[Po]:g,value:m});return new No(b).toPromise()})).apply(this,arguments)}function Lo(){return(Lo=(0,s.Z)(function*(v,g){const m=Fo(v,!1).get(g),b=yield new No(m).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function bl(v,g){const m=Fo(v,!0).delete(g);return new No(m).toPromise()}const Uo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,s.Z)(function*(){return m.db||(m.db=yield wl()),m.db})()}_withRetries(m){var b=this;return(0,s.Z)(function*(){let M=0;for(;;)try{const P=yield b._openDb();return yield m(P)}catch(P){if(M++>3)throw P;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,s.Z)(function*(){return Zr()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,s.Z)(function*(){m.receiver=Ta._getInstance(function Cl(){return Zr()?self:null}()),m.receiver._subscribe("keyChanged",function(){var b=(0,s.Z)(function*(M,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(M,P){return b.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var b=(0,s.Z)(function*(M,P){return["keyChanged"]});return function(M,P){return b.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,s.Z)(function*(){var b,M;if(m.activeServiceWorker=yield function Lu(){return ns.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new dh(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);!P||(null===(b=P[0])||void 0===b?void 0:b.fulfilled)&&(null===(M=P[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var b=this;return(0,s.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Tc(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:m},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,s.Z)(function*(){try{if(!indexedDB)return!1;const m=yield wl();return yield ka(m,ts,"1"),yield bl(m,ts),!0}catch{}return!1})()}_withPendingWrite(m){var b=this;return(0,s.Z)(function*(){b.pendingWrites++;try{yield m()}finally{b.pendingWrites--}})()}_set(m,b){var M=this;return(0,s.Z)(function*(){return M._withPendingWrite((0,s.Z)(function*(){return yield M._withRetries(P=>ka(P,m,b)),M.localCache[m]=b,M.notifyServiceWorker(m)}))})()}_get(m){var b=this;return(0,s.Z)(function*(){const M=yield b._withRetries(P=>function hh(v,g){return Lo.apply(this,arguments)}(P,m));return b.localCache[m]=M,M})()}_remove(m){var b=this;return(0,s.Z)(function*(){return b._withPendingWrite((0,s.Z)(function*(){return yield b._withRetries(M=>bl(M,m)),delete b.localCache[m],b.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,s.Z)(function*(){const b=yield m._withRetries(ee=>{const Te=Fo(ee,!1).getAll();return new No(Te).toPromise()});if(!b)return[];if(0!==m.pendingWrites)return[];const M=[],P=new Set;for(const{fbase_key:ee,value:Te}of b)P.add(ee),JSON.stringify(m.localCache[ee])!==JSON.stringify(Te)&&(m.notifyListeners(ee,Te),M.push(ee));for(const ee of Object.keys(m.localCache))m.localCache[ee]&&!P.has(ee)&&(m.notifyListeners(ee,null),M.push(ee));return M})()}notifyListeners(m,b){this.localCache[m]=b;const M=this.listeners[m];if(M)for(const P of Array.from(M))P(b)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,s.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function fh(v,g){return Vt(v,"POST","/v2/accounts/mfaSignIn:start",Ht(v,g))}function Ir(){return(Ir=(0,s.Z)(function*(v){return(yield Vt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Xs(v){return new Promise((g,m)=>{const b=document.createElement("script");b.setAttribute("src",v),b.onload=g,b.onerror=M=>{const P=Pe("internal-error");P.customData=M,m(P)},b.type="text/javascript",b.charset="UTF-8",function jo(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(b)})}function Ho(v){return`__${v}${Math.floor(1e6*Math.random())}`}const xi=1e12;class Uu{constructor(g){this.auth=g,this.counter=xi,this._widgets=new Map}render(g,m){const b=this.counter;return this._widgets.set(b,new Dn(g,this.auth.name,m||{})),this.counter++,b}reset(g){var m;const b=g||xi;null===(m=this._widgets.get(b))||void 0===m||m.delete(),this._widgets.delete(b)}getResponse(g){var m;return(null===(m=this._widgets.get(g||xi))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,s.Z)(function*(){var b;return null===(b=m._widgets.get(g||xi))||void 0===b||b.execute(),""})()}}class Dn{constructor(g,m,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof g?document.getElementById(g):g;ie(M,"argument-error",{appName:m}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ip(v){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<v;b++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}(50);const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ph=Ho("rcb"),Mw=new qe(3e4,6e4);class y_{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Bn().grecaptcha)||void 0===g||!g.render)}load(g,m=""){return ie(function gh(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),g,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Bn().grecaptcha):new Promise((b,M)=>{const P=Bn().setTimeout(()=>{M(Pe(g,"network-request-failed"))},Mw.get());Bn()[ph]=()=>{Bn().clearTimeout(P),delete Bn()[ph];const Te=Bn().grecaptcha;if(!Te)return void M(Pe(g,"internal-error"));const it=Te.render;Te.render=(bt,qt)=>{const Sn=it(bt,qt);return this.counter++,Sn},this.hostLanguage=m,b(Te)},Xs(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:ph,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),M(Pe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var m;return!(null===(m=Bn().grecaptcha)||void 0===m||!m.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class kw{load(g){return(0,s.Z)(function*(){return new Uu(g)})()}clearedOneInstance(){}}const El="recaptcha",xw={theme:"light",type:"image"};class v_{constructor(g,m=Object.assign({},xw),b){this.parameters=m,this.type=El,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vt(b),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof g?document.getElementById(g):g;ie(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kw:new y_,this.validateStartingState()}verify(){var g=this;return(0,s.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),b=g.getAssertedRecaptcha();return b.getResponse(m)||new Promise(P=>{const ee=Te=>{!Te||(g.tokenChangeListeners.delete(ee),P(Te))};g.tokenChangeListeners.add(ee),g.isInvisible&&b.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(b=>b(m)),"function"==typeof g)g(m);else if("string"==typeof g){const b=Bn()[g];"function"==typeof b&&b(m)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,s.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const b=document.createElement("div");m.appendChild(b),m=b}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,s.Z)(function*(){ie(Ue()&&!Zr(),g.auth,"internal-error"),yield function lr(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function Dl(v){return Ir.apply(this,arguments)}(g.auth);ie(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Nr{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=Co._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function ct(v,g,m){return kc.apply(this,arguments)}function kc(){return(kc=(0,s.Z)(function*(v,g,m){const b=vt(v),M=yield Es(b,g,(0,j.m9)(m));return new Nr(M,P=>pa(b,P))})).apply(this,arguments)}function xc(v,g,m){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,s.Z)(function*(v,g,m){const b=(0,j.m9)(v);yield Ai(!1,b,"phone");const M=yield Es(b.auth,g,(0,j.m9)(m));return new Nr(M,P=>Mt(b,P))})).apply(this,arguments)}function yi(v,g,m){return Il.apply(this,arguments)}function Il(){return(Il=(0,s.Z)(function*(v,g,m){const b=(0,j.m9)(v),M=yield Es(b.auth,g,(0,j.m9)(m));return new Nr(M,P=>Dp(b,P))})).apply(this,arguments)}function Es(v,g,m){return eo.apply(this,arguments)}function eo(){return(eo=(0,s.Z)(function*(v,g,m){var b;const M=yield m.verify();try{let P;if(ie("string"==typeof M,v,"argument-error"),ie(m.type===El,v,"argument-error"),P="string"==typeof g?{phoneNumber:g}:g,"session"in P){const ee=P.session;if("phoneNumber"in P)return ie("enroll"===ee.type,v,"internal-error"),(yield Un(v,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{ie("signin"===ee.type,v,"internal-error");const Te=(null===(b=P.multiFactorHint)||void 0===b?void 0:b.uid)||P.multiFactorUid;return ie(Te,v,"missing-multi-factor-info"),(yield fh(v,{mfaPendingCredential:ee.credential,mfaEnrollmentId:Te,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ee}=yield vp(v,{phoneNumber:P.phoneNumber,recaptchaToken:M});return ee}}finally{m._reset()}})).apply(this,arguments)}function xa(v,g){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,s.Z)(function*(v,g){yield hl((0,j.m9)(v),g)})).apply(this,arguments)}let mh=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=vt(m)}verifyPhoneNumber(m,b){return Es(this.auth,m,(0,j.m9)(b))}static credential(m,b){return Co._fromVerification(m,b)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:b,temporaryProof:M}=m;return b&&M?Co._fromTokenResponse(b,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Is(v,g){return g?X(g):(ie(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Mn extends jr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Gs(g,this._buildIdpRequest())}_linkToIdToken(g,m){return Gs(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return Gs(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function Pn(v){return mc(v.auth,new Mn(v),v.bypassAuthState)}function zn(v){const{auth:g,user:m}=v;return ie(m,g,"internal-error"),gc(m,new Mn(v),v.bypassAuthState)}function rn(v){return ze.apply(this,arguments)}function ze(){return(ze=(0,s.Z)(function*(v){const{auth:g,user:m}=v;return ie(m,g,"internal-error"),hl(m,new Mn(v),v.bypassAuthState)})).apply(this,arguments)}class Oc{constructor(g,m,b,M,P=!1){this.auth=g,this.resolver=b,this.user=M,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,s.Z)(function*(b,M){g.pendingPromise={resolve:b,reject:M};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(P){g.reject(P)}});return function(b,M){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,s.Z)(function*(){const{urlResponse:b,sessionId:M,postBody:P,tenantId:ee,error:Te,type:it}=g;if(Te)return void m.reject(Te);const bt={auth:m.auth,requestUri:b,sessionId:M,tenantId:ee||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(it)(bt))}catch(qt){m.reject(qt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Pn;case"linkViaPopup":case"linkViaRedirect":return rn;case"reauthViaPopup":case"reauthViaRedirect":return zn;default:Ke(this.auth,"internal-error")}}resolve(g){ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _h=new qe(2e3,1e4);function Sp(v,g,m){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,s.Z)(function*(v,g,m){const b=vt(v);De(v,g,fr);const M=Is(b,m);return new We(b,"signInViaPopup",g,M).executeNotNull()})).apply(this,arguments)}function ju(v,g,m){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,s.Z)(function*(v,g,m){const b=(0,j.m9)(v);De(b.auth,g,fr);const M=Is(b.auth,m);return new We(b.auth,"reauthViaPopup",g,M,b).executeNotNull()})).apply(this,arguments)}function gr(v,g,m){return En.apply(this,arguments)}function En(){return(En=(0,s.Z)(function*(v,g,m){const b=(0,j.m9)(v);De(b.auth,g,fr);const M=Is(b.auth,m);return new We(b.auth,"linkViaPopup",g,M,b).executeNotNull()})).apply(this,arguments)}let We=(()=>{class v extends Oc{constructor(m,b,M,P,ee){super(m,b,P,ee),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,s.Z)(function*(){const b=yield m.execute();return ie(b,m.auth,"internal-error"),b})()}onExecution(){var m=this;return(0,s.Z)(function*(){ye(1===m.filter.length,"Popup operations only handle one event");const b=Ro();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],b),m.authWindow.associatedEvent=b,m.resolver._originValidation(m.auth).catch(M=>{m.reject(M)}),m.resolver._isIframeWebStorageSupported(m.auth,M=>{M||m.reject(Pe(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var b,M;this.pollId=null!==(M=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Pe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,_h.get())};m()}}return v.currentPopupAction=null,v})();const Oi=new Map;class to extends Oc{constructor(g,m,b=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,b),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,s.Z)(function*(){let b=Oi.get(m.auth._key());if(!b){try{const P=(yield function Ri(v,g){return no.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;b=()=>Promise.resolve(P)}catch(M){b=()=>Promise.reject(M)}Oi.set(m.auth._key(),b)}return m.bypassAuthState||Oi.set(m.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,b=this;return(0,s.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(b,g);if("unknown"!==g.type){if(g.eventId){const M=yield b.auth._redirectUserForId(g.eventId);if(M)return b.user=M,m().call(b,g);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,s.Z)(function*(){})()}cleanUp(){}}function no(){return(no=(0,s.Z)(function*(v,g){const m=E(g),b=Zo(v);if(!(yield b._isAvailable()))return!1;const M="true"===(yield b._get(m));return yield b._remove(m),M})).apply(this,arguments)}function zr(v,g){return vi.apply(this,arguments)}function vi(){return(vi=(0,s.Z)(function*(v,g){return Zo(v)._set(E(g),"true")})).apply(this,arguments)}function rs(){Oi.clear()}function Oa(v,g){Oi.set(v._key(),g)}function Zo(v){return X(v._redirectPersistence)}function E(v){return H("pendingRedirect",v.config.apiKey,v.name)}function S(v,g,m){return function k(v,g,m){return U.apply(this,arguments)}(v,g,m)}function U(){return(U=(0,s.Z)(function*(v,g,m){const b=vt(v);De(v,g,fr);const M=Is(b,m);return yield zr(M,b),M._openRedirect(b,g,"signInViaRedirect")})).apply(this,arguments)}function W(v,g,m){return function ce(v,g,m){return _e.apply(this,arguments)}(v,g,m)}function _e(){return(_e=(0,s.Z)(function*(v,g,m){const b=(0,j.m9)(v);De(b.auth,g,fr);const M=Is(b.auth,m);yield zr(M,b.auth);const P=yield Ra(b);return M._openRedirect(b.auth,g,"reauthViaRedirect",P)})).apply(this,arguments)}function Ze(v,g,m){return function ut(v,g,m){return Rt.apply(this,arguments)}(v,g,m)}function Rt(){return(Rt=(0,s.Z)(function*(v,g,m){const b=(0,j.m9)(v);De(b.auth,g,fr);const M=Is(b.auth,m);yield Ai(!1,b,g.providerId),yield zr(M,b.auth);const P=yield Ra(b);return M._openRedirect(b.auth,g,"linkViaRedirect",P)})).apply(this,arguments)}function Qe(v,g){return dt.apply(this,arguments)}function dt(){return(dt=(0,s.Z)(function*(v,g){return yield vt(v)._initializationPromise,kn(v,g,!1)})).apply(this,arguments)}function kn(v,g){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,s.Z)(function*(v,g,m=!1){const b=vt(v),M=Is(b,g),ee=yield new to(b,M,m).execute();return ee&&!m&&(delete ee.user._redirectEventId,yield b._persistUserIfCurrent(ee.user),yield b._setRedirectUser(null,g)),ee})).apply(this,arguments)}function Ra(v){return hn.apply(this,arguments)}function hn(){return(hn=(0,s.Z)(function*(v){const g=Ro(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class Pa{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(g,b)&&(m=!0,this.sendToConsumer(g,b),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Pi(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return er(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var b;if(g.error&&!er(g)){const M=(null===(b=g.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";m.onError(Pe(this.auth,M))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const b=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&b}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ss(g))}saveEventToCache(g){this.cachedEventUids.add(Ss(g)),this.lastProcessedEventTime=Date.now()}}function Ss(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function er({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===g?.code}function si(v){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,s.Z)(function*(v,g={}){return Vt(v,"GET","/v1/projects",g)})).apply(this,arguments)}const C_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ow=/^https?/;function Tp(){return(Tp=(0,s.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield si(v);for(const m of g)try{if(Rw(m))return}catch{}Ke(v,"unauthorized-domain")})).apply(this,arguments)}function Rw(v){const g=Ve(),{protocol:m,hostname:b}=new URL(g);if(v.startsWith("chrome-extension://")){const ee=new URL(v);return""===ee.hostname&&""===b?"chrome-extension:"===m&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&ee.hostname===b}if(!Ow.test(m))return!1;if(C_.test(v))return b===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(b)}const b_=new qe(3e4,6e4);function Ap(){const v=Bn().___jsl;if(v?.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Na=null;function is(v){return Na=Na||function D_(v){return new Promise((g,m)=>{var b,M,P;function ee(){Ap(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Ap(),m(Pe(v,"network-request-failed"))},timeout:b_.get()})}if(null!==(M=null===(b=Bn().gapi)||void 0===b?void 0:b.iframes)&&void 0!==M&&M.Iframe)g(gapi.iframes.getContext());else{if(null===(P=Bn().gapi)||void 0===P||!P.load){const Te=Ho("iframefcb");return Bn()[Te]=()=>{gapi.load?ee():m(Pe(v,"network-request-failed"))},Xs(`https://apis.google.com/js/api.js?onload=${Te}`).catch(it=>m(it))}ee()}}).catch(g=>{throw Na=null,g})}(v),Na}const Pw=new qe(5e3,15e3),Mp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hu(v){const g=v.config;ie(g.authDomain,v,"auth-domain-config-required");const m=g.emulator?ln(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,b={apiKey:g.apiKey,appName:v.name,v:R.SDK_VERSION},M=zo.get(v.config.apiHost);M&&(b.eid=M);const P=v._getFrameworks();return P.length&&(b.fw=P.join(",")),`${m}?${(0,j.xO)(b).slice(1)}`}function ro(){return ro=(0,s.Z)(function*(v){const g=yield is(v),m=Bn().gapi;return ie(m,v,"internal-error"),g.open({where:document.body,url:Hu(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mp,dontclear:!0},b=>new Promise(function(){var M=(0,s.Z)(function*(P,ee){yield b.restyle({setHideOnLeave:!1});const Te=Pe(v,"network-request-failed"),it=Bn().setTimeout(()=>{ee(Te)},Pw.get());function bt(){Bn().clearTimeout(it),P(b)}b.ping(bt).then(bt,()=>{ee(Te)})});return function(P,ee){return M.apply(this,arguments)}}()))}),ro.apply(this,arguments)}const Ch={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fw{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Dh(v,g,m,b,M,P){ie(v.config.authDomain,v,"auth-domain-config-required"),ie(v.config.apiKey,v,"invalid-api-key");const ee={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:b,v:R.SDK_VERSION,eventId:M};if(g instanceof fr){g.setDefaultLanguage(v.languageCode),ee.providerId=g.providerId||"",(0,j.xb)(g.getCustomParameters())||(ee.customParameters=JSON.stringify(g.getCustomParameters()));for(const[it,bt]of Object.entries(P||{}))ee[it]=bt}if(g instanceof bo){const it=g.getScopes().filter(bt=>""!==bt);it.length>0&&(ee.scopes=it.join(","))}v.tenantId&&(ee.tid=v.tenantId);const Te=ee;for(const it of Object.keys(Te))void 0===Te[it]&&delete Te[it];return`${function S_({config:v}){return v.emulator?ln(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,j.xO)(Te).slice(1)}`}const Op="webStorageSupport",T_=class Lw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bs,this._completeRedirectFn=kn,this._overrideRedirectResult=Oa}_openPopup(g,m,b,M){var P=this;return(0,s.Z)(function*(){var ee;ye(null===(ee=P.eventManagers[g._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const Te=Dh(g,m,b,Ve(),M);return function wh(v,g,m,b=500,M=600){const P=Math.max((window.screen.availHeight-M)/2,0).toString(),ee=Math.max((window.screen.availWidth-b)/2,0).toString();let Te="";const it=Object.assign(Object.assign({},Ch),{width:b.toString(),height:M.toString(),top:P,left:ee}),bt=(0,j.z$)().toLowerCase();m&&(Te=ne(bt)?"_blank":m),O(bt)&&(g=g||"http://localhost",it.scrollbars="yes");const qt=Object.entries(it).reduce((os,[Al,Fp])=>`${os}${Al}=${Fp},`,"");if(function cn(v=(0,j.z$)()){var g;return Le(v)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(bt)&&"_self"!==Te)return function ss(v,g){const m=document.createElement("a");m.href=v,m.target=g;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(b)}(g||"",Te),new Fw(null);const Sn=window.open(g||"",Te,qt);ie(Sn,v,"popup-blocked");try{Sn.focus()}catch{}return new Fw(Sn)}(g,Te,Ro())})()}_openRedirect(g,m,b,M){var P=this;return(0,s.Z)(function*(){return yield P._originValidation(g),function Fu(v){Bn().location.href=v}(Dh(g,m,b,Ve(),M)),new Promise(()=>{})})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:M,promise:P}=this.eventManagers[m];return M?Promise.resolve(M):(ye(P,"If manager is not set, promise should be"),P)}const b=this.initAndGetManager(g);return this.eventManagers[m]={promise:b},b.catch(()=>{delete this.eventManagers[m]}),b}initAndGetManager(g){var m=this;return(0,s.Z)(function*(){const b=yield function vh(v){return ro.apply(this,arguments)}(g),M=new Pa(g);return b.register("authEvent",P=>(ie(P?.authEvent,g,"invalid-auth-event"),{status:M.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:M},m.iframes[g._key()]=b,M})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(Op,{type:Op},M=>{var P;const ee=null===(P=M?.[0])||void 0===P?void 0:P[Op];void 0!==ee&&m(!!ee),Ke(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function w_(v){return Tp.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return un()||L()||Le()}};class Rp extends class Vw{constructor(g){this.factorId=g}_process(g,m,b){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,b);case"signin":return this._finalizeSignIn(g,m.credential);default:return ue("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Rp(g)}_finalizeEnroll(g,m,b){return function ml(v,g){return Vt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ht(v,g))}(g,{idToken:m,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function Bo(v,g){return Vt(v,"POST","/v2/accounts/mfaSignIn:finalize",Ht(v,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fa=(()=>{class v{constructor(){}static assertion(m){return Rp._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Nc="@firebase/auth";class Fc{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,s.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(b=>{var M;g((null===(M=b)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);!m||(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Bw=(0,j.Pz)("authIdTokenMaxAge")||300;let Zu=null;const A_=v=>function(){var g=(0,s.Z)(function*(m){const b=m&&(yield m.getIdTokenResult()),M=b&&((new Date).getTime()-Date.parse(b.issuedAtTime))/1e3;if(M&&M>Bw)return;const P=b?.token;Zu!==P&&(Zu=P,yield fetch(v,{method:P?"POST":"DELETE",headers:P?{Authorization:`Bearer ${P}`}:{}}))});return function(m){return g.apply(this,arguments)}}();function M_(v=(0,R.getApp)()){const g=(0,R._getProvider)(v,"auth");if(g.isInitialized())return g.getImmediate();const m=function fe(v,g){const m=(0,R._getProvider)(v,"auth");if(m.isInitialized()){const M=m.getImmediate(),P=m.getOptions();if((0,j.vZ)(P,g??{}))return M;Ke(M,"already-initialized")}return m.initialize({options:g})}(v,{popupRedirectResolver:T_,persistence:[Uo,Xn,bs]}),b=(0,j.Pz)("authTokenSyncURL");if(b){const P=A_(b);(function gl(v,g,m){(0,j.m9)(v).beforeAuthStateChanged(g,m)})(m,P,()=>P(m.currentUser)),function Dc(v,g,m,b){(0,j.m9)(v).onIdTokenChanged(g,m,b)}(m,ee=>P(ee))}const M=(0,j.q4)("auth");return M&&Hs(m,`http://${M}`),m}!function Np(v){(0,R._registerComponent)(new ge.wA("auth",(g,{options:m})=>{const b=g.getProvider("app").getImmediate(),M=g.getProvider("heartbeat"),{apiKey:P,authDomain:ee}=b.options;return((Te,it)=>{ie(P&&!P.includes(":"),"invalid-api-key",{appName:Te.name}),ie(!ee?.includes(":"),"argument-error",{appName:Te.name});const bt={apiKey:P,authDomain:ee,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bn(v)},qt=new _o(Te,it,bt);return function oe(v,g){const m=g?.persistence||[],b=(Array.isArray(m)?m:[m]).map(X);g?.errorMap&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(b,g?.popupRedirectResolver)}(qt,m),qt})(b,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,b)=>{g.getProvider("auth-internal").initialize()})),(0,R._registerComponent)(new ge.wA("auth-internal",g=>{const m=vt(g.getProvider("auth").getImmediate());return new Fc(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,R.registerVersion)(Nc,"0.20.9",function Pp(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,R.registerVersion)(Nc,"0.20.9","esm2017")}("Browser")},2090:(ht,Se,N)=>{N.d(Se,{$s:()=>rt,BH:()=>Bt,G6:()=>De,L:()=>ae,LL:()=>en,P0:()=>Ue,Pz:()=>tn,Sg:()=>qe,UG:()=>Ie,US:()=>ge,ZB:()=>z,ZR:()=>vn,aH:()=>yt,b$:()=>pe,eu:()=>ie,hl:()=>$e,jU:()=>st,m9:()=>Kt,ne:()=>wn,pd:()=>Us,q4:()=>Ve,r3:()=>Or,ru:()=>ve,tV:()=>he,uI:()=>Re,vZ:()=>Je,w1:()=>Ke,xO:()=>yn,xb:()=>gi,z$:()=>je,zI:()=>ue,zd:()=>ar});const re=function(G){const H=[];let Y=0;for(let B=0;B<G.length;B++){let O=G.charCodeAt(B);O<128?H[Y++]=O:O<2048?(H[Y++]=O>>6|192,H[Y++]=63&O|128):55296==(64512&O)&&B+1<G.length&&56320==(64512&G.charCodeAt(B+1))?(O=65536+((1023&O)<<10)+(1023&G.charCodeAt(++B)),H[Y++]=O>>18|240,H[Y++]=O>>12&63|128,H[Y++]=O>>6&63|128,H[Y++]=63&O|128):(H[Y++]=O>>12|224,H[Y++]=O>>6&63|128,H[Y++]=63&O|128)}return H},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,H){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let O=0;O<G.length;O+=3){const L=G[O],ne=O+1<G.length,Ne=ne?G[O+1]:0,ot=O+2<G.length,at=ot?G[O+2]:0;let Tt=(15&Ne)<<2|at>>6,cn=63&at;ot||(cn=64,ne||(Tt=64)),B.push(Y[L>>2],Y[(3&L)<<4|Ne>>4],Y[Tt],Y[cn])}return B.join("")},encodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(G):this.encodeByteArray(re(G),H)},decodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(G):function(G){const H=[];let Y=0,B=0;for(;Y<G.length;){const O=G[Y++];if(O<128)H[B++]=String.fromCharCode(O);else if(O>191&&O<224){const L=G[Y++];H[B++]=String.fromCharCode((31&O)<<6|63&L)}else if(O>239&&O<365){const ot=((7&O)<<18|(63&G[Y++])<<12|(63&G[Y++])<<6|63&G[Y++])-65536;H[B++]=String.fromCharCode(55296+(ot>>10)),H[B++]=String.fromCharCode(56320+(1023&ot))}else{const L=G[Y++],ne=G[Y++];H[B++]=String.fromCharCode((15&O)<<12|(63&L)<<6|63&ne)}}return H.join("")}(this.decodeStringToByteArray(G,H))},decodeStringToByteArray(G,H){this.init_();const Y=H?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let O=0;O<G.length;){const L=Y[G.charAt(O++)],Ne=O<G.length?Y[G.charAt(O)]:0;++O;const at=O<G.length?Y[G.charAt(O)]:64;++O;const Le=O<G.length?Y[G.charAt(O)]:64;if(++O,null==L||null==Ne||null==at||null==Le)throw Error();B.push(L<<2|Ne>>4),64!==at&&(B.push(Ne<<4&240|at>>2),64!==Le&&B.push(at<<6&192|Le))}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},ae=function(G){return function(G){const H=re(G);return ge.encodeByteArray(H,!0)}(G).replace(/\./g,"")},he=function(G){try{return ge.decodeString(G,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function z(G,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return H}for(const Y in H)!H.hasOwnProperty(Y)||!Q(Y)||(G[Y]=z(G[Y],H[Y]));return G}function Q(G){return"__proto__"!==G}function je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Re(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function st(){return"object"==typeof self&&self.self===self}function ve(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function pe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ke(){const G=je();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function De(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $e(){return"object"==typeof indexedDB}function ie(){return new Promise((G,H)=>{try{let Y=!0;const B="validate-browser-context-for-indexeddb-analytics-module",O=self.indexedDB.open(B);O.onsuccess=()=>{O.result.close(),Y||self.indexedDB.deleteDatabase(B),G(!0)},O.onupgradeneeded=()=>{Y=!1},O.onerror=()=>{var L;H((null===(L=O.error)||void 0===L?void 0:L.message)||"")}}catch(Y){H(Y)}})}function ue(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const oe=()=>function ye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const G=process.env.__FIREBASE_DEFAULTS__;return G?JSON.parse(G):void 0})()||(()=>{if(typeof document>"u")return;const G=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/),H=G&&he(G[1]);return H&&JSON.parse(H)})(),Ve=G=>{var H,Y;return null===(Y=null===(H=oe())||void 0===H?void 0:H.emulatorHosts)||void 0===Y?void 0:Y[G]},Ue=G=>{const H=Ve(G);if(!H)return;const Y=H.lastIndexOf(":");if(Y<=0||Y+1===H.length)throw new Error(`Invalid host ${H} with no separate hostname and port!`);const B=parseInt(H.substring(Y+1),10);return"["===H[0]?[H.substring(1,Y-1),B]:[H.substring(0,Y),B]},yt=()=>{var G;return null===(G=oe())||void 0===G?void 0:G.config},tn=G=>{var H;return null===(H=oe())||void 0===H?void 0:H[`_${G}`]};class Bt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,Y)=>{this.resolve=H,this.reject=Y})}wrapCallback(H){return(Y,B)=>{Y?this.reject(Y):this.resolve(B),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(Y):H(Y,B))}}}function qe(G,H){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const B=H||"demo-project",O=G.iat||0,L=G.sub||G.user_id;if(!L)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ne=Object.assign({iss:`https://securetoken.google.com/${B}`,aud:B,iat:O,exp:O+3600,auth_time:O,sub:L,user_id:L,firebase:{sign_in_provider:"custom",identities:{}}},G);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(ne)),""].join(".")}class vn extends Error{constructor(H,Y,B){super(Y),this.code=H,this.customData=B,this.name="FirebaseError",Object.setPrototypeOf(this,vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,en.prototype.create)}}class en{constructor(H,Y,B){this.service=H,this.serviceName=Y,this.errors=B}create(H,...Y){const B=Y[0]||{},O=`${this.service}/${H}`,L=this.errors[H],ne=L?function Qt(G,H){return G.replace(Ht,(Y,B)=>{const O=H[B];return null!=O?String(O):`<${B}?>`})}(L,B):"Error";return new vn(O,`${this.serviceName}: ${ne} (${O}).`,B)}}const Ht=/\{\$([^}]+)}/g;function Or(G,H){return Object.prototype.hasOwnProperty.call(G,H)}function gi(G){for(const H in G)if(Object.prototype.hasOwnProperty.call(G,H))return!1;return!0}function Je(G,H){if(G===H)return!0;const Y=Object.keys(G),B=Object.keys(H);for(const O of Y){if(!B.includes(O))return!1;const L=G[O],ne=H[O];if(Wn(L)&&Wn(ne)){if(!Je(L,ne))return!1}else if(L!==ne)return!1}for(const O of B)if(!Y.includes(O))return!1;return!0}function Wn(G){return null!==G&&"object"==typeof G}function yn(G){const H=[];for(const[Y,B]of Object.entries(G))Array.isArray(B)?B.forEach(O=>{H.push(encodeURIComponent(Y)+"="+encodeURIComponent(O))}):H.push(encodeURIComponent(Y)+"="+encodeURIComponent(B));return H.length?"&"+H.join("&"):""}function ar(G){const H={};return G.replace(/^\?/,"").split("&").forEach(B=>{if(B){const[O,L]=B.split("=");H[decodeURIComponent(O)]=decodeURIComponent(L)}}),H}function Us(G){const H=G.indexOf("?");if(!H)return"";const Y=G.indexOf("#",H);return G.substring(H,Y>0?Y:void 0)}function wn(G,H){const Y=new mn(G,H);return Y.subscribe.bind(Y)}class mn{constructor(H,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{H(this)}).catch(B=>{this.error(B)})}next(H){this.forEachObserver(Y=>{Y.next(H)})}error(H){this.forEachObserver(Y=>{Y.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,Y,B){let O;if(void 0===H&&void 0===Y&&void 0===B)throw new Error("Missing Observer.");O=function mt(G,H){if("object"!=typeof G||null===G)return!1;for(const Y of H)if(Y in G&&"function"==typeof G[Y])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:Y,complete:B},void 0===O.next&&(O.next=It),void 0===O.error&&(O.error=It),void 0===O.complete&&(O.complete=It);const L=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?O.error(this.finalError):O.complete()}catch{}}),this.observers.push(O),L}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,H)}sendOne(H,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{Y(this.observers[H])}catch(B){typeof console<"u"&&console.error&&console.error(B)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function It(){}function rt(G,H=1e3,Y=2){const B=H*Math.pow(Y,G),O=Math.round(.5*B*(Math.random()-.5)*2);return Math.min(144e5,B+O)}function Kt(G){return G&&G._delegate?G._delegate:G}},4588:(ht,Se,N)=>{var s=N(4650);let j=null;function R(){return j}const se=new s.OlP("DocumentToken");let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return function he(){return(0,s.LFG)(z)}()},providedIn:"platform"}),n})();const Z=new s.OlP("Location Initialized");let z=(()=>{class n extends ae{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Q()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Q()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(se))},n.\u0275prov=s.Yz7({token:n,factory:function(){return function je(){return new z((0,s.LFG)(se))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function st(n){return n&&"?"!==n[0]?"?"+n:n}let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return(0,s.f3M)(Xe)},providedIn:"root"}),n})();const pe=new s.OlP("appBaseHref");let Xe=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,s.f3M)(se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+st(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,l){const u=this.prepareExternalUrl(i+st(l));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,l){const u=this.prepareExternalUrl(i+st(l));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(ae),s.LFG(pe,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ke=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Re(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,l){let u=this.prepareExternalUrl(i+st(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,l){let u=this.prepareExternalUrl(i+st(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(ae),s.LFG(pe,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n{constructor(t){this._subject=new s.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ie($e(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+st(r))}normalize(t){return n.stripTrailingSlash(function De(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+st(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+st(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=st,n.joinWithSlash=Re,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(s.LFG(ve))},n.\u0275prov=s.Yz7({token:n,factory:function(){return function xe(){return new Pe((0,s.LFG)(ve))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}var J=(()=>((J=J||{})[J.Format=0]="Format",J[J.Standalone=1]="Standalone",J))(),X=(()=>((X=X||{})[X.Narrow=0]="Narrow",X[X.Abbreviated=1]="Abbreviated",X[X.Wide=2]="Wide",X[X.Short=3]="Short",X))(),fe=(()=>((fe=fe||{})[fe.Short=0]="Short",fe[fe.Medium=1]="Medium",fe[fe.Long=2]="Long",fe[fe.Full=3]="Full",fe))(),oe=(()=>((oe=oe||{})[oe.Decimal=0]="Decimal",oe[oe.Group=1]="Group",oe[oe.List=2]="List",oe[oe.PercentSign=3]="PercentSign",oe[oe.PlusSign=4]="PlusSign",oe[oe.MinusSign=5]="MinusSign",oe[oe.Exponential=6]="Exponential",oe[oe.SuperscriptingExponent=7]="SuperscriptingExponent",oe[oe.PerMille=8]="PerMille",oe[oe.Infinity=9]="Infinity",oe[oe.NaN=10]="NaN",oe[oe.TimeSeparator=11]="TimeSeparator",oe[oe.CurrencyDecimal=12]="CurrencyDecimal",oe[oe.CurrencyGroup=13]="CurrencyGroup",oe))();function en(n,e){return Je((0,s.cg1)(n)[s.wAp.DateFormat],e)}function Qt(n,e){return Je((0,s.cg1)(n)[s.wAp.TimeFormat],e)}function Ht(n,e){return Je((0,s.cg1)(n)[s.wAp.DateTimeFormat],e)}function Vt(n,e){const t=(0,s.cg1)(n),r=t[s.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===oe.CurrencyDecimal)return t[s.wAp.NumberSymbols][oe.Decimal];if(e===oe.CurrencyGroup)return t[s.wAp.NumberSymbols][oe.Group]}return r}function Or(n){if(!n[s.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[s.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Je(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Wn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Us=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Cn={},wn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var mn=(()=>((mn=mn||{})[mn.Short=0]="Short",mn[mn.ShortGMT=1]="ShortGMT",mn[mn.Long=2]="Long",mn[mn.Extended=3]="Extended",mn))(),gt=(()=>((gt=gt||{})[gt.FullYear=0]="FullYear",gt[gt.Month=1]="Month",gt[gt.Date=2]="Date",gt[gt.Hours=3]="Hours",gt[gt.Minutes=4]="Minutes",gt[gt.Seconds=5]="Seconds",gt[gt.FractionalSeconds=6]="FractionalSeconds",gt[gt.Day=7]="Day",gt))(),mt=(()=>((mt=mt||{})[mt.DayPeriods=0]="DayPeriods",mt[mt.Days=1]="Days",mt[mt.Months=2]="Months",mt[mt.Eras=3]="Eras",mt))();function It(n,e,t,r){let i=function L(n){if(Ne(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,l=1,u=1]=n.split("-").map(f=>+f);return Br(i,l-1,u)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Us))return function ne(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,l=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const u=Number(n[4]||0)-t,f=Number(n[5]||0)-r,_=Number(n[6]||0),C=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return l.call(e,u,f,_,C),e}(r)}const e=new Date(n);if(!Ne(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Yn(t,e)||e;let f,u=[];for(;e;){if(f=wn.exec(e),!f){u.push(e);break}{u=u.concat(f.slice(1));const I=u.pop();if(!I)break;e=I}}let _=i.getTimezoneOffset();r&&(_=Y(r,_),i=function O(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function B(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Y(e,i)-i))}(i,r,!0));let C="";return u.forEach(I=>{const A=function H(n){if(G[n])return G[n];let e;switch(n){case"G":case"GG":case"GGG":e=Gt(mt.Eras,X.Abbreviated);break;case"GGGG":e=Gt(mt.Eras,X.Wide);break;case"GGGGG":e=Gt(mt.Eras,X.Narrow);break;case"y":e=Lt(gt.FullYear,1,0,!1,!0);break;case"yy":e=Lt(gt.FullYear,2,0,!0,!0);break;case"yyy":e=Lt(gt.FullYear,3,0,!1,!0);break;case"yyyy":e=Lt(gt.FullYear,4,0,!1,!0);break;case"Y":e=Kt(1);break;case"YY":e=Kt(2,!0);break;case"YYY":e=Kt(3);break;case"YYYY":e=Kt(4);break;case"M":case"L":e=Lt(gt.Month,1,1);break;case"MM":case"LL":e=Lt(gt.Month,2,1);break;case"MMM":e=Gt(mt.Months,X.Abbreviated);break;case"MMMM":e=Gt(mt.Months,X.Wide);break;case"MMMMM":e=Gt(mt.Months,X.Narrow);break;case"LLL":e=Gt(mt.Months,X.Abbreviated,J.Standalone);break;case"LLLL":e=Gt(mt.Months,X.Wide,J.Standalone);break;case"LLLLL":e=Gt(mt.Months,X.Narrow,J.Standalone);break;case"w":e=wt(1);break;case"ww":e=wt(2);break;case"W":e=wt(1,!0);break;case"d":e=Lt(gt.Date,1);break;case"dd":e=Lt(gt.Date,2);break;case"c":case"cc":e=Lt(gt.Day,1);break;case"ccc":e=Gt(mt.Days,X.Abbreviated,J.Standalone);break;case"cccc":e=Gt(mt.Days,X.Wide,J.Standalone);break;case"ccccc":e=Gt(mt.Days,X.Narrow,J.Standalone);break;case"cccccc":e=Gt(mt.Days,X.Short,J.Standalone);break;case"E":case"EE":case"EEE":e=Gt(mt.Days,X.Abbreviated);break;case"EEEE":e=Gt(mt.Days,X.Wide);break;case"EEEEE":e=Gt(mt.Days,X.Narrow);break;case"EEEEEE":e=Gt(mt.Days,X.Short);break;case"a":case"aa":case"aaa":e=Gt(mt.DayPeriods,X.Abbreviated);break;case"aaaa":e=Gt(mt.DayPeriods,X.Wide);break;case"aaaaa":e=Gt(mt.DayPeriods,X.Narrow);break;case"b":case"bb":case"bbb":e=Gt(mt.DayPeriods,X.Abbreviated,J.Standalone,!0);break;case"bbbb":e=Gt(mt.DayPeriods,X.Wide,J.Standalone,!0);break;case"bbbbb":e=Gt(mt.DayPeriods,X.Narrow,J.Standalone,!0);break;case"B":case"BB":case"BBB":e=Gt(mt.DayPeriods,X.Abbreviated,J.Format,!0);break;case"BBBB":e=Gt(mt.DayPeriods,X.Wide,J.Format,!0);break;case"BBBBB":e=Gt(mt.DayPeriods,X.Narrow,J.Format,!0);break;case"h":e=Lt(gt.Hours,1,-12);break;case"hh":e=Lt(gt.Hours,2,-12);break;case"H":e=Lt(gt.Hours,1);break;case"HH":e=Lt(gt.Hours,2);break;case"m":e=Lt(gt.Minutes,1);break;case"mm":e=Lt(gt.Minutes,2);break;case"s":e=Lt(gt.Seconds,1);break;case"ss":e=Lt(gt.Seconds,2);break;case"S":e=Lt(gt.FractionalSeconds,1);break;case"SS":e=Lt(gt.FractionalSeconds,2);break;case"SSS":e=Lt(gt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=In(mn.Short);break;case"ZZZZZ":e=In(mn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=In(mn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=In(mn.Long);break;default:return null}return G[n]=e,e}(I);C+=A?A(i,t,_):"''"===I?"'":I.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),C}function Br(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Yn(n,e){const t=function Ue(n){return(0,s.cg1)(n)[s.wAp.LocaleId]}(n);if(Cn[t]=Cn[t]||{},Cn[t][e])return Cn[t][e];let r="";switch(e){case"shortDate":r=en(n,fe.Short);break;case"mediumDate":r=en(n,fe.Medium);break;case"longDate":r=en(n,fe.Long);break;case"fullDate":r=en(n,fe.Full);break;case"shortTime":r=Qt(n,fe.Short);break;case"mediumTime":r=Qt(n,fe.Medium);break;case"longTime":r=Qt(n,fe.Long);break;case"fullTime":r=Qt(n,fe.Full);break;case"short":const i=Yn(n,"shortTime"),l=Yn(n,"shortDate");r=Dr(Ht(n,fe.Short),[i,l]);break;case"medium":const u=Yn(n,"mediumTime"),f=Yn(n,"mediumDate");r=Dr(Ht(n,fe.Medium),[u,f]);break;case"long":const _=Yn(n,"longTime"),C=Yn(n,"longDate");r=Dr(Ht(n,fe.Long),[_,C]);break;case"full":const I=Yn(n,"fullTime"),A=Yn(n,"fullDate");r=Dr(Ht(n,fe.Full),[I,A])}return r&&(Cn[t][e]=r),r}function Dr(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Dt(n,e,t="-",r,i){let l="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,l=t));let u=String(n);for(;u.length<e;)u="0"+u;return r&&(u=u.slice(u.length-e)),l+u}function Lt(n,e,t=0,r=!1,i=!1){return function(l,u){let f=function Jr(n,e){switch(n){case gt.FullYear:return e.getFullYear();case gt.Month:return e.getMonth();case gt.Date:return e.getDate();case gt.Hours:return e.getHours();case gt.Minutes:return e.getMinutes();case gt.Seconds:return e.getSeconds();case gt.FractionalSeconds:return e.getMilliseconds();case gt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,l);if((t>0||f>-t)&&(f+=t),n===gt.Hours)0===f&&-12===t&&(f=12);else if(n===gt.FractionalSeconds)return function Rr(n,e){return Dt(n,3).substring(0,e)}(f,e);const _=Vt(u,oe.MinusSign);return Dt(f,e,_,r,i)}}function Gt(n,e,t=J.Format,r=!1){return function(i,l){return function ir(n,e,t,r,i,l){switch(t){case mt.Months:return function Bt(n,e,t){const r=(0,s.cg1)(n),l=Je([r[s.wAp.MonthsFormat],r[s.wAp.MonthsStandalone]],e);return Je(l,t)}(e,i,r)[n.getMonth()];case mt.Days:return function tn(n,e,t){const r=(0,s.cg1)(n),l=Je([r[s.wAp.DaysFormat],r[s.wAp.DaysStandalone]],e);return Je(l,t)}(e,i,r)[n.getDay()];case mt.DayPeriods:const u=n.getHours(),f=n.getMinutes();if(l){const C=function jn(n){const e=(0,s.cg1)(n);return Or(e),(e[s.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Wn(r):[Wn(r[0]),Wn(r[1])])}(e),I=function gi(n,e,t){const r=(0,s.cg1)(n);Or(r);const l=Je([r[s.wAp.ExtraData][0],r[s.wAp.ExtraData][1]],e)||[];return Je(l,t)||[]}(e,i,r),A=C.findIndex(V=>{if(Array.isArray(V)){const[$,K]=V,we=u>=$.hours&&f>=$.minutes,Ce=u<K.hours||u===K.hours&&f<K.minutes;if($.hours<K.hours){if(we&&Ce)return!0}else if(we||Ce)return!0}else if(V.hours===u&&V.minutes===f)return!0;return!1});if(-1!==A)return I[A]}return function yt(n,e,t){const r=(0,s.cg1)(n),l=Je([r[s.wAp.DayPeriodsFormat],r[s.wAp.DayPeriodsStandalone]],e);return Je(l,t)}(e,i,r)[u<12?0:1];case mt.Eras:return function qe(n,e){return Je((0,s.cg1)(n)[s.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,l,n,e,t,r)}}function In(n){return function(e,t,r){const i=-1*r,l=Vt(t,oe.MinusSign),u=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case mn.Short:return(i>=0?"+":"")+Dt(u,2,l)+Dt(Math.abs(i%60),2,l);case mn.ShortGMT:return"GMT"+(i>=0?"+":"")+Dt(u,1,l);case mn.Long:return"GMT"+(i>=0?"+":"")+Dt(u,2,l)+":"+Dt(Math.abs(i%60),2,l);case mn.Extended:return 0===r?"Z":(i>=0?"+":"")+Dt(u,2,l)+":"+Dt(Math.abs(i%60),2,l);default:throw new Error(`Unknown zone width "${n}"`)}}}function Ct(n){return Br(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function wt(n,e=!1){return function(t,r){let i;if(e){const l=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,u=t.getDate();i=1+Math.floor((u+l)/7)}else{const l=Ct(t),u=function rt(n){const e=Br(n,0,1).getDay();return Br(n,0,1+(e<=4?4:11)-e)}(l.getFullYear()),f=l.getTime()-u.getTime();i=1+Math.round(f/6048e5)}return Dt(i,n,Vt(r,oe.MinusSign))}}function Kt(n,e=!1){return function(t,r){return Dt(Ct(t).getFullYear(),n,Vt(r,oe.MinusSign),e)}}const G={};function Y(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Ne(n){return n instanceof Date&&!isNaN(n.valueOf())}function cl(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(l)}return null}class Zs{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Er=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,l,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Zs(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===l?void 0:l);else if(null!==l){const f=r.get(l);r.move(f,u),zs(f,i)}});for(let i=0,l=r.length;i<l;i++){const f=r.get(i).context;f.index=i,f.count=l,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{zs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(s.ZZ4))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function zs(n,e){n.context.$implicit=e.item}let Zt=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new eh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Kn("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Kn("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.s_b),s.Y36(s.Rgc))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class eh{constructor(){this.$implicit=null,this.ngIf=null}}function Kn(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,s.AaK)(e)}'.`)}function ei(n,e){return new s.vHH(2100,!1)}class yp{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class Ji{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const vp=new Ji,yu=new yp;let ha=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,s.QGY)(t))return vp;if((0,s.F4k)(t))return yu;throw ei()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.sBO,16))},n.\u0275pipe=s.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})();const wp=new s.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let hc=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,l){if(null==t||""===t||t!=t)return null;try{return It(t,r,l||this.locale,i??this.defaultTimezone??void 0)}catch(u){throw ei()}}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.soG,16),s.Y36(wp,24))},n.\u0275pipe=s.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),On=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();const ti="browser";function Ws(n){return"server"===n}let Eu=(()=>{class n{}return n.\u0275prov=(0,s.Yz7)({token:n,providedIn:"root",factory:()=>new th((0,s.LFG)(se),window)}),n})();class th{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function pr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const l=i.shadowRoot;if(l){const u=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],i-l[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=mi(this.window.history)||mi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function mi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ys{}class Cs extends class Mu extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){j||(j=n)}(new Cs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ku(){return ws=ws||document.querySelector("base"),ws?ws.getAttribute("href"):null}();return null==t?null:function es(n){Tn=Tn||document.createElement("a"),Tn.setAttribute("href",n);const e=Tn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ws=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return cl(document.cookie,e)}}let Tn,ws=null;const An=new s.OlP("TRANSITION_ID"),Cc=[{provide:s.ip1,useFactory:function xu(n,e,t){return()=>{t.get(s.CZH).donePromise.then(()=>{const r=R(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<i.length;l++)r.remove(i[l])})}},deps:[An,se,s.zs3],multi:!0}];let wc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const bc=new s.OlP("EventManagerPlugins");let Dc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let l=0;l<i.length;l++){const u=i[l];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(bc),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class gl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=R().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ko=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),xo=(()=>{class n extends ko{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(l=>{const u=this._doc.createElement("style");u.textContent=l,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ou),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ou))}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(se))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();function Ou(n){R().remove(n)}const Oo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ru=/%COMP%/g;function _l(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?_l(n,i,t):(i=i.replace(Ru,n),t.push(i))}return t}function yl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let vl=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ts(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case s.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Nu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case s.ifc.ShadowDom:return new ch(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=_l(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Dc),s.LFG(xo),s.LFG(s.AFp))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class ts{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Oo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Sa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Sa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const l=Oo[i];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Oo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(s.JOm.DashCase|s.JOm.Important)?e.style.setProperty(t,r,i&s.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&s.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,yl(r)):this.eventManager.addEventListener(e,t,yl(r))}}function Sa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Nu extends ts{constructor(e,t,r,i){super(e),this.component=r;const l=_l(i+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr=function Un(n){return"_ngcontent-%COMP%".replace(Ru,n)}(i+"-"+r.id),this.hostAttr=function ml(n){return"_nghost-%COMP%".replace(Ru,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ch extends ts{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=_l(i.id,i.styles,[]);for(let u=0;u<l.length;u++){const f=document.createElement("style");f.textContent=l[u],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Xn=(()=>{class n extends gl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(se))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const uh=["alt","control","meta","shift"],bs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ta=(()=>{class n extends gl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const l=n.parseEventName(r),u=n.eventCallback(l.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>R().onAndCancel(t,l.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const l=n._normalizeKey(r.pop());let u="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),u="code."),uh.forEach(C=>{const I=r.indexOf(C);I>-1&&(r.splice(I,1),u+=C+".")}),u+=l,0!=r.length||0===l.length)return null;const _={};return _.domEventName=i,_.fullKey=u,_}static matchEventFullKeyCode(t,r){let i=bs[t.key]||t.key,l="";return r.indexOf("code.")>-1&&(i=t.code,l="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),uh.forEach(u=>{u!==i&&(0,Sc[u])(t)&&(l+=u+".")}),l+=i,l===r)}static eventCallback(t,r,i){return l=>{n.matchEventFullKeyCode(l,t)&&i.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(se))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Aa=(0,s.eFA)(s._c5,"browser",[{provide:s.Lbi,useValue:ti},{provide:s.g9A,useValue:function Lu(){Cs.makeCurrent()},multi:!0},{provide:se,useFactory:function Tc(){return(0,s.RDi)(document),document},deps:[]}]),Qs=new s.OlP(""),Ma=[{provide:s.rWj,useClass:class ah{addToWindow(e){s.dqk.getAngularTestability=(r,i=!0)=>{const l=e.findTestabilityInTree(r,i);if(null==l)throw new Error("Could not find testability for element.");return l},s.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),s.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),s.dqk.frameworkStabilizers||(s.dqk.frameworkStabilizers=[]),s.dqk.frameworkStabilizers.push(r=>{const i=s.dqk.getAllAngularTestabilities();let l=i.length,u=!1;const f=function(_){u=u||_,l--,0==l&&r(u)};i.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?R().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:s.lri,useClass:s.dDg,deps:[s.R0b,s.eoX,s.rWj]},{provide:s.dDg,useClass:s.dDg,deps:[s.R0b,s.eoX,s.rWj]}],Po=[{provide:s.zSh,useValue:"root"},{provide:s.qLn,useFactory:function ns(){return new s.qLn},deps:[]},{provide:bc,useClass:Xn,multi:!0,deps:[se,s.R0b,s.Lbi]},{provide:bc,useClass:Ta,multi:!0,deps:[se]},{provide:vl,useClass:vl,deps:[Dc,xo,s.AFp]},{provide:s.FYo,useExisting:vl},{provide:ko,useExisting:xo},{provide:xo,useClass:xo,deps:[se]},{provide:Dc,useClass:Dc,deps:[bc,s.R0b]},{provide:Ys,useClass:wc,deps:[]},[]];let No=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:s.AFp,useValue:t.appId},{provide:An,useExisting:s.AFp},Cc]}}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Qs,12))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[...Po,...Ma],imports:[On,s.hGG]}),n})(),ki=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(se))},n.\u0275prov=s.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ka(){return new ki((0,s.LFG)(se))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Nr=N(655),ct=N(7579),kc=N(6063);class xc extends ct.x{constructor(e=1/0,t=1/0,r=kc.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:l,_windowTime:u}=this;t||(r.push(e),!i&&r.push(l.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,l=i.slice();for(let u=0;u<l.length&&!e.closed;u+=r?1:2)e.next(l[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,l=(i?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!i){const u=t.now();let f=0;for(let _=1;_<r.length&&r[_]<=u;_+=2)f=_;f&&r.splice(0,f+1)}}}let yi=(()=>{class n{constructor(){this.bootstrap$=new xc(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();function Il(n,e){return n===e}function Es(n,e,t){if(null===e||null===t||e.length!==t.length)return!1;const r=e.length;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}const xa=new s.OlP("INITIAL_STATE_TOKEN");let Sl=(()=>{class n{static set(t){this.value=t}static pop(){const t=this.value;return this.value={},t}}return n.value={},n})();const mh=new s.OlP("Internals.StateContextFactory"),Is=new s.OlP("Internals.StateFactory");var Mn=N(9751);class Pn extends ct.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var zn=N(3269),rn=N(8996);function ze(...n){const e=(0,zn.yG)(n);return(0,rn.D)(n,e)}const{isArray:Oc}=Array,{getPrototypeOf:_h,prototype:Sp,keys:Bu}=Object;function ju(n){if(1===n.length){const e=n[0];if(Oc(e))return{args:e,keys:null};if(function Rc(n){return n&&"object"==typeof n&&_h(n)===Sp}(e)){const t=Bu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var gr=N(8421),En=N(5403),We=N(4004);const{isArray:Tl}=Array;function to(n){return(0,We.U)(e=>function Oi(n,e){return Tl(e)?n(...e):n(e)}(n,e))}function Ri(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function no(...n){const e=(0,zn.jO)(n),{args:t,keys:r}=ju(n),i=new Mn.y(l=>{const{length:u}=t;if(!u)return void l.complete();const f=new Array(u);let _=u,C=u;for(let I=0;I<u;I++){let A=!1;(0,gr.Xf)(t[I]).subscribe((0,En.x)(l,V=>{A||(A=!0,C--),f[I]=V},()=>_--,void 0,()=>{(!_||!A)&&(C||l.next(r?Ri(r,f):f),l.complete())}))}});return e?i.pipe(to(e)):i}var zr=N(576);function vi(n,e){const t=(0,zr.m)(n)?n:()=>n,r=i=>i.error(t());return new Mn.y(e?i=>e.schedule(r,0,i):r)}var rs=N(515);function Oa(n){return!!n&&(n instanceof Mn.y||(0,zr.m)(n.lift)&&(0,zr.m)(n.subscribe))}var Zo=N(233),E=N(4482);function S(n,e){return(0,E.e)((t,r)=>{let i=0;t.subscribe((0,En.x)(r,l=>n.call(e,l,i++)&&r.next(l)))})}var k=N(3099);function U(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,k.B)({connector:()=>new xc(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function W(n){return n<=0?()=>rs.E:(0,E.e)((e,t)=>{let r=0;e.subscribe((0,En.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ce(n,e){return e?t=>t.pipe(ce((r,i)=>(0,gr.Xf)(n(r,i)).pipe((0,We.U)((l,u)=>e(r,l,i,u))))):(0,E.e)((t,r)=>{let i=0,l=null,u=!1;t.subscribe((0,En.x)(r,f=>{l||(l=(0,En.x)(r,void 0,()=>{l=null,u&&r.complete()}),(0,gr.Xf)(n(f,i++)).subscribe(l))},()=>{u=!0,!l&&r.complete()}))})}var _e=N(5577);function Ze(n){return(0,E.e)((e,t)=>{let r=!1;e.subscribe((0,En.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ut(n){return(0,E.e)((e,t)=>{let l,r=null,i=!1;r=e.subscribe((0,En.x)(t,void 0,void 0,u=>{l=(0,gr.Xf)(n(u,ut(n)(e))),r?(r.unsubscribe(),r=null,l.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,l.subscribe(t))})}var Rt=N(5032);function Qe(n){return(0,E.e)((e,t)=>{(0,gr.Xf)(n).subscribe((0,En.x)(t,()=>t.complete(),Rt.Z)),!t.closed&&e.subscribe(t)})}var dt=N(5363),kn=N(4671);function Nn(n,e=kn.y){return n=n??Ra,(0,E.e)((t,r)=>{let i,l=!0;t.subscribe((0,En.x)(r,u=>{const f=e(u);(l||!n(i,f))&&(l=!1,i=f,r.next(u))}))})}function Ra(n,e){return n===e}var hn=N(8505),cr=N(8189);function Ss(...n){return function Pa(){return(0,cr.J)(1)}()((0,rn.D)(n,(0,zn.yG)(n)))}function er(...n){const e=(0,zn.yG)(n);return(0,E.e)((t,r)=>{(e?Ss(n,t,e):Ss(n,t)).subscribe(r)})}function Pi(){return(0,E.e)((n,e)=>{let t,r=!1;n.subscribe((0,En.x)(e,i=>{const l=t;t=i,r&&e.next([l,i]),r=!0}))})}class is{constructor(e,t){this._ngZone=e,this._platformId=t}enter(e){return Ws(this._platformId)?this.runInsideAngular(e):this.runOutsideAngular(e)}leave(e){return this.runInsideAngular(e)}runInsideAngular(e){return s.R0b.isInAngularZone()?e():this._ngZone.run(e)}runOutsideAngular(e){return s.R0b.isInAngularZone()?this._ngZone.runOutsideAngular(e):e()}}is.\u0275fac=function(e){return new(e||is)(s.LFG(s.R0b),s.LFG(s.Lbi))},is.\u0275prov=s.Yz7({token:is,factory:is.\u0275fac,providedIn:"root"}),is.ngInjectableDef=(0,s.Ez6)({factory:function(){return new is((0,s.f3M)(s.R0b),(0,s.f3M)(s.Lbi))},token:is,providedIn:"root"});const yh=new s.OlP("ROOT_STATE_TOKEN"),E_=new s.OlP("FEATURE_STATE_TOKEN"),Mp=new s.OlP("NGXS_PLUGINS"),zo="NGXS_META",Hu="NGXS_OPTIONS_META";let ro=(()=>{class n{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=is}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class I_{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}}class ss{enter(e){return e()}leave(e){return e()}}ss.\u0275fac=function(e){return new(e||ss)},ss.\u0275prov=s.Yz7({token:ss,factory:ss.\u0275fac,providedIn:"root"}),ss.ngInjectableDef=(0,s.Ez6)({factory:function(){return new ss},token:ss,providedIn:"root"});const bh=new s.OlP("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),xp=new s.OlP("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const n=(0,s.f3M)(s.gxx),e=n.get(bh);return n.get(e||(typeof s.dqk.Zone<"u"?is:ss))}});function $u(n){if(!n.hasOwnProperty(zo)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,zo,{value:e})}return Fc(n)}function Fc(n){return n[zo]}function Zu(n,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function Uw(n){const e=n.slice();return t=>e.reduce((r,i)=>r&&r[i],t)}(n):function Bw(n){const e=n;let t="store."+e[0],r=0;const i=e.length;let l=t;for(;++r<i;)l=l+" && "+(t=t+"."+e[r]);return new Function("store","return "+l+";")}(n)}function b(n){return n.constructor&&n.constructor.type?n.constructor.type:n.type}const P=(n,e,t)=>{n=Object.assign({},n);const r=e.split("."),i=r.length-1;return r.reduce((l,u,f)=>(l[u]=f===i?t:Array.isArray(l[u])?l[u].slice():Object.assign({},l[u]),l&&l[u]),n),n},ee=(n,e)=>e.split(".").reduce((t,r)=>t&&t[r],n),Te=n=>n&&"object"==typeof n&&!Array.isArray(n),it=(n,...e)=>{if(!e.length)return n;const t=e.shift();if(Te(n)&&Te(t))for(const r in t)Te(t[r])?(n[r]||Object.assign(n,{[r]:{}}),it(n[r],t[r])):Object.assign(n,{[r]:t[r]});return it(n,...e)};function Sn(...n){return function Go(n,e,t=Eh){const r=function Lc(n){return n.reduce((e,t)=>(e[b(t)]=!0,e),{})}(n),i=e&&function Ih(n){return n.reduce((e,t)=>(e[t]=!0,e),{})}(e);return function(l){return l.pipe(function Vp(n,e){return S(t=>{const r=b(t.action);return n[r]&&(!e||e[t.status])})}(r,i),t())}}(n,["DISPATCHED"])}function Eh(){return(0,We.U)(n=>n.action)}function qo(n){return e=>new Mn.y(t=>e.subscribe({next(r){n.leave(()=>t.next(r))},error(r){n.leave(()=>t.error(r))},complete(){n.leave(()=>t.complete())}}))}let zu=(()=>{class n{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(xp))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class iI extends ct.x{constructor(){super(...arguments),this._itemQueue=[],this._busyPushingNext=!1}next(e){if(this._busyPushingNext)this._itemQueue.unshift(e);else{for(this._busyPushingNext=!0,super.next(e);this._itemQueue.length>0;){const t=this._itemQueue.pop();super.next(t)}this._busyPushingNext=!1}}}let Gu=(()=>{class n extends iI{ngOnDestroy(){this.complete()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=s.n5z(n)))(r||n)}}(),n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Hw=(()=>{class n extends Mn.y{constructor(t,r){const i=t.pipe(qo(r),(0,k.B)());super(l=>{const u=i.subscribe({next:f=>l.next(f),error:f=>l.error(f),complete:()=>l.complete()});l.add(u)})}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Gu),s.LFG(zu))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const $w=n=>(...e)=>n.shift()(...e,(...r)=>$w(n)(...r));class Wo{constructor(e){this._injector=e,this._errorHandler=null}reportErrorSafely(e){null===this._errorHandler&&(this._errorHandler=this._injector.get(s.qLn));try{this._errorHandler.handleError(e)}catch{}}}Wo.\u0275fac=function(e){return new(e||Wo)(s.LFG(s.zs3))},Wo.\u0275prov=s.Yz7({token:Wo,factory:Wo.\u0275fac,providedIn:"root"}),Wo.ngInjectableDef=(0,s.Ez6)({factory:function(){return new Wo((0,s.f3M)(s.gxx))},token:Wo,providedIn:"root"});let jp=(()=>{class n extends Pn{constructor(){super({})}ngOnDestroy(){this.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),k_=(()=>{class n{constructor(t,r){this._parentManager=t,this._pluginHandlers=r,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(r=>r.handle?r.handle.bind(r):r)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(n,12),s.LFG(Mp,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Zw=(()=>{class n extends ct.x{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=s.n5z(n)))(r||n)}}(),n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),oI=(()=>{class n{constructor(t,r,i,l,u,f){this._actions=t,this._actionResults=r,this._pluginManager=i,this._stateStream=l,this._ngxsExecutionStrategy=u,this._internalErrorReporter=f}dispatch(t){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t)).pipe(function sI(n,e){return t=>{let r=!1;return t.subscribe({error:i=>{e.enter(()=>Promise.resolve().then(()=>{r||e.leave(()=>n.reportErrorSafely(i))}))}}),new Mn.y(i=>(r=!0,t.pipe(qo(e)).subscribe(i)))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?0===t.length?ze(this._stateStream.getValue()):no(t.map(r=>this.dispatchSingle(r))):this.dispatchSingle(t)}dispatchSingle(t){const r=this._stateStream.getValue();return $w([...this._pluginManager.plugins,(l,u)=>{l!==r&&this._stateStream.next(l);const f=this.getActionResultStream(u);return f.subscribe(_=>this._actions.next(_)),this._actions.next({action:u,status:"DISPATCHED"}),this.createDispatchObservable(f)}])(r,t).pipe(U())}getActionResultStream(t){return this._actionResults.pipe(S(r=>r.action===t&&"DISPATCHED"!==r.status),W(1),U())}createDispatchObservable(t){return t.pipe(ce(r=>{switch(r.status){case"SUCCESSFUL":return ze(this._stateStream.getValue());case"ERRORED":return vi(r.error);default:return rs.E}})).pipe(U())}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Gu),s.LFG(Zw),s.LFG(k_),s.LFG(jp),s.LFG(zu),s.LFG(Wo))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Ml=(()=>{class n{constructor(t,r,i){this._stateStream=t,this._dispatcher=r,this._config=i}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:r=>this._stateStream.next(r),dispatch:r=>this._dispatcher.dispatch(r)}}setStateToTheCurrentWithNew(t){const r=this.getRootStateOperations(),i=r.getState();r.setState(Object.assign({},i,t.defaults))}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(jp),s.LFG(oI),s.LFG(ro))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();let Sh=(()=>{class n{constructor(t){this._internalStateOperations=t}createStateContext(t){const r=this._internalStateOperations.getRootStateOperations();function i(_){return ee(_,t.path)}function l(_,C){const I=P(_,t.path,C);return r.setState(I),I}function u(_,C){return l(_,C(i(_)))}return{getState:()=>i(r.getState()),patchState:_=>u(r.getState(),function Gw(n){return e=>{Array.isArray(n)?function D_(){throw new Error("Patching arrays is not supported.")}():"object"!=typeof n&&function Na(){throw new Error("Patching primitives is not supported.")}();const t=Object.assign({},e);for(const r in n)t[r]=n[r];return t}}(_)),setState(_){const C=r.getState();return function f(_){return"function"==typeof _}(_)?u(C,_):l(C,_)},dispatch:_=>r.dispatch(_)}}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Ml))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();new RegExp("^[a-zA-Z0-9_]+$");let Vc=(()=>{class n{constructor(t,r,i,l,u,f,_){this._injector=t,this._config=r,this._parentFactory=i,this._actions=l,this._actionResults=u,this._stateContextFactory=f,this._initialState=_,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=function eo(n,e=Il){let t=null,r=null;function i(){return Es(e,t,arguments)||(r=n.apply(null,arguments)),t=arguments,r}return i.reset=function(){t=null,r=null},i}(()=>{const C=this;function I(V){const $=C.statePaths[V];return $?Zu($.split("."),C._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(V){let $=I(V);return $||((...K)=>($||($=I(V)),$?$(...K):void 0))},getSelectorOptions:V=>Object.assign({},C._config.selectorOptions,V||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(t){let r={};return r=Array.isArray(t)?t.slice():function m(n){return"object"==typeof n&&null!==n||"function"==typeof n}(t)?Object.assign({},t):void 0===t?{}:t,r}ngOnDestroy(){this._actionsSubscription.unsubscribe()}add(t){const{newStates:r}=this.addToStatesMap(t);if(!r.length)return[];const i=function A_(n){const e=t=>n.find(i=>i===t)[zo].name;return n.reduce((t,r)=>{const{name:i,children:l}=r[zo];return t[i]=(l||[]).map(e),t},{})}(r),l=function g(n){const e=[],t={},r=(i,l=[])=>{Array.isArray(l)||(l=[]),l.push(i),t[i]=!0,n[i].forEach(u=>{t[u]||r(u,l.slice(0))}),e.indexOf(i)<0&&e.push(i)};return Object.keys(n).forEach(i=>r(i)),e.reverse()}(i),u=function v(n,e={}){const t=(r,i)=>{for(const l in r)if(r.hasOwnProperty(l)&&r[l].indexOf(i)>=0){const u=t(r,l);return null!==u?`${u}.${l}`:l}return null};for(const r in n)if(n.hasOwnProperty(r)){const i=t(n,r);e[r]=i?`${i}.${r}`:r}return e}(i),f=function M_(n){return n.reduce((e,t)=>(e[t[zo].name]=t,e),{})}(r),_=[];for(const C of l){const I=f[C],A=u[C],V=I[zo];this.addRuntimeInfoToMeta(V,A);const $={name:C,path:A,isInitialised:!1,actions:V.actions,instance:this._injector.get(I),defaults:n.cloneDefaults(V.defaults)};this.hasBeenMountedAndBootstrapped(C,A)||_.push($),this.states.push($)}return _}addAndReturnDefaults(t){const i=this.add(t||[]);return{defaults:i.reduce((u,f)=>P(u,f.path,f.defaults),{}),states:i}}connectActionHandlers(){if(null!==this._actionsSubscription)return;const t=new ct.x;this._actionsSubscription=this._actions.pipe(S(r=>"DISPATCHED"===r.status),(0,_e.z)(r=>{t.next(r);const i=r.action;return this.invokeActions(t,i).pipe((0,We.U)(()=>({action:i,status:"SUCCESSFUL"})),Ze({action:i,status:"CANCELED"}),ut(l=>ze({action:i,status:"ERRORED",error:l})))})).subscribe(r=>this._actionResults.next(r))}invokeActions(t,r){const i=b(r),l=[];for(const u of this.states){const f=u.actions[i];if(f)for(const _ of f){const C=this._stateContextFactory.createStateContext(u);try{let I=u.instance[_.fn](C,r);I instanceof Promise&&(I=(0,rn.D)(I)),Oa(I)?(I=I.pipe((0,_e.z)(A=>A instanceof Promise?(0,rn.D)(A):Oa(A)?A:ze(A)),Ze({})),_.options.cancelUncompleted&&(I=I.pipe(Qe(t.pipe(Sn(r)))))):I=ze({}).pipe(U()),l.push(I)}catch(I){l.push(vi(I))}}}return l.length||l.push(ze({})),no(l)}addToStatesMap(t){const r=[],i=this.statesByName;for(const l of t){const u=Fc(l).name;!i[u]&&(r.push(l),i[u]=l)}return{newStates:r}}addRuntimeInfoToMeta(t,r){this.statePaths[t.name]=r,t.path=r}hasBeenMountedAndBootstrapped(t,r){const i=void 0!==ee(this._initialState,r);return this.statesByName[t]&&i}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(s.zs3),s.LFG(ro),s.LFG(n,12),s.LFG(Gu),s.LFG(Zw),s.LFG(Sh),s.LFG(xa,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();let Bc=(()=>{class n{constructor(t,r,i,l,u,f){this._stateStream=t,this._internalStateOperations=r,this._config=i,this._internalExecutionStrategy=l,this._stateFactory=u,this._selectableStateStream=this._stateStream.pipe((0,dt.Q)(Zo.N),qo(this._internalExecutionStrategy),U({bufferSize:1,refCount:!0})),this.initStateStream(f)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){const r=this.getStoreBoundSelectorFn(t);return this._selectableStateStream.pipe((0,We.U)(r),ut(i=>{const{suppressErrors:l}=this._config.selectorOptions;return i instanceof TypeError&&l?ze(void 0):vi(i)}),Nn(),qo(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(W(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}subscribe(t){return this._selectableStateStream.pipe(qo(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){return this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){return function Th(n){const e=function Np(n){return n.NGXS_SELECTOR_META}(n)||Fc(n);return e&&e.makeRootSelector||(()=>n)}(t)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(t){const r=this._stateStream.value;if(!r||0===Object.keys(r).length){const u=Object.keys(this._config.defaultsState).length>0?Object.assign({},this._config.defaultsState,t):t;this._stateStream.next(u)}}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(jp),s.LFG(Ml),s.LFG(ro),s.LFG(zu),s.LFG(Vc),s.LFG(xa,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Ah=(()=>{class n{constructor(t,r,i,l,u){this._store=t,this._internalErrorReporter=r,this._internalStateOperations=i,this._stateContextFactory=l,this._bootstrapper=u,this._destroy$=new ct.x}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(t,r){this._internalStateOperations.getRootStateOperations().dispatch(t).pipe(S(()=>!!r),(0,hn.b)(()=>this._invokeInitOnStates(r.states)),(0,_e.z)(()=>this._bootstrapper.appBootstrapped$),S(i=>!!i),ut(i=>(this._internalErrorReporter.reportErrorSafely(i),rs.E)),Qe(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(r.states))}_invokeInitOnStates(t){for(const r of t){const i=r.instance;i.ngxsOnChanges&&this._store.select(l=>ee(l,r.path)).pipe(er(void 0),Pi(),Qe(this._destroy$)).subscribe(([l,u])=>{const f=new I_(l,u,!r.isInitialised);i.ngxsOnChanges(f)}),i.ngxsOnInit&&i.ngxsOnInit(this._getStateContext(r)),r.isInitialised=!0}}_invokeBootstrapOnStates(t){for(const r of t){const i=r.instance;i.ngxsAfterBootstrap&&i.ngxsAfterBootstrap(this._getStateContext(r))}}_getStateContext(t){return this._stateContextFactory.createStateContext(t)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Bc),s.LFG(Wo),s.LFG(Ml),s.LFG(Sh),s.LFG(yi))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),kl=(()=>{class n{constructor(t,r){n.store=t,n.config=r}ngOnDestroy(){n.store=null,n.config=null}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Bc),s.LFG(ro))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n.store=null,n.config=null,n})();class jc{static get type(){return"@@INIT"}}class Kw{constructor(e){this.addedStates=e}static get type(){return"@@UPDATE_STATE"}}let R_=(()=>{class n{constructor(t,r,i,l,u=[],f){const _=t.addAndReturnDefaults(u);r.setStateToTheCurrentWithNew(_),t.connectActionHandlers(),f.ngxsBootstrap(new jc,_)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Vc),s.LFG(Ml),s.LFG(Bc),s.LFG(kl),s.LFG(yh,8),s.LFG(Ah))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})(),uI=(()=>{class n{constructor(t,r,i,l=[],u){const f=n.flattenStates(l),_=i.addAndReturnDefaults(f);_.states.length&&(r.setStateToTheCurrentWithNew(_),u.ngxsBootstrap(new Kw(_.defaults),_))}static flattenStates(t=[]){return t.reduce((r,i)=>r.concat(i),[])}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Bc),s.LFG(Ml),s.LFG(Vc),s.LFG(E_,8),s.LFG(Ah))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();class Ni{static forRoot(e=[],t={}){return{ngModule:R_,providers:[Vc,Sh,Hw,Gu,yi,Ah,oI,Zw,Ml,zu,Bc,jp,kl,k_,...e,...Ni.ngxsTokenProviders(e,t)]}}static forFeature(e=[]){return{ngModule:uI,providers:[Vc,k_,...e,{provide:E_,multi:!0,useValue:e}]}}static ngxsTokenProviders(e,t){return[{provide:bh,useValue:t.executionStrategy},{provide:yh,useValue:e},{provide:Ni.ROOT_OPTIONS,useValue:t},{provide:ro,useFactory:Ni.ngxsConfigFactory,deps:[Ni.ROOT_OPTIONS]},{provide:s.tb,useFactory:Ni.appBootstrapListenerFactory,multi:!0,deps:[yi]},{provide:xa,useFactory:Ni.getInitialState},{provide:mh,useExisting:Sh},{provide:Is,useExisting:Vc}]}static ngxsConfigFactory(e){return it(new ro,e)}static appBootstrapListenerFactory(e){return()=>e.bootstrap()}static getInitialState(){return Sl.pop()}}function $p(n,e){return(t,r)=>{const i=$u(t.constructor);Array.isArray(n)||(n=[n]);for(const l of n){const u=l.type;i.actions[u]||(i.actions[u]=[]),i.actions[u].push({fn:r,options:e||{},type:u})}}}function Jw(n){return r=>{const i=r,l=$u(i),u=Object.getPrototypeOf(i),f=function e(r){return Object.assign({},r[Hu]||{},n)}(u);(function t(r){const{meta:i,inheritedStateClass:l,optionsWithInheritance:u}=r,{children:f,defaults:_,name:C}=u,I="string"==typeof C?C:C&&C.getName()||null;l.hasOwnProperty(zo)&&(i.actions=Object.assign({},i.actions,(l[zo]||{}).actions)),i.children=f,i.defaults=_,i.name=I})({meta:l,inheritedStateClass:u,optionsWithInheritance:f}),i[Hu]=f}}function N_(n,...e){return function(t,r){const i=r.toString(),l=`__${i}__selector`,u=function fI(n,e,t=[]){return e=e||function P_(n){const e=n.length-1;return 36===n.charCodeAt(e)?n.slice(0,e):n}(n),"string"==typeof e?Zu(t.length?[e,...t]:e.split("."),kl.config):e}(i,n,e);Object.defineProperties(t,{[l]:{writable:!0,enumerable:!1,configurable:!0},[i]:{enumerable:!0,configurable:!0,get(){return this[l]||(this[l]=function hI(n){return kl.store||function Ap(){throw new Error("You have forgotten to import the NGXS module!")}(),kl.store.select(n)}(u))}}})}}Ni.\u0275fac=function(e){return new(e||Ni)},Ni.\u0275mod=s.oAB({type:Ni}),Ni.\u0275inj=s.cJS({}),Ni.ROOT_OPTIONS=new s.OlP("ROOT_OPTIONS");let Qw=(()=>{class n{constructor(t){this.mode=t}}return n.type="TOGGLE_DARK_MODE",n})(),Yo=class{toggleDarkMode({patchState:e},t){e({mode:t.mode})}};Yo.\u0275fac=function(e){return new(e||Yo)},Yo.\u0275prov=s.Yz7({token:Yo,factory:Yo.\u0275fac}),(0,Nr.gn)([$p(Qw)],Yo.prototype,"toggleDarkMode",null),Yo=(0,Nr.gn)([Jw({name:"darkMode",defaults:{mode:!0}})],Yo);let F_=(()=>{class n{constructor(){this.actualFontSize=new Pn(10)}getFontSize(){return this.actualFontSize.asObservable()}onResizeFont(t){this.actualFontSize.next(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function as(n){return null!=n&&"false"!=`${n}`}function Xw(n,e=0){return function mI(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function Wu(n){return Array.isArray(n)?n:[n]}function ur(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Sr(n){return n instanceof s.SBq?n.nativeElement:n}var _I=N(1144);const L_=["addListener","removeListener"],gO=["addEventListener","removeEventListener"],mO=["on","off"];function Ko(n,e,t,r){if((0,zr.m)(t)&&(r=t,t=void 0),r)return Ko(n,e,t).pipe(to(r));const[i,l]=function vO(n){return(0,zr.m)(n.addEventListener)&&(0,zr.m)(n.removeEventListener)}(n)?gO.map(u=>f=>n[u](e,f,t)):function _O(n){return(0,zr.m)(n.addListener)&&(0,zr.m)(n.removeListener)}(n)?L_.map(yI(n,e)):function yO(n){return(0,zr.m)(n.on)&&(0,zr.m)(n.off)}(n)?mO.map(yI(n,e)):[];if(!i&&(0,_I.z)(n))return(0,_e.z)(u=>Ko(u,e,t))((0,gr.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Mn.y(u=>{const f=(..._)=>u.next(1<_.length?_:_[0]);return i(f),()=>l(f)})}function yI(n,e){return t=>r=>n[t](e,r)}var vI=N(4408),As=N(727);const Yu={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Yu;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(l=>{t=void 0,n(l)});return new As.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=Yu;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Yu;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var U_=N(7565);const B_=new class eb extends U_.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class V_ extends vI.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Yu.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(Yu.cancelAnimationFrame(t),e._scheduled=void 0)}});let xh,CI=1;const xl={};function nb(n){return n in xl&&(delete xl[n],!0)}const wI={setImmediate(n){const e=CI++;return xl[e]=!0,xh||(xh=Promise.resolve()),xh.then(()=>nb(e)&&n()),e},clearImmediate(n){nb(n)}},{setImmediate:rb,clearImmediate:bI}=wI,Gp={setImmediate(...n){const{delegate:e}=Gp;return(e?.setImmediate||rb)(...n)},clearImmediate(n){const{delegate:e}=Gp;return(e?.clearImmediate||bI)(n)},delegate:void 0};new class EI extends U_.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class DI extends vI.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Gp.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(Gp.clearImmediate(t),e._scheduled=void 0)}});var Oh=N(4986),ib=N(3532);function sb(n=0,e,t=Oh.P){let r=-1;return null!=e&&((0,ib.K)(e)?t=e:r=e),new Mn.y(i=>{let l=function SI(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;l<0&&(l=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},l)})}function oi(n,e=Oh.z){return function II(n){return(0,E.e)((e,t)=>{let r=!1,i=null,l=null,u=!1;const f=()=>{if(l?.unsubscribe(),l=null,r){r=!1;const C=i;i=null,t.next(C)}u&&t.complete()},_=()=>{l=null,u&&t.complete()};e.subscribe((0,En.x)(t,C=>{r=!0,i=C,l||(0,gr.Xf)(n(C)).subscribe(l=(0,En.x)(t,f,_))},()=>{u=!0,(!r||!l||l.closed)&&t.complete()}))})}(()=>sb(n,e))}let Rh;try{Rh=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Rh=!1}let Ph,Ol,H_,Ms=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function ni(n){return n===ti}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Rh)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(s.Lbi))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ju(n){return function AI(){if(null==Ph&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ph=!0}))}finally{Ph=Ph||!1}return Ph}()?n:!!n.capture}function MI(){if(null==Ol){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ol=!1,Ol;if("scrollBehavior"in document.documentElement.style)Ol=!0;else{const n=Element.prototype.scrollTo;Ol=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Ol}function $_(n){if(function xI(){if(null==H_){const n=typeof document<"u"?document.head:null;H_=!(!n||!n.createShadowRoot&&!n.attachShadow)}return H_}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Z_(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function io(n){return n.composedPath?n.composedPath()[0]:n.target}function Hc(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const La=new s.OlP("cdk-dir-doc",{providedIn:"root",factory:function OI(){return(0,s.f3M)(se)}}),RI=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Va=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new s.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function bO(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?RI.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(La,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ab=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})(),ub=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new ct.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Mn.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(oi(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ze()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(S(l=>!l||i.indexOf(l)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,l)=>{this._scrollableContainsElement(l,t)&&r.push(l)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Sr(r),l=t.getElementRef().nativeElement;do{if(i==l)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Ko(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(s.R0b),s.LFG(Ms),s.LFG(se,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qu=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new ct.x,this._changeListener=l=>{this._change.next(l)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const l=this._getWindow();l.addEventListener("resize",this._changeListener),l.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,l=i.getBoundingClientRect();return{top:-l.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-l.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(oi(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Ms),s.LFG(s.R0b),s.LFG(se,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),G_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})(),q_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[ab,G_,ab,G_]}),n})();class W_{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Y_ extends W_{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class Wp extends W_{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class gb extends W_{constructor(e){super(),this.element=e instanceof s.SBq?e.nativeElement:e}}class Ba{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Y_?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Wp?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof gb?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class mb extends Ba{constructor(e,t,r,i,l){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=u=>{const f=u.element,_=this._document.createComment("dom-portal");f.parentNode.insertBefore(_,f),this.outletElement.appendChild(f),this._attachedPortal=u,super.setDisposeFn(()=>{_.parentNode&&_.parentNode.replaceChild(f,_)})},this._document=l}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||s.zs3.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let _b=(()=>{class n extends Ba{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new s.vpe,this.attachDomPortal=l=>{const u=l.element,f=this._document.createComment("dom-portal");l.setAttachedHost(this),u.parentNode.insertBefore(f,u),this._getRootNode().appendChild(u),this._attachedPortal=l,super.setDisposeFn(()=>{f.parentNode&&f.parentNode.replaceChild(u,f)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,l=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),u=r.createComponent(l,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(u.hostView.rootNodes[0]),super.setDisposeFn(()=>u.destroy()),this._attachedPortal=t,this._attachedRef=u,this.attached.emit(u),u}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s._Vd),s.Y36(s.s_b),s.Y36(se))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[s.qOj]}),n})(),Yp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();var ja=N(6451);const J_=MI();class Kp{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ur(-this._previousScrollPosition.left),e.style.top=ur(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,l=r.scrollBehavior||"",u=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),J_&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),J_&&(r.scrollBehavior=l,i.scrollBehavior=u)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class yb{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Jp{enable(){}disable(){}attach(){}}function Qp(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function Xp(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Lh{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();Qp(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let $I=(()=>{class n{constructor(t,r,i,l){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new Jp,this.close=u=>new yb(this._scrollDispatcher,this._ngZone,this._viewportRuler,u),this.block=()=>new Kp(this._viewportRuler,this._document),this.reposition=u=>new Lh(this._scrollDispatcher,this._viewportRuler,this._ngZone,u),this._document=l}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(ub),s.LFG(Qu),s.LFG(s.R0b),s.LFG(se))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Vh{constructor(e){if(this.scrollStrategy=new Jp,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class vb{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let zI=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(se))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wb=(()=>{class n extends zI{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const l=this._attachedOverlays;for(let u=l.length-1;u>-1;u--)if(l[u]._keydownEvents.observers.length>0){const f=l[u]._keydownEvents;this._ngZone?this._ngZone.run(()=>f.next(i)):f.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(se),s.LFG(s.R0b,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),GI=(()=>{class n extends zI{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=l=>{this._pointerDownEventTarget=io(l)},this._clickListener=l=>{const u=io(l),f="click"===l.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:u;this._pointerDownEventTarget=null;const _=this._attachedOverlays.slice();for(let C=_.length-1;C>-1;C--){const I=_[C];if(I._outsidePointerEvents.observers.length<1||!I.hasAttached())continue;if(I.overlayElement.contains(u)||I.overlayElement.contains(f))break;const A=I._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>A.next(l)):A.next(l)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(se),s.LFG(Ms),s.LFG(s.R0b,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Uh=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||Hc()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let l=0;l<i.length;l++)i[l].remove()}const r=this._document.createElement("div");r.classList.add(t),Hc()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(se),s.LFG(Ms))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class X_{constructor(e,t,r,i,l,u,f,_,C,I=!1){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=l,this._keyboardDispatcher=u,this._document=f,this._location=_,this._outsideClickDispatcher=C,this._animationsDisabled=I,this._backdropElement=null,this._backdropClick=new ct.x,this._attachments=new ct.x,this._detachments=new ct.x,this._locationChanges=As.w0.EMPTY,this._backdropClickHandler=A=>this._backdropClick.next(A),this._backdropTransitionendHandler=A=>{this._disposeBackdrop(A.target)},this._keydownEvents=new ct.x,this._outsidePointerEvents=new ct.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(W(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ur(this._config.width),e.height=ur(this._config.height),e.minWidth=ur(this._config.minWidth),e.minHeight=ur(this._config.minHeight),e.maxWidth=ur(this._config.maxWidth),e.maxHeight=ur(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=Wu(t||[]).filter(l=>!!l);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Qe((0,ja.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const bb="cdk-overlay-connected-position-bounding-box",so=/([A-Za-z%]+)$/;class qI{constructor(e,t,r,i,l){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=l,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ct.x,this._resizeSubscription=As.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(bb),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,l=[];let u;for(let f of this._preferredPositions){let _=this._getOriginPoint(e,i,f),C=this._getOverlayPoint(_,t,f),I=this._getOverlayFit(C,t,r,f);if(I.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(f,_);this._canFitWithFlexibleDimensions(I,C,r)?l.push({position:f,origin:_,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(_,f)}):(!u||u.overlayFit.visibleArea<I.visibleArea)&&(u={overlayFit:I,overlayPoint:C,originPoint:_,position:f,overlayRect:t})}if(l.length){let f=null,_=-1;for(const C of l){const I=C.boundingBoxRect.width*C.boundingBoxRect.height*(C.position.weight||1);I>_&&(_=I,f=C)}return this._isPushed=!1,void this._applyPosition(f.position,f.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Rl(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(bb),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,l;if("center"==r.originX)i=e.left+e.width/2;else{const u=this._isRtl()?e.right:e.left,f=this._isRtl()?e.left:e.right;i="start"==r.originX?u:f}return t.left<0&&(i-=t.left),l="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(l-=t.top),{x:i,y:l}}_getOverlayPoint(e,t,r){let i,l;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,l="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+l}}_getOverlayFit(e,t,r,i){const l=Eb(t);let{x:u,y:f}=e,_=this._getOffset(i,"x"),C=this._getOffset(i,"y");_&&(u+=_),C&&(f+=C);let V=0-f,$=f+l.height-r.height,K=this._subtractOverflows(l.width,0-u,u+l.width-r.width),we=this._subtractOverflows(l.height,V,$),Ce=K*we;return{visibleArea:Ce,isCompletelyWithinViewport:l.width*l.height===Ce,fitsInViewportVertically:we===l.height,fitsInViewportHorizontally:K==l.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,l=r.right-t.x,u=Db(this._overlayRef.getConfig().minHeight),f=Db(this._overlayRef.getConfig().minWidth),C=e.fitsInViewportHorizontally||null!=f&&f<=l;return(e.fitsInViewportVertically||null!=u&&u<=i)&&C}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=Eb(t),l=this._viewportRect,u=Math.max(e.x+i.width-l.width,0),f=Math.max(e.y+i.height-l.height,0),_=Math.max(l.top-r.top-e.y,0),C=Math.max(l.left-r.left-e.x,0);let I=0,A=0;return I=i.width<=l.width?C||-u:e.x<this._viewportMargin?l.left-r.left-e.x:0,A=i.height<=l.height?_||-f:e.y<this._viewportMargin?l.top-r.top-e.y:0,this._previousPushAmount={x:I,y:A},{x:e.x+I,y:e.y+A}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new vb(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let l=0;l<t.length;l++)t[l].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let l,u,f,I,A,V;if("top"===t.overlayY)u=e.y,l=r.height-u+this._viewportMargin;else if("bottom"===t.overlayY)f=r.height-e.y+2*this._viewportMargin,l=r.height-f+this._viewportMargin;else{const $=Math.min(r.bottom-e.y+r.top,e.y),K=this._lastBoundingBoxSize.height;l=2*$,u=e.y-$,l>K&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.y-K/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)V=r.width-e.x+this._viewportMargin,I=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)A=e.x,I=r.right-e.x;else{const $=Math.min(r.right-e.x+r.left,e.x),K=this._lastBoundingBoxSize.width;I=2*$,A=e.x-$,I>K&&!this._isInitialRender&&!this._growAfterOpen&&(A=e.x-K/2)}return{top:u,left:A,bottom:f,right:V,width:I,height:l}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const l=this._overlayRef.getConfig().maxHeight,u=this._overlayRef.getConfig().maxWidth;i.height=ur(r.height),i.top=ur(r.top),i.bottom=ur(r.bottom),i.width=ur(r.width),i.left=ur(r.left),i.right=ur(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",l&&(i.maxHeight=ur(l)),u&&(i.maxWidth=ur(u))}this._lastBoundingBoxSize=r,Rl(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Rl(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Rl(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),l=this._hasFlexibleDimensions,u=this._overlayRef.getConfig();if(i){const I=this._viewportRuler.getViewportScrollPosition();Rl(r,this._getExactOverlayY(t,e,I)),Rl(r,this._getExactOverlayX(t,e,I))}else r.position="static";let f="",_=this._getOffset(t,"x"),C=this._getOffset(t,"y");_&&(f+=`translateX(${_}px) `),C&&(f+=`translateY(${C}px)`),r.transform=f.trim(),u.maxHeight&&(i?r.maxHeight=ur(u.maxHeight):l&&(r.maxHeight="")),u.maxWidth&&(i?r.maxWidth=ur(u.maxWidth):l&&(r.maxWidth="")),Rl(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},l=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(l=this._pushOverlayOnScreen(l,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(l.y+this._overlayRect.height)+"px":i.top=ur(l.y),i}_getExactOverlayX(e,t,r){let u,i={left:"",right:""},l=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(l=this._pushOverlayOnScreen(l,this._overlayRect,r)),u=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===u?i.right=this._document.documentElement.clientWidth-(l.x+this._overlayRect.width)+"px":i.left=ur(l.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Xp(e,r),isOriginOutsideView:Qp(e,r),isOverlayClipped:Xp(t,r),isOverlayOutsideView:Qp(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Wu(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof s.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Rl(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Db(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(so);return t&&"px"!==t?null:parseFloat(e)}return n||null}function Eb(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Ib=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}],WI=[{originX:"end",originY:"top",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"start",overlayY:"bottom"},{originX:"start",originY:"top",overlayX:"end",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"end",overlayY:"bottom"}],ey="cdk-global-overlay-wrapper";class YI{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(ey),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:l,maxWidth:u,maxHeight:f}=r,_=!("100%"!==i&&"100vw"!==i||u&&"100%"!==u&&"100vw"!==u),C=!("100%"!==l&&"100vh"!==l||f&&"100%"!==f&&"100vh"!==f),I=this._xPosition,A=this._xOffset,V="rtl"===this._overlayRef.getConfig().direction;let $="",K="",we="";_?we="flex-start":"center"===I?(we="center",V?K=A:$=A):V?"left"===I||"end"===I?(we="flex-end",$=A):("right"===I||"start"===I)&&(we="flex-start",K=A):"left"===I||"start"===I?(we="flex-start",$=A):("right"===I||"end"===I)&&(we="flex-end",K=A),e.position=this._cssPosition,e.marginLeft=_?"0":$,e.marginTop=C?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=_?"0":K,t.justifyContent=we,t.alignItems=C?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(ey),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let KI=(()=>{class n{constructor(t,r,i,l){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=l}global(){return new YI}flexibleConnectedTo(t){return new qI(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Qu),s.LFG(se),s.LFG(Ms),s.LFG(Uh))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JI=0,kt=(()=>{class n{constructor(t,r,i,l,u,f,_,C,I,A,V,$){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=l,this._keyboardDispatcher=u,this._injector=f,this._ngZone=_,this._document=C,this._directionality=I,this._location=A,this._outsideClickDispatcher=V,this._animationsModuleType=$}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),l=this._createPortalOutlet(i),u=new Vh(t);return u.direction=u.direction||this._directionality.value,new X_(l,r,i,u,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+JI++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(s.z2F)),new mb(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG($I),s.LFG(Uh),s.LFG(s._Vd),s.LFG(KI),s.LFG(wb),s.LFG(s.zs3),s.LFG(s.R0b),s.LFG(se),s.LFG(Va),s.LFG(Pe),s.LFG(GI),s.LFG(s.QbO,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Tb={provide:new s.OlP("cdk-connected-overlay-scroll-strategy"),deps:[kt],useFactory:function eS(n){return()=>n.scrollStrategies.reposition()}};let Ab=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[kt,Tb],imports:[ab,Yp,q_,q_]}),n})();const eg=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var rS=N(9672);function $c(...n){const e=(0,zn.yG)(n),t=(0,zn.jO)(n),{args:r,keys:i}=ju(n);if(0===r.length)return(0,rn.D)([],e);const l=new Mn.y(function Mb(n,e,t=kn.y){return r=>{Pl(e,()=>{const{length:i}=n,l=new Array(i);let u=i,f=i;for(let _=0;_<i;_++)Pl(e,()=>{const C=(0,rn.D)(n[_],e);let I=!1;C.subscribe((0,En.x)(r,A=>{l[_]=A,I||(I=!0,f--),f||r.next(t(l.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>Ri(i,u):kn.y));return t?l.pipe(to(t)):l}function Pl(n,e,t){n?(0,rS.f)(t,n,e):e()}function Bh(n){return new Mn.y(e=>{(0,gr.Xf)(n()).subscribe(e)})}var ty=N(9635);function jh(){return(0,E.e)((n,e)=>{let t=null;n._refCount++;const r=(0,En.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,l=t;t=null,i&&(!l||i===l)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ny extends Mn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,E.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new As.w0;const t=this.getSubject();e.add(this.source.subscribe((0,En.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=As.w0.EMPTY)}return e}refCount(){return jh()(this)}}function mr(n,e){return(0,E.e)((t,r)=>{let i=null,l=0,u=!1;const f=()=>u&&!i&&r.complete();t.subscribe((0,En.x)(r,_=>{i?.unsubscribe();let C=0;const I=l++;(0,gr.Xf)(n(_,I)).subscribe(i=(0,En.x)(r,A=>r.next(e?e(_,A,I,C++):A),()=>{i=null,f()}))},()=>{u=!0,f()}))})}function iS(n=NO){return(0,E.e)((e,t)=>{let r=!1;e.subscribe((0,En.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function NO(){return new eg}function Ha(n,e){const t=arguments.length>=2;return r=>r.pipe(n?S((i,l)=>n(i,l,r)):kn.y,W(1),t?Ze(e):iS(()=>new eg))}function $a(n,e){return(0,zr.m)(e)?(0,_e.z)(n,e,1):(0,_e.z)(n,1)}function FO(n,e,t,r,i){return(l,u)=>{let f=t,_=e,C=0;l.subscribe((0,En.x)(u,I=>{const A=C++;_=f?n(_,I,A):(f=!0,I),r&&u.next(_)},i&&(()=>{f&&u.next(_),u.complete()})))}}function Hh(n,e){return(0,E.e)(FO(n,e,arguments.length>=2,!0))}function Nl(n){return n<=0?()=>rs.E:(0,E.e)((e,t)=>{let r=[];e.subscribe((0,En.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function kb(n,e){const t=arguments.length>=2;return r=>r.pipe(n?S((i,l)=>n(i,l,r)):kn.y,Nl(1),t?Ze(e):iS(()=>new eg))}function Zc(n){return(0,We.U)(()=>n)}function ry(n){return(0,E.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Wt="primary",$h=Symbol("RouteTitle");class sS{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Xu(n){return new sS(n)}function oS(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let l=0;l<r.length;l++){const u=r[l],f=n[l];if(u.startsWith(":"))i[u.substring(1)]=f;else if(u!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function oo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let l=0;l<t.length;l++)if(i=t[l],!Ob(n[i],e[i]))return!1;return!0}function Ob(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,l)=>r[l]===i)}return n===e}function iy(n){return Array.prototype.concat.apply([],n)}function sy(n){return n.length>0?n[n.length-1]:null}function ai(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Jo(n){return(0,s.CqO)(n)?n:(0,s.QGY)(n)?(0,rn.D)(Promise.resolve(n)):ze(n)}const ed={exact:function ks(n,e,t){if(!Fl(n.segments,e.segments)||!xs(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ks(n.children[r],e.children[r],t))return!1;return!0},subset:Nb},ay={exact:function tg(n,e){return oo(n,e)},subset:function Pb(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ob(n[t],e[t]))},ignored:()=>!0};function ly(n,e,t){return ed[t.paths](n.root,e.root,t.matrixParams)&&ay[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Nb(n,e,t){return ng(n,e,e.segments,t)}function ng(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Fl(i,t)||e.hasChildren()||!xs(i,t,r))}if(n.segments.length===t.length){if(!Fl(n.segments,t)||!xs(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Nb(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(Fl(n.segments,i)&&xs(n.segments,i,r)&&n.children[Wt])&&ng(n.children[Wt],e,l,r)}}function xs(n,e,t){return e.every((r,i)=>ay[t](n[i].parameters,r.parameters))}class Za{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xu(this.queryParams)),this._queryParamMap}toString(){return cy.serialize(this)}}class Jt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ai(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nd(this)}}class zc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Xu(this.parameters)),this._parameterMap}toString(){return uS(this)}}function Fl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Zh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return new td},providedIn:"root"}),n})();class td{parse(e){const t=new $O(e);return new Za(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Gc(e.root,!0)}`,r=function BO(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${rg(t)}=${rg(i)}`).join("&"):`${rg(t)}=${rg(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function cS(n){return encodeURI(n)}(e.fragment)}`:""}`}}const cy=new td;function nd(n){return n.segments.map(e=>uS(e)).join("/")}function Gc(n,e){if(!n.hasChildren())return nd(n);if(e){const t=n.children[Wt]?Gc(n.children[Wt],!1):"",r=[];return ai(n.children,(i,l)=>{l!==Wt&&r.push(`${l}:${Gc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function UO(n,e){let t=[];return ai(n.children,(r,i)=>{i===Wt&&(t=t.concat(e(r,i)))}),ai(n.children,(r,i)=>{i!==Wt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Wt?[Gc(n.children[Wt],!1)]:[`${i}:${Gc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Wt]?`${nd(n)}/${t[0]}`:`${nd(n)}/(${t.join("//")})`}}function lS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rg(n){return lS(n).replace(/%3B/gi,";")}function uy(n){return lS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ig(n){return decodeURIComponent(n)}function dy(n){return ig(n.replace(/\+/g,"%20"))}function uS(n){return`${uy(n.path)}${function dS(n){return Object.keys(n).map(e=>`;${uy(e)}=${uy(n[e])}`).join("")}(n.parameters)}`}const Fb=/^[^\/()?;=#]+/;function zh(n){const e=n.match(Fb);return e?e[0]:""}const hS=/^[^=?&#]+/,jO=/^[^&#]+/;class $O{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jt([],{}):new Jt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Wt]=new Jt(e,t)),r}parseSegment(){const e=zh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new s.vHH(4009,!1);return this.capture(e),new zc(ig(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=zh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=zh(this.remaining);i&&(r=i,this.capture(r))}e[ig(t)]=ig(r)}parseQueryParam(e){const t=function hy(n){const e=n.match(hS);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function HO(n){const e=n.match(jO);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=dy(t),l=dy(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(l)}else e[i]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=zh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new s.vHH(4010,!1);let l;r.indexOf(":")>-1?(l=r.slice(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=Wt);const u=this.parseChildren();t[l]=1===Object.keys(u).length?u[Wt]:new Jt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new s.vHH(4011,!1)}}function Lb(n){return n.segments.length>0?new Jt([],{[Wt]:n}):n}function fy(n){const e={};for(const r of Object.keys(n.children)){const l=fy(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function ZO(n){if(1===n.numberOfChildren&&n.children[Wt]){const e=n.children[Wt];return new Jt(n.segments.concat(e.segments),e.children)}return n}(new Jt(n.segments,e))}function rd(n){return n instanceof Za}function py(n,e,t,r,i){if(0===t.length)return Vl(e.root,e.root,e.root,r,i);const l=function Ub(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new sg(!0,0,n);let e=0,t=!1;const r=n.reduce((i,l,u)=>{if("object"==typeof l&&null!=l){if(l.outlets){const f={};return ai(l.outlets,(_,C)=>{f[C]="string"==typeof _?_.split("/"):_}),[...i,{outlets:f}]}if(l.segmentPath)return[...i,l.segmentPath]}return"string"!=typeof l?[...i,l]:0===u?(l.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,l]},[]);return new sg(t,e,r)}(t);return l.toRoot()?Vl(e.root,e.root,new Jt([],{}),r,i):function u(_){const C=function fS(n,e,t,r){if(n.isAbsolute)return new ls(e.root,!0,0);if(-1===r)return new ls(t,t===e.root,0);return function jb(n,e,t){let r=n,i=e,l=t;for(;l>i;){if(l-=i,r=r.parent,!r)throw new s.vHH(4005,!1);i=r.segments.length}return new ls(r,!1,i-l)}(t,r+(Gh(n.commands[0])?0:1),n.numberOfDoubleDots)}(l,e,n.snapshot?._urlSegment,_),I=C.processChildren?qh(C.segmentGroup,C.index,l.commands):my(C.segmentGroup,C.index,l.commands);return Vl(e.root,C.segmentGroup,I,r,i)}(n.snapshot?._lastPathIndex)}function Gh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function id(n){return"object"==typeof n&&null!=n&&n.outlets}function Vl(n,e,t,r,i){let u,l={};r&&ai(r,(_,C)=>{l[C]=Array.isArray(_)?_.map(I=>`${I}`):`${_}`}),u=n===e?t:gy(n,e,t);const f=Lb(fy(u));return new Za(f,l,i)}function gy(n,e,t){const r={};return ai(n.children,(i,l)=>{r[l]=i===e?t:gy(i,e,t)}),new Jt(n.segments,r)}class sg{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Gh(r[0]))throw new s.vHH(4003,!1);const i=r.find(id);if(i&&i!==sy(r))throw new s.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ls{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function my(n,e,t){if(n||(n=new Jt([],{})),0===n.segments.length&&n.hasChildren())return qh(n,e,t);const r=function og(n,e,t){let r=0,i=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return l;const u=n.segments[i],f=t[r];if(id(f))break;const _=`${f}`,C=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&C&&"object"==typeof C&&void 0===C.outlets){if(!ag(_,C,u))return l;r+=2}else{if(!ag(_,{},u))return l;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new Jt(n.segments.slice(0,r.pathIndex),{});return l.children[Wt]=new Jt(n.segments.slice(r.pathIndex),n.children),qh(l,0,i)}return r.match&&0===i.length?new Jt(n.segments,{}):r.match&&!n.hasChildren()?Ul(n,e,t):r.match?qh(n,0,i):Ul(n,e,t)}function qh(n,e,t){if(0===t.length)return new Jt(n.segments,{});{const r=function Hb(n){return id(n[0])?n[0].outlets:{[Wt]:n}}(t),i={};return ai(r,(l,u)=>{"string"==typeof l&&(l=[l]),null!==l&&(i[u]=my(n.children[u],e,l))}),ai(n.children,(l,u)=>{void 0===r[u]&&(i[u]=l)}),new Jt(n.segments,i)}}function Ul(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const l=t[i];if(id(l)){const _=_y(l.outlets);return new Jt(r,_)}if(0===i&&Gh(t[0])){r.push(new zc(n.segments[e].path,qc(t[0]))),i++;continue}const u=id(l)?l.outlets[Wt]:`${l}`,f=i<t.length-1?t[i+1]:null;u&&f&&Gh(f)?(r.push(new zc(u,qc(f))),i+=2):(r.push(new zc(u,{})),i++)}return new Jt(r,{})}function _y(n){const e={};return ai(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ul(new Jt([],{}),0,t))}),e}function qc(n){const e={};return ai(n,(t,r)=>e[r]=`${t}`),e}function ag(n,e,t){return n==t.path&&oo(e,t.parameters)}class Os{constructor(e,t){this.id=e,this.url=t}}class lg extends Os{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bl extends Os{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class sd extends Os{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class cg extends Os{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $b extends Os{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yy extends Os{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pS extends Os{constructor(e,t,r,i,l){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=l,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class GO extends Os{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gS extends Os{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zb{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mS{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zb{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gb{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _S{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cs{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vy{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class vS{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Cy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Cy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Wh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Wh(e,this._root).map(t=>t.value)}}function Cy(n,e){if(n===e.value)return e;for(const t of e.children){const r=Cy(n,t);if(r)return r}return null}function Wh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Wh(n,t);if(r.length)return r.unshift(e),r}return[]}class Qo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function od(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class qb extends vS{constructor(e,t){super(e),this.snapshot=t,dg(this,e)}toString(){return this.snapshot.toString()}}function Wb(n,e){const t=function Yb(n,e){const u=new ug([],{},{},"",{},Wt,e,null,n.root,-1,{});return new by("",new Qo(u,[]))}(n,e),r=new Pn([new zc("",{})]),i=new Pn({}),l=new Pn({}),u=new Pn({}),f=new Pn(""),_=new Xo(r,i,u,f,l,Wt,e,t.root);return _.snapshot=t.root,new qb(new Qo(_,[]),t)}class Xo{constructor(e,t,r,i,l,u,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=u,this.component=f,this.title=this.data?.pipe((0,We.U)(C=>C[$h]))??ze(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,We.U)(e=>Xu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,We.U)(e=>Xu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function wy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],l=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(l.component)break;r--}}return function CS(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ug{constructor(e,t,r,i,l,u,f,_,C,I,A,V){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=u,this.component=f,this.title=this.data?.[$h],this.routeConfig=_,this._urlSegment=C,this._lastPathIndex=I,this._correctedLastPathIndex=V??I,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Xu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class by extends vS{constructor(e,t){super(t),this.url=e,dg(this,t)}toString(){return Kb(this._root)}}function dg(n,e){e.value._routerState=n,e.children.forEach(t=>dg(n,t))}function Kb(n){const e=n.children.length>0?` { ${n.children.map(Kb).join(", ")} } `:"";return`${n.value}${e}`}function Rs(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,oo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),oo(e.params,t.params)||n.params.next(t.params),function aS(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!oo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),oo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Yh(n,e){const t=oo(n.params,e.params)&&function VO(n,e){return Fl(n,e)&&n.every((t,r)=>oo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Yh(n.parent,e.parent))}function Kh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function qO(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Kh(n,r,i);return Kh(n,r)})}(n,e,t);return new Qo(r,i)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const u=l.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(f=>Kh(n,f)),u}}const r=function Jb(n){return new Xo(new Pn(n.url),new Pn(n.params),new Pn(n.queryParams),new Pn(n.fragment),new Pn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(l=>Kh(n,l));return new Qo(r,i)}}const Dy="ngNavigationCancelingError";function Qb(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=rd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Xb(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Xb(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Dy]=!0,r.cancellationCode=e,t&&(r.url=t),r}function hg(n){return e0(n)&&rd(n.url)}function e0(n){return n&&n[Dy]}class bS{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new jl,this.attachRef=null}}let jl=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new bS,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ad=!1;let Wc=(()=>{class n{constructor(t,r,i,l,u){this.parentContexts=t,this.location=r,this.changeDetector=l,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new s.vpe,this.deactivateEvents=new s.vpe,this.attachEvents=new s.vpe,this.detachEvents=new s.vpe,this.name=i||Wt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new s.vHH(4012,ad);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new s.vHH(4012,ad);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new s.vHH(4012,ad);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new s.vHH(4013,ad);this._activatedRoute=t;const i=this.location,u=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,_=new WO(t,f,i.injector);if(r&&function Ey(n){return!!n.resolveComponentFactory}(r)){const C=r.resolveComponentFactory(u);this.activated=i.createComponent(C,i.length,_)}else this.activated=i.createComponent(u,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(jl),s.Y36(s.s_b),s.$8M("name"),s.Y36(s.sBO),s.Y36(s.lqb))},n.\u0275dir=s.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class WO{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Xo?this.route:e===jl?this.childContexts:this.parent.get(e,t)}}let t0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[s.jDz],decls:1,vars:0,template:function(t,r){1&t&&s._UZ(0,"router-outlet")},dependencies:[Wc],encapsulation:2}),n})();function Iy(n,e){return n.providers&&!n._injector&&(n._injector=(0,s.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Sy(n){const e=n.children&&n.children.map(Sy),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Wt&&(t.component=t0),t}function Fi(n){return n.outlet||Wt}function Ty(n,e){const t=n.filter(r=>Fi(r)===e);return t.push(...n.filter(r=>Fi(r)!==e)),t}function Qh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Xh{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Rs(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=od(t);e.children.forEach(l=>{const u=l.value.outlet;this.deactivateRoutes(l,i[u],r),delete i[u]}),ai(i,(l,u)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const i=e.value,l=t?t.value:null;if(i===l)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,l=od(e);for(const u of Object.keys(l))this.deactivateRouteAndItsChildren(l[u],i);if(r&&r.outlet){const u=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,l=od(e);for(const u of Object.keys(l))this.deactivateRouteAndItsChildren(l[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=od(t);e.children.forEach(l=>{this.activateRoutes(l,i[l.value.outlet],r),this.forwardEvent(new cs(l.value.snapshot))}),e.children.length&&this.forwardEvent(new Gb(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,l=t?t.value:null;if(Rs(i),i===l)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(f.contexts),u.attachRef=f.componentRef,u.route=f.route.value,u.outlet&&u.outlet.attach(f.componentRef,f.route.value),Rs(f.route.value),this.activateChildRoutes(e,null,u.children)}else{const f=Qh(i.snapshot),_=f?.get(s._Vd)??null;u.attachRef=null,u.route=i,u.resolver=_,u.injector=f,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class r0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ay{constructor(e,t){this.component=e,this.route=t}}function TS(n,e,t){const r=n._root;return ef(r,e?e._root:null,t,[r.value])}function ld(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,s.Z0I)(n)?e.get(n):n:r}function ef(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=od(e);return n.children.forEach(u=>{(function AS(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,u=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(u&&l.routeConfig===u.routeConfig){const _=function s0(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Fl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Fl(n.url,e.url)||!oo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yh(n,e)||!oo(n.queryParams,e.queryParams);default:return!Yh(n,e)}}(u,l,l.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new r0(r)):(l.data=u.data,l._resolvedData=u._resolvedData),ef(n,e,l.component?f?f.children:null:t,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Ay(f.outlet.component,u))}else u&&Yc(e,f,i),i.canActivateChecks.push(new r0(r)),ef(n,null,l.component?f?f.children:null:t,r,i)})(u,l[u.value.outlet],t,r.concat([u.value]),i),delete l[u.value.outlet]}),ai(l,(u,f)=>Yc(u,t.getContext(f),i)),i}function Yc(n,e,t){const r=od(n),i=n.value;ai(r,(l,u)=>{Yc(l,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Ay(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function tf(n){return"function"==typeof n}function za(n){return n instanceof eg||"EmptyError"===n?.name}const ky=Symbol("INITIAL_VALUE");function ea(){return mr(n=>$c(n.map(e=>e.pipe(W(1),er(ky)))).pipe((0,We.U)(e=>{for(const t of e)if(!0!==t){if(t===ky)return ky;if(!1===t||t instanceof Za)return t}return!0}),S(e=>e!==ky),W(1)))}function us(n){return(0,ty.z)((0,hn.b)(e=>{if(rd(e))throw Qb(0,e)}),(0,We.U)(e=>!0===e))}const Hl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Jc(n,e,t,r,i){const l=$l(n,e,t);return l.matched?function Oy(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ze(i.map(u=>{const f=ld(u,n);return Jo(function RS(n){return n&&tf(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(ea(),us()):ze(!0)}(r=Iy(e,r),e,t).pipe((0,We.U)(u=>!0===u?l:{...Hl})):ze(l)}function $l(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Hl}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||oS)(t,n,e);if(!i)return{...Hl};const l={};ai(i.posParams,(f,_)=>{l[_]=f.path});const u=i.consumed.length>0?{...l,...i.consumed[i.consumed.length-1].parameters}:l;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function Ga(n,e,t,r,i="corrected"){if(t.length>0&&function dd(n,e,t){return t.some(r=>qa(n,e,r)&&Fi(r)!==Wt)}(n,t,r)){const u=new Jt(e,function ud(n,e,t,r){const i={};i[Wt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Fi(l)!==Wt){const u=new Jt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[Fi(l)]=u}return i}(n,e,r,new Jt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function hd(n,e,t){return t.some(r=>qa(n,e,r))}(n,t,r)){const u=new Jt(n.segments,function cd(n,e,t,r,i,l){const u={};for(const f of r)if(qa(n,t,f)&&!i[Fi(f)]){const _=new Jt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===l?n.segments.length:e.length,u[Fi(f)]=_}return{...i,...u}}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const l=new Jt(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function qa(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ry(n,e,t,r){return!!(Fi(n)===r||r!==Wt&&qa(e,t,n))&&("**"===n.path||$l(e,n,t).matched)}function Py(n,e,t){return 0===e.length&&!n.children[t]}const rf=!1;class sf{constructor(e){this.segmentGroup=e||null}}class Ny{constructor(e){this.urlTree=e}}function fd(n){return vi(new sf(n))}function Fy(n){return vi(new Ny(n))}class VS{constructor(e,t,r,i,l){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=l,this.allowRedirects=!0}apply(){const e=Ga(this.urlTree.root,[],[],this.config).segmentGroup,t=new Jt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Wt).pipe((0,We.U)(l=>this.createUrlTree(fy(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ut(l=>{if(l instanceof Ny)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof sf?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Wt).pipe((0,We.U)(i=>this.createUrlTree(fy(i),e.queryParams,e.fragment))).pipe(ut(i=>{throw i instanceof sf?this.noMatchError(i):i}))}noMatchError(e){return new s.vHH(4002,rf)}createUrlTree(e,t,r){const i=Lb(e);return new Za(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,We.U)(l=>new Jt([],l))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const l of Object.keys(r.children))"primary"===l?i.unshift(l):i.push(l);return(0,rn.D)(i).pipe($a(l=>{const u=r.children[l],f=Ty(t,l);return this.expandSegmentGroup(e,f,u,l).pipe((0,We.U)(_=>({segment:_,outlet:l})))}),Hh((l,u)=>(l[u.outlet]=u.segment,l),{}),kb())}expandSegment(e,t,r,i,l,u){return(0,rn.D)(r).pipe($a(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,l,u).pipe(ut(C=>{if(C instanceof sf)return ze(null);throw C}))),Ha(f=>!!f),ut((f,_)=>{if(za(f))return Py(t,i,l)?ze(new Jt([],{})):fd(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,l,u,f){return Ry(i,t,l,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,l,u):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,l,u):fd(t):fd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,l,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,l,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Fy(l):this.lineralizeSegments(r,l).pipe((0,_e.z)(u=>{const f=new Jt(u,{});return this.expandSegment(e,f,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,l,u){const{matched:f,consumedSegments:_,remainingSegments:C,positionalParamSegments:I}=$l(t,i,l);if(!f)return fd(t);const A=this.applyRedirectCommands(_,i.redirectTo,I);return i.redirectTo.startsWith("/")?Fy(A):this.lineralizeSegments(i,A).pipe((0,_e.z)(V=>this.expandSegment(e,t,r,V.concat(C),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,l){return"**"===r.path?(e=Iy(r,e),r.loadChildren?(r._loadedRoutes?ze({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,We.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new Jt(i,{})))):ze(new Jt(i,{}))):Jc(t,r,i,e).pipe(mr(({matched:u,consumedSegments:f,remainingSegments:_})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,_e.z)(I=>{const A=I.injector??e,V=I.routes,{segmentGroup:$,slicedSegments:K}=Ga(t,f,_,V),we=new Jt($.segments,$.children);if(0===K.length&&we.hasChildren())return this.expandChildren(A,V,we).pipe((0,We.U)(xt=>new Jt(f,xt)));if(0===V.length&&0===K.length)return ze(new Jt(f,{}));const Ce=Fi(r)===l;return this.expandSegment(A,we,V,K,Ce?Wt:l,!0).pipe((0,We.U)(St=>new Jt(f.concat(St.segments),St.children)))})):fd(t)))}getChildConfig(e,t,r){return t.children?ze({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ze({routes:t._loadedRoutes,injector:t._loadedInjector}):function mg(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ze(!0):ze(i.map(u=>{const f=ld(u,n);return Jo(function MS(n){return n&&tf(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(ea(),us())}(e,t,r).pipe((0,_e.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,hn.b)(l=>{t._loadedRoutes=l.routes,t._loadedInjector=l.injector})):function a0(n){return vi(Xb(rf,3))}())):ze({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ze(r);if(i.numberOfChildren>1||!i.children[Wt])return vi(new s.vHH(4e3,rf));i=i.children[Wt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const l=this.createSegmentGroup(e,t.root,r,i);return new Za(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ai(e,(i,l)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[l]=t[f]}else r[l]=i}),r}createSegmentGroup(e,t,r,i){const l=this.createSegments(e,t.segments,r,i);let u={};return ai(t.children,(f,_)=>{u[_]=this.createSegmentGroup(e,f,r,i)}),new Jt(l,u)}createSegments(e,t,r,i){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,i):this.findOrReturn(l,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new s.vHH(4001,rf);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class c0{}class US{constructor(e,t,r,i,l,u,f,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=l,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=f,this.urlSerializer=_}recognize(){const e=Ga(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Wt).pipe((0,We.U)(t=>{if(null===t)return null;const r=new ug([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Wt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Qo(r,t),l=new by(this.url,i);return this.inheritParamsAndData(l._root),l}))}inheritParamsAndData(e){const t=e.value,r=wy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,rn.D)(Object.keys(r.children)).pipe($a(i=>{const l=r.children[i],u=Ty(t,i);return this.processSegmentGroup(e,u,l,i)}),Hh((i,l)=>i&&l?(i.push(...l),i):null),function xb(n,e=!1){return(0,E.e)((t,r)=>{let i=0;t.subscribe((0,En.x)(r,l=>{const u=n(l,i++);(u||e)&&r.next(l),!u&&r.complete()}))})}(i=>null!==i),Ze(null),kb(),(0,We.U)(i=>{if(null===i)return null;const l=u0(i);return function yg(n){n.sort((e,t)=>e.value.outlet===Wt?-1:t.value.outlet===Wt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),l}))}processSegment(e,t,r,i,l){return(0,rn.D)(t).pipe($a(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,l)),Ha(u=>!!u),ut(u=>{if(za(u))return Py(r,i,l)?ze([]):ze(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,l){if(t.redirectTo||!Ry(t,r,i,l))return ze(null);let u;if("**"===t.path){const f=i.length>0?sy(i).parameters:{},_=wg(r)+i.length;u=ze({snapshot:new ug(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,bg(t),Fi(t),t.component??t._loadedComponent??null,t,af(r),_,jy(t),_),consumedSegments:[],remainingSegments:[]})}else u=Jc(r,t,i,e).pipe((0,We.U)(({matched:f,consumedSegments:_,remainingSegments:C,parameters:I})=>{if(!f)return null;const A=wg(r)+_.length;return{snapshot:new ug(_,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,bg(t),Fi(t),t.component??t._loadedComponent??null,t,af(r),A,jy(t),A),consumedSegments:_,remainingSegments:C}}));return u.pipe(mr(f=>{if(null===f)return ze(null);const{snapshot:_,consumedSegments:C,remainingSegments:I}=f;e=t._injector??e;const A=t._loadedInjector??e,V=function vg(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:$,slicedSegments:K}=Ga(r,C,I,V.filter(Ce=>void 0===Ce.redirectTo),this.relativeLinkResolution);if(0===K.length&&$.hasChildren())return this.processChildren(A,V,$).pipe((0,We.U)(Ce=>null===Ce?null:[new Qo(_,Ce)]));if(0===V.length&&0===K.length)return ze([new Qo(_,[])]);const we=Fi(t)===l;return this.processSegment(A,V,$,K,we?Wt:l).pipe((0,We.U)(Ce=>null===Ce?null:[new Qo(_,Ce)]))}))}}function Uy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function u0(n){const e=[],t=new Set;for(const r of n){if(!Uy(r)){e.push(r);continue}const i=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=u0(r.children);e.push(new Qo(r.value,i))}return e.filter(r=>!t.has(r))}function af(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function wg(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function bg(n){return n.data||{}}function jy(n){return n.resolve||{}}function $y(n){return"string"==typeof n.title||null===n.title}function Dg(n){return mr(e=>{const t=n(e);return t?(0,rn.D)(t).pipe((0,We.U)(()=>e)):ze(e)})}let g0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(l=>l.outlet===Wt);return r}getResolvedTitleForRoute(t){return t.data[$h]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return(0,s.f3M)(Zy)},providedIn:"root"}),n})(),Zy=(()=>{class n extends g0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(ki))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class zy{}class m0 extends class Eg{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const lf=new s.OlP("",{providedIn:"root",factory:()=>({})}),Ig=new s.OlP("ROUTES");let Sg=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ze(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Jo(t.loadComponent()).pipe((0,hn.b)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=l}),ry(()=>{this.componentLoaders.delete(t)})),i=new ny(r,()=>new ct.x).pipe(jh());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ze({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const l=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,We.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,C,I=!1;Array.isArray(f)?C=f:(_=f.create(t).injector,C=iy(_.get(Ig,[],s.XFs.Self|s.XFs.Optional)));return{routes:C.map(Sy),injector:_}}),ry(()=>{this.childrenLoaders.delete(r)})),u=new ny(l,()=>new ct.x).pipe(jh());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return Jo(t()).pipe((0,_e.z)(r=>r instanceof s.YKP||Array.isArray(r)?ze(r):(0,rn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(s.zs3),s.LFG(s.Sil))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class y0{}class v0{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function HS(n){throw n}function $S(n,e,t){return e.parse("/")}const C0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ZS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Wy(){const n=(0,s.f3M)(Zh),e=(0,s.f3M)(jl),t=(0,s.f3M)(Pe),r=(0,s.f3M)(s.zs3),i=(0,s.f3M)(s.Sil),l=(0,s.f3M)(Ig,{optional:!0})??[],u=(0,s.f3M)(lf,{optional:!0})??{},f=(0,s.f3M)(Zy),_=(0,s.f3M)(g0,{optional:!0}),C=(0,s.f3M)(y0,{optional:!0}),I=(0,s.f3M)(zy,{optional:!0}),A=new _r(null,n,e,t,r,i,iy(l));return C&&(A.urlHandlingStrategy=C),I&&(A.routeReuseStrategy=I),A.titleStrategy=_??f,function Tr(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,A),A}let _r=(()=>{class n{constructor(t,r,i,l,u,f,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=l,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ct.x,this.errorHandler=HS,this.malformedUriErrorHandler=$S,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ze(void 0),this.urlHandlingStrategy=new v0,this.routeReuseStrategy=new m0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(Sg),this.configLoader.onLoadEndListener=V=>this.triggerEvent(new mS(V)),this.configLoader.onLoadStartListener=V=>this.triggerEvent(new Zb(V)),this.ngModule=u.get(s.h0i),this.console=u.get(s.c2e);const A=u.get(s.R0b);this.isNgZoneEnabled=A instanceof s.R0b&&s.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function LO(){return new Za(new Jt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Wb(this.currentUrlTree,this.rootComponentType),this.transitions=new Pn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(S(i=>0!==i.id),(0,We.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),mr(i=>{let l=!1,u=!1;return ze(i).pipe((0,hn.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),mr(f=>{const _=this.browserUrlTree.toString(),C=!this.navigated||f.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return Yy(f.source)&&(this.browserUrlTree=f.extractedUrl),ze(f).pipe(mr(A=>{const V=this.transitions.getValue();return r.next(new lg(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),V!==this.transitions.getValue()?rs.E:Promise.resolve(A)}),function l0(n,e,t,r){return mr(i=>function LS(n,e,t,r,i){return new VS(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,We.U)(l=>({...i,urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,hn.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},i.urlAfterRedirects=A.urlAfterRedirects}),function d0(n,e,t,r,i,l){return(0,_e.z)(u=>function Vy(n,e,t,r,i,l,u="emptyOnly",f="legacy"){return new US(n,e,t,r,i,u,f,l).recognize().pipe(mr(_=>null===_?function Ly(n){return new Mn.y(e=>e.error(n))}(new c0):ze(_)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i,l).pipe((0,We.U)(f=>({...u,targetSnapshot:f}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,hn.b)(A=>{if(i.targetSnapshot=A.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const $=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl($,A)}this.browserUrlTree=A.urlAfterRedirects}const V=new $b(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(V)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:$,source:K,restoredState:we,extras:Ce}=f,lt=new lg(V,this.serializeUrl($),K,we);r.next(lt);const St=Wb($,this.rootComponentType).snapshot;return ze(i={...f,targetSnapshot:St,urlAfterRedirects:$,extras:{...Ce,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),rs.E}),(0,hn.b)(f=>{const _=new yy(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}),(0,We.U)(f=>i={...f,guards:TS(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),function PS(n,e){return(0,_e.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:l,canDeactivateChecks:u}}=t;return 0===u.length&&0===l.length?ze({...t,guardsResult:!0}):function NS(n,e,t,r){return(0,rn.D)(n).pipe((0,_e.z)(i=>function Kc(n,e,t,r,i){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return l&&0!==l.length?ze(l.map(f=>{const _=Qh(e)??i,C=ld(f,_);return Jo(function OS(n){return n&&tf(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):_.runInContext(()=>C(n,e,t,r))).pipe(Ha())})).pipe(ea()):ze(!0)}(i.component,i.route,t,e,r)),Ha(i=>!0!==i,!0))}(u,r,i,n).pipe((0,_e.z)(f=>f&&function My(n){return"boolean"==typeof n}(f)?function xy(n,e,t,r){return(0,rn.D)(e).pipe($a(i=>Ss(function ta(n,e){return null!==n&&e&&e(new zb(n)),ze(!0)}(i.route.parent,r),function FS(n,e){return null!==n&&e&&e(new _S(n)),ze(!0)}(i.route,r),function li(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(u=>function YO(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>Bh(()=>ze(u.guards.map(_=>{const C=Qh(u.node)??t,I=ld(_,C);return Jo(function xS(n){return n&&tf(n.canActivateChild)}(I)?I.canActivateChild(r,n):C.runInContext(()=>I(r,n))).pipe(Ha())})).pipe(ea())));return ze(l).pipe(ea())}(n,i.path,t),function nf(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ze(!0);const i=r.map(l=>Bh(()=>{const u=Qh(e)??t,f=ld(l,u);return Jo(function kS(n){return n&&tf(n.canActivate)}(f)?f.canActivate(e,n):u.runInContext(()=>f(e,n))).pipe(Ha())}));return ze(i).pipe(ea())}(n,i.route,t))),Ha(i=>!0!==i,!0))}(r,l,n,e):ze(f)),(0,We.U)(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,hn.b)(f=>{if(i.guardsResult=f.guardsResult,rd(f.guardsResult))throw Qb(0,f.guardsResult);const _=new pS(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(_)}),S(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",3),!1)),Dg(f=>{if(f.guards.canActivateChecks.length)return ze(f).pipe((0,hn.b)(_=>{const C=new GO(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(C)}),mr(_=>{let C=!1;return ze(_).pipe(function Hy(n,e){return(0,_e.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ze(t);let l=0;return(0,rn.D)(i).pipe($a(u=>function h0(n,e,t,r){const i=n.routeConfig,l=n._resolve;return void 0!==i?.title&&!$y(i)&&(l[$h]=i.title),function BS(n,e,t,r){const i=function f0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ze({});const l={};return(0,rn.D)(i).pipe((0,_e.z)(u=>function p0(n,e,t,r){const i=Qh(e)??r,l=ld(n,i);return Jo(l.resolve?l.resolve(e,t):i.runInContext(()=>l(e,t)))}(n[u],e,t,r).pipe(Ha(),(0,hn.b)(f=>{l[u]=f}))),Nl(1),Zc(l),ut(u=>za(u)?rs.E:vi(u)))}(l,n,e,r).pipe((0,We.U)(u=>(n._resolvedData=u,n.data=wy(n,t).resolve,i&&$y(i)&&(n.data[$h]=i.title),null)))}(u.route,r,n,e)),(0,hn.b)(()=>l++),Nl(1),(0,_e.z)(u=>l===i.length?ze(t):rs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,hn.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,hn.b)(_=>{const C=new gS(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(C)}))}),Dg(f=>{const _=C=>{const I=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&I.push(this.configLoader.loadComponent(C.routeConfig).pipe((0,hn.b)(A=>{C.component=A}),(0,We.U)(()=>{})));for(const A of C.children)I.push(..._(A));return I};return $c(_(f.targetSnapshot.root)).pipe(Ze(),W(1))}),Dg(()=>this.afterPreactivation()),(0,We.U)(f=>{const _=function wS(n,e,t){const r=Kh(n,e._root,t?t._root:void 0);return new qb(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return i={...f,targetRouterState:_}}),(0,hn.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,We.U)(r=>(new Xh(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,hn.b)({next(){l=!0},complete(){l=!0}}),ry(()=>{l||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),ut(f=>{if(u=!0,e0(f)){hg(f)||(this.navigated=!0,this.restoreHistory(i,!0));const _=new sd(i.id,this.serializeUrl(i.extractedUrl),f.message,f.cancellationCode);if(r.next(_),hg(f)){const C=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),I={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Yy(i.source)};this.scheduleNavigation(C,"imperative",null,I,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new cg(i.id,this.serializeUrl(i.extractedUrl),f,i.targetSnapshot??void 0);r.next(_);try{i.resolve(this.errorHandler(f))}catch(C){i.reject(C)}}return rs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},l=t.state?.navigationId?t.state:null;if(l){const f={...l};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,l,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Sy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:l,fragment:u,queryParamsHandling:f,preserveFragment:_}=r,C=i||this.routerState.root,I=_?this.currentUrlTree.fragment:u;let A=null;switch(f){case"merge":A={...this.currentUrlTree.queryParams,...l};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=l||null}return null!==A&&(A=this.removeEmptyProps(A)),py(C,this.currentUrlTree,t,A,I??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=rd(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function zS(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new s.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...C0}:!1===r?{...ZS}:r,rd(t))return ly(this.currentUrlTree,t,i);const l=this.parseUrl(t);return ly(this.currentUrlTree,l,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const l=t[i];return null!=l&&(r[i]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Bl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,l,u){if(this.disposed)return Promise.resolve(!1);let f,_,C;u?(f=u.resolve,_=u.reject,C=u.promise):C=new Promise((V,$)=>{f=V,_=$});const I=++this.navigationId;let A;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),A=i&&i.\u0275routerPageId?i.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):A=0,this.setTransition({id:I,targetPageId:A,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:f,reject:_,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(V=>Promise.reject(V))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),l={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",l):this.location.go(i,"",l)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const l=new sd(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(l),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){s.$Z()},n.\u0275prov=s.Yz7({token:n,factory:function(){return Wy()},providedIn:"root"}),n})();function Yy(n){return"imperative"!==n}let pd=(()=>{class n{constructor(t,r,i,l,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=l,this.el=u,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ct.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,s.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,s.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,s.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(_r),s.Y36(Xo),s.$8M("tabindex"),s.Y36(s.Qsj),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&s.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[s.TTD]}),n})();class b0{}let qS=(()=>{class n{constructor(t,r,i,l,u){this.router=t,this.injector=i,this.preloadingStrategy=l,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(S(t=>t instanceof Bl),$a(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const l of r){l.providers&&!l._injector&&(l._injector=(0,s.MMx)(l.providers,t,`Route: ${l.path}`));const u=l._injector??t,f=l._loadedInjector??u;l.loadChildren&&!l._loadedRoutes&&void 0===l.canLoad||l.loadComponent&&!l._loadedComponent?i.push(this.preloadConfig(u,l)):(l.children||l._loadedRoutes)&&i.push(this.processRoutes(f,l.children??l._loadedRoutes))}return(0,rn.D)(i).pipe((0,cr.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ze(null);const l=i.pipe((0,_e.z)(u=>null===u?ze(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,rn.D)([l,u]).pipe((0,cr.J)())}return l})}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(_r),s.LFG(s.Sil),s.LFG(s.lqb),s.LFG(b0),s.LFG(Sg))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ag=new s.OlP("");let WS=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof lg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vy&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new vy(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){s.$Z()},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();function _d(n,e){return{\u0275kind:n,\u0275providers:e}}function Mg(n){return[{provide:Ig,multi:!0,useValue:n}]}function Ps(){const n=(0,s.f3M)(s.zs3);return e=>{const t=n.get(s.z2F);if(e!==t.components[0])return;const r=n.get(_r),i=n.get(Ns);1===n.get(kg)&&r.initialNavigation(),n.get(I0,null,s.XFs.Optional)?.setUpPreloading(),n.get(Ag,null,s.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const Ns=new s.OlP("",{factory:()=>new ct.x}),kg=new s.OlP("",{providedIn:"root",factory:()=>1});const I0=new s.OlP("");function JS(n){return _d(0,[{provide:I0,useExisting:qS},{provide:b0,useExisting:n}])}const Ky=new s.OlP("ROUTER_FORROOT_GUARD"),QS=[Pe,{provide:Zh,useClass:td},{provide:_r,useFactory:Wy},jl,{provide:Xo,useFactory:function lo(n){return n.routerState.root},deps:[_r]},Sg];function T0(){return new s.PXZ("Router",_r)}let Ya=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[QS,[],Mg(t),{provide:Ky,useFactory:M0,deps:[[_r,new s.FiY,new s.tp0]]},{provide:lf,useValue:r||{}},r?.useHash?{provide:ve,useClass:Ke}:{provide:ve,useClass:Xe},{provide:Ag,useFactory:()=>{const n=(0,s.f3M)(_r),e=(0,s.f3M)(Eu),t=(0,s.f3M)(lf);return t.scrollOffset&&e.setOffset(t.scrollOffset),new WS(n,e,t)}},r?.preloadingStrategy?JS(r.preloadingStrategy).\u0275providers:[],{provide:s.PXZ,multi:!0,useFactory:T0},r?.initialNavigation?Jy(r):[],[{provide:cf,useFactory:Ps},{provide:s.tb,multi:!0,useExisting:cf}]]}}static forChild(t){return{ngModule:n,providers:[Mg(t)]}}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Ky,8))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[t0]}),n})();function M0(n){return"guarded"}function Jy(n){return["disabled"===n.initialNavigation?_d(3,[{provide:s.ip1,multi:!0,useFactory:()=>{const e=(0,s.f3M)(_r);return()=>{e.setUpLocationChangeListener()}}},{provide:kg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?_d(2,[{provide:kg,useValue:0},{provide:s.ip1,multi:!0,deps:[s.zs3],useFactory:e=>{const t=e.get(Z,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(l=>{const u=e.get(_r),f=e.get(Ns);(function i(l){e.get(_r).events.pipe(S(f=>f instanceof Bl||f instanceof sd||f instanceof cg),(0,We.U)(f=>f instanceof Bl||f instanceof sd&&(0===f.code||1===f.code)&&null),S(f=>null!==f),W(1)).subscribe(()=>{l()})})(()=>{l(!0),r=!0}),u.afterPreactivation=()=>(l(!0),r||f.closed?ze(void 0):f),u.initialNavigation()}))}}]).\u0275providers:[]]}const cf=new s.OlP("");class Qc{constructor(e,t,r){this.appService=e,this.elementRef=t,this.overlayContainer=r,this.title="CRM";const i=this.overlayContainer.getContainerElement();this.appService.getFontSize().subscribe(l=>{document.body.style.fontSize=`${l}px`}),this.darkMode$?.pipe().subscribe(l=>{this.elementRef.nativeElement.classList.toggle("dark-mode",l.mode),i.classList.toggle("dark-mode",l.mode)})}}Qc.\u0275fac=function(e){return new(e||Qc)(s.Y36(F_),s.Y36(s.SBq),s.Y36(Uh))},Qc.\u0275cmp=s.Xpm({type:Qc,selectors:[["app-root"]],decls:2,vars:0,template:function(e,t){1&e&&(s.TgZ(0,"main"),s._UZ(1,"router-outlet"),s.qZA())},dependencies:[Wc],styles:["main[_ngcontent-%COMP%]{background:var(--gradient);overflow-y:hidden}"]}),(0,Nr.gn)([N_(Yo)],Qc.prototype,"darkMode$",void 0);class Xy{}class ev{}class na{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),l=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,l),this.headers.has(l)?this.headers.get(l).push(u):this.headers.set(l,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof na?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new na;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof na?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const l=e.value;if(l){let u=this.headers.get(t);if(!u)return;u=u.filter(f=>-1===l.indexOf(f)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class k0{encodeKey(e){return x0(e)}encodeValue(e){return x0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const rT=/%(\d[a-f0-9])/gi,iT={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function x0(n){return encodeURIComponent(n).replace(rT,(e,t)=>iT[t]??e)}function Og(n){return`${n}`}class zl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new k0,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function nT(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const l=i.indexOf("="),[u,f]=-1==l?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,l)),e.decodeValue(i.slice(l+1))],_=t.get(u)||[];_.push(f),t.set(u,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Og):[Og(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(l=>{t.push({param:r,value:l,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new zl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Og(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Og(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class sT{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function O0(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function R0(n){return typeof Blob<"u"&&n instanceof Blob}function P0(n){return typeof FormData<"u"&&n instanceof FormData}class uf{constructor(e,t,r,i){let l;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function oT(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,l=i):l=r,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new na),this.context||(this.context=new sT),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+u}}else this.params=new zl,this.urlWithParams=t}serializeBody(){return null===this.body?null:O0(this.body)||R0(this.body)||P0(this.body)||function aT(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof zl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||P0(this.body)?null:R0(this.body)?this.body.type||null:O0(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof zl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,C=e.params||this.params;const I=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((A,V)=>A.set(V,e.setHeaders[V]),_)),e.setParams&&(C=Object.keys(e.setParams).reduce((A,V)=>A.set(V,e.setParams[V]),C)),new uf(t,r,l,{params:C,headers:_,context:I,reportProgress:f,responseType:i,withCredentials:u})}}var yr=(()=>((yr=yr||{})[yr.Sent=0]="Sent",yr[yr.UploadProgress=1]="UploadProgress",yr[yr.ResponseHeader=2]="ResponseHeader",yr[yr.DownloadProgress=3]="DownloadProgress",yr[yr.Response=4]="Response",yr[yr.User=5]="User",yr))();class tv{constructor(e,t=200,r="OK"){this.headers=e.headers||new na,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class nv extends tv{constructor(e={}){super(e),this.type=yr.ResponseHeader}clone(e={}){return new nv({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Rg extends tv{constructor(e={}){super(e),this.type=yr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Rg({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class rv extends tv{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Pg(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let iv=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let l;if(t instanceof uf)l=t;else{let _,C;_=i.headers instanceof na?i.headers:new na(i.headers),i.params&&(C=i.params instanceof zl?i.params:new zl({fromObject:i.params})),l=new uf(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:C,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=ze(l).pipe($a(_=>this.handler.handle(_)));if(t instanceof uf||"events"===i.observe)return u;const f=u.pipe(S(_=>_ instanceof Rg));switch(i.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return f.pipe((0,We.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return f.pipe((0,We.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return f.pipe((0,We.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return f.pipe((0,We.U)(_=>_.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new zl).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Pg(i,r))}post(t,r,i={}){return this.request("POST",t,Pg(i,r))}put(t,r,i={}){return this.request("PUT",t,Pg(i,r))}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Xy))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class sv{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const ov=new s.OlP("HTTP_INTERCEPTORS");let N0=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const nR=/^\)\]\}',?\n/;let hT=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Mn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach(($,K)=>i.setRequestHeader($,K.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const $=t.detectContentTypeHeader();null!==$&&i.setRequestHeader("Content-Type",$)}if(t.responseType){const $=t.responseType.toLowerCase();i.responseType="json"!==$?$:"text"}const l=t.serializeBody();let u=null;const f=()=>{if(null!==u)return u;const $=i.statusText||"OK",K=new na(i.getAllResponseHeaders()),we=function av(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return u=new nv({headers:K,status:i.status,statusText:$,url:we}),u},_=()=>{let{headers:$,status:K,statusText:we,url:Ce}=f(),lt=null;204!==K&&(lt=typeof i.response>"u"?i.responseText:i.response),0===K&&(K=lt?200:0);let St=K>=200&&K<300;if("json"===t.responseType&&"string"==typeof lt){const xt=lt;lt=lt.replace(nR,"");try{lt=""!==lt?JSON.parse(lt):null}catch(Ft){lt=xt,St&&(St=!1,lt={error:Ft,text:lt})}}St?(r.next(new Rg({body:lt,headers:$,status:K,statusText:we,url:Ce||void 0})),r.complete()):r.error(new rv({error:lt,headers:$,status:K,statusText:we,url:Ce||void 0}))},C=$=>{const{url:K}=f(),we=new rv({error:$,status:i.status||0,statusText:i.statusText||"Unknown Error",url:K||void 0});r.error(we)};let I=!1;const A=$=>{I||(r.next(f()),I=!0);let K={type:yr.DownloadProgress,loaded:$.loaded};$.lengthComputable&&(K.total=$.total),"text"===t.responseType&&!!i.responseText&&(K.partialText=i.responseText),r.next(K)},V=$=>{let K={type:yr.UploadProgress,loaded:$.loaded};$.lengthComputable&&(K.total=$.total),r.next(K)};return i.addEventListener("load",_),i.addEventListener("error",C),i.addEventListener("timeout",C),i.addEventListener("abort",C),t.reportProgress&&(i.addEventListener("progress",A),null!==l&&i.upload&&i.upload.addEventListener("progress",V)),i.send(l),r.next({type:yr.Sent}),()=>{i.removeEventListener("error",C),i.removeEventListener("abort",C),i.removeEventListener("load",_),i.removeEventListener("timeout",C),t.reportProgress&&(i.removeEventListener("progress",A),null!==l&&i.upload&&i.upload.removeEventListener("progress",V)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Ys))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Ng=new s.OlP("XSRF_COOKIE_NAME"),Fg=new s.OlP("XSRF_HEADER_NAME");class fT{}let Et=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=cl(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(se),s.LFG(s.Lbi),s.LFG(Ng))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),lv=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const l=this.tokenService.getToken();return null!==l&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,l)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(fT),s.LFG(Fg))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),pT=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(ov,[]);this.chain=r.reduceRight((i,l)=>new sv(i,l),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(ev),s.LFG(s.zs3))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),gT=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:lv,useClass:N0}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Ng,useValue:t.cookieName}:[],t.headerName?{provide:Fg,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[lv,{provide:ov,useExisting:lv,multi:!0},{provide:fT,useClass:Et},{provide:Ng,useValue:"XSRF-TOKEN"},{provide:Fg,useValue:"X-XSRF-TOKEN"}]}),n})(),Gl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[iv,{provide:Xy,useClass:pT},hT,{provide:ev,useExisting:hT}],imports:[gT.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();var be=N(5861),Lg=N(9934),sn=N(2090),Ka=N(9681),Ja=N(1877),ff=N(4859),fn=N(6351),Qa=N(5867);class vd{constructor(e){return e}}class uv{constructor(){return(0,Qa.C6)()}}const dv=new s.OlP("angularfire2._apps"),mT={provide:vd,useFactory:function pf(n){return n&&1===n.length?n[0]:new vd((0,Qa.Mq)())},deps:[[new s.FiY,dv]]},_T={provide:uv,deps:[[new s.FiY,dv]]};function Vg(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new vd(r)}}let L0=(()=>{class n{constructor(t){(0,Qa.KN)("angularfire",fn.q4.full,"core"),(0,Qa.KN)("angularfire",fn.q4.full,"app"),(0,Qa.KN)("angular",s.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(s.Lbi))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[mT,_T]}),n})();function V0(n,...e){return{ngModule:L0,providers:[{provide:dv,useFactory:Vg(n),multi:!0,deps:[s.R0b,s.zs3,fn.HU,...e]}]}}const gf=(0,fn.u3)(Qa.ZF,!0),hv=new Map,U0={activated:!1,tokenObservers:[]},B0={initialized:!1,enabled:!1};function Lr(n){return hv.get(n)||U0}function ds(n,e){hv.set(n,e)}function Bg(){return B0}class jg{constructor(e,t,r,i,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=i,i>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new sn.BH,yield function CT(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new sn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ci=new sn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function H0(n){if(!Lr(n).activated)throw ci.create("use-before-activation",{appName:n.name})}function gv(n,e){return mv.apply(this,arguments)}function mv(){return(mv=(0,be.Z)(function*({url:n,body:e},t){var r,i;const l={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const $=yield u.getHeartbeatsHeader();$&&(l["X-Firebase-Client"]=$)}const f={method:"POST",body:JSON.stringify(e),headers:l};let _,C;try{_=yield fetch(n,f)}catch($){throw ci.create("fetch-network-error",{originalErrorMessage:null===(r=$)||void 0===r?void 0:r.message})}if(200!==_.status)throw ci.create("fetch-status-error",{httpStatus:_.status});try{C=yield _.json()}catch($){throw ci.create("fetch-parse-error",{originalErrorMessage:null===(i=$)||void 0===i?void 0:i.message})}const I=C.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw ci.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${C.ttl}`});const A=1e3*Number(I[1]),V=Date.now();return{token:C.token,expireTimeMillis:V+A,issuedAtTimeMillis:V}})).apply(this,arguments)}function DT(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Cd="firebase-app-check-store";let _f=null;function z0(){return _f||(_f=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var l;e(ci.create("storage-open",{originalErrorMessage:null===(l=i.target.error)||void 0===l?void 0:l.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Cd,{keyPath:"compositeKey"})}}catch(r){e(ci.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),_f)}function $g(){return($g=(0,be.Z)(function*(n,e){const r=(yield z0()).transaction(Cd,"readwrite"),l=r.objectStore(Cd).put({compositeKey:n,value:e});return new Promise((u,f)=>{l.onsuccess=_=>{u()},r.onerror=_=>{var C;f(ci.create("storage-set",{originalErrorMessage:null===(C=_.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const Xc=new Ja.Yd("@firebase/app-check");function Cv(n,e){return(0,sn.hl)()?function IT(n,e){return function yv(n,e){return $g.apply(this,arguments)}(function W0(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Xc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Y0(){return Bg().enabled}function K0(){return bv.apply(this,arguments)}function bv(){return(bv=(0,be.Z)(function*(){const n=Bg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const kT={error:"UNKNOWN_ERROR"};function J0(n){return sn.US.encodeString(JSON.stringify(n),!1)}function yf(n){return Dv.apply(this,arguments)}function Dv(){return(Dv=(0,be.Z)(function*(n,e=!1){const t=n.app;H0(t);const r=Lr(t);let l,i=r.token;if(i&&!Wl(i)&&(ds(t,Object.assign(Object.assign({},r),{token:void 0})),i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(Wl(_)?i=_:yield Cv(t,void 0))}if(!e&&i&&Wl(i))return{token:i.token};let f,u=!1;if(Y0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=gv(DT(t,yield K0()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const _=yield r.exchangeTokenPromise;return yield Cv(t,_),ds(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Xc.warn(_.message):Xc.error(_),l=_}return i?l?f=Wl(i)?{token:i.token,internalError:l}:Gg(l):(f={token:i.token},ds(t,Object.assign(Object.assign({},r),{token:i})),yield Cv(t,i)):f=Gg(l),u&&X0(t,f),f})).apply(this,arguments)}function zg(n,e){const t=Lr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ds(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Q0(n){const{app:e}=n,t=Lr(e);let r=t.tokenRefresher;r||(r=function xT(n){const{app:e}=n;return new jg((0,be.Z)(function*(){let r;if(r=Lr(e).token?yield yf(n,!0):yield yf(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Lr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ds(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function X0(n,e){const t=Lr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Wl(n){return n.expireTimeMillis-Date.now()>0}function Gg(n){return{token:J0(kT),error:n}}class eD{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Lr(this.app);for(const t of e)zg(this.app,t.next);return Promise.resolve()}}const Pv="app-check-internal";!function jT(){(0,Ka._registerComponent)(new ff.wA("app-check",n=>function Iv(n,e){return new eD(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Pv).initialize()})),(0,Ka._registerComponent)(new ff.wA(Pv,n=>function OT(n){return{getToken:e=>yf(n,e),addTokenListener:e=>function Ev(n,e,t,r){const{app:i}=n,l=Lr(i),u={next:t,error:r,type:e};if(ds(i,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,u]})),l.token&&Wl(l.token)){const f=l.token;Promise.resolve().then(()=>{t({token:f.token}),Q0(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>Q0(n))}(n,"INTERNAL",e),removeTokenListener:e=>zg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ka.registerVersion)("@firebase/app-check","0.5.14")}();class Yg{constructor(){return(0,fn.vb)("app-check")}}typeof window<"u"&&window;class Jg{constructor(e){return e}}class Lv{constructor(){return(0,fn.vb)("auth")}}const Vv=new s.OlP("angularfire2.auth-instances");function oD(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Jg(r)}}const WT={provide:Lv,deps:[[new s.FiY,Vv]]},YT={provide:Jg,useFactory:function bR(n,e){const t=(0,fn.JM)("auth",n,e);return t&&new Jg(t)},deps:[[new s.FiY,Vv],vd]};let KT=(()=>{class n{constructor(){(0,Qa.KN)("angularfire",fn.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[YT,WT]}),n})();function JT(n,...e){return{ngModule:KT,providers:[{provide:Vv,useFactory:oD(n),multi:!0,deps:[s.R0b,s.zs3,fn.HU,uv,[new s.FiY,Yg],...e]}]}}const QT=(0,fn.u3)(Lg.n,!0),wf=(0,fn.u3)(Lg.af,!0);let em=(()=>{class n{constructor(t){this.user=t}}return n.type="[Auth] Login",n})(),gD=(()=>{class n{}return n.type="[Auth] Logout",n})();function mD(n,e){return(0,zr.m)(e)?mr(()=>n,e):mr(()=>n)}var Hv=N(9468),Ci=N(2011);N(127);const bf=new s.OlP("angularfire2.auth.use-emulator"),tm=new s.OlP("angularfire2.auth.settings"),gA=new s.OlP("angularfire2.auth.tenant-id"),$v=new s.OlP("angularfire2.auth.langugage-code"),yD=new s.OlP("angularfire2.auth.use-device-language"),Zv=new s.OlP("angularfire.auth.persistence"),eu=(n,e,t,r,i,l,u,f)=>(0,Ci.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,l&&_.useDeviceLanguage(),u)for(const[C,I]of Object.entries(u))_.settings[C]=I;return f&&_.setPersistence(f),_},[t,r,i,l,u,f]);let zv=(()=>{class n{constructor(t,r,i,l,u,f,_,C,I,A,V,$){const K=new ct.x,we=ze(void 0).pipe((0,dt.Q)(u.outsideAngular),mr(()=>l.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,5881)))),(0,We.U)(()=>(0,Ci.on)(t,l,r)),(0,We.U)(Ce=>eu(Ce,l,f,C,I,A,_,V)),U({bufferSize:1,refCount:!1}));if(Ws(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ze(null);else{we.pipe(Ha()).subscribe();const lt=we.pipe(mr(Ft=>Ft.getRedirectResult().then(jt=>jt,()=>null)),fn.iC,U({bufferSize:1,refCount:!1})),St=we.pipe(mr(Ft=>new Mn.y(jt=>({unsubscribe:l.runOutsideAngular(()=>Ft.onAuthStateChanged(Xt=>jt.next(Xt),Xt=>jt.error(Xt),()=>jt.complete()))})))),xt=we.pipe(mr(Ft=>new Mn.y(jt=>({unsubscribe:l.runOutsideAngular(()=>Ft.onIdTokenChanged(Xt=>jt.next(Xt),Xt=>jt.error(Xt),()=>jt.complete()))}))));this.authState=lt.pipe(mD(St),(0,Hv.R)(u.outsideAngular),(0,dt.Q)(u.insideAngular)),this.user=lt.pipe(mD(xt),(0,Hv.R)(u.outsideAngular),(0,dt.Q)(u.insideAngular)),this.idToken=this.user.pipe(mr(Ft=>Ft?(0,rn.D)(Ft.getIdToken()):ze(null))),this.idTokenResult=this.user.pipe(mr(Ft=>Ft?(0,rn.D)(Ft.getIdTokenResult()):ze(null))),this.credential=(0,ja.T)(lt,K,this.authState.pipe(S(Ft=>!Ft))).pipe((0,We.U)(Ft=>Ft?.user?Ft:null),(0,Hv.R)(u.outsideAngular),(0,dt.Q)(u.insideAngular))}return(0,Ci.pX)(this,we,l,{spy:{apply:(Ce,lt,St)=>{(Ce.startsWith("signIn")||Ce.startsWith("createUser"))&&St.then(xt=>K.next(xt))}}})}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Ci.Dh),s.LFG(Ci.xv,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(fn.HU),s.LFG(bf,8),s.LFG(tm,8),s.LFG(gA,8),s.LFG($v,8),s.LFG(yD,8),s.LFG(Zv,8),s.LFG(Yg,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();class Gv{constructor(e){this.id=e.id||"",this.firstName=e.firstName||"",this.lastName=e.lastName||"",this.position=e.position||"",this.departament=e.departament||"",this.phoneNumber=e.phoneNumber||111111111,this.emailAddress=e.emailAddress||"",this.manager=e.manager||"",this.score=e.score||0,this.organization=e.organization}}N(5881);var _t,_A=N(3942),jR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},el={},qv=qv||{},Ut=jR||self;function Df(){}function nm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function bd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Wv="closure_uid_"+(1e9*Math.random()>>>0),yA=0;function CD(n,e,t){return n.call.apply(n.bind,arguments)}function vA(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Gr(n,e,t){return(Gr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?CD:vA).apply(null,arguments)}function Ef(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Vr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,l){for(var u=Array(arguments.length-2),f=2;f<arguments.length;f++)u[f-2]=arguments[f];return e.prototype[i].apply(r,u)}}function tl(){this.s=this.s,this.o=this.o}var wA={};tl.prototype.s=!1,tl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function vD(n){return Object.prototype.hasOwnProperty.call(n,Wv)&&n[Wv]||(n[Wv]=++yA)}(this);delete wA[n]}},tl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bA=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function rm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function DA(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(nm(r)){const i=n.length||0,l=r.length||0;n.length=i+l;for(let u=0;u<l;u++)n[i+u]=r[u]}else n.push(r)}}function wi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}wi.prototype.h=function(){this.defaultPrevented=!0};var HR=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",Df,e),Ut.removeEventListener("test",Df,e)}catch{}return n}();function Yv(n){return/^[\s\xa0]*$/.test(n)}var EA=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function wD(n,e){return n<e?-1:n>e?1:0}function Kv(){var n=Ut.navigator;return n&&(n=n.userAgent)?n:""}function nl(n){return-1!=Kv().indexOf(n)}function Dd(n){return Dd[" "](n),n}Dd[" "]=Df;var sm,n,bD=nl("Opera"),rl=nl("Trident")||nl("MSIE"),Jv=nl("Edge"),im=Jv||rl,IA=nl("Gecko")&&!(-1!=Kv().toLowerCase().indexOf("webkit")&&!nl("Edge"))&&!(nl("Trident")||nl("MSIE"))&&!nl("Edge"),Qv=-1!=Kv().toLowerCase().indexOf("webkit")&&!nl("Edge");function Xv(){var n=Ut.document;return n?n.documentMode:void 0}e:{var om="",DD=(n=Kv(),IA?/rv:([^\);]+)(\)|;)/.exec(n):Jv?/Edge\/([\d\.]+)/.exec(n):rl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Qv?/WebKit\/(\S+)/.exec(n):bD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(DD&&(om=DD?DD[1]:""),rl){var eC=Xv();if(null!=eC&&eC>parseFloat(om)){sm=String(eC);break e}}sm=om}var SA={};var ZR=Ut.document&&rl&&(Xv()||parseInt(sm,10))||void 0;function am(n,e){if(wi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(IA){e:{try{Dd(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:zR[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&am.X.h.call(this)}}Vr(am,wi);var zR={2:"touch",3:"pen",4:"mouse"};am.prototype.h=function(){am.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var If="closure_listenable_"+(1e6*Math.random()|0),AA=0;function MA(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++AA,this.ba=this.ea=!1}function tC(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function nC(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function rC(n){const e={};for(const t in n)e[t]=n[t];return e}const iC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kA(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let l=0;l<iC.length;l++)t=iC[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Vi(n){this.src=n,this.g={},this.h=0}function sC(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],i=bA(r,e);(l=0<=i)&&Array.prototype.splice.call(r,i,1),l&&(tC(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Sf(n,e,t,r){for(var i=0;i<n.length;++i){var l=n[i];if(!l.ba&&l.listener==e&&l.capture==!!t&&l.ha==r)return i}return-1}Vi.prototype.add=function(n,e,t,r,i){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var u=Sf(n,e,r,i);return-1<u?(e=n[u],t||(e.ea=!1)):((e=new MA(e,this.src,l,!!r,i)).ea=t,n.push(e)),e};var oC="closure_lm_"+(1e6*Math.random()|0),Ui={};function ID(n,e,t,r,i){if(r&&r.once)return SD(n,e,t,r,i);if(Array.isArray(e)){for(var l=0;l<e.length;l++)ID(n,e[l],t,r,i);return null}return t=lC(t),n&&n[If]?n.N(e,t,bd(r)?!!r.capture:!!r,i):lm(n,e,t,!1,r,i)}function lm(n,e,t,r,i,l){if(!e)throw Error("Invalid event type");var u=bd(i)?!!i.capture:!!i,f=dm(n);if(f||(n[oC]=f=new Vi(n)),(t=f.add(e,t,r,u,l)).proxy)return t;if(r=function xA(){const e=OA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)HR||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(aC(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function SD(n,e,t,r,i){if(Array.isArray(e)){for(var l=0;l<e.length;l++)SD(n,e[l],t,r,i);return null}return t=lC(t),n&&n[If]?n.O(e,t,bd(r)?!!r.capture:!!r,i):lm(n,e,t,!0,r,i)}function cm(n,e,t,r,i){if(Array.isArray(e))for(var l=0;l<e.length;l++)cm(n,e[l],t,r,i);else r=bd(r)?!!r.capture:!!r,t=lC(t),n&&n[If]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Sf(l=n.g[e],t,r,i))&&(tC(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=dm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Sf(e,t,r,i)),(t=-1<n?e[n]:null)&&um(t))}function um(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[If])sC(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(aC(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=dm(e))?(sC(t,n),0==t.h&&(t.src=null,e[oC]=null)):tC(n)}}}function aC(n){return n in Ui?Ui[n]:Ui[n]="on"+n}function OA(n,e){if(n.ba)n=!0;else{e=new am(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&um(n),n=t.call(r,e)}return n}function dm(n){return(n=n[oC])instanceof Vi?n:null}var hm="__closure_events_fn_"+(1e9*Math.random()>>>0);function lC(n){return"function"==typeof n?n:(n[hm]||(n[hm]=function(e){return n.handleEvent(e)}),n[hm])}function Ar(){tl.call(this),this.i=new Vi(this),this.P=this,this.I=null}function qr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new wi(e,n);else if(e instanceof wi)e.target=e.target||n;else{var i=e;kA(e=new wi(r,n),i)}if(i=!0,t)for(var l=t.length-1;0<=l;l--){var u=e.g=t[l];i=Id(u,r,!0,e)&&i}if(i=Id(u=e.g=n,r,!0,e)&&i,i=Id(u,r,!1,e)&&i,t)for(l=0;l<t.length;l++)i=Id(u=e.g=t[l],r,!1,e)&&i}function Id(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,l=0;l<e.length;++l){var u=e[l];if(u&&!u.ba&&u.capture==t){var f=u.listener,_=u.ha||u.src;u.ea&&sC(n.i,u),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}Vr(Ar,tl),Ar.prototype[If]=!0,Ar.prototype.removeEventListener=function(n,e,t,r){cm(this,n,e,t,r)},Ar.prototype.M=function(){if(Ar.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)tC(t[r]);delete n.g[e],n.h--}}this.I=null},Ar.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ar.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ra=Ut.JSON.stringify;function TD(){var n=hC;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var uC,ia=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new RA,n=>n.reset());class RA{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function GR(n){Ut.setTimeout(()=>{throw n},0)}function AD(n,e){uC||function PA(){var n=Ut.Promise.resolve(void 0);uC=function(){n.then(qR)}}(),dC||(uC(),dC=!0),hC.add(n,e)}var dC=!1,hC=new class cC{constructor(){this.h=this.g=null}add(e,t){const r=ia.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function qR(){for(var n;n=TD();){try{n.h.call(n.g)}catch(t){GR(t)}var e=ia;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}dC=!1}function Tf(n,e){Ar.call(this),this.h=n||1,this.g=e||Ut,this.j=Gr(this.lb,this),this.l=Date.now()}function fC(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function fm(n,e,t){if("function"==typeof n)t&&(n=Gr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Gr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function NA(n){n.g=fm(()=>{n.g=null,n.i&&(n.i=!1,NA(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Vr(Tf,Ar),(_t=Tf.prototype).ca=!1,_t.R=null,_t.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),qr(this,"tick"),this.ca&&(fC(this),this.start()))}},_t.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},_t.M=function(){Tf.X.M.call(this),fC(this),delete this.g};class pC extends tl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:NA(this)}M(){super.M(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sd(n){tl.call(this),this.h=n,this.g={}}Vr(Sd,tl);var gC=[];function mC(n,e,t,r){Array.isArray(t)||(t&&(gC[0]=t.toString()),t=gC);for(var i=0;i<t.length;i++){var l=ID(e,t[i],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function _C(n){nC(n.g,function(e,t){this.g.hasOwnProperty(t)&&um(e)},n),n.g={}}function Af(){this.g=!0}function tu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function MD(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var l=i[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var u=1;u<i.length;u++)i[u]=""}}}return ra(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Sd.prototype.M=function(){Sd.X.M.call(this),_C(this)},Sd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Af.prototype.Aa=function(){this.g=!1},Af.prototype.info=function(){};var Yl={},kD=null;function mm(){return kD=kD||new Ar}function LA(n){wi.call(this,Yl.Pa,n)}function _m(n){const e=mm();qr(e,new LA(e,n))}function yC(n,e){wi.call(this,Yl.STAT_EVENT,n),this.stat=e}function bi(n){const e=mm();qr(e,new yC(e,n))}function xD(n,e){wi.call(this,Yl.Qa,n),this.size=e}function Mf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}Yl.Pa="serverreachability",Vr(LA,wi),Yl.STAT_EVENT="statevent",Vr(yC,wi),Yl.Qa="timingevent",Vr(xD,wi);var vC={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},VA={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function OD(){}function BA(){}OD.prototype.h=null;var wC,kf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Td(){wi.call(this,"d")}function CC(){wi.call(this,"c")}function xf(){}function co(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Sd(this),this.O=DC,this.T=new Tf(n=im?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new bC}function bC(){this.i=null,this.g="",this.h=!1}Vr(Td,wi),Vr(CC,wi),Vr(xf,OD),xf.prototype.g=function(){return new XMLHttpRequest},xf.prototype.i=function(){return{}},wC=new xf;var DC=45e3,Of={},ym={};function Rf(n,e,t){n.K=1,n.v=wm(sa(e)),n.s=t,n.P=!0,vm(n,null)}function vm(n,e){n.F=Date.now(),Cm(n),n.A=sa(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),YA(t.i,"t",r),n.C=0,t=n.l.H,n.h=new bC,n.g=uP(n.l,t?e:null,!n.s),0<n.N&&(n.L=new pC(Gr(n.La,n,n.g),n.N)),mC(n.S,n.g,"readystatechange",n.ib),e=n.H?rC(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),_m(1),function pm(n,e,t,r,i,l){n.info(function(){if(n.g)if(l)for(var u="",f=l.split("&"),_=0;_<f.length;_++){var C=f[_].split("=");if(1<C.length){var I=C[0];C=C[1];var A=I.split("_");u=2<=A.length&&"type"==A[1]?u+(I+"=")+C+"&":u+(I+"=redacted&")}}else u=null;else u=l;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Pf(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function jA(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=WR(n,t),i==ym){4==e&&(n.o=4,bi(14),r=!1),tu(n.j,n.m,null,"[Incomplete Response]");break}if(i==Of){n.o=4,bi(15),tu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}tu(n.j,n.m,i,null),EC(n,i)}Pf(n)&&i!=ym&&i!=Of&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,bi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),XA(e),e.K=!0,bi(11))):(tu(n.j,n.m,t,"[Invalid Chunked Response]"),nu(n),Ff(n))}function WR(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ym:(t=Number(e.substring(t,r)),isNaN(t)?Of:(r+=1)+t>e.length?ym:(e=e.substr(r,t),n.C=r+t,e))}function Cm(n){n.V=Date.now()+n.O,HA(n,n.O)}function HA(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Mf(Gr(n.gb,n),e)}function Nf(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function Ff(n){0==n.l.G||n.I||oP(n.l,n)}function nu(n){Nf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,fC(n.T),_C(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function EC(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||c(t.h,n)))if(!n.J&&c(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;VD(t),FD(t)}QA(t),bi(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Mf(Gr(t.cb,t),6e3));if(1>=a(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Bf(t,11)}else if((n.J||t.g==n)&&VD(t),!Yv(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let C=i[e];if(t.T=C[0],C=C[1],2==t.G)if("c"==C[0]){t.I=C[1],t.ka=C[2];const I=C[3];null!=I&&(t.ma=I,t.j.info("VER="+t.ma));const A=C[4];null!=A&&(t.Ca=A,t.j.info("SVER="+t.Ca));const V=C[5];null!=V&&"number"==typeof V&&0<V&&(t.J=r=1.5*V,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const $=n.g;if($){const K=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(K){var l=r.h;l.g||-1==K.indexOf("spdy")&&-1==K.indexOf("quic")&&-1==K.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(d(l,l.h),l.h=null))}if(r.D){const we=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;we&&(r.za=we,Fn(r.F,r.D,we))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var u=n;if((r=t).sa=cP(r,r.H?r.ka:null,r.V),u.J){h(r.h,u);var f=u,_=r.J;_&&f.setTimeout(_),f.B&&(Nf(f),Cm(f)),r.g=u}else iP(r);0<t.i.length&&LD(t)}else"stop"!=C[0]&&"close"!=C[0]||Bf(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Bf(t,7):JA(t):"noop"!=C[0]&&t.l&&t.l.wa(C),t.A=0)}_m(4)}catch{}}function IC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(nm(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function RD(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(nm(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function $A(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(nm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,l=0;l<i;l++)e.call(void 0,r[l],t&&t[l],n)}(_t=co.prototype).setTimeout=function(n){this.O=n},_t.ib=function(n){n=n.target;const e=this.L;e&&3==uo(n)?e.l():this.La(n)},_t.La=function(n){try{if(n==this.g)e:{const I=uo(this.g);var e=this.g.Ea();const A=this.g.aa();if(!(3>I)&&(3!=I||im||this.g&&(this.h.h||this.g.fa()||Tm(this.g)))){this.I||4!=I||7==e||_m(8==e||0>=A?3:2),Nf(this);var t=this.g.aa();this.Y=t;t:if(Pf(this)){var r=Tm(this.g);n="";var i=r.length,l=4==uo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){nu(this),Ff(this);var u="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==t,function gm(n,e,t,r,i,l,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+l+" "+u})}(this.j,this.u,this.A,this.m,this.U,I,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yv(f)){var C=f;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,bi(12),nu(this),Ff(this);break e}tu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,EC(this,t)}this.P?(jA(this,I,u),im&&this.i&&3==I&&(mC(this.S,this.T,"tick",this.hb),this.T.start())):(tu(this.j,this.m,u,null),EC(this,u)),4==I&&nu(this),this.i&&!this.I&&(4==I?oP(this.l,this):(this.i=!1,Cm(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,bi(12)):(this.o=0,bi(13)),nu(this),Ff(this)}}}catch{}},_t.hb=function(){if(this.g){var n=uo(this.g),e=this.g.fa();this.C<e.length&&(Nf(this),jA(this,n,e),this.i&&4!=n&&Cm(this))}},_t.cancel=function(){this.I=!0,nu(this)},_t.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function FA(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(_m(3),bi(17)),nu(this),this.o=2,Ff(this)):HA(this,this.V-n)};var SC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ru(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ru){this.h=void 0!==e?e:n.h,Ad(this,n.j),this.s=n.s,this.g=n.g,TC(this,n.m),this.l=n.l,e=n.i;var t=new Dm;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),AC(this,t),this.o=n.o}else n&&(t=String(n).match(SC))?(this.h=!!e,Ad(this,t[1]||"",!0),this.s=Lf(t[2]||""),this.g=Lf(t[3]||"",!0),TC(this,t[4]),this.l=Lf(t[5]||"",!0),AC(this,t[6]||"",!0),this.o=Lf(t[7]||"")):(this.h=!!e,this.i=new Dm(null,this.h))}function sa(n){return new ru(n)}function Ad(n,e,t){n.j=t?Lf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function TC(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function AC(n,e,t){e instanceof Dm?(n.i=e,function JR(n,e){e&&!n.j&&(iu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(WA(this,r),YA(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=bm(e,qA)),n.i=new Dm(e,n.h))}function Fn(n,e,t){n.i.set(e,t)}function wm(n){return Fn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Lf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function bm(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,YR),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function YR(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ru.prototype.toString=function(){var n=[],e=this.j;e&&n.push(bm(e,PD,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(bm(e,PD,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(bm(t,"/"==t.charAt(0)?GA:zA,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",bm(t,KR)),n.join("")};var PD=/[#\/\?@]/g,zA=/[#\?:]/g,GA=/[#\?]/g,qA=/[#\?@]/g,KR=/#/g;function Dm(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function iu(n){n.g||(n.g=new Map,n.h=0,n.i&&function ZA(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var l=n[t].substring(0,r);i=n[t].substring(r+1)}else l=n[t];e(l,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function WA(n,e){iu(n),e=Vf(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function ND(n,e){return iu(n),e=Vf(n,e),n.g.has(e)}function YA(n,e,t){WA(n,e),0<t.length&&(n.i=null,n.g.set(Vf(n,e),rm(t)),n.h+=t.length)}function Vf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function KA(n){this.l=n||XR,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ga&&Ut.g.Ga()&&Ut.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(_t=Dm.prototype).add=function(n,e){iu(this),this.i=null,n=Vf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},_t.forEach=function(n,e){iu(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},_t.oa=function(){iu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let l=0;l<i.length;l++)t.push(e[r])}return t},_t.W=function(n){iu(this);let e=[];if("string"==typeof n)ND(this,n)&&(e=e.concat(this.g.get(Vf(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},_t.set=function(n,e){return iu(this),this.i=null,ND(this,n=Vf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},_t.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},_t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const l=encodeURIComponent(String(r)),u=this.W(r);for(r=0;r<u.length;r++){var i=l;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var XR=10;function o(n){return!!n.h||!!n.g&&n.g.size>=n.j}function a(n){return n.h?1:n.g?n.g.size:0}function c(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function d(n,e){n.g?n.g.add(e):n.h=e}function h(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function p(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return rm(n.i)}function y(){}function w(){this.g=new y}function D(n,e,t){const r=t||"";try{IC(n,function(i,l){let u=i;bd(i)&&(u=ra(i)),e.push(r+l+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function x(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function F(n){this.l=n.ac||null,this.j=n.jb||!1}function q(n,e){Ar.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=te,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}KA.prototype.cancel=function(){if(this.i=p(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},y.prototype.stringify=function(n){return Ut.JSON.stringify(n,void 0)},y.prototype.parse=function(n){return Ut.JSON.parse(n,void 0)},Vr(F,OD),F.prototype.g=function(){return new q(this.l,this.j)},F.prototype.i=function(n){return function(){return n}}({}),Vr(q,Ar);var te=0;function Ee(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Be(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ge(n)}function Ge(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(_t=q.prototype).open=function(n,e){if(this.readyState!=te)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ge(this)},_t.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ut).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},_t.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Be(this)),this.readyState=te},_t.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ge(this)),this.g&&(this.readyState=3,Ge(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ut.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ee(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},_t.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Be(this):Ge(this),3==this.readyState&&Ee(this)}},_t.Va=function(n){this.g&&(this.response=this.responseText=n,Be(this))},_t.Ua=function(n){this.g&&(this.response=n,Be(this))},_t.ga=function(){this.g&&Be(this)},_t.setRequestHeader=function(n,e){this.v.append(n,e)},_t.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},_t.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(q.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ft=Ut.JSON.parse;function et(n){Ar.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Oe,this.K=this.L=!1}Vr(et,Ar);var Oe="",At=/^https?$/i,_n=["POST","PUT"];function Kl(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Em(n),Md(n)}function Em(n){n.D||(n.D=!0,qr(n,"complete"),qr(n,"error"))}function Im(n){if(n.h&&typeof qv<"u"&&(!n.C[1]||4!=uo(n)||2!=n.aa()))if(n.v&&4==uo(n))fm(n.Ha,0,n);else if(qr(n,"readystatechange"),4==uo(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(SC)[1]||null;if(!i&&Ut.self&&Ut.self.location){var l=Ut.self.location.protocol;i=l.substr(0,l.length-1)}r=!At.test(i?i.toLowerCase():"")}t=r}if(t)qr(n,"complete"),qr(n,"success");else{n.m=6;try{var u=2<uo(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.aa()+"]",Em(n)}}finally{Md(n)}}}function Md(n,e){if(n.g){Sm(n);const t=n.g,r=n.C[0]?Df:null;n.g=null,n.C=null,e||qr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Sm(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function uo(n){return n.g?n.g.readyState:0}function Tm(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Oe:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Am(n){let e="";return nC(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Uf(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Am(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Fn(n,e,t))}function su(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function eP(n){this.Ca=0,this.i=[],this.j=new Af,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=su("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=su("baseRetryDelayMs",5e3,n),this.bb=su("retryDelaySeedMs",1e4,n),this.$a=su("forwardChannelMaxRetries",2,n),this.ta=su("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new KA(n&&n.concurrentRequestLimit),this.Fa=new w,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function JA(n){if(tP(n),3==n.G){var e=n.U++,t=sa(n.F);Fn(t,"SID",n.I),Fn(t,"RID",e),Fn(t,"TYPE","terminate"),MC(n,t),(e=new co(n,n.j,e,void 0)).K=2,e.v=wm(sa(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon&&(t=Ut.navigator.sendBeacon(e.v.toString(),"")),!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=uP(e.l,null),e.g.da(e.v)),e.F=Date.now(),Cm(e)}lP(n)}function FD(n){n.g&&(XA(n),n.g.cancel(),n.g=null)}function tP(n){FD(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),VD(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function LD(n){o(n.h)||n.m||(n.m=!0,AD(n.Ja,n),n.C=0)}function nP(n,e){var t;t=e?e.m:n.U++;const r=sa(n.F);Fn(r,"SID",n.I),Fn(r,"RID",t),Fn(r,"AID",n.T),MC(n,r),n.o&&n.s&&Uf(r,n.o,n.s),t=new co(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=rP(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),d(n.h,t),Rf(t,r,e)}function MC(n,e){n.ia&&nC(n.ia,function(t,r){Fn(e,r,t)}),n.l&&IC({},function(t,r){Fn(e,r,t)})}function rP(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Gr(n.l.Ra,n.l,n):null;e:{var i=n.i;let l=-1;for(;;){const u=["count="+t];-1==l?0<t?(l=i[0].h,u.push("ofs="+l)):l=0:u.push("ofs="+l);let f=!0;for(let _=0;_<t;_++){let C=i[_].h;const I=i[_].g;if(C-=l,0>C)l=Math.max(0,i[_].h-100),f=!1;else try{D(I,u,"req"+C+"_")}catch{r&&r(I)}}if(f){r=u.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function iP(n){n.g||n.u||(n.Z=1,AD(n.Ia,n),n.A=0)}function QA(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Mf(Gr(n.Ia,n),aP(n,n.A)),n.A++,0))}function XA(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function sP(n){n.g=new co(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=sa(n.sa);Fn(e,"RID","rpc"),Fn(e,"SID",n.I),Fn(e,"CI",n.L?"0":"1"),Fn(e,"AID",n.T),Fn(e,"TYPE","xmlhttp"),MC(n,e),n.o&&n.s&&Uf(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=wm(sa(e)),t.s=null,t.P=!0,vm(t,n)}function VD(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function oP(n,e){var t=null;if(n.g==e){VD(n),XA(n),n.g=null;var r=2}else{if(!c(n.h,e))return;t=e.D,h(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;qr(r=mm(),new xD(r,t,e,i)),LD(n)}else iP(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function J2(n,e){return!(a(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Mf(Gr(n.Ja,n,e),aP(n,n.C)),n.C++,0)))}(n,e)||2==r&&QA(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Bf(n,5);break;case 4:Bf(n,10);break;case 3:Bf(n,6);break;default:Bf(n,2)}}function aP(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Bf(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Gr(n.kb,n);t||(t=new ru("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||Ad(t,"https"),wm(t)),function T(n,e){const t=new Af;if(Ut.Image){const r=new Image;r.onload=Ef(x,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ef(x,t,r,"TestLoadImage: error",!1,e),r.onabort=Ef(x,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ef(x,t,r,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else bi(2);n.G=0,n.l&&n.l.va(e),lP(n),tP(n)}function lP(n){if(n.G=0,n.la=[],n.l){const e=p(n.h);(0!=e.length||0!=n.i.length)&&(DA(n.la,e),DA(n.la,n.i),n.h.i.length=0,rm(n.i),n.i.length=0),n.l.ua()}}function cP(n,e,t){var r=t instanceof ru?sa(t):new ru(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),TC(r,r.m);else{var i=Ut.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var l=new ru(null,void 0);r&&Ad(l,r),e&&(l.g=e),i&&TC(l,i),t&&(l.l=t),r=l}return e=n.za,(t=n.D)&&e&&Fn(r,t,e),Fn(r,"VER",n.ma),MC(n,r),r}function uP(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new et(t&&n.Da&&!n.ra?new F({jb:!0}):n.ra)).Ka(n.H),e}function dP(){}function UD(){if(rl&&!(10<=Number(ZR)))throw Error("Environmental error: no available transport.")}function ho(n,e){Ar.call(this),this.g=new eP(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Yv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yv(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Mm(this)}function hP(n){Td.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function fP(){CC.call(this),this.status=1}function Mm(n){this.g=n}(_t=et.prototype).Ka=function(n){this.L=n},_t.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wC.g(),this.C=function UA(n){return n.h||(n.h=n.i())}(this.u?this.u:wC),this.g.onreadystatechange=Gr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void Kl(this,l)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const l of r.keys())t.set(l,r.get(l))}r=Array.from(t.keys()).find(l=>"content-type"==l.toLowerCase()),i=Ut.FormData&&n instanceof Ut.FormData,!(0<=bA(_n,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,u]of t)this.g.setRequestHeader(l,u);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Sm(this),0<this.B&&((this.K=function Gn(n){return rl&&function TA(){return function $R(n){var e=SA;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=EA(String(sm)).split("."),t=EA("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",l=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==i[0].length&&0==l[0].length)break;n=wD(0==i[1].length?0:parseInt(i[1],10),0==l[1].length?0:parseInt(l[1],10))||wD(0==i[2].length,0==l[2].length)||wD(i[2],l[2]),i=i[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gr(this.qa,this)):this.A=fm(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){Kl(this,l)}},_t.qa=function(){typeof qv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qr(this,"timeout"),this.abort(8))},_t.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,qr(this,"complete"),qr(this,"abort"),Md(this))},_t.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Md(this,!0)),et.X.M.call(this)},_t.Ha=function(){this.s||(this.F||this.v||this.l?Im(this):this.fb())},_t.fb=function(){Im(this)},_t.aa=function(){try{return 2<uo(this)?this.g.status:-1}catch{return-1}},_t.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},_t.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ft(e)}},_t.Ea=function(){return this.m},_t.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(_t=eP.prototype).ma=8,_t.G=1,_t.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new co(this,this.j,n,void 0);let l=this.s;if(this.S&&(l?(l=rC(l),kA(l,this.S)):l=this.S),null!==this.o||this.N||(i.H=l,l=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=rP(this,i,e),Fn(t=sa(this.F),"RID",n),Fn(t,"CVER",22),this.D&&Fn(t,"X-HTTP-Session-Id",this.D),MC(this,t),l&&(this.N?e="headers="+encodeURIComponent(String(Am(l)))+"&"+e:this.o&&Uf(t,this.o,l)),d(this.h,i),this.Ya&&Fn(t,"TYPE","init"),this.O?(Fn(t,"$req",e),Fn(t,"SID","null"),i.Z=!0,Rf(i,t,null)):Rf(i,t,e),this.G=2}}else 3==this.G&&(n?nP(this,n):0==this.i.length||o(this.h)||nP(this))},_t.Ia=function(){if(this.u=null,sP(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Mf(Gr(this.eb,this),n)}},_t.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,bi(10),FD(this),sP(this))},_t.cb=function(){null!=this.v&&(this.v=null,FD(this),QA(this),bi(19))},_t.kb=function(n){n?(this.j.info("Successfully pinged google.com"),bi(2)):(this.j.info("Failed to ping google.com"),bi(1))},(_t=dP.prototype).xa=function(){},_t.wa=function(){},_t.va=function(){},_t.ua=function(){},_t.Ra=function(){},UD.prototype.g=function(n,e){return new ho(n,e)},Vr(ho,Ar),ho.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;bi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=cP(n,null,n.V),LD(n)},ho.prototype.close=function(){JA(this.g)},ho.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=ra(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&LD(e)},ho.prototype.M=function(){this.g.l=null,delete this.j,JA(this.g),delete this.g,ho.X.M.call(this)},Vr(hP,Td),Vr(fP,CC),Vr(Mm,dP),Mm.prototype.xa=function(){qr(this.g,"a")},Mm.prototype.wa=function(n){qr(this.g,new hP(n))},Mm.prototype.va=function(n){qr(this.g,new fP(n))},Mm.prototype.ua=function(){qr(this.g,"b")},UD.prototype.createWebChannel=UD.prototype.g,ho.prototype.send=ho.prototype.u,ho.prototype.open=ho.prototype.m,ho.prototype.close=ho.prototype.close,vC.NO_ERROR=0,vC.TIMEOUT=8,vC.HTTP_ERROR=6,VA.COMPLETE="complete",BA.EventType=kf,kf.OPEN="a",kf.CLOSE="b",kf.ERROR="c",kf.MESSAGE="d",Ar.prototype.listen=Ar.prototype.N,et.prototype.listenOnce=et.prototype.O,et.prototype.getLastError=et.prototype.Oa,et.prototype.getLastErrorCode=et.prototype.Ea,et.prototype.getStatus=et.prototype.aa,et.prototype.getResponseJson=et.prototype.Sa,et.prototype.getResponseText=et.prototype.fa,et.prototype.send=et.prototype.da,et.prototype.setWithCredentials=et.prototype.Ka;var Q2=el.createWebChannelTransport=function(){return new UD},X2=el.getStatEventTarget=function(){return mm()},eM=el.ErrorCode=vC,eV=el.EventType=VA,tV=el.Event=Yl,pP=el.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},nV=el.FetchXmlHttpFactory=F,BD=el.WebChannel=BA,rV=el.XhrIo=et;const gP="@firebase/firestore";class ui{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ui.UNAUTHENTICATED=new ui(null),ui.GOOGLE_CREDENTIALS=new ui("google-credentials-uid"),ui.FIRST_PARTY=new ui("first-party-uid"),ui.MOCK_USER=new ui("mock-user");let km="9.12.0";const kd=new Ja.Yd("@firebase/firestore");function tM(){return kd.logLevel}function He(n,...e){if(kd.logLevel<=Ja.in.DEBUG){const t=e.map(nM);kd.debug(`Firestore (${km}): ${n}`,...t)}}function Mr(n,...e){if(kd.logLevel<=Ja.in.ERROR){const t=e.map(nM);kd.error(`Firestore (${km}): ${n}`,...t)}}function jf(n,...e){if(kd.logLevel<=Ja.in.WARN){const t=e.map(nM);kd.warn(`Firestore (${km}): ${n}`,...t)}}function nM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function pt(n="Unexpected state"){const e=`FIRESTORE (${km}) INTERNAL ASSERTION FAILED: `+n;throw Mr(e),new Error(e)}function Pt(n,e){n||pt()}function tt(n,e){return n}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends sn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class mP{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ui.UNAUTHENTICATED))}shutdown(){}}class aV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class lV{constructor(e){this.t=e,this.currentUser=ui.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const l=C=>this.i!==i?(i=this.i,t(C)):Promise.resolve();let u=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Wr,e.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const C=u;e.enqueueRetryable((0,be.Z)(function*(){yield C.promise,yield l(r.currentUser)}))},_=C=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(C=>_(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?_(C):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Wr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pt("string"==typeof r.accessToken),new mP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pt(null===e||"string"==typeof e),new ui(e)}}class cV{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=ui.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Pt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class uV{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new cV(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ui.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _P{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dV{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=l=>{null!=l.error&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.A;return this.A=l.token,He("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const i=l=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.T.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.T.getImmediate({optional:!0});l?i(l):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pt("string"==typeof t.token),this.A=t.token,new _P(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function hV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class yP{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=hV(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<t&&(r+=e.charAt(i[l]%e.length))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function xm(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function vP(n){return n+"\0"}class sr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return sr.fromMillis(Date.now())}static fromDate(e){return sr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new sr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new sr(0,0))}static max(){return new Nt(new sr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class kC{constructor(e,t,r){void 0===t?t=0:t>e.length&&pt(),void 0===r?r=e.length-t:r>e.length-t&&pt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===kC.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof kC?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const l=e.get(i),u=t.get(i);if(l<u)return-1;if(l>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pn extends kC{construct(e,t,r){return new pn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new pn(t)}static emptyPath(){return new pn([])}}const fV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vr extends kC{construct(e,t,r){return new vr(e,t,r)}static isValidIdentifier(e){return fV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const l=()=>{if(0===r.length)throw new Fe(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Fe(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Fe(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===f?(u=!u,i++):"."!==f||u?(r+=f,i++):(l(),i++)}if(l(),u)throw new Fe(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vr(t)}static emptyPath(){return new vr([])}}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(pn.fromString(e))}static fromName(e){return new Ye(pn.fromString(e).popFirst(5))}static empty(){return new Ye(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new pn(e.slice()))}}class jD{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function rM(n){return n.fields.find(e=>2===e.kind)}function Hf(n){return n.fields.filter(e=>2!==e.kind)}jD.UNKNOWN_ID=-1;class HD{constructor(e,t){this.fieldPath=e,this.kind=t}}class xC{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xC(0,fo.min())}}function CP(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Nt.fromTimestamp(1e9===r?new sr(t+1,0):new sr(t,r));return new fo(i,Ye.empty(),e)}function wP(n){return new fo(n.readTime,n.key,-1)}class fo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fo(Nt.min(),Ye.empty(),-1)}static max(){return new fo(Nt.max(),Ye.empty(),-1)}}function iM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ye.comparator(n.documentKey,e.documentKey),0!==t?t:$t(n.largestBatchId,e.largestBatchId))}const bP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function xd(n){return sM.apply(this,arguments)}function sM(){return sM=(0,be.Z)(function*(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==bP)throw n;He("LocalStore","Unexpectedly lost primary lease")}),sM.apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,l=0,u=!1;e.forEach(f=>{++i,f.next(()=>{++l,u&&l===i&&t()},_=>r(_))}),u=!0,l===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,l)=>{r.push(t.call(this,i,l))}),this.waitFor(r)}static mapArray(e,t){return new de((r,i)=>{const l=e.length,u=new Array(l);let f=0;for(let _=0;_<l;_++){const C=_;t(e[C]).next(I=>{u[C]=I,++f,f===l&&r(u)},I=>i(I))}})}static doWhile(e,t){return new de((r,i)=>{const l=()=>{!0===e()?t().next(()=>{l()},i):r()};l()})}}class $D{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Wr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new OC(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=oM(r.target.error);this.P.reject(new OC(e,i))}}static open(e,t,r,i){try{return new $D(t,e.transaction(i,r))}catch(l){throw new OC(t,l)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(He("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _V(t)}}class il{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===il.D((0,sn.z$)())&&Mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return He("SimpleDb","Removing database:",e),$f(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,sn.hl)())return!1;if(il.N())return!0;const e=(0,sn.z$)(),t=il.D(e),r=0<t&&t<10,i=il.k(e),l=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,be.Z)(function*(){return t.db||(He("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=u=>{r(u.target.result)},l.onblocked=()=>{i(new OC(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=u=>{const f=u.target.error;i("VersionError"===f.name?new Fe(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Fe(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new OC(e,f))},l.onupgradeneeded=u=>{He("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.S.$(u.target.result,l.transaction,u.oldVersion,t.version).next(()=>{He("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var l=this;return(0,be.Z)(function*(){const u="readonly"===t;let f=0;for(;;){++f;try{l.db=yield l.F(e);const _=$D.open(l.db,e,u?"readonly":"readwrite",r),C=i(_).next(I=>(_.V(),I)).catch(I=>(_.abort(I),de.reject(I))).toPromise();return C.catch(()=>{}),yield _.v,C}catch(_){const C=_,I="FirebaseError"!==C.name&&f<3;if(He("SimpleDb","Transaction failed with error:",C.message,"Retrying:",I),l.close(),!I)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class mV{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return $f(this.U.delete())}}class OC extends Fe{constructor(e,t){super(me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Od(n){return"IndexedDbTransactionError"===n.name}class _V{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(He("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(He("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$f(r)}add(e){return He("SimpleDb","ADD",this.store.name,e,e),$f(this.store.add(e))}get(e){return $f(this.store.get(e)).next(t=>(void 0===t&&(t=null),He("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return He("SimpleDb","DELETE",this.store.name,e),$f(this.store.delete(e))}count(){return He("SimpleDb","COUNT",this.store.name),$f(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),l=[];return this.H(i,(u,f)=>{l.push(f)}).next(()=>l)}{const i=this.store.getAll(r.range);return new de((l,u)=>{i.onerror=f=>{u(f.target.error)},i.onsuccess=f=>{l(f.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((i,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Y(e,t){He("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(l,u,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new de((r,i)=>{t.onerror=l=>{const u=oM(l.target.error);i(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next(f=>{f?u.continue():r()}):r()}})}H(e,t){const r=[];return new de((i,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void i();const _=new mV(f),C=t(f.primaryKey,f.value,_);if(C instanceof de){const I=C.catch(A=>(_.done(),de.reject(A)));r.push(I)}_.isDone?i():null===_.G?f.continue():f.continue(_.G)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $f(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=oM(r.target.error);t(i)}})}let EP=!1;function oM(n){const e=il.D((0,sn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return EP||(EP=!0,setTimeout(()=>{throw r},0)),r}}return n}class yV{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;He("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,be.Z)(function*(){t.task=null;try{He("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Od(r)?He("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield xd(r)}yield t.nt(6e4)}))}}class vV{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,be.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,l=!0;return de.doWhile(()=>!0===l&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return He("IndexBackiller",`Processing collection: ${u}`),this.rt(e,u,i).next(f=>{i-=f,r.add(u)});l=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ot(i,l)).next(f=>(He("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>u.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,l)=>{const u=wP(l);iM(u,r)>0&&(r=u)}),new fo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Fs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function IP(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function SP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Fs.at=-1;class Cr{constructor(e,t){this.comparator=e,this.root=t||Di.EMPTY}insert(e,t){return new Cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Di.BLACK,null,null))}remove(e){return new Cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Di.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ZD(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ZD(this.root,e,this.comparator,!1)}getReverseIterator(){return new ZD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ZD(this.root,e,this.comparator,!0)}}class ZD{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Di{constructor(e,t,r,i,l){this.key=e,this.value=t,this.color=r??Di.RED,this.left=i??Di.EMPTY,this.right=l??Di.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,l){return new Di(e??this.key,t??this.value,r??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const l=r(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===l?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Di.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Di.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const e=this.left.check();if(e!==this.right.check())throw pt();return e+(this.isRed()?0:1)}}Di.EMPTY=null,Di.RED=!0,Di.BLACK=!1,Di.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Di(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ln{constructor(e){this.comparator=e,this.data=new Cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new TP(this.data.getIterator())}getIteratorFrom(e){return new TP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(i,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ln(this.comparator);return t.data=e,t}}class TP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Om(n){return n.hasNext()?n.getNext():void 0}class po{constructor(e){this.fields=e,e.sort(vr.comparator)}static empty(){return new po([])}unionWith(e){let t=new Ln(vr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new po(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xm(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Yr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let l=0;l<r.length;++l)i+=String.fromCharCode(r[l]);return i}(e);return new Yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yr.EMPTY_BYTE_STRING=new Yr("");const wV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rd(n){if(Pt(!!n),"string"==typeof n){let e=0;const t=wV.exec(n);if(Pt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wr(n.seconds),nanos:wr(n.nanos)}}function wr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function zf(n){return"string"==typeof n?Yr.fromBase64String(n):Yr.fromUint8Array(n)}function aM(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function AP(n){const e=n.mapValue.fields.__previous_value__;return aM(e)?AP(e):e}function RC(n){const e=Rd(n.mapValue.fields.__local_write_time__.timestampValue);return new sr(e.seconds,e.nanos)}class bV{constructor(e,t,r,i,l,u,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.useFetchStreams=_}}class Pd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Pd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Pd&&e.projectId===this.projectId&&e.database===this.database}}function PC(n){return null==n}function NC(n){return 0===n&&1/n==-1/0}function MP(n){return"number"==typeof n&&Number.isInteger(n)&&!NC(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Nd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zD={nullValue:"NULL_VALUE"};function Gf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?aM(n)?4:RP(n)?9007199254740991:10:pt()}function Jl(n,e){if(n===e)return!0;const t=Gf(n);if(t!==Gf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return RC(n).isEqual(RC(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const l=Rd(r.timestampValue),u=Rd(i.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,zf(n.bytesValue).isEqual(zf(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return wr(r.geoPointValue.latitude)===wr(i.geoPointValue.latitude)&&wr(r.geoPointValue.longitude)===wr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return wr(r.integerValue)===wr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const l=wr(r.doubleValue),u=wr(i.doubleValue);return l===u?NC(l)===NC(u):isNaN(l)&&isNaN(u)}return!1}(n,e);case 9:return xm(n.arrayValue.values||[],e.arrayValue.values||[],Jl);case 10:return function(r,i){const l=r.mapValue.fields||{},u=i.mapValue.fields||{};if(IP(l)!==IP(u))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(void 0===u[f]||!Jl(l[f],u[f])))return!1;return!0}(n,e);default:return pt()}var i}function FC(n,e){return void 0!==(n.values||[]).find(t=>Jl(t,e))}function Fd(n,e){if(n===e)return 0;const t=Gf(n),r=Gf(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(i,l){const u=wr(i.integerValue||i.doubleValue),f=wr(l.integerValue||l.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1}(n,e);case 3:return kP(n.timestampValue,e.timestampValue);case 4:return kP(RC(n),RC(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(i,l){const u=zf(i),f=zf(l);return u.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,l){const u=i.split("/"),f=l.split("/");for(let _=0;_<u.length&&_<f.length;_++){const C=$t(u[_],f[_]);if(0!==C)return C}return $t(u.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,l){const u=$t(wr(i.latitude),wr(l.latitude));return 0!==u?u:$t(wr(i.longitude),wr(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,l){const u=i.values||[],f=l.values||[];for(let _=0;_<u.length&&_<f.length;++_){const C=Fd(u[_],f[_]);if(C)return C}return $t(u.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,l){if(i===Nd.mapValue&&l===Nd.mapValue)return 0;if(i===Nd.mapValue)return 1;if(l===Nd.mapValue)return-1;const u=i.fields||{},f=Object.keys(u),_=l.fields||{},C=Object.keys(_);f.sort(),C.sort();for(let I=0;I<f.length&&I<C.length;++I){const A=$t(f[I],C[I]);if(0!==A)return A;const V=Fd(u[f[I]],_[C[I]]);if(0!==V)return V}return $t(f.length,C.length)}(n.mapValue,e.mapValue);default:throw pt()}}function kP(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=Rd(n),r=Rd(e),i=$t(t.seconds,r.seconds);return 0!==i?i:$t(t.nanos,r.nanos)}function Rm(n){return lM(n)}function lM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Rd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?zf(n.bytesValue).toBase64():"referenceValue"in n?Ye.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",l=!0;for(const u of r.values||[])l?l=!1:i+=",",i+=lM(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let l="{",u=!0;for(const f of i)u?u=!1:l+=",",l+=`${f}:${lM(r.fields[f])}`;return l+"}"}(n.mapValue):pt();var e}function qf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cM(n){return!!n&&"integerValue"in n}function LC(n){return!!n&&"arrayValue"in n}function xP(n){return!!n&&"nullValue"in n}function OP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function GD(n){return!!n&&"mapValue"in n}function VC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Zf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=VC(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=VC(n.arrayValue.values[t]);return e}return Object.assign({},n)}function RP(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function DV(n){return"nullValue"in n?zD:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?qf(Pd.empty(),Ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:pt()}function EV(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?qf(Pd.empty(),Ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Nd:pt()}function PP(n,e){const t=Fd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function NP(n,e){const t=Fd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ei{constructor(e){this.value=e}static empty(){return new Ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!GD(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=VC(t)}setAll(e){let t=vr.emptyPath(),r={},i=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=f.popLast()}u?r[f.lastSegment()]=VC(u):i.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,i)}delete(e){const t=this.field(e.popLast());GD(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];GD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Zf(t,(i,l)=>e[i]=l);for(const i of r)delete e[i]}clone(){return new Ei(VC(this.value))}}function FP(n){const e=[];return Zf(n.fields,(t,r)=>{const i=new vr([t]);if(GD(r)){const l=FP(r.mapValue).fields;if(0===l.length)e.push(i);else for(const u of l)e.push(i.child(u))}else e.push(i)}),new po(e)}class qn{constructor(e,t,r,i,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=l,this.documentState=u}static newInvalidDocument(e){return new qn(e,0,Nt.min(),Nt.min(),Ei.empty(),0)}static newFoundDocument(e,t,r){return new qn(e,1,t,Nt.min(),r,0)}static newNoDocument(e,t){return new qn(e,2,t,Nt.min(),Ei.empty(),0)}static newUnknownDocument(e,t){return new qn(e,3,t,Nt.min(),Ei.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class IV{constructor(e,t=null,r=[],i=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=u,this.endAt=f,this.ht=null}}function LP(n,e=null,t=[],r=[],i=null,l=null,u=null){return new IV(n,e,t,r,i,l,u)}function Wf(n){const e=tt(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Rm(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),PC(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Rm(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Rm(r)).join(",")),e.ht=t}return e.ht}function UC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!PV(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Jl(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HP(n.startAt,e.startAt)&&HP(n.endAt,e.endAt)}function qD(n){return Ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function WD(n,e){return n.filters.filter(t=>t instanceof Ii&&t.field.isEqual(e))}function VP(n,e,t){let r=zD,i=!0;for(const l of WD(n,e)){let u=zD,f=!0;switch(l.op){case"<":case"<=":u=DV(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,f=!1;break;case"!=":case"not-in":u=zD}PP({value:r,inclusive:i},{value:u,inclusive:f})<0&&(r=u,i=f)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];PP({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function UP(n,e,t){let r=Nd,i=!0;for(const l of WD(n,e)){let u=Nd,f=!0;switch(l.op){case">=":case">":u=EV(l.value),f=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,f=!1;break;case"!=":case"not-in":u=Nd}NP({value:r,inclusive:i},{value:u,inclusive:f})>0&&(r=u,i=f)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];NP({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Ii extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new TV(e,t,r):"array-contains"===t?new kV(e,r):"in"===t?new xV(e,r):"not-in"===t?new OV(e,r):"array-contains-any"===t?new RV(e,r):new Ii(e,t,r)}static lt(e,t,r){return"in"===t?new AV(e,r):new MV(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Fd(t,this.value)):null!==t&&Gf(this.value)===Gf(t)&&this.ft(Fd(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class TV extends Ii{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.ft(t)}}class AV extends Ii{constructor(e,t){super(e,"in",t),this.keys=BP(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class MV extends Ii{constructor(e,t){super(e,"not-in",t),this.keys=BP(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function BP(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class kV extends Ii{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return LC(t)&&FC(t.arrayValue,this.value)}}class xV extends Ii{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&FC(this.value.arrayValue,t)}}class OV extends Ii{constructor(e,t){super(e,"not-in",t)}matches(e){if(FC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!FC(this.value.arrayValue,t)}}class RV extends Ii{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!LC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>FC(this.value.arrayValue,r))}}class Ld{constructor(e,t){this.position=e,this.inclusive=t}}class Pm{constructor(e,t="asc"){this.field=e,this.dir=t}}function PV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function jP(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const l=e[i],u=n.position[i];if(r=l.field.isKeyField()?Ye.comparator(Ye.fromName(u.referenceValue),t.key):Fd(u,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function HP(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jl(n.position[t],e.position[t]))return!1;return!0}class ou{constructor(e,t=null,r=[],i=[],l=null,u="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=_,this._t=null,this.wt=null}}function $P(n,e,t,r,i,l,u,f){return new ou(n,e,t,r,i,l,u,f)}function Nm(n){return new ou(n)}function ZP(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function uM(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function dM(n){for(const e of n.filters)if(e.dt())return e.field;return null}function hM(n){return null!==n.collectionGroup}function Fm(n){const e=tt(n);if(null===e._t){e._t=[];const t=dM(e),r=uM(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Pm(t)),e._t.push(new Pm(vr.keyField(),"asc"));else{let i=!1;for(const l of e.explicitOrderBy)e._t.push(l),l.field.isKeyField()&&(i=!0);if(!i){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Pm(vr.keyField(),l))}}}return e._t}function hs(n){const e=tt(n);if(!e.wt)if("F"===e.limitType)e.wt=LP(e.path,e.collectionGroup,Fm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of Fm(e))t.push(new Pm(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new Ld(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ld(e.startAt.position,e.startAt.inclusive):null;e.wt=LP(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function YD(n,e,t){return new ou(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function BC(n,e){return UC(hs(n),hs(e))&&n.limitType===e.limitType}function zP(n){return`${Wf(hs(n))}|lt:${n.limitType}`}function fM(n){return`Query(target=${function SV(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Rm(r.value)}`;var r}).join(", ")}]`),PC(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Rm(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Rm(t)).join(",")),`Target(${e})`}(hs(n))}; limitType=${n.limitType})`}function pM(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ye.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,l,u){const f=jP(i,l,u);return i.inclusive?f<=0:f<0}(t.startAt,Fm(t),r)||t.endAt&&!function(i,l,u){const f=jP(i,l,u);return i.inclusive?f>=0:f>0}(t.endAt,Fm(t),r)));var t,r}function GP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qP(n){return(e,t)=>{let r=!1;for(const i of Fm(n)){const l=NV(i,e,t);if(0!==l)return l;r=r||i.field.isKeyField()}return 0}}function NV(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(i,l,u){const f=l.data.field(i),_=u.data.field(i);return null!==f&&null!==_?Fd(f,_):pt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pt()}}function WP(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:NC(e)?"-0":e}}function YP(n){return{integerValue:""+n}}function KP(n,e){return MP(e)?YP(e):WP(n,e)}class KD{constructor(){this._=void 0}}function FV(n,e,t){return n instanceof Lm?function(r,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(l.fields.__previous_value__=i),{mapValue:l}}(t,e):n instanceof Yf?QP(n,e):n instanceof Kf?XP(n,e):function(r,i){const l=JP(r,i),u=e1(l)+e1(r.yt);return cM(l)&&cM(r.yt)?YP(u):WP(r.It,u)}(n,e)}function LV(n,e,t){return n instanceof Yf?QP(n,e):n instanceof Kf?XP(n,e):t}function JP(n,e){return n instanceof Vm?cM(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Lm extends KD{}class Yf extends KD{constructor(e){super(),this.elements=e}}function QP(n,e){const t=t1(e);for(const r of n.elements)t.some(i=>Jl(i,r))||t.push(r);return{arrayValue:{values:t}}}class Kf extends KD{constructor(e){super(),this.elements=e}}function XP(n,e){let t=t1(e);for(const r of n.elements)t=t.filter(i=>!Jl(i,r));return{arrayValue:{values:t}}}class Vm extends KD{constructor(e,t){super(),this.It=e,this.yt=t}}function e1(n){return wr(n.integerValue||n.doubleValue)}function t1(n){return LC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class jC{constructor(e,t){this.field=e,this.transform=t}}class UV{constructor(e,t){this.version=e,this.transformResults=t}}class or{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function JD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class QD{}function n1(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Bm(n.key,or.none()):new Um(n.key,n.data,or.none());{const t=n.data,r=Ei.empty();let i=new Ln(vr.comparator);for(let l of e.fields)if(!i.has(l)){let u=t.field(l);null===u&&l.length>1&&(l=l.popLast(),u=t.field(l)),null===u?r.delete(l):r.set(l,u),i=i.add(l)}return new au(n.key,r,new po(i.toArray()),or.none())}}function BV(n,e,t){n instanceof Um?function(r,i,l){const u=r.value.clone(),f=o1(r.fieldTransforms,i,l.transformResults);u.setAll(f),i.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,e,t):n instanceof au?function(r,i,l){if(!JD(r.precondition,i))return void i.convertToUnknownDocument(l.version);const u=o1(r.fieldTransforms,i,l.transformResults),f=i.data;f.setAll(s1(r)),f.setAll(u),i.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function HC(n,e,t,r){return n instanceof Um?function(i,l,u,f){if(!JD(i.precondition,l))return u;const _=i.value.clone(),C=a1(i.fieldTransforms,f,l);return _.setAll(C),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof au?function(i,l,u,f){if(!JD(i.precondition,l))return u;const _=a1(i.fieldTransforms,f,l),C=l.data;return C.setAll(s1(i)),C.setAll(_),l.convertToFoundDocument(l.version,C).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(I=>I.field))}(n,e,t,r):(u=t,JD(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u);var l,u}function jV(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),l=JP(r.transform,i||null);null!=l&&(null===t&&(t=Ei.empty()),t.set(r.field,l))}return t||null}function r1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&xm(t,r,(i,l)=>function VV(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Yf&&r instanceof Yf||t instanceof Kf&&r instanceof Kf?xm(t.elements,r.elements,Jl):t instanceof Vm&&r instanceof Vm?Jl(t.yt,r.yt):t instanceof Lm&&r instanceof Lm);var t,r}(i,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Um extends QD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class au extends QD{constructor(e,t,r,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function s1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function o1(n,e,t){const r=new Map;Pt(n.length===t.length);for(let i=0;i<t.length;i++){const l=n[i],u=l.transform,f=e.data.field(l.field);r.set(l.field,LV(u,f,t[i]))}return r}function a1(n,e,t){const r=new Map;for(const i of n){const l=i.transform,u=t.data.field(i.field);r.set(i.field,FV(l,u,e))}return r}class Bm extends QD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gM extends QD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class HV{constructor(e){this.count=e}}var Ur,gn;function l1(n){switch(n){default:return pt();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function c1(n){if(void 0===n)return Mr("GRPC error has no .code"),me.UNKNOWN;switch(n){case Ur.OK:return me.OK;case Ur.CANCELLED:return me.CANCELLED;case Ur.UNKNOWN:return me.UNKNOWN;case Ur.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case Ur.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case Ur.INTERNAL:return me.INTERNAL;case Ur.UNAVAILABLE:return me.UNAVAILABLE;case Ur.UNAUTHENTICATED:return me.UNAUTHENTICATED;case Ur.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case Ur.NOT_FOUND:return me.NOT_FOUND;case Ur.ALREADY_EXISTS:return me.ALREADY_EXISTS;case Ur.PERMISSION_DENIED:return me.PERMISSION_DENIED;case Ur.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case Ur.ABORTED:return me.ABORTED;case Ur.OUT_OF_RANGE:return me.OUT_OF_RANGE;case Ur.UNIMPLEMENTED:return me.UNIMPLEMENTED;case Ur.DATA_LOSS:return me.DATA_LOSS;default:return pt()}}(gn=Ur||(Ur={}))[gn.OK=0]="OK",gn[gn.CANCELLED=1]="CANCELLED",gn[gn.UNKNOWN=2]="UNKNOWN",gn[gn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gn[gn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gn[gn.NOT_FOUND=5]="NOT_FOUND",gn[gn.ALREADY_EXISTS=6]="ALREADY_EXISTS",gn[gn.PERMISSION_DENIED=7]="PERMISSION_DENIED",gn[gn.UNAUTHENTICATED=16]="UNAUTHENTICATED",gn[gn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gn[gn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gn[gn.ABORTED=10]="ABORTED",gn[gn.OUT_OF_RANGE=11]="OUT_OF_RANGE",gn[gn.UNIMPLEMENTED=12]="UNIMPLEMENTED",gn[gn.INTERNAL=13]="INTERNAL",gn[gn.UNAVAILABLE=14]="UNAVAILABLE",gn[gn.DATA_LOSS=15]="DATA_LOSS";class Vd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,l]of r)if(this.equalsFn(i,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zf(this.inner,(t,r)=>{for(const[i,l]of r)e(i,l)})}isEmpty(){return SP(this.inner)}size(){return this.innerSize}}const $V=new Cr(Ye.comparator);function Ls(){return $V}const u1=new Cr(Ye.comparator);function $C(...n){let e=u1;for(const t of n)e=e.insert(t.key,t);return e}function d1(n){let e=u1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ql(){return ZC()}function h1(){return ZC()}function ZC(){return new Vd(n=>n.toString(),(n,e)=>n.isEqual(e))}const ZV=new Cr(Ye.comparator),zV=new Ln(Ye.comparator);function Yt(...n){let e=zV;for(const t of n)e=e.add(t);return e}const GV=new Ln($t);function XD(){return GV}class zC{constructor(e,t,r,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,GC.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new zC(Nt.min(),i,XD(),Ls(),Yt())}}class GC{constructor(e,t,r,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new GC(r,t,Yt(),Yt(),Yt())}}class eE{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class f1{constructor(e,t){this.targetId=e,this.At=t}}class p1{constructor(e,t,r=Yr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class g1{constructor(){this.Rt=0,this.bt=_1(),this.Pt=Yr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Yt(),t=Yt(),r=Yt();return this.bt.forEach((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:pt()}}),new GC(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=_1()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class qV{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ls(),this.qt=m1(),this.Kt=new Ln($t)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:pt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const l=i.target;if(qD(l))if(0===r){const u=new Ye(l.path);this.jt(t,u,qn.newNoDocument(u,Nt.min()))}else Pt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((l,u)=>{const f=this.Xt(u);if(f){if(l.current&&qD(f.target)){const _=new Ye(f.target.path);null!==this.Ut.get(_)||this.ee(u,_)||this.jt(u,_,qn.newNoDocument(_,e))}l.Dt&&(t.set(u,l.xt()),l.Nt())}});let r=Yt();this.qt.forEach((l,u)=>{let f=!0;u.forEachWhile(_=>{const C=this.Xt(_);return!C||2===C.purpose||(f=!1,!1)}),f&&(r=r.add(l))}),this.Ut.forEach((l,u)=>u.setReadTime(e));const i=new zC(e,t,this.Kt,this.Ut,r);return this.Ut=Ls(),this.qt=m1(),this.Kt=new Ln($t),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new g1,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Ln($t),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||He("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new g1),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function m1(){return new Cr(Ye.comparator)}function _1(){return new Cr(Ye.comparator)}const WV={asc:"ASCENDING",desc:"DESCENDING"},YV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class KV{constructor(e,t){this.databaseId=e,this.gt=t}}function qC(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function y1(n,e){return n.gt?e.toBase64():e.toUint8Array()}function JV(n,e){return qC(n,e.toTimestamp())}function di(n){return Pt(!!n),Nt.fromTimestamp(function(e){const t=Rd(e);return new sr(t.seconds,t.nanos)}(n))}function mM(n,e){return(t=n,new pn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function v1(n){const e=pn.fromString(n);return Pt(T1(e)),e}function WC(n,e){return mM(n.databaseId,e.path)}function Xl(n,e){const t=v1(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(w1(t))}function _M(n,e){return mM(n.databaseId,e)}function C1(n){const e=v1(n);return 4===e.length?pn.emptyPath():w1(e)}function YC(n){return new pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function w1(n){return Pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function b1(n,e,t){return{name:WC(n,e),fields:t.value.mapValue.fields}}function D1(n,e,t){const r=Xl(n,e.name),i=di(e.updateTime),l=new Ei({mapValue:{fields:e.fields}}),u=qn.newFoundDocument(r,i,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function KC(n,e){let t;if(e instanceof Um)t={update:b1(n,e.key,e.value)};else if(e instanceof Bm)t={delete:WC(n,e.key)};else if(e instanceof au)t={update:b1(n,e.key,e.data),updateMask:oU(e.fieldMask)};else{if(!(e instanceof gM))return pt();t={verify:WC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,l){const u=l.transform;if(u instanceof Lm)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Yf)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Kf)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Vm)return{fieldPath:l.field.canonicalString(),increment:u.yt};throw pt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:JV(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:pt()),t;var i}function yM(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?or.updateTime(di(i.updateTime)):void 0!==i.exists?or.exists(i.exists):or.none():or.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(l,u){let f=null;"setToServerValue"in u?(Pt("REQUEST_TIME"===u.setToServerValue),f=new Lm):"appendMissingElements"in u?f=new Yf(u.appendMissingElements.values||[]):"removeAllFromArray"in u?f=new Kf(u.removeAllFromArray.values||[]):"increment"in u?f=new Vm(l,u.increment):pt();const _=vr.fromServerFormat(u.fieldPath);return new jC(_,f)}(n,i)):[];var i;if(e.update){const i=Xl(n,e.update.name),l=new Ei({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new po((e.updateMask.fieldPaths||[]).map(C=>vr.fromServerFormat(C)));return new au(i,l,u,t,r)}return new Um(i,l,t,r)}if(e.delete){const i=Xl(n,e.delete);return new Bm(i,t)}if(e.verify){const i=Xl(n,e.verify);return new gM(i,t)}return pt()}function E1(n,e){return{documents:[_M(n,e.path)]}}function vM(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=_M(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=_M(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const C=_.map(I=>function(A){if("=="===A.op){if(OP(A.value))return{unaryFilter:{field:jm(A.field),op:"IS_NAN"}};if(xP(A.value))return{unaryFilter:{field:jm(A.field),op:"IS_NULL"}}}else if("!="===A.op){if(OP(A.value))return{unaryFilter:{field:jm(A.field),op:"IS_NOT_NAN"}};if(xP(A.value))return{unaryFilter:{field:jm(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jm(A.field),op:rU(A.op),value:A.value}}}(I));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);i&&(t.structuredQuery.where=i);const l=function(_){if(0!==_.length)return _.map(C=>{return{field:jm((I=C).field),direction:nU(I.dir)};var I})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=(C=e.limit,n.gt||PC(C)?C:{value:C});var C,f,_;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function I1(n){let e=C1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pt(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let l=[];t.where&&(l=S1(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(I=>{return new Pm(Hm((A=I).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let f=null;t.limit&&(f=function(I){let A;return A="object"==typeof I?I.value:I,PC(A)?null:A}(t.limit));let _=null;var I;t.startAt&&(_=new Ld((I=t.startAt).values||[],!!I.before));let C=null;return t.endAt&&(C=function(I){return new Ld(I.values||[],!I.before)}(t.endAt)),$P(e,i,u,l,f,"F",_,C)}function S1(n){return n?void 0!==n.unaryFilter?[sU(n)]:void 0!==n.fieldFilter?[iU(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>S1(e)).reduce((e,t)=>e.concat(t)):pt():[]}function nU(n){return WV[n]}function rU(n){return YV[n]}function jm(n){return{fieldPath:n.canonicalString()}}function Hm(n){return vr.fromServerFormat(n.fieldPath)}function iU(n){return Ii.create(Hm(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(n.fieldFilter.op),n.fieldFilter.value)}function sU(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Hm(n.unaryFilter.field);return Ii.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Hm(n.unaryFilter.field);return Ii.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Hm(n.unaryFilter.field);return Ii.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Hm(n.unaryFilter.field);return Ii.create(i,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}function oU(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function T1(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function fs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=A1(e)),e=aU(n.get(t),e);return A1(e)}function aU(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const l=n.charAt(i);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function A1(n){return n+"\x01\x01"}function ec(n){const e=n.length;if(Pt(e>=2),2===e)return Pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),pn.emptyPath();const t=e-2,r=[];let i="";for(let l=0;l<e;){const u=n.indexOf("\x01",l);switch((u<0||u>t)&&pt(),n.charAt(u+1)){case"\x01":const f=n.substring(l,u);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(l,u),i+="\0";break;case"\x11":i+=n.substring(l,u+1);break;default:pt()}l=u+2}return new pn(r)}const M1=["userId","batchId"];function tE(n,e){return[n,fs(e)]}function k1(n,e,t){return[n,fs(e),t]}const lU={},cU=["prefixPath","collectionGroup","readTime","documentId"],uU=["prefixPath","collectionGroup","documentId"],dU=["collectionGroup","readTime","prefixPath","documentId"],hU=["canonicalId","targetId"],fU=["targetId","path"],pU=["path","targetId"],gU=["collectionId","parent"],mU=["indexId","uid"],_U=["uid","sequenceNumber"],yU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vU=["indexId","uid","orderedDocumentKey"],CU=["userId","collectionPath","documentId"],wU=["userId","collectionPath","largestBatchId"],bU=["userId","collectionGroup","largestBatchId"],x1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],DU=[...x1,"documentOverlays"],O1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],R1=O1,EU=[...R1,"indexConfiguration","indexState","indexEntries"];class CM extends DP{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function hi(n,e){const t=tt(n);return il.M(t.ie,e)}class wM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&BV(l,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=HC(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=HC(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=h1();return this.mutations.forEach(i=>{const l=e.get(i.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(i.key)?null:f;const _=n1(u,f);null!==_&&r.set(i.key,_),u.isValidDocument()||u.convertToNoDocument(Nt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&xm(this.mutations,e.mutations,(t,r)=>r1(t,r))&&xm(this.baseMutations,e.baseMutations,(t,r)=>r1(t,r))}}class bM{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pt(e.mutations.length===r.length);let i=ZV;const l=e.mutations;for(let u=0;u<l.length;u++)i=i.insert(l[u].key,r[u].version);return new bM(e,t,r,i)}}class DM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ud{constructor(e,t,r,i,l=Nt.min(),u=Nt.min(),f=Yr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f}withSequenceNumber(e){return new Ud(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ud(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ud(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class P1{constructor(e){this.re=e}}function N1(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:nE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:WC(i=n.re,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:qC(i,l.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Jf(e.version)};else{if(!e.isUnknownDocument())return pt();r.unknownDocument={path:t.path.toArray(),version:Jf(e.version)}}var i,l;return r}function nE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Jf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qf(n){const e=new sr(n.seconds,n.nanoseconds);return Nt.fromTimestamp(e)}function Xf(n,e){const t=(e.baseMutations||[]).map(l=>yM(n.re,l));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(u.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>yM(n.re,l)),i=sr.fromMillis(e.localWriteTimeMs);return new wM(e.batchId,i,t,r)}function JC(n){const e=Qf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Qf(n.lastLimboFreeSnapshotVersion):Nt.min();let r;var i;return void 0!==n.query.documents?(Pt(1===(i=n.query).documents.length),r=hs(Nm(C1(i.documents[0])))):r=hs(I1(n.query)),new Ud(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Yr.fromBase64String(n.resumeToken))}function F1(n,e){const t=Jf(e.snapshotVersion),r=Jf(e.lastLimboFreeSnapshotVersion);let i;i=qD(e.target)?E1(n.re,e.target):vM(n.re,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Wf(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function EM(n){const e=I1({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?YD(e,e.limit,"L"):e}function IM(n,e){return new DM(e.largestBatchId,yM(n.re,e.overlayMutation))}function L1(n,e){const t=e.path.lastSegment();return[n,fs(e.path.popLast()),t]}function V1(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Jf(r.readTime),documentKey:fs(r.documentKey.path),largestBatchId:r.largestBatchId}}class SU{getBundleMetadata(e,t){return U1(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Qf(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return U1(e).put({bundleId:(r=t).id,createTime:Jf(di(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return B1(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:EM(i.bundledQuery),readTime:Qf(i.readTime)};var i})}saveNamedQuery(e,t){return B1(e).put({name:(r=t).name,readTime:Jf(di(r.readTime)),bundledQuery:r.bundledQuery});var r}}function U1(n){return hi(n,"bundles")}function B1(n){return hi(n,"namedQueries")}class rE{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new rE(e,t.uid||"")}getOverlay(e,t){return QC(e).get(L1(this.userId,t)).next(r=>r?IM(this.It,r):null)}getOverlays(e,t){const r=Ql();return de.forEach(t,i=>this.getOverlay(e,i).next(l=>{null!==l&&r.set(i,l)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((l,u)=>{const f=new DM(t,u);i.push(this.ue(e,f))}),de.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(fs(u.getCollectionPath())));const l=[];return i.forEach(u=>{const f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(QC(e).Y("collectionPathOverlayIndex",f))}),de.waitFor(l)}getOverlaysForCollection(e,t,r){const i=Ql(),l=fs(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return QC(e).W("collectionPathOverlayIndex",u).next(f=>{for(const _ of f){const C=IM(this.It,_);i.set(C.getKey(),C)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const l=Ql();let u;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return QC(e).Z({index:"collectionGroupOverlayIndex",range:f},(_,C,I)=>{const A=IM(this.It,C);l.size()<i||A.largestBatchId===u?(l.set(A.getKey(),A),u=A.largestBatchId):I.done()}).next(()=>l)}ue(e,t){return QC(e).put(function(r,i,l){const[u,f,_]=L1(i,l.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:KC(r.re,l.mutation)}}(this.It,this.userId,t))}}function QC(n){return hi(n,"documentOverlays")}class ep{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(wr(e.integerValue));else if("doubleValue"in e){const r=wr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),NC(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(zf(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?RP(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):pt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ye.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function TU(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function j1(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const l=TU(255&t[i]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}ep.Te=new ep;class AU{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=j1(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=j1(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,i,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class MU{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class kU{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class XC{constructor(){this.Be=new AU,this.Le=new MU(this.Be),this.Ue=new kU(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class tp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new tp(this.indexId,this.documentKey,this.arrayValue,r)}}function np(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=H1(n.arrayValue,e.arrayValue),0!==t?t:(t=H1(n.directionalValue,e.directionalValue),0!==t?t:Ye.comparator(n.documentKey,e.documentKey)))}function H1(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class xU{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=rM(e);if(void 0!==t&&!this.ze(t))return!1;const r=Hf(e);let i=0,l=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const u=r[i];if(!this.He(this.je,u)||!this.Je(this.Ge[l++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(l>=this.Ge.length||!this.Je(this.Ge[l++],u))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class OU{constructor(){this.Ye=new SM}addToCollectionParentIndex(e,t){return this.Ye.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(fo.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(fo.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class SM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ln(pn.comparator),l=!i.has(r);return this.index[t]=i.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ln(pn.comparator)).toArray()}}const iE=new Uint8Array(0);class RU{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new SM,this.Ze=new Vd(r=>Wf(r),(r,i)=>UC(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const l={collectionId:r,parent:fs(i)};return $1(e).put(l)}return de.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[vP(t),""],!1,!0);return $1(e).W(i).next(l=>{for(const u of l){if(u.collectionId!==t)break;r.push(ec(u.parent))}return r})}addFieldIndex(e,t){const r=sE(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var u;delete i.indexId;const l=r.add(i);if(t.indexState){const u=tw(e);return l.next(f=>{u.put(V1(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=sE(e),i=tw(e),l=ew(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ew(e);let i=!0;const l=new Map;return de.forEach(this.tn(t),u=>this.en(e,u).next(f=>{i&&(i=!!f),l.set(u,f)})).next(()=>{if(i){let u=Yt();const f=[];return de.forEach(l,(_,C)=>{var I;He("IndexedDbIndexManager",`Using index ${I=_,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(xt=>`${xt.fieldPath}:${xt.kind}`).join(",")}`} to execute ${Wf(t)}`);const A=function(xt,Ft){const jt=rM(Ft);if(void 0===jt)return null;for(const Xt of WD(xt,jt.fieldPath))switch(Xt.op){case"array-contains-any":return Xt.value.arrayValue.values||[];case"array-contains":return[Xt.value]}return null}(C,_),V=function(xt,Ft){const jt=new Map;for(const Xt of Hf(Ft))for(const Kr of WD(xt,Xt.fieldPath))switch(Kr.op){case"==":case"in":jt.set(Xt.fieldPath.canonicalString(),Kr.value);break;case"not-in":case"!=":return jt.set(Xt.fieldPath.canonicalString(),Kr.value),Array.from(jt.values())}return null}(C,_),$=function(xt,Ft){const jt=[];let Xt=!0;for(const Kr of Hf(Ft)){const Aw=0===Kr.kind?VP(xt,Kr.fieldPath,xt.startAt):UP(xt,Kr.fieldPath,xt.startAt);jt.push(Aw.value),Xt&&(Xt=Aw.inclusive)}return new Ld(jt,Xt)}(C,_),K=function(xt,Ft){const jt=[];let Xt=!0;for(const Kr of Hf(Ft)){const Aw=0===Kr.kind?UP(xt,Kr.fieldPath,xt.endAt):VP(xt,Kr.fieldPath,xt.endAt);jt.push(Aw.value),Xt&&(Xt=Aw.inclusive)}return new Ld(jt,Xt)}(C,_),we=this.nn(_,C,$),Ce=this.nn(_,C,K),lt=this.sn(_,C,V),St=this.rn(_.indexId,A,we,$.inclusive,Ce,K.inclusive,lt);return de.forEach(St,xt=>r.J(xt,t.limit).next(Ft=>{Ft.forEach(jt=>{const Xt=Ye.fromSegments(jt.documentKey);u.has(Xt)||(u=u.add(Xt),f.push(Xt))})}))}).next(()=>f)}return de.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,l,u,f){const _=(null!=t?t.length:1)*Math.max(r.length,l.length),C=_/(null!=t?t.length:1),I=[];for(let A=0;A<_;++A){const V=t?this.on(t[A/C]):iE,$=this.un(e,V,r[A%C],i),K=this.cn(e,V,l[A%C],u),we=f.map(Ce=>this.un(e,V,Ce,!0));I.push(...this.createRange($,K,we))}return I}un(e,t,r,i){const l=new tp(e,Ye.empty(),t,r);return i?l:l.Ke()}cn(e,t,r,i){const l=new tp(e,Ye.empty(),t,r);return i?l.Ke():l}en(e,t){const r=new xU(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(l=>{let u=null;for(const f of l)r.We(f)&&(!u||f.fields.length>u.fields.length)&&(u=f);return u})}getIndexType(e,t){let r=2;return de.forEach(this.tn(t),i=>this.en(e,i).next(l=>{l?0!==r&&l.fields.length<function(u){let f=new Ln(vr.comparator),_=!1;for(const C of u.filters){const I=C;I.field.isKeyField()||("array-contains"===I.op||"array-contains-any"===I.op?_=!0:f=f.add(I.field))}for(const C of u.orderBy)C.field.isKeyField()||(f=f.add(C.field));return f.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new XC;for(const i of Hf(e)){const l=t.data.field(i.fieldPath);if(null==l)return null;const u=r.qe(i.kind);ep.Te.ce(l,u)}return r.$e()}on(e){const t=new XC;return ep.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new XC;return ep.Te.ce(qf(this.databaseId,t),r.qe(function(i){const l=Hf(i);return 0===l.length?0:l[l.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new XC);let l=0;for(const u of Hf(e)){const f=r[l++];for(const _ of i)if(this.ln(t,u.fieldPath)&&LC(f))i=this.fn(i,u,f);else{const C=_.qe(u.kind);ep.Te.ce(f,C)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],l=[];for(const u of r.arrayValue.values||[])for(const f of i){const _=new XC;_.seed(f.$e()),ep.Te.ce(u,_.qe(t.kind)),l.push(_)}return l}ln(e,t){return!!e.filters.find(r=>r instanceof Ii&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=sE(e),i=tw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(l=>{const u=[];return de.forEach(l,f=>i.get([f.indexId,this.uid]).next(_=>{u.push(function(C,I){const A=I?new xC(I.sequenceNumber,new fo(Qf(I.readTime),new Ye(ec(I.documentKey)),I.largestBatchId)):xC.empty(),V=C.fields.map(([$,K])=>new HD(vr.fromServerFormat($),K));return new jD(C.indexId,C.collectionGroup,V,A)}(f,_))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const l=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==l?l:$t(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=sE(e),l=tw(e);return this._n(e).next(u=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>de.forEach(f,_=>l.put(V1(_.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(i,l)=>{const u=r.get(i.collectionGroup);return(u?de.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),de.forEach(f,_=>this.wn(e,i,_).next(C=>{const I=this.mn(l,_);return C.isEqual(I)?de.resolve():this.gn(e,l,_,C,I)}))))})}yn(e,t,r,i){return ew(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return ew(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=ew(e);let l=new Ln(np);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(u,f)=>{l=l.add(new tp(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>l)}mn(e,t){let r=new Ln(np);const i=this.an(t,e);if(null==i)return r;const l=rM(t);if(null!=l){const u=e.data.field(l.fieldPath);if(LC(u))for(const f of u.arrayValue.values||[])r=r.add(new tp(t.indexId,e.key,this.on(f),i))}else r=r.add(new tp(t.indexId,e.key,iE,i));return r}gn(e,t,r,i,l){He("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(f,_,C,I,A){const V=f.getIterator(),$=_.getIterator();let K=Om(V),we=Om($);for(;K||we;){let Ce=!1,lt=!1;if(K&&we){const St=C(K,we);St<0?lt=!0:St>0&&(Ce=!0)}else null!=K?lt=!0:Ce=!0;Ce?(I(we),we=Om($)):lt?(A(K),K=Om(V)):(K=Om(V),we=Om($))}}(i,l,np,f=>{u.push(this.yn(e,t,r,f))},f=>{u.push(this.pn(e,t,r,f))}),de.waitFor(u)}_n(e){let t=1;return tw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,l)=>{l.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,f)=>np(u,f)).filter((u,f,_)=>!f||0!==np(u,_[f-1]));const i=[];i.push(e);for(const u of r){const f=np(u,e),_=np(u,t);if(0===f)i[0]=e.Ke();else if(f>0&&_<0)i.push(u),i.push(u.Ke());else if(_>0)break}i.push(t);const l=[];for(let u=0;u<i.length;u+=2)l.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,iE,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,iE,[]]));return l}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Z1)}getMinOffset(e,t){return de.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||pt())).next(Z1)}}function $1(n){return hi(n,"collectionParents")}function ew(n){return hi(n,"indexEntries")}function sE(n){return hi(n,"indexConfiguration")}function tw(n){return hi(n,"indexState")}function Z1(n){Pt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;iM(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new fo(e.readTime,e.documentKey,t)}const z1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Vs(e,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function G1(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),l=[],u=IDBKeyRange.only(t.batchId);let f=0;const _=r.Z({range:u},(I,A,V)=>(f++,V.delete()));l.push(_.next(()=>{Pt(1===f)}));const C=[];for(const I of t.mutations){const A=k1(e,I.key.path,t.batchId);l.push(i.delete(A)),C.push(I.key)}return de.waitFor(l).next(()=>C)}function oE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pt();e=n.noDocument}return JSON.stringify(e).length}Vs.DEFAULT_COLLECTION_PERCENTILE=10,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vs.DEFAULT=new Vs(41943040,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vs.DISABLED=new Vs(-1,0,0);class aE{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Pt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new aE(l,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bd(e).Z({index:"userMutationsIndex",range:r},(i,l,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const l=$m(e),u=Bd(e);return u.add({}).next(f=>{Pt("number"==typeof f);const _=new wM(f,t,r,i),C=function(V,$,K){const we=K.baseMutations.map(lt=>KC(V.re,lt)),Ce=K.mutations.map(lt=>KC(V.re,lt));return{userId:$,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:we,mutations:Ce}}(this.It,this.userId,_),I=[];let A=new Ln((V,$)=>$t(V.canonicalString(),$.canonicalString()));for(const V of i){const $=k1(this.userId,V.key.path,f);A=A.add(V.key.path.popLast()),I.push(u.put(C)),I.push(l.put($,lU))}return A.forEach(V=>{I.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.In[f]=_.keys()}),de.waitFor(I).next(()=>_)})}lookupMutationBatch(e,t){return Bd(e).get(t).next(r=>r?(Pt(r.userId===this.userId),Xf(this.It,r)):null)}Tn(e,t){return this.In[t]?de.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Bd(e).Z({index:"userMutationsIndex",range:i},(u,f,_)=>{f.userId===this.userId&&(Pt(f.batchId>=r),l=Xf(this.It,f)),_.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Bd(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,l,u)=>{r=l.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bd(e).W("userMutationsIndex",t).next(r=>r.map(i=>Xf(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=tE(this.userId,t.path),i=IDBKeyRange.lowerBound(r),l=[];return $m(e).Z({range:i},(u,f,_)=>{const[C,I,A]=u,V=ec(I);if(C===this.userId&&t.path.isEqual(V))return Bd(e).get(A).next($=>{if(!$)throw pt();Pt($.userId===this.userId),l.push(Xf(this.It,$))});_.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ln($t);const i=[];return t.forEach(l=>{const u=tE(this.userId,l.path),f=IDBKeyRange.lowerBound(u),_=$m(e).Z({range:f},(C,I,A)=>{const[V,$,K]=C,we=ec($);V===this.userId&&l.path.isEqual(we)?r=r.add(K):A.done()});i.push(_)}),de.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,l=tE(this.userId,r),u=IDBKeyRange.lowerBound(l);let f=new Ln($t);return $m(e).Z({range:u},(_,C,I)=>{const[A,V,$]=_,K=ec(V);A===this.userId&&r.isPrefixOf(K)?K.length===i&&(f=f.add($)):I.done()}).next(()=>this.En(e,f))}En(e,t){const r=[],i=[];return t.forEach(l=>{i.push(Bd(e).get(l).next(u=>{if(null===u)throw pt();Pt(u.userId===this.userId),r.push(Xf(this.It,u))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return G1(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return $m(e).Z({range:r},(l,u,f)=>{if(l[0]===this.userId){const _=ec(l[1]);i.push(_)}else f.done()}).next(()=>{Pt(0===i.length)})})}containsKey(e,t){return q1(e,this.userId,t)}Rn(e){return W1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function q1(n,e,t){const r=tE(e,t.path),i=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return $m(n).Z({range:l,X:!0},(f,_,C)=>{const[I,A,V]=f;I===e&&A===i&&(u=!0),C.done()}).next(()=>u)}function Bd(n){return hi(n,"mutations")}function $m(n){return hi(n,"documentMutations")}function W1(n){return hi(n,"mutationQueues")}class rp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new rp(0)}static vn(){return new rp(-1)}}class PU{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new rp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Nt.fromTimestamp(new sr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Zm(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Pt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const l=[];return Zm(e).Z((u,f)=>{const _=JC(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,l.push(this.removeTargetData(e,_)))}).next(()=>de.waitFor(l)).next(()=>i)}forEachTarget(e,t){return Zm(e).Z((r,i)=>{const l=JC(i);t(l)})}Vn(e){return Y1(e).get("targetGlobalKey").next(t=>(Pt(null!==t),t))}Sn(e,t){return Y1(e).put("targetGlobalKey",t)}Dn(e,t){return Zm(e).put(F1(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Wf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Zm(e).Z({range:i,index:"queryTargetsIndex"},(u,f,_)=>{const C=JC(f);UC(t,C.target)&&(l=C,_.done())}).next(()=>l)}addMatchingKeys(e,t,r){const i=[],l=jd(e);return t.forEach(u=>{const f=fs(u.path);i.push(l.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,u))}),de.waitFor(i)}removeMatchingKeys(e,t,r){const i=jd(e);return de.forEach(t,l=>{const u=fs(l.path);return de.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=jd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=jd(e);let l=Yt();return i.Z({range:r,X:!0},(u,f,_)=>{const C=ec(u[1]),I=new Ye(C);l=l.add(I)}).next(()=>l)}containsKey(e,t){const r=fs(t.path),i=IDBKeyRange.bound([r],[vP(r)],!1,!0);let l=0;return jd(e).Z({index:"documentTargetsIndex",X:!0,range:i},([u,f],_,C)=>{0!==u&&(l++,C.done())}).next(()=>l>0)}se(e,t){return Zm(e).get(t).next(r=>r?JC(r):null)}}function Zm(n){return hi(n,"targets")}function Y1(n){return hi(n,"targetGlobal")}function jd(n){return hi(n,"targetDocuments")}function K1([n,e],[t,r]){const i=$t(n,t);return 0===i?$t(e,r):i}class NU{constructor(e){this.xn=e,this.buffer=new Ln(K1),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();K1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FU{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;He("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,be.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Od(r)?He("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield xd(r)}yield t.Fn(3e5)}))}}class LU{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(Fs.at);const r=new NU(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(z1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z1):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,l,u,f,_,C;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,u=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,f=Date.now(),this.removeTargets(e,r,t))).next(A=>(l=A,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(C=Date.now(),tM()<=Ja.in.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-I}ms\n\tDetermined least recently used ${i} in `+(f-u)+`ms\n\tRemoved ${l} targets in `+(_-f)+`ms\n\tRemoved ${A} documents in `+(C-_)+`ms\nTotal Duration: ${C-I}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:A})))}}class VU{constructor(e,t){this.db=e,this.garbageCollector=new LU(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return lE(e,r)}removeReference(e,t,r){return lE(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lE(e,t)}Gn(e,t){return function(r,i){let l=!1;return W1(r).tt(u=>q1(r,u,i).next(f=>(f&&(l=!0),de.resolve(!f)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let l=0;return this.Kn(e,(u,f)=>{if(f<=t){const _=this.Gn(e,u).next(C=>{if(!C)return l++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Nt.min()),jd(e).delete([0,fs(u.path)])))});i.push(_)}}).next(()=>de.waitFor(i)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lE(e,t)}Kn(e,t){const r=jd(e);let i,l=Fs.at;return r.Z({index:"documentTargetsIndex"},([u,f],{path:_,sequenceNumber:C})=>{0===u?(l!==Fs.at&&t(new Ye(ec(i)),l),l=C,i=_):l=Fs.at}).next(()=>{l!==Fs.at&&t(new Ye(ec(i)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lE(n,e){return jd(n).put((r=n.currentSequenceNumber,{targetId:0,path:fs(e.path),sequenceNumber:r}));var r}class J1{constructor(){this.changes=new Vd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class UU{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ip(e).put(r)}removeEntry(e,t,r){return ip(e).delete(function(i,l){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],nE(l),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=qn.newInvalidDocument(t);return ip(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(nw(t))},(i,l)=>{r=this.jn(t,l)}).next(()=>r)}Wn(e,t){let r={size:0,document:qn.newInvalidDocument(t)};return ip(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(nw(t))},(i,l)=>{r={document:this.jn(t,l),size:oE(l)}}).next(()=>r)}getEntries(e,t){let r=Ls();return this.zn(e,t,(i,l)=>{const u=this.jn(i,l);r=r.insert(i,u)}).next(()=>r)}Hn(e,t){let r=Ls(),i=new Cr(Ye.comparator);return this.zn(e,t,(l,u)=>{const f=this.jn(l,u);r=r.insert(l,f),i=i.insert(l,oE(u))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return de.resolve();let i=new Ln(tN);t.forEach(_=>i=i.add(_));const l=IDBKeyRange.bound(nw(i.first()),nw(i.last())),u=i.getIterator();let f=u.getNext();return ip(e).Z({index:"documentKeyIndex",range:l},(_,C,I)=>{const A=Ye.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;f&&tN(f,A)<0;)r(f,null),f=u.getNext();f&&f.isEqual(A)&&(r(f,C),f=u.hasNext()?u.getNext():null),f?I.j(nw(f)):I.done()}).next(()=>{for(;f;)r(f,null),f=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),nE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ip(e).W(IDBKeyRange.bound(i,l,!0)).next(u=>{let f=Ls();for(const _ of u){const C=this.jn(Ye.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);f=f.insert(C.key,C)}return f})}getAllFromCollectionGroup(e,t,r,i){let l=Ls();const u=eN(t,r),f=eN(t,fo.max());return ip(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,f,!0)},(_,C,I)=>{const A=this.jn(Ye.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);l=l.insert(A.key,A),l.size===i&&I.done()}).next(()=>l)}newChangeBuffer(e){return new BU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return X1(e).get("remoteDocumentGlobalKey").next(t=>(Pt(!!t),t))}Qn(e,t){return X1(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function IU(n,e){let t;if(e.document)t=D1(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ye.fromSegments(e.noDocument.path),i=Qf(e.noDocument.readTime);t=qn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pt();{const r=Ye.fromSegments(e.unknownDocument.path),i=Qf(e.unknownDocument.version);t=qn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new sr(r[0],r[1]);return Nt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Nt.min()))return r}return qn.newInvalidDocument(e)}}function Q1(n){return new UU(n)}class BU extends J1{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Vd(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Ln((l,u)=>$t(l.canonicalString(),u.canonicalString()));return this.changes.forEach((l,u)=>{const f=this.Xn.get(l);if(t.push(this.Yn.removeEntry(e,l,f.readTime)),u.isValidDocument()){const _=N1(this.Yn.It,u);i=i.add(l.path.popLast()),r+=oE(_)-f.size,t.push(this.Yn.addEntry(e,l,_))}else if(r-=f.size,this.trackRemovals){const _=N1(this.Yn.It,u.convertToNoDocument(Nt.min()));t.push(this.Yn.addEntry(e,l,_))}}),i.forEach(l=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Yn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((l,u)=>{this.Xn.set(l,{size:u,readTime:r.get(l).readTime})}),r))}}function X1(n){return hi(n,"remoteDocumentGlobal")}function ip(n){return hi(n,"remoteDocumentsV14")}function nw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function eN(n,e){const t=e.documentKey.path.toArray();return[n,nE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function tN(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(i=$t(t[l],r[l]),i)return i;return i=$t(t.length,r.length),i||(i=$t(t[t.length-2],r[r.length-2]),i||$t(t[t.length-1],r[r.length-1]))}class jU{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class nN{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&HC(r.mutation,i,po.empty(),sr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yt()){const i=Ql();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(l=>{let u=$C();return l.forEach((f,_)=>{u=u.insert(f,_.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Ql();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(l=>{t.has(l)||i.push(l)}),this.documentOverlayCache.getOverlays(e,i).next(l=>{l.forEach((u,f)=>{t.set(u,f)})})}computeViews(e,t,r,i){let l=Ls();const u=ZC(),f=ZC();return t.forEach((_,C)=>{const I=r.get(C.key);i.has(C.key)&&(void 0===I||I.mutation instanceof au)?l=l.insert(C.key,C):void 0!==I&&(u.set(C.key,I.mutation.getFieldMask()),HC(I.mutation,C,I.mutation.getFieldMask(),sr.now()))}),this.recalculateAndSaveOverlays(e,l).next(_=>(_.forEach((C,I)=>u.set(C,I)),t.forEach((C,I)=>{var A;return f.set(C,new jU(I,null!==(A=u.get(C))&&void 0!==A?A:null))}),f))}recalculateAndSaveOverlays(e,t){const r=ZC();let i=new Cr((u,f)=>u-f),l=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const f of u)f.keys().forEach(_=>{const C=t.get(_);if(null===C)return;let I=r.get(_)||po.empty();I=f.applyToLocalView(C,I),r.set(_,I);const A=(i.get(f.batchId)||Yt()).add(_);i=i.insert(f.batchId,A)})}).next(()=>{const u=[],f=i.getReverseIterator();for(;f.hasNext();){const _=f.getNext(),C=_.key,I=_.value,A=h1();I.forEach(V=>{if(!l.has(V)){const $=n1(t.get(V),r.get(V));null!==$&&A.set(V,$),l=l.add(V)}}),u.push(this.documentOverlayCache.saveOverlays(e,C,A))}return de.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ye.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):hM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(l=>{const u=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-l.size):de.resolve(Ql());let f=-1,_=l;return u.next(C=>de.forEach(C,(I,A)=>(f<A.largestBatchId&&(f=A.largestBatchId),l.get(I)?de.resolve():this.getBaseDocument(e,I,A).next(V=>{_=_.insert(I,V)}))).next(()=>this.populateOverlays(e,C,l)).next(()=>this.computeViews(e,_,C,Yt())).next(I=>({batchId:f,changes:d1(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ye(t)).next(r=>{let i=$C();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let l=$C();return this.indexManager.getCollectionParents(e,i).next(u=>de.forEach(u,f=>{const _=(C=t,I=f.child(i),new ou(I,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,I;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(C=>{C.forEach((I,A)=>{l=l.insert(I,A)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(l=>(i=l,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(l=>{l.forEach((f,_)=>{const C=_.getKey();null===i.get(C)&&(i=i.insert(C,qn.newInvalidDocument(C)))});let u=$C();return i.forEach((f,_)=>{const C=l.get(f);void 0!==C&&HC(C.mutation,_,po.empty(),sr.now()),pM(t,_)&&(u=u.insert(f,_))}),u})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):de.resolve(qn.newInvalidDocument(t))}}class HU{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return de.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:di(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:EM(r.bundledQuery),readTime:di(r.readTime)}),de.resolve();var r}}class $U{constructor(){this.overlays=new Cr(Ye.comparator),this.es=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ql();return de.forEach(t,i=>this.getOverlay(e,i).next(l=>{null!==l&&r.set(i,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,l)=>{this.ue(e,t,l)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.es.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=Ql(),l=t.length+1,u=new Ye(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const _=f.getNext().value,C=_.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===l&&_.largestBatchId>r&&i.set(_.getKey(),_)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let l=new Cr((C,I)=>C-I);const u=this.overlays.getIterator();for(;u.hasNext();){const C=u.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let I=l.get(C.largestBatchId);null===I&&(I=Ql(),l=l.insert(C.largestBatchId,I)),I.set(C.getKey(),C)}}const f=Ql(),_=l.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((C,I)=>f.set(C,I)),!(f.size()>=i)););return de.resolve(f)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new DM(t,r));let l=this.es.get(t);void 0===l&&(l=Yt(),this.es.set(t,l)),this.es.set(t,l.add(r.key))}}class TM{constructor(){this.ns=new Ln(fi.ss),this.rs=new Ln(fi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new fi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new fi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ye(new pn([])),r=new fi(t,e),i=new fi(t,e+1),l=[];return this.rs.forEachInRange([r,i],u=>{this.cs(u),l.push(u.key)}),l}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ye(new pn([])),r=new fi(t,e),i=new fi(t,e+1);let l=Yt();return this.rs.forEachInRange([r,i],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new fi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class fi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ye.comparator(e.key,t.key)||$t(e._s,t._s)}static os(e,t){return $t(e._s,t._s)||Ye.comparator(e.key,t.key)}}class ZU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Ln(fi.ss)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const l=this.ws;this.ws++;const u=new wM(l,t,r,i);this.mutationQueue.push(u);for(const f of i)this.gs=this.gs.add(new fi(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return de.resolve(u)}lookupMutationBatch(e,t){return de.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),l=i<0?0:i;return de.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new fi(t,0),i=new fi(t,Number.POSITIVE_INFINITY),l=[];return this.gs.forEachInRange([r,i],u=>{const f=this.ys(u._s);l.push(f)}),de.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ln($t);return t.forEach(i=>{const l=new fi(i,0),u=new fi(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([l,u],f=>{r=r.add(f._s)})}),de.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let l=r;Ye.isDocumentKey(l)||(l=l.child(""));const u=new fi(new Ye(l),0);let f=new Ln($t);return this.gs.forEachWhile(_=>{const C=_.key.path;return!!r.isPrefixOf(C)&&(C.length===i&&(f=f.add(_._s)),!0)},u),de.resolve(this.Is(f))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Pt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return de.forEach(t.mutations,i=>{const l=new fi(i.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new fi(t,0),i=this.gs.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return de.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class zU{constructor(e){this.Es=e,this.docs=new Cr(Ye.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),l=i?i.size:0,u=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():qn.newInvalidDocument(t))}getEntries(e,t){let r=Ls();return t.forEach(i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():qn.newInvalidDocument(i))}),de.resolve(r)}getAllFromCollection(e,t,r){let i=Ls();const l=new Ye(t.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:_}}=u.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||iM(wP(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(e,t,r,i){pt()}As(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new GU(this)}getSize(e){return de.resolve(this.size)}}class GU extends J1{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class qU{constructor(e){this.persistence=e,this.Rs=new Vd(t=>Wf(t),UC),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new TM,this.targetCount=0,this.vs=rp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),de.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new rp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Dn(t),de.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const l=[];return this.Rs.forEach((u,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Rs.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),de.waitFor(l).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach(u=>{l.push(i.markPotentiallyOrphaned(e,u))}),de.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.Ps.containsKey(t))}}class rN{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Fs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new qU(this),this.indexManager=new OU,this.remoteDocumentCache=new zU(r=>this.referenceDelegate.xs(r)),this.It=new P1(t),this.Ns=new HU(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $U,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new ZU(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){He("MemoryPersistence","Starting transaction:",e);const i=new WU(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(l=>this.referenceDelegate.Os(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Ms(e,t){return de.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class WU extends DP{constructor(e){super(),this.currentSequenceNumber=e}}class cE{constructor(e){this.persistence=e,this.Fs=new TM,this.$s=null}static Bs(e){return new cE(e)}get Ls(){if(this.$s)return this.$s;throw pt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),de.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(l=>this.Ls.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Ls,r=>{const i=Ye.fromPath(r);return this.Us(e,i).next(l=>{l||t.removeEntry(i,Nt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return de.or([()=>de.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class YU{constructor(e){this.It=e}$(e,t,r,i){const l=new $D("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",M1,{unique:!0}),f.createObjectStore("documentMutations"),iN(e),function(f){f.createObjectStore("remoteDocuments")}(e));let u=de.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),iN(e)),u=u.next(()=>function(f){const _=f.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Nt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",C)}(l))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(f,_){return _.store("mutations").W().next(C=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",M1,{unique:!0});const I=_.store("mutations"),A=C.map(V=>I.put(V));return de.waitFor(A)})}(e,l))),u=u.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.qs(l))),r<6&&i>=6&&(u=u.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(l)))),r<7&&i>=7&&(u=u.next(()=>this.Gs(l))),r<8&&i>=8&&(u=u.next(()=>this.Qs(e,l))),r<9&&i>=9&&(u=u.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.js(l))),r<11&&i>=11&&(u=u.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:CU});_.createIndex("collectionPathOverlayIndex",wU,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",bU,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:cU});_.createIndex("documentKeyIndex",uU),_.createIndex("collectionGroupIndex",dU)}(e)).next(()=>this.Ws(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.zs(e,l))),r<15&&i>=15&&(u=u.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:mU}).createIndex("sequenceNumberIndex",_U,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:yU}).createIndex("documentKeyIndex",vU,{unique:!1})}(e))),u}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=oE(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>de.forEach(i,l=>{const u=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",u).next(f=>de.forEach(f,_=>{Pt(_.userId===l.userId);const C=Xf(this.It,_);return G1(e,l.userId,C).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const l=[];return r.Z((u,f)=>{const _=new pn(u),C=[0,fs(_)];l.push(t.get(C).next(I=>I?de.resolve():t.put({targetId:0,path:fs(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(l))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:gU});const r=t.store("collectionParents"),i=new SM,l=u=>{if(i.add(u)){const f=u.lastSegment(),_=u.popLast();return r.put({collectionId:f,parent:fs(_)})}};return t.store("remoteDocuments").Z({X:!0},(u,f)=>{const _=new pn(u);return l(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([u,f,_],C)=>{const I=ec(f);return l(I.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const l=JC(i),u=F1(this.It,l);return t.put(u)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((l,u)=>{const f=t.store("remoteDocumentsV14"),_=(C=u,C.document?new Ye(pn.fromString(C.document.name).popFirst(5)):C.noDocument?Ye.fromSegments(C.noDocument.path):C.unknownDocument?Ye.fromSegments(C.unknownDocument.path):pt()).path.toArray();var C;const I={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(f.put(I))}).next(()=>de.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=Q1(this.It),l=new rN(cE.Bs,this.It.re);return r.W().next(u=>{const f=new Map;return u.forEach(_=>{var C;let I=null!==(C=f.get(_.userId))&&void 0!==C?C:Yt();Xf(this.It,_).keys().forEach(A=>I=I.add(A)),f.set(_.userId,I)}),de.forEach(f,(_,C)=>{const I=new ui(C),A=rE.oe(this.It,I),V=l.getIndexManager(I),$=aE.oe(I,this.It,V,l.referenceDelegate);return new nN(i,$,A,V).recalculateAndSaveOverlaysForDocumentKeys(new CM(t,Fs.at),_).next()})})}}function iN(n){n.createObjectStore("targetDocuments",{keyPath:fU}).createIndex("documentTargetsIndex",pU,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hU,{unique:!0}),n.createObjectStore("targetGlobal")}const AM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class MM{constructor(e,t,r,i,l,u,f,_,C,I,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=l,this.window=u,this.document=f,this.Js=C,this.Ys=I,this.Xs=A,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=V=>Promise.resolve(),!MM.C())throw new Fe(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new VU(this,i),this.ii=t+"main",this.It=new P1(_),this.ri=new il(this.ii,this.Xs,new YU(this.It)),this.Cs=new PU(this.referenceDelegate,this.It),this.remoteDocumentCache=Q1(this.It),this.Ns=new SU,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===I&&Mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(me.FAILED_PRECONDITION,AM);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Fs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,be.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>uE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Od(e))return He("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return He("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return rw(e).get("owner").next(t=>de.resolve(this.mi(t)))}gi(e){return uE(e).delete(this.clientId)}yi(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=hi(r,"clientMetadata");return i.W().next(l=>{const u=e.Ii(l,18e5),f=l.filter(_=>-1===u.indexOf(_));return de.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?de.resolve(!0):rw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Fe(me.FAILED_PRECONDITION,AM);return!1}}return!(!this.networkEnabled||!this.inForeground)||uE(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&He("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new CM(t,Fs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>uE(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return aE.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new RU(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return rE.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){He("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",l=15===(u=this.Xs)?EU:14===u?R1:13===u?O1:12===u?DU:11===u?x1:void pt();var u;let f;return this.ri.runTransaction(e,i,l,_=>(f=new CM(_,this.Ss?this.Ss.next():Fs.at),"readwrite-primary"===t?this.fi(f).next(C=>!!C||this.di(f)).next(C=>{if(!C)throw Mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Fe(me.FAILED_PRECONDITION,bP);return r(f)}).next(C=>this.wi(f).next(()=>C)):this.Vi(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}Vi(e){return rw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(me.FAILED_PRECONDITION,AM)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rw(e).put("owner",t)}static C(){return il.C()}_i(e){const t=rw(e);return t.get("owner").next(r=>this.mi(r)?(He("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Mr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,sn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return He("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Mr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rw(n){return hi(n,"owner")}function uE(n){return hi(n,"clientMetadata")}function kM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class xM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Yt(),i=Yt();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new xM(e,t.fromCache,r,i)}}class sN{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(l=>l||this.Oi(e,t,i,r)).next(l=>l||this.Mi(e,t))}ki(e,t){if(ZP(t))return de.resolve(null);let r=hs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=YD(t,null,"F"),r=hs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const u=Yt(...l);return this.Ni.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,r).next(_=>{const C=this.Fi(t,f);return this.$i(t,C,u,_.readTime)?this.ki(e,YD(t,null,"F")):this.Bi(e,C,t,_)}))})))}Oi(e,t,r,i){return ZP(t)||i.isEqual(Nt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(l=>{const u=this.Fi(t,l);return this.$i(t,u,r,i)?this.Mi(e,t):(tM()<=Ja.in.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fM(t)),this.Bi(e,u,t,CP(i,-1)))})}Fi(e,t){let r=new Ln(qP(e));return t.forEach((i,l)=>{pM(e,l)&&(r=r.add(l))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}Mi(e,t){return tM()<=Ja.in.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",fM(t)),this.Ni.getDocumentsMatchingQuery(e,t,fo.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}class KU{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Cr($t),this.qi=new Vd(l=>Wf(l),UC),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nN(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function oN(n,e,t,r){return new KU(n,e,t,r)}function aN(n,e){return OM.apply(this,arguments)}function OM(){return OM=(0,be.Z)(function*(n,e){const t=tt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(l=>(i=l,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const u=[],f=[];let _=Yt();for(const C of i){u.push(C.batchId);for(const I of C.mutations)_=_.add(I.key)}for(const C of l){f.push(C.batchId);for(const I of C.mutations)_=_.add(I.key)}return t.localDocuments.getDocuments(r,_).next(C=>({ji:C,removedBatchIds:u,addedBatchIds:f}))})})}),OM.apply(this,arguments)}function JU(n,e){const t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),l=t.Gi.newChangeBuffer({trackRemovals:!0});return function(u,f,_,C){const I=_.batch,A=I.keys();let V=de.resolve();return A.forEach($=>{V=V.next(()=>C.getEntry(f,$)).next(K=>{const we=_.docVersions.get($);Pt(null!==we),K.version.compareTo(we)<0&&(I.applyToRemoteDocument(K,_),K.isValidDocument()&&(K.setReadTime(_.commitVersion),C.addEntry(K)))})}),V.next(()=>u.mutationQueue.removeMutationBatch(f,I))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let f=Yt();for(let _=0;_<u.mutationResults.length;++_)u.mutationResults[_].transformResults.length>0&&(f=f.add(u.batch.mutations[_].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function lN(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function QU(n,e){const t=tt(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const f=[];e.targetChanges.forEach((I,A)=>{const V=i.get(A);if(!V)return;f.push(t.Cs.removeMatchingKeys(l,I.removedDocuments,A).next(()=>t.Cs.addMatchingKeys(l,I.addedDocuments,A)));let $=V.withSequenceNumber(l.currentSequenceNumber);var K,we,Ce;e.targetMismatches.has(A)?$=$.withResumeToken(Yr.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):I.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(I.resumeToken,r)),i=i.insert(A,$),we=$,Ce=I,(0===(K=V).resumeToken.approximateByteSize()||we.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=3e8||Ce.addedDocuments.size+Ce.modifiedDocuments.size+Ce.removedDocuments.size>0)&&f.push(t.Cs.updateTargetData(l,$))});let _=Ls(),C=Yt();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,I))}),f.push(cN(l,u,e.documentUpdates).next(I=>{_=I.Wi,C=I.zi})),!r.isEqual(Nt.min())){const I=t.Cs.getLastRemoteSnapshotVersion(l).next(A=>t.Cs.setTargetsMetadata(l,l.currentSequenceNumber,r));f.push(I)}return de.waitFor(f).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,_,C)).next(()=>_)}).then(l=>(t.Ui=i,l))}function cN(n,e,t){let r=Yt(),i=Yt();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let u=Ls();return t.forEach((f,_)=>{const C=l.get(f);_.isFoundDocument()!==C.isFoundDocument()&&(i=i.add(f)),_.isNoDocument()&&_.version.isEqual(Nt.min())?(e.removeEntry(f,_.readTime),u=u.insert(f,_)):!C.isValidDocument()||_.version.compareTo(C.version)>0||0===_.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(_),u=u.insert(f,_)):He("LocalStore","Ignoring outdated watch update for ",f,". Current version:",C.version," Watch version:",_.version)}),{Wi:u,zi:i}})}function XU(n,e){const t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zm(n,e){const t=tt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(l=>l?(i=l,de.resolve(i)):t.Cs.allocateTargetId(r).next(u=>(i=new Ud(e,u,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Gm(n,e,t){return RM.apply(this,arguments)}function RM(){return RM=(0,be.Z)(function*(n,e,t){const r=tt(n),i=r.Ui.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Od(u))throw u;He("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),RM.apply(this,arguments)}function dE(n,e,t){const r=tt(n);let i=Nt.min(),l=Yt();return r.persistence.runTransaction("Execute query","readonly",u=>function(f,_,C){const I=tt(f),A=I.qi.get(C);return void 0!==A?de.resolve(I.Ui.get(A)):I.Cs.getTargetData(_,C)}(r,u,hs(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(u,f.targetId).next(_=>{l=_})}).next(()=>r.Li.getDocumentsMatchingQuery(u,e,t?i:Nt.min(),t?l:Yt())).next(f=>(hN(r,GP(e),f),{documents:f,Hi:l})))}function uN(n,e){const t=tt(n),r=tt(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",l=>r.se(l,e).next(u=>u?u.target:null))}function dN(n,e){const t=tt(n),r=t.Ki.get(e)||Nt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,CP(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(hN(t,e,i),i))}function hN(n,e,t){let r=n.Ki.get(e)||Nt.min();t.forEach((i,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Ki.set(e,r)}function PM(){return PM=(0,be.Z)(function*(n,e,t,r){const i=tt(n);let l=Yt(),u=Ls();for(const C of t){const I=e.Ji(C.metadata.name);C.document&&(l=l.add(I));const A=e.Yi(C);A.setReadTime(e.Xi(C.metadata.readTime)),u=u.insert(I,A)}const f=i.Gi.newChangeBuffer({trackRemovals:!0}),_=yield zm(i,(C=r,hs(Nm(pn.fromString(`__bundle__/docs/${C}`)))));var C;return i.persistence.runTransaction("Apply bundle documents","readwrite",C=>cN(C,f,u).next(I=>(f.apply(C),I)).next(I=>i.Cs.removeMatchingKeysForTargetId(C,_.targetId).next(()=>i.Cs.addMatchingKeys(C,l,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(C,I.Wi,I.zi)).next(()=>I.Wi)))}),PM.apply(this,arguments)}function tB(n,e){return NM.apply(this,arguments)}function NM(){return NM=(0,be.Z)(function*(n,e,t=Yt()){const r=yield zm(n,hs(EM(e.bundledQuery))),i=tt(n);return i.persistence.runTransaction("Save named query","readwrite",l=>{const u=di(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ns.saveNamedQuery(l,e);const f=r.withResumeToken(Yr.EMPTY_BYTE_STRING,u);return i.Ui=i.Ui.insert(f.targetId,f),i.Cs.updateTargetData(l,f).next(()=>i.Cs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>i.Cs.addMatchingKeys(l,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(l,e))})}),NM.apply(this,arguments)}function fN(n,e){return`firestore_clients_${n}_${e}`}function pN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function FM(n,e){return`firestore_targets_${n}_${e}`}class hE{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let l,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(l=new Fe(i.error.code,i.error.message))),u?new hE(e,t,i.state,l):(Mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class iw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(i=new Fe(r.error.code,r.error.message))),l?new iw(e,r.state,i):(Mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,l=XD();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=MP(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return i?new fE(e,l):(Mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class LM{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new LM(t.clientId,t.onlineState):(Mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class VM{constructor(){this.activeTargetIds=XD()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UM{constructor(e,t,r,i,l){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Cr($t),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ar=fN(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new VM),this.lr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const l=e.getItem(fN(e.persistenceKey,i));if(l){const u=fE.Zi(i,l);u&&(e.ur=e.ur.insert(u.clientId,u))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(FM(this.persistenceKey,e));if(r){const i=iw.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(FM(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return He("SharedClientState","READ",e,t),t}setItem(e,t){He("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){He("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(He("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(l){let u=Fs.at;if(null!=l)try{const f=JSON.parse(l);Pt("number"==typeof f),u=f}catch(f){Mr("SharedClientState","Failed to read sequence number from WebStorage",f)}return u}(r.newValue);i!==Fs.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(l=>t.syncEngine.Mr(l)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new hE(this.currentUser,e,t,r),l=pN(this.persistenceKey,this.currentUser,e);this.setItem(l,i.tr())}Er(e){const t=pN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=FM(this.persistenceKey,e),l=new iw(e,t,r);this.setItem(i,l.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return fE.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return hE.Zi(new ui(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return iw.Zi(i,t)}yr(e){return LM.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);He("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),l=this.Ir(r),u=[],f=[];return l.forEach(_=>{i.has(_)||u.push(_)}),i.forEach(_=>{l.has(_)||f.push(_)}),this.syncEngine.Br(u,f).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=XD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class gN{constructor(){this.Lr=new VM,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new VM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class nB{qr(e){}shutdown(){}}class mN{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){He("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){He("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const rB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iB{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class sB extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,l){const u=this.ho(e,t);He("RestConnection","Sending: ",u,r);const f={};return this.lo(f,i,l),this.fo(e,u,f,r).then(_=>(He("RestConnection","Received: ",_),_),_=>{throw jf("RestConnection",`${e} failed with error: `,_,"url: ",u,"request:",r),_})}_o(e,t,r,i,l,u){return this.ao(e,t,r,i,l)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+km,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,l)=>e[l]=i),r&&r.headers.forEach((i,l)=>e[l]=i)}ho(e,t){return`${this.oo}/v1/${t}:${rB[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((l,u)=>{const f=new rV;f.setWithCredentials(!0),f.listenOnce(eV.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case eM.NO_ERROR:const C=f.getResponseJson();He("Connection","XHR received:",JSON.stringify(C)),l(C);break;case eM.TIMEOUT:He("Connection",'RPC "'+e+'" timed out'),u(new Fe(me.DEADLINE_EXCEEDED,"Request time out"));break;case eM.HTTP_ERROR:const I=f.getStatus();if(He("Connection",'RPC "'+e+'" failed with status:',I,"response text:",f.getResponseText()),I>0){const A=f.getResponseJson().error;if(A&&A.status&&A.message){const V=function($){const K=$.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(K)>=0?K:me.UNKNOWN}(A.status);u(new Fe(V,A.message))}else u(new Fe(me.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new Fe(me.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{He("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);f.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Q2(),u=X2(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new nV({})),this.lo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=i.join("");He("Connection","Creating WebChannel: "+_,f);const C=l.createWebChannel(_,f);let I=!1,A=!1;const V=new iB({Hr:K=>{A?He("Connection","Not sending because WebChannel is closed:",K):(I||(He("Connection","Opening WebChannel transport."),C.open(),I=!0),He("Connection","WebChannel sending:",K),C.send(K))},Jr:()=>C.close()}),$=(K,we,Ce)=>{K.listen(we,lt=>{try{Ce(lt)}catch(St){setTimeout(()=>{throw St},0)}})};return $(C,BD.EventType.OPEN,()=>{A||He("Connection","WebChannel transport opened.")}),$(C,BD.EventType.CLOSE,()=>{A||(A=!0,He("Connection","WebChannel transport closed"),V.io())}),$(C,BD.EventType.ERROR,K=>{A||(A=!0,jf("Connection","WebChannel transport errored:",K),V.io(new Fe(me.UNAVAILABLE,"The operation could not be completed")))}),$(C,BD.EventType.MESSAGE,K=>{var we;if(!A){const Ce=K.data[0];Pt(!!Ce);const lt=Ce,St=lt.error||(null===(we=lt[0])||void 0===we?void 0:we.error);if(St){He("Connection","WebChannel received error:",St);const xt=St.status;let Ft=function(Xt){const Kr=Ur[Xt];if(void 0!==Kr)return c1(Kr)}(xt),jt=St.message;void 0===Ft&&(Ft=me.INTERNAL,jt="Unknown error status: "+xt+" with message "+St.message),A=!0,V.io(new Fe(Ft,jt)),C.close()}else He("Connection","WebChannel received:",Ce),V.ro(Ce)}}),$(u,tV.STAT_EVENT,K=>{K.stat===pP.PROXY?He("Connection","Detected buffering proxy"):K.stat===pP.NOPROXY&&He("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.so()},0),V}}function _N(){return typeof window<"u"?window:null}function pE(){return typeof document<"u"?document:null}function sw(n){return new KV(n,!0)}class BM{constructor(e,t,r=1e3,i=1.5,l=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=l,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&He("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class yN{constructor(e,t,r,i,l,u,f,_){this.Hs=e,this.vo=r,this.Vo=i,this.So=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new BM(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,be.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,be.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===me.RESOURCE_EXHAUSTED?(Mr(t.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===me.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Fe(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.No.Ro((0,be.Z)(function*(){e.state=0,e.start()}))}jo(e){return He("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(He("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oB extends yN{constructor(e,t,r,i,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.It=l}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function XV(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:pt(),i=e.targetChange.targetIds||[],l=function(_,C){return _.gt?(Pt(void 0===C||"string"==typeof C),Yr.fromBase64String(C||"")):(Pt(void 0===C||C instanceof Uint8Array),Yr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(_){const C=void 0===_.code?me.UNKNOWN:c1(_.code);return new Fe(C,_.message||"")}(u);t=new p1(r,i,l,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Xl(n,r.document.name),l=di(r.document.updateTime),u=new Ei({mapValue:{fields:r.document.fields}}),f=qn.newFoundDocument(i,l,u);t=new eE(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Xl(n,r.document),l=r.readTime?di(r.readTime):Nt.min(),u=qn.newNoDocument(i,l);t=new eE([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Xl(n,r.document);t=new eE([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return pt();{const r=e.filter,l=new HV(r.count||0);t=new f1(r.targetId,l)}}var _;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Nt.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?Nt.min():l.readTime?di(l.readTime):Nt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=YC(this.It),t.addTarget=function(i,l){let u;const f=l.target;return u=qD(f)?{documents:E1(i,f)}:{query:vM(i,f)},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?u.resumeToken=y1(i,l.resumeToken):l.snapshotVersion.compareTo(Nt.min())>0&&(u.readTime=qC(i,l.snapshotVersion.toTimestamp())),u}(this.It,e);const r=function tU(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=YC(this.It),t.removeTarget=e,this.Lo(t)}}class aB extends yN{constructor(e,t,r,i,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.It=l,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function eU(n,e){return n&&n.length>0?(Pt(void 0!==e),n.map(t=>function(r,i){let l=di(r.updateTime?r.updateTime:i);return l.isEqual(Nt.min())&&(l=di(i)),new UV(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=di(e.commitTime);return this.listener.tu(r,t)}return Pt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=YC(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>KC(this.It,r))};this.Lo(t)}}class lB extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.It=i,this.su=!1}iu(){if(this.su)throw new Fe(me.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.So.ao(e,t,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(me.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.So._o(e,t,r,l,u,i)).catch(l=>{throw"FirebaseError"===l.name?(l.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Fe(me.UNKNOWN,l.toString())})}terminate(){this.su=!0}}class uB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Mr(t),this.uu=!1):He("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class dB{constructor(e,t,r,i,l){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=l,this.gu.qr(f=>{r.enqueueAndForget((0,be.Z)(function*(){var _;lu(u)&&(He("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,be.Z)(function*(C){const I=tt(C);I.wu.add(4),yield qm(I),I.yu.set("Unknown"),I.wu.delete(4),yield ow(I)}),function(C){return _.apply(this,arguments)})(u))}))}),this.yu=new uB(r,i)}}function ow(n){return HM.apply(this,arguments)}function HM(){return HM=(0,be.Z)(function*(n){if(lu(n))for(const e of n.mu)yield e(!0)}),HM.apply(this,arguments)}function qm(n){return $M.apply(this,arguments)}function $M(){return $M=(0,be.Z)(function*(n){for(const e of n.mu)yield e(!1)}),$M.apply(this,arguments)}function gE(n,e){const t=tt(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),GM(t)?zM(t):Ym(t).Oo()&&ZM(t,e))}function aw(n,e){const t=tt(n),r=Ym(t);t._u.delete(e),r.Oo()&&vN(t,e),0===t._u.size&&(r.Oo()?r.$o():lu(t)&&t.yu.set("Unknown"))}function ZM(n,e){n.pu.Mt(e.targetId),Ym(n).Ho(e)}function vN(n,e){n.pu.Mt(e),Ym(n).Jo(e)}function zM(n){n.pu=new qV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),Ym(n).start(),n.yu.cu()}function GM(n){return lu(n)&&!Ym(n).ko()&&n._u.size>0}function lu(n){return 0===tt(n).wu.size}function CN(n){n.pu=void 0}function hB(n){return qM.apply(this,arguments)}function qM(){return qM=(0,be.Z)(function*(n){n._u.forEach((e,t)=>{ZM(n,e)})}),qM.apply(this,arguments)}function fB(n,e){return WM.apply(this,arguments)}function WM(){return WM=(0,be.Z)(function*(n,e){CN(n),GM(n)?(n.yu.lu(e),zM(n)):n.yu.set("Unknown")}),WM.apply(this,arguments)}function pB(n,e,t){return YM.apply(this,arguments)}function YM(){return YM=(0,be.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof p1&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(i,l){const u=l.cause;for(const f of l.targetIds)i._u.has(f)&&(yield i.remoteSyncer.rejectListen(f,u),i._u.delete(f),i.pu.removeTarget(f))}),function(i,l){return r.apply(this,arguments)})(n,e)}catch(r){He("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield mE(n,r)}else if(e instanceof eE?n.pu.Gt(e):e instanceof f1?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(Nt.min()))try{const r=yield lN(n.localStore);t.compareTo(r)>=0&&(yield function(i,l){const u=i.pu.te(l);return u.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const C=i._u.get(_);C&&i._u.set(_,C.withResumeToken(f.resumeToken,l))}}),u.targetMismatches.forEach(f=>{const _=i._u.get(f);if(!_)return;i._u.set(f,_.withResumeToken(Yr.EMPTY_BYTE_STRING,_.snapshotVersion)),vN(i,f);const C=new Ud(_.target,f,1,_.sequenceNumber);ZM(i,C)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){He("RemoteStore","Failed to raise snapshot:",r),yield mE(n,r)}var r}),YM.apply(this,arguments)}function mE(n,e,t){return KM.apply(this,arguments)}function KM(){return KM=(0,be.Z)(function*(n,e,t){if(!Od(e))throw e;n.wu.add(1),yield qm(n),n.yu.set("Offline"),t||(t=()=>lN(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){He("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield ow(n)}))}),KM.apply(this,arguments)}function wN(n,e){return e().catch(t=>mE(n,t,e))}function Wm(n){return JM.apply(this,arguments)}function JM(){return JM=(0,be.Z)(function*(n){const e=tt(n),t=Hd(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;gB(e);)try{const i=yield XU(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,mB(e,i)}catch(i){yield mE(e,i)}bN(e)&&DN(e)}),JM.apply(this,arguments)}function gB(n){return lu(n)&&n.du.length<10}function mB(n,e){n.du.push(e);const t=Hd(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function bN(n){return lu(n)&&!Hd(n).ko()&&n.du.length>0}function DN(n){Hd(n).start()}function _B(n){return QM.apply(this,arguments)}function QM(){return QM=(0,be.Z)(function*(n){Hd(n).nu()}),QM.apply(this,arguments)}function yB(n){return XM.apply(this,arguments)}function XM(){return XM=(0,be.Z)(function*(n){const e=Hd(n);for(const t of n.du)e.Zo(t.mutations)}),XM.apply(this,arguments)}function vB(n,e,t){return ek.apply(this,arguments)}function ek(){return ek=(0,be.Z)(function*(n,e,t){const r=n.du.shift(),i=bM.from(r,e,t);yield wN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Wm(n)}),ek.apply(this,arguments)}function CB(n,e){return tk.apply(this,arguments)}function tk(){return tk=(0,be.Z)(function*(n,e){var t;e&&Hd(n).Xo&&(yield(t=(0,be.Z)(function*(r,i){if(l1(l=i.code)&&l!==me.ABORTED){const u=r.du.shift();Hd(r).Fo(),yield wN(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield Wm(r)}var l}),function(r,i){return t.apply(this,arguments)})(n,e)),bN(n)&&DN(n)}),tk.apply(this,arguments)}function EN(n,e){return nk.apply(this,arguments)}function nk(){return nk=(0,be.Z)(function*(n,e){const t=tt(n);t.asyncQueue.verifyOperationInProgress(),He("RemoteStore","RemoteStore received new credentials");const r=lu(t);t.wu.add(3),yield qm(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield ow(t)}),nk.apply(this,arguments)}function rk(n,e){return ik.apply(this,arguments)}function ik(){return ik=(0,be.Z)(function*(n,e){const t=tt(n);e?(t.wu.delete(2),yield ow(t)):e||(t.wu.add(2),yield qm(t),t.yu.set("Unknown"))}),ik.apply(this,arguments)}function Ym(n){return n.Iu||(n.Iu=function(e,t,r){const i=tt(e);return i.iu(),new oB(t,i.So,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:hB.bind(null,n),Zr:fB.bind(null,n),zo:pB.bind(null,n)}),n.mu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Iu.Fo(),GM(n)?zM(n):n.yu.set("Unknown")):(yield n.Iu.stop(),CN(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Hd(n){return n.Tu||(n.Tu=function(e,t,r){const i=tt(e);return i.iu(),new aB(t,i.So,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:_B.bind(null,n),Zr:CB.bind(null,n),eu:yB.bind(null,n),tu:vB.bind(null,n)}),n.mu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Tu.Fo(),yield Wm(n)):(yield n.Tu.stop(),n.du.length>0&&(He("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class sk{constructor(e,t,r,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,l){const u=Date.now()+r,f=new sk(e,t,u,i,l);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Km(n,e){if(Mr("AsyncQueue",`${e}: ${n}`),Od(n))return new Fe(me.UNAVAILABLE,`${e}: ${n}`);throw n}class Jm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=$C(),this.sortedSet=new Cr(this.comparator)}static emptySet(e){return new Jm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Jm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class IN{constructor(){this.Eu=new Cr(Ye.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):pt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Qm{constructor(e,t,r,i,l,u,f,_,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=_,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,i,l){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new Qm(e,t,Jm.emptySet(t),u,r,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&BC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class wB{constructor(){this.Ru=void 0,this.listeners=[]}}class bB{constructor(){this.queries=new Vd(e=>zP(e),BC),this.onlineState="Unknown",this.bu=new Set}}function ok(n,e){return ak.apply(this,arguments)}function ak(){return ak=(0,be.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1,l=t.queries.get(r);if(l||(i=!0,l=new wB),i)try{l.Ru=yield t.onListen(r)}catch(u){const f=Km(u,`Initialization of query '${fM(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,l),l.listeners.push(e),e.Pu(t.onlineState),l.Ru&&e.vu(l.Ru)&&uk(t)}),ak.apply(this,arguments)}function lk(n,e){return ck.apply(this,arguments)}function ck(){return ck=(0,be.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1;const l=t.queries.get(r);if(l){const u=l.listeners.indexOf(e);u>=0&&(l.listeners.splice(u,1),i=0===l.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),ck.apply(this,arguments)}function DB(n,e){const t=tt(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const f of u.listeners)f.vu(i)&&(r=!0);u.Ru=i}}r&&uk(t)}function EB(n,e,t){const r=tt(n),i=r.queries.get(e);if(i)for(const l of i.listeners)l.onError(t);r.queries.delete(e)}function uk(n){n.bu.forEach(e=>{e.next()})}class dk{constructor(e,t,r){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Qm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Qm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class IB{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class SN{constructor(e){this.It=e}Ji(e){return Xl(this.It,e)}Yi(e){return e.metadata.exists?D1(this.It,e.document,!1):qn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return di(e)}}class SB{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=TN(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=pn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new SN(this.It);for(const i of e)if(i.metadata.queries){const l=r.Ji(i.metadata.name);for(const u of i.metadata.queries){const f=(t.get(u)||Yt()).add(l);t.set(u,f)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function eB(n,e,t,r){return PM.apply(this,arguments)}(e.localStore,new SN(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield tB(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function TN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class AN{constructor(e){this.key=e}}class MN{constructor(e){this.key=e}}class kN{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Yt(),this.mutatedKeys=Yt(),this.Gu=qP(e),this.Qu=new Jm(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new IN,i=t?t.Qu:this.Qu;let l=t?t.mutatedKeys:this.mutatedKeys,u=i,f=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,C="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,A)=>{const V=i.get(I),$=pM(this.query,A)?A:null,K=!!V&&this.mutatedKeys.has(V.key),we=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let Ce=!1;V&&$?V.data.isEqual($.data)?K!==we&&(r.track({type:3,doc:$}),Ce=!0):this.Hu(V,$)||(r.track({type:2,doc:$}),Ce=!0,(_&&this.Gu($,_)>0||C&&this.Gu($,C)<0)&&(f=!0)):!V&&$?(r.track({type:0,doc:$}),Ce=!0):V&&!$&&(r.track({type:1,doc:V}),Ce=!0,(_||C)&&(f=!0)),Ce&&($?(u=u.add($),l=we?l.add(I):l.delete(I)):(u=u.delete(I),l=l.delete(I)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const I="F"===this.query.limitType?u.last():u.first();u=u.delete(I.key),l=l.delete(I.key),r.track({type:1,doc:I})}return{Qu:u,zu:r,$i:f,mutatedKeys:l}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const l=e.zu.Au();l.sort((C,I)=>function(A,V){const $=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return $(A)-$(V)}(C.type,I.type)||this.Gu(C.doc,I.doc)),this.Ju(r);const u=t?this.Yu():[],f=0===this.Ku.size&&this.current?1:0,_=f!==this.qu;return this.qu=f,0!==l.length||_?{snapshot:new Qm(this.query,e.Qu,i,l,e.mutatedKeys,0===f,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:u}:{Xu:u}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new IN,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Yt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new MN(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new AN(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Yt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Qm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class TB{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class AB{constructor(e){this.key=e,this.nc=!1}}class MB{constructor(e,t,r,i,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.sc={},this.ic=new Vd(f=>zP(f),BC),this.rc=new Map,this.oc=new Set,this.uc=new Cr(Ye.comparator),this.cc=new Map,this.ac=new TM,this.hc={},this.lc=new Map,this.fc=rp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function kB(n,e){return hk.apply(this,arguments)}function hk(){return hk=(0,be.Z)(function*(n,e){const t=Nk(n);let r,i;const l=t.ic.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),i=l.view.ec();else{const u=yield zm(t.localStore,hs(e));t.isPrimaryClient&&gE(t.remoteStore,u);const f=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield fk(t,e,r,"current"===f,u.resumeToken)}return i}),hk.apply(this,arguments)}function fk(n,e,t,r,i){return pk.apply(this,arguments)}function pk(){return pk=(0,be.Z)(function*(n,e,t,r,i){n._c=(A,V,$)=>{return(K=(0,be.Z)(function*(we,Ce,lt,St){let xt=Ce.view.Wu(lt);xt.$i&&(xt=yield dE(we.localStore,Ce.query,!1).then(({documents:Xt})=>Ce.view.Wu(Xt,xt)));const Ft=St&&St.targetChanges.get(Ce.targetId),jt=Ce.view.applyChanges(xt,we.isPrimaryClient,Ft);return Ek(we,Ce.targetId,jt.Xu),jt.snapshot}),function(we,Ce,lt,St){return K.apply(this,arguments)})(n,A,V,$);var K};const l=yield dE(n.localStore,e,!0),u=new kN(e,l.Hi),f=u.Wu(l.documents),_=GC.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),C=u.applyChanges(f,n.isPrimaryClient,_);Ek(n,t,C.Xu);const I=new TB(e,t,u);return n.ic.set(e,I),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),C.snapshot}),pk.apply(this,arguments)}function xB(n,e){return gk.apply(this,arguments)}function gk(){return gk=(0,be.Z)(function*(n,e){const t=tt(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(l=>!BC(l,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Gm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),aw(t.remoteStore,r.targetId),Xm(t,r.targetId)}).catch(xd))):(Xm(t,r.targetId),yield Gm(t.localStore,r.targetId,!0))}),gk.apply(this,arguments)}function mk(){return mk=(0,be.Z)(function*(n,e,t){const r=Fk(n);try{const i=yield function(l,u){const f=tt(l),_=sr.now(),C=u.reduce((V,$)=>V.add($.key),Yt());let I,A;return f.persistence.runTransaction("Locally write mutations","readwrite",V=>{let $=Ls(),K=Yt();return f.Gi.getEntries(V,C).next(we=>{$=we,$.forEach((Ce,lt)=>{lt.isValidDocument()||(K=K.add(Ce))})}).next(()=>f.localDocuments.getOverlayedDocuments(V,$)).next(we=>{I=we;const Ce=[];for(const lt of u){const St=jV(lt,I.get(lt.key).overlayedDocument);null!=St&&Ce.push(new au(lt.key,St,FP(St.value.mapValue),or.exists(!0)))}return f.mutationQueue.addMutationBatch(V,_,Ce,u)}).next(we=>{A=we;const Ce=we.applyToLocalDocumentSet(I,K);return f.documentOverlayCache.saveOverlays(V,we.batchId,Ce)})}).then(()=>({batchId:A.batchId,changes:d1(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,u,f){let _=l.hc[l.currentUser.toKey()];_||(_=new Cr($t)),_=_.insert(u,f),l.hc[l.currentUser.toKey()]=_}(r,i.batchId,t),yield cu(r,i.changes),yield Wm(r.remoteStore)}catch(i){const l=Km(i,"Failed to persist write");t.reject(l)}}),mk.apply(this,arguments)}function xN(n,e){return _k.apply(this,arguments)}function _k(){return _k=(0,be.Z)(function*(n,e){const t=tt(n);try{const r=yield QU(t.localStore,e);e.targetChanges.forEach((i,l)=>{const u=t.cc.get(l);u&&(Pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.nc=!0:i.modifiedDocuments.size>0?Pt(u.nc):i.removedDocuments.size>0&&(Pt(u.nc),u.nc=!1))}),yield cu(t,r,e)}catch(r){yield xd(r)}}),_k.apply(this,arguments)}function ON(n,e,t){const r=tt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((l,u)=>{const f=u.view.Pu(e);f.snapshot&&i.push(f.snapshot)}),function(l,u){const f=tt(l);f.onlineState=u;let _=!1;f.queries.forEach((C,I)=>{for(const A of I.listeners)A.Pu(u)&&(_=!0)}),_&&uk(f)}(r.eventManager,e),i.length&&r.sc.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function RB(n,e,t){return yk.apply(this,arguments)}function yk(){return yk=(0,be.Z)(function*(n,e,t){const r=tt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),l=i&&i.key;if(l){let u=new Cr(Ye.comparator);u=u.insert(l,qn.newNoDocument(l,Nt.min()));const f=Yt().add(l),_=new zC(Nt.min(),new Map,new Ln($t),u,f);yield xN(r,_),r.uc=r.uc.remove(l),r.cc.delete(e),Ik(r)}else yield Gm(r.localStore,e,!1).then(()=>Xm(r,e,t)).catch(xd)}),yk.apply(this,arguments)}function PB(n,e){return vk.apply(this,arguments)}function vk(){return vk=(0,be.Z)(function*(n,e){const t=tt(n),r=e.batch.batchId;try{const i=yield JU(t.localStore,e);Dk(t,r,null),bk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield cu(t,i)}catch(i){yield xd(i)}}),vk.apply(this,arguments)}function NB(n,e,t){return Ck.apply(this,arguments)}function Ck(){return Ck=(0,be.Z)(function*(n,e,t){const r=tt(n);try{const i=yield function(l,u){const f=tt(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let C;return f.mutationQueue.lookupMutationBatch(_,u).next(I=>(Pt(null!==I),C=I.keys(),f.mutationQueue.removeMutationBatch(_,I))).next(()=>f.mutationQueue.performConsistencyCheck(_)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(_,C,u)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,C)).next(()=>f.localDocuments.getDocuments(_,C))})}(r.localStore,e);Dk(r,e,t),bk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield cu(r,i)}catch(i){yield xd(i)}}),Ck.apply(this,arguments)}function wk(){return wk=(0,be.Z)(function*(n,e){const t=tt(n);lu(t.remoteStore)||He("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const u=tt(l);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>u.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Km(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),wk.apply(this,arguments)}function bk(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function Dk(n,e,t){const r=tt(n);let i=r.hc[r.currentUser.toKey()];if(i){const l=i.get(e);l&&(t?l.reject(t):l.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Xm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||RN(n,r)})}function RN(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(aw(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),Ik(n))}function Ek(n,e,t){for(const r of t)r instanceof AN?(n.ac.addReference(r.key,e),LB(n,r)):r instanceof MN?(He("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||RN(n,r.key)):pt()}function LB(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(He("SyncEngine","New document in limbo: "+t),n.oc.add(r),Ik(n))}function Ik(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ye(pn.fromString(e)),r=n.fc.next();n.cc.set(r,new AB(t)),n.uc=n.uc.insert(t,r),gE(n.remoteStore,new Ud(hs(Nm(t.path)),r,2,Fs.at))}}function cu(n,e,t){return Sk.apply(this,arguments)}function Sk(){return Sk=(0,be.Z)(function*(n,e,t){const r=tt(n),i=[],l=[],u=[];var f;r.ic.isEmpty()||(r.ic.forEach((f,_)=>{u.push(r._c(_,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,C?.fromCache?"not-current":"current"),C){i.push(C);const I=xM.Ci(_.targetId,C);l.push(I)}}))}),yield Promise.all(u),r.sc.zo(i),yield(f=(0,be.Z)(function*(_,C){const I=tt(_);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>de.forEach(C,V=>de.forEach(V.Si,$=>I.persistence.referenceDelegate.addReference(A,V.targetId,$)).next(()=>de.forEach(V.Di,$=>I.persistence.referenceDelegate.removeReference(A,V.targetId,$)))))}catch(A){if(!Od(A))throw A;He("LocalStore","Failed to update sequence numbers: "+A)}for(const A of C){const V=A.targetId;if(!A.fromCache){const $=I.Ui.get(V),we=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);I.Ui=I.Ui.insert(V,we)}}}),function(_,C){return f.apply(this,arguments)})(r.localStore,l))}),Sk.apply(this,arguments)}function VB(n,e){return Tk.apply(this,arguments)}function Tk(){return Tk=(0,be.Z)(function*(n,e){const t=tt(n);if(!t.currentUser.isEqual(e)){He("SyncEngine","User change. New user:",e.toKey());const r=yield aN(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(u=>{u.forEach(f=>{f.reject(new Fe(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield cu(t,r.ji)}var i}),Tk.apply(this,arguments)}function UB(n,e){const t=tt(n),r=t.cc.get(e);if(r&&r.nc)return Yt().add(r.key);{let i=Yt();const l=t.rc.get(e);if(!l)return i;for(const u of l){const f=t.ic.get(u);i=i.unionWith(f.view.ju)}return i}}function BB(n,e){return Ak.apply(this,arguments)}function Ak(){return Ak=(0,be.Z)(function*(n,e){const t=tt(n),r=yield dE(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&Ek(t,e.targetId,i.Xu),i}),Ak.apply(this,arguments)}function jB(n,e){return Mk.apply(this,arguments)}function Mk(){return Mk=(0,be.Z)(function*(n,e){const t=tt(n);return dN(t.localStore,e).then(r=>cu(t,r))}),Mk.apply(this,arguments)}function HB(n,e,t,r){return kk.apply(this,arguments)}function kk(){return kk=(0,be.Z)(function*(n,e,t,r){const i=tt(n),l=yield function(u,f){const _=tt(u),C=tt(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",I=>C.Tn(I,f).next(A=>A?_.localDocuments.getDocuments(I,A):de.resolve(null)))}(i.localStore,e);var f;null!==l?("pending"===t?yield Wm(i.remoteStore):"acknowledged"===t||"rejected"===t?(Dk(i,e,r||null),bk(i,e),f=e,tt(tt(i.localStore).mutationQueue).An(f)):pt(),yield cu(i,l)):He("SyncEngine","Cannot apply mutation batch with id: "+e)}),kk.apply(this,arguments)}function xk(){return xk=(0,be.Z)(function*(n,e){const t=tt(n);if(Nk(t),Fk(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield PN(t,r.toArray());t.dc=!0,yield rk(t.remoteStore,!0);for(const l of i)gE(t.remoteStore,l)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Xm(t,u),Gm(t.localStore,u,!0))),aw(t.remoteStore,u)}),yield i,yield PN(t,r),function(l){const u=tt(l);u.cc.forEach((f,_)=>{aw(u.remoteStore,_)}),u.ac.fs(),u.cc=new Map,u.uc=new Cr(Ye.comparator)}(t),t.dc=!1,yield rk(t.remoteStore,!1)}}),xk.apply(this,arguments)}function PN(n,e,t){return Ok.apply(this,arguments)}function Ok(){return Ok=(0,be.Z)(function*(n,e,t){const r=tt(n),i=[],l=[];for(const u of e){let f;const _=r.rc.get(u);if(_&&0!==_.length){f=yield zm(r.localStore,hs(_[0]));for(const C of _){const I=r.ic.get(C),A=yield BB(r,I);A.snapshot&&l.push(A.snapshot)}}else{const C=yield uN(r.localStore,u);f=yield zm(r.localStore,C),yield fk(r,NN(C),u,!1,f.resumeToken)}i.push(f)}return r.sc.zo(l),i}),Ok.apply(this,arguments)}function NN(n){return $P(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function ZB(n){const e=tt(n);return tt(tt(e.localStore).persistence).vi()}function zB(n,e,t,r){return Rk.apply(this,arguments)}function Rk(){return Rk=(0,be.Z)(function*(n,e,t,r){const i=tt(n);if(i.dc)return void He("SyncEngine","Ignoring unexpected query state notification.");const l=i.rc.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=yield dN(i.localStore,GP(l[0])),f=zC.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Yr.EMPTY_BYTE_STRING);yield cu(i,u,f);break}case"rejected":yield Gm(i.localStore,e,!0),Xm(i,e,r);break;default:pt()}}),Rk.apply(this,arguments)}function GB(n,e,t){return Pk.apply(this,arguments)}function Pk(){return Pk=(0,be.Z)(function*(n,e,t){const r=Nk(n);if(r.dc){for(const i of e){if(r.rc.has(i)){He("SyncEngine","Adding an already active target "+i);continue}const l=yield uN(r.localStore,i),u=yield zm(r.localStore,l);yield fk(r,NN(l),u.targetId,!1,u.resumeToken),gE(r.remoteStore,u)}for(const i of t)r.rc.has(i)&&(yield Gm(r.localStore,i,!1).then(()=>{aw(r.remoteStore,i),Xm(r,i)}).catch(xd))}}),Pk.apply(this,arguments)}function Nk(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RB.bind(null,e),e.sc.zo=DB.bind(null,e.eventManager),e.sc.wc=EB.bind(null,e.eventManager),e}function Fk(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NB.bind(null,e),e}class FN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.It=sw(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return oN(this.persistence,new sN,e.initialUser,this.It)}yc(e){return new rN(cE.Bs,this.It)}gc(e){return new gN}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class LN extends FN{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield Fk(r.Ac.syncEngine),yield Wm(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return oN(this.persistence,new sN,e.initialUser,this.It)}Tc(e,t){return new FU(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new vV(t,this.persistence);return new yV(e.asyncQueue,r)}yc(e){const t=kM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Vs.withCacheSize(this.cacheSizeBytes):Vs.DEFAULT;return new MM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,_N(),pE(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new gN}}class WB extends LN{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof UM&&(r.sharedClientState.syncEngine={Fr:HB.bind(null,i),$r:zB.bind(null,i),Br:GB.bind(null,i),vi:ZB.bind(null,i),Mr:jB.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var l=(0,be.Z)(function*(u){yield function $B(n,e){return xk.apply(this,arguments)}(r.Ac.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return l.apply(this,arguments)}}())})()}gc(e){const t=_N();if(!UM.C(t))throw new Fe(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=kM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new UM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Lk{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>ON(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=VB.bind(null,r.syncEngine),yield rk(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new bB}createDatastore(e){const t=sw(e.databaseInfo.databaseId),r=new sB(e.databaseInfo);return new lB(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,l=f=>ON(this.syncEngine,f,0),u=mN.C()?new mN:new nB,new dB(t,r,i,l,u);var t,r,i,l,u}createSyncEngine(e,t){return function(r,i,l,u,f,_,C){const I=new MB(r,i,l,u,f,_);return C&&(I.dc=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=tt(t);He("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield qm(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Vk(n,e,t){if(!t)throw new Fe(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function VN(n,e,t,r){if(!0===e&&!0===r)throw new Fe(me.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function UN(n){if(!Ye.isDocumentKey(n))throw new Fe(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function BN(n){if(Ye.isDocumentKey(n))throw new Fe(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _E(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":pt()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_E(n);throw new Fe(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function jN(n,e){if(e<=0)throw new Fe(me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const HN=new Map;class $N{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,VN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $N({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fe(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $N(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new oV;switch(t.type){case"gapi":return new uV(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Fe(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=HN.get(e);t&&(He("ComponentProvider","Removing Datastore"),HN.delete(e),t.terminate())}(this),Promise.resolve()}}function ZN(n,e,t,r={}){var i;const l=(n=on(n,lw))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&jf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,f;if("string"==typeof r.mockUserToken)u=r.mockUserToken,f=ui.MOCK_USER;else{u=(0,sn.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Fe(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ui(_)}n._authCredentials=new aV(new mP(u,f))}}class nr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nr(this.firestore,e,this._key)}}class Bi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class tc extends Bi{constructor(e,t,r){super(e,t,Nm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nr(this.firestore,null,new Ye(e))}withConverter(e){return new tc(this.firestore,e,this._path)}}function zN(n,e,...t){if(n=(0,sn.m9)(n),Vk("collection","path",e),n instanceof lw){const r=pn.fromString(e,...t);return BN(r),new tc(n,null,r)}{if(!(n instanceof nr||n instanceof tc))throw new Fe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return BN(r),new tc(n.firestore,null,r)}}function yE(n,e,...t){if(n=(0,sn.m9)(n),1===arguments.length&&(e=yP.R()),Vk("doc","path",e),n instanceof lw){const r=pn.fromString(e,...t);return UN(r),new nr(n,null,new Ye(r))}{if(!(n instanceof nr||n instanceof tc))throw new Fe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return UN(r),new nr(n.firestore,n instanceof tc?n.converter:null,new Ye(r))}}function GN(n,e){return n=(0,sn.m9)(n),e=(0,sn.m9)(e),(n instanceof nr||n instanceof tc)&&(e instanceof nr||e instanceof tc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Uk(n,e){return n=(0,sn.m9)(n),e=(0,sn.m9)(e),n instanceof Bi&&e instanceof Bi&&n.firestore===e.firestore&&BC(n._query,e._query)&&n.converter===e.converter}function qN(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class vE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Mr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class KB{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Wr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,be.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const l=yield e.Cc(i);return new IB(JSON.parse(l),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,be.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,be.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class XB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,be.Z)(function*(l,u){const f=tt(l),_=YC(f.It)+"/documents",C={documents:u.map($=>WC(f.It,$))},I=yield f._o("BatchGetDocuments",_,C,u.length),A=new Map;I.forEach($=>{const K=function QV(n,e){return"found"in e?function(t,r){Pt(!!r.found);const i=Xl(t,r.found.name),l=di(r.found.updateTime),u=new Ei({mapValue:{fields:r.found.fields}});return qn.newFoundDocument(i,l,u)}(n,e):"missing"in e?function(t,r){Pt(!!r.missing),Pt(!!r.readTime);const i=Xl(t,r.missing),l=di(r.readTime);return qn.newNoDocument(i,l)}(n,e):pt()}(f.It,$);A.set(K.key.toString(),K)});const V=[];return u.forEach($=>{const K=A.get($.toString());Pt(!!K),V.push(K)}),V}),function(l,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const l=Ye.fromPath(i);e.mutations.push(new gM(l,e.precondition(l)))}),yield(r=(0,be.Z)(function*(i,l){const u=tt(i),f=YC(u.It)+"/documents",_={writes:l.map(C=>KC(u.It,C))};yield u.ao("Commit",f,_)}),function(i,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pt();t=Nt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Nt.min())?or.exists(!1):or.updateTime(t):or.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Nt.min()))throw new Fe(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return or.updateTime(t)}return or.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ej{constructor(e,t,r,i,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=l,this.kc=r.maxAttempts,this.No=new BM(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,be.Z)(function*(){const t=new XB(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(l=>{e.Fc(l)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!PC(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!l1(t)}return!1}}class tj{constructor(e,t,r,i){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ui.UNAUTHENTICATED,this.clientId=yP.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,be.Z)(function*(f){He("FirestoreClient","Received user=",f.uid),yield l.authCredentialListener(f),l.user=f});return function(f){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(He("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Km(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function WN(n,e){return Bk.apply(this,arguments)}function Bk(){return Bk=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),He("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,be.Z)(function*(l){r.isEqual(l)||(yield aN(e.localStore,l),r=l)});return function(l){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Bk.apply(this,arguments)}function YN(n,e){return jk.apply(this,arguments)}function jk(){return jk=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Hk(n);He("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>EN(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,l)=>EN(e.remoteStore,l)),n.onlineComponents=e}),jk.apply(this,arguments)}function Hk(n){return $k.apply(this,arguments)}function $k(){return $k=(0,be.Z)(function*(n){return n.offlineComponents||(He("FirestoreClient","Using default OfflineComponentProvider"),yield WN(n,new FN)),n.offlineComponents}),$k.apply(this,arguments)}function CE(n){return Zk.apply(this,arguments)}function Zk(){return Zk=(0,be.Z)(function*(n){return n.onlineComponents||(He("FirestoreClient","Using default OnlineComponentProvider"),yield YN(n,new Lk)),n.onlineComponents}),Zk.apply(this,arguments)}function KN(n){return Hk(n).then(e=>e.persistence)}function wE(n){return Hk(n).then(e=>e.localStore)}function zk(n){return CE(n).then(e=>e.remoteStore)}function Gk(n){return CE(n).then(e=>e.syncEngine)}function e_(n){return qk.apply(this,arguments)}function qk(){return qk=(0,be.Z)(function*(n){const e=yield CE(n),t=e.eventManager;return t.onListen=kB.bind(null,e.syncEngine),t.onUnlisten=xB.bind(null,e.syncEngine),t}),qk.apply(this,arguments)}function QN(n,e,t={}){const r=new Wr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,l,u,f,_){const C=new vE({next:A=>{l.enqueueAndForget(()=>lk(i,I));const V=A.docs.has(u);!V&&A.fromCache?_.reject(new Fe(me.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&A.fromCache&&f&&"server"===f.source?_.reject(new Fe(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(A)},error:A=>_.reject(A)}),I=new dk(Nm(u.path),C,{includeMetadataChanges:!0,ku:!0});return ok(i,I)}(yield e_(n),n.asyncQueue,e,t,r)})),r.promise}function XN(n,e,t={}){const r=new Wr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,l,u,f,_){const C=new vE({next:A=>{l.enqueueAndForget(()=>lk(i,I)),A.fromCache&&"server"===f.source?_.reject(new Fe(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),I=new dk(u,C,{includeMetadataChanges:!0,ku:!0});return ok(i,I)}(yield e_(n),n.asyncQueue,e,t,r)})),r.promise}class cj{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new BM(this,"async_queue_retry"),this.Wc=()=>{const t=pE();t&&He("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=pE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=pE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Wr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,be.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!Od(t))throw t;He("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Mr("INTERNAL UNHANDLED ERROR: ",function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),u}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=sk.createAndSchedule(this,e,t,r,l=>this.Yc(l));return this.qc.push(i),i}zc(){this.Kc&&pt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function Wk(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class uj{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class rr extends lw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new cj,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||eF(this),this._firestoreClient.terminate()}}function hj(n,e){const t="object"==typeof n?n:(0,Ka.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Ka._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const l=(0,sn.P0)("firestore");l&&ZN(i,...l)}return i}function kr(n){return n._firestoreClient||eF(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function eF(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new bV(n._databaseId,l,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var l,f;n._firestoreClient=new tj(n._authCredentials,n._appCheckCredentials,n._queue,r)}function tF(n,e,t){const r=new Wr;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield WN(n,t),yield YN(n,e),r.resolve()}catch(i){const l=i;if(!("FirebaseError"===(u=l).name?u.code===me.FAILED_PRECONDITION||u.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw l;jf("Error enabling offline persistence. Falling back to persistence disabled: "+l),r.reject(l)}var u})).then(()=>r.promise)}function nF(n){if(n._initialized||n._terminated)throw new Fe(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class nc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nc(Yr.fromBase64String(e))}catch(t){throw new Fe(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new nc(Yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class uu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sp{constructor(e){this._methodName=e}}class bE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const wj=/^__.*__$/;class bj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new au(e,this.data,this.fieldMask,t,this.fieldTransforms):new Um(e,this.data,t,this.fieldTransforms)}}class rF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new au(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function iF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class DE{constructor(e,t,r,i,l,u){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===l&&this.na(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new DE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return SE(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(iF(this.sa)&&wj.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class Dj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||sw(e)}da(e,t,r,i=!1){return new DE({sa:e,methodName:t,fa:r,path:vr.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function op(n){const e=n._freezeSettings(),t=sw(n._databaseId);return new Dj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function EE(n,e,t,r,i,l={}){const u=n.da(l.merge||l.mergeFields?2:0,e,t,i);Qk("Data must be an object, but it was:",u,r);const f=aF(r,u);let _,C;if(l.merge)_=new po(u.fieldMask),C=u.fieldTransforms;else if(l.mergeFields){const I=[];for(const A of l.mergeFields){const V=Xk(e,A,t);if(!u.contains(V))throw new Fe(me.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);cF(I,V)||I.push(V)}_=new po(I),C=u.fieldTransforms.filter(A=>_.covers(A.field))}else _=null,C=u.fieldTransforms;return new bj(new Ei(f),_,C)}class cw extends sp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cw}}function sF(n,e,t){return new DE({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Yk extends sp{_toFieldTransform(e){return new jC(e.path,new Lm)}isEqual(e){return e instanceof Yk}}class Ej extends sp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=sF(this,e,!0),r=this._a.map(l=>ap(l,t)),i=new Yf(r);return new jC(e.path,i)}isEqual(e){return this===e}}class Ij extends sp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=sF(this,e,!0),r=this._a.map(l=>ap(l,t)),i=new Kf(r);return new jC(e.path,i)}isEqual(e){return this===e}}class Sj extends sp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Vm(e.It,KP(e.It,this.wa));return new jC(e.path,t)}isEqual(e){return this===e}}function Kk(n,e,t,r){const i=n.da(1,e,t);Qk("Data must be an object, but it was:",i,r);const l=[],u=Ei.empty();Zf(r,(_,C)=>{const I=IE(e,_,t);C=(0,sn.m9)(C);const A=i.ca(I);if(C instanceof cw)l.push(I);else{const V=ap(C,A);null!=V&&(l.push(I),u.set(I,V))}});const f=new po(l);return new rF(u,f,i.fieldTransforms)}function Jk(n,e,t,r,i,l){const u=n.da(1,e,t),f=[Xk(e,r,t)],_=[i];if(l.length%2!=0)throw new Fe(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<l.length;V+=2)f.push(Xk(e,l[V])),_.push(l[V+1]);const C=[],I=Ei.empty();for(let V=f.length-1;V>=0;--V)if(!cF(C,f[V])){const $=f[V];let K=_[V];K=(0,sn.m9)(K);const we=u.ca($);if(K instanceof cw)C.push($);else{const Ce=ap(K,we);null!=Ce&&(C.push($),I.set($,Ce))}}const A=new po(C);return new rF(I,A,u.fieldTransforms)}function oF(n,e,t,r=!1){return ap(t,n.da(r?4:3,e))}function ap(n,e){if(lF(n=(0,sn.m9)(n)))return Qk("Unsupported field value:",e,n),aF(n,e);if(n instanceof sp)return function(t,r){if(!iF(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let l=0;for(const u of t){let f=ap(u,r.aa(l));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),l++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,sn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return KP(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=sr.fromDate(t);return{timestampValue:qC(r.It,i)}}if(t instanceof sr){const i=new sr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:qC(r.It,i)}}if(t instanceof bE)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof nc)return{bytesValue:y1(r.It,t._byteString)};if(t instanceof nr){const i=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(i))throw r.ha(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:mM(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${_E(t)}`)}(n,e)}function aF(n,e){const t={};return SP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zf(n,(r,i)=>{const l=ap(i,e.ra(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function lF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof sr||n instanceof bE||n instanceof nc||n instanceof nr||n instanceof sp)}function Qk(n,e,t){if(!lF(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=_E(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function Xk(n,e,t){if((e=(0,sn.m9)(e))instanceof uu)return e._internalPath;if("string"==typeof e)return IE(n,e);throw SE("Field path arguments must be of type string or ",n,!1,void 0,t)}const Tj=new RegExp("[~\\*/\\[\\]]");function IE(n,e,t){if(e.search(Tj)>=0)throw SE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new uu(...e.split("."))._internalPath}catch{throw SE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function SE(n,e,t,r,i){const l=r&&!r.isEmpty(),u=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(l||u)&&(_+=" (found",l&&(_+=` in field ${r}`),u&&(_+=` in document ${i}`),_+=")"),new Fe(me.INVALID_ARGUMENT,f+n+_)}function cF(n,e){return n.some(t=>t.isEqual(e))}class uw{constructor(e,t,r,i,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Aj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(TE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Aj extends uw{data(){return super.data()}}function TE(n,e){return"string"==typeof e?IE(n,e):e instanceof uu?e._internalPath:e._delegate._internalPath}function uF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dw{}function $d(n,...e){for(const t of e)n=t._apply(n);return n}class Mj extends dw{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=op(e.firestore),r=function(i,l,u,f,_,C,I){let A;if(_.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Fe(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){mF(I,C);const $=[];for(const K of I)$.push(gF(f,i,K));A={arrayValue:{values:$}}}else A=gF(f,i,I)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||mF(I,C),A=oF(u,"where",I,"in"===C||"not-in"===C);const V=Ii.create(_,C,A);return function($,K){if(K.dt()){const Ce=dM($);if(null!==Ce&&!Ce.isEqual(K.field))throw new Fe(me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ce.toString()}' and '${K.field.toString()}'`);const lt=uM($);null!==lt&&_F(0,K.field,lt)}const we=function(Ce,lt){for(const St of Ce.filters)if(lt.indexOf(St.op)>=0)return St.op;return null}($,function(Ce){switch(Ce){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(K.op));if(null!==we)throw new Fe(me.INVALID_ARGUMENT,we===K.op?`Invalid query. You cannot use more than one '${K.op.toString()}' filter.`:`Invalid query. You cannot use '${K.op.toString()}' filters with '${we.toString()}' filters.`)}(i,V),V}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Bi(e.firestore,e.converter,function(i,l){const u=i.filters.concat([l]);return new ou(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class xj extends dw{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,l){if(null!==r.startAt)throw new Fe(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Pm(i,l);return function(f,_){if(null===uM(f)){const C=dM(f);null!==C&&_F(0,C,_.field)}}(r,u),u}(e._query,this.ma,this.pa);return new Bi(e.firestore,e.converter,function(r,i){const l=r.explicitOrderBy.concat([i]);return new ou(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class dF extends dw{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Bi(e.firestore,e.converter,YD(e._query,this.Ia,this.Ta))}}class hF extends dw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=pF(e,this.type,this.Ea,this.Aa);return new Bi(e.firestore,e.converter,(i=t,new ou((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class fF extends dw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=pF(e,this.type,this.Ea,this.Aa);return new Bi(e.firestore,e.converter,(i=t,new ou((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function pF(n,e,t,r){if(t[0]=(0,sn.m9)(t[0]),t[0]instanceof uw)return function(i,l,u,f,_){if(!f)throw new Fe(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const C=[];for(const I of Fm(i))if(I.field.isKeyField())C.push(qf(l,f.key));else{const A=f.data.field(I.field);if(aM(A))throw new Fe(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const V=I.field.canonicalString();throw new Fe(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}C.push(A)}return new Ld(C,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=op(n.firestore);return function(l,u,f,_,C,I){const A=l.explicitOrderBy;if(C.length>A.length)throw new Fe(me.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let $=0;$<C.length;$++){const K=C[$];if(A[$].field.isKeyField()){if("string"!=typeof K)throw new Fe(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof K}`);if(!hM(l)&&-1!==K.indexOf("/"))throw new Fe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${K}' contains a slash.`);const we=l.path.child(pn.fromString(K));if(!Ye.isDocumentKey(we))throw new Fe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${we}' is not because it contains an odd number of segments.`);const Ce=new Ye(we);V.push(qf(u,Ce))}else{const we=oF(f,_,K);V.push(we)}}return new Ld(V,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function gF(n,e,t){if("string"==typeof(t=(0,sn.m9)(t))){if(""===t)throw new Fe(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hM(e)&&-1!==t.indexOf("/"))throw new Fe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pn.fromString(t));if(!Ye.isDocumentKey(r))throw new Fe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qf(n,new Ye(r))}if(t instanceof nr)return qf(n,t._key);throw new Fe(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_E(t)}.`)}function mF(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Fe(me.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function _F(n,e,t){if(!t.isEqual(e))throw new Fe(me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class ex{convertValue(e,t="none"){switch(Gf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw pt()}}convertObject(e,t){const r={};return Zf(e.fields,(i,l)=>{r[i]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new bE(wr(e.latitude),wr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=AP(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(RC(e));default:return null}}convertTimestamp(e){const t=Rd(e);return new sr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pn.fromString(e);Pt(T1(r));const i=new Pd(r.get(1),r.get(3)),l=new Ye(r.popFirst(5));return i.isEqual(t)||Mr(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function AE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Uj extends ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new nc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}class lp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class du extends uw{constructor(e,t,r,i,l,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(TE("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class hw extends du{data(e={}){return super.data(e)}}class Zd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new lp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hw(this._firestore,this._userDataWriter,r.key,r,new lp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new hw(r._firestore,r._userDataWriter,u.doc.key,u.doc,new lp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const f=new hw(r._firestore,r._userDataWriter,u.doc.key,u.doc,new lp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,C=-1;return 0!==u.type&&(_=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),1!==u.type&&(l=l.add(u.doc),C=l.indexOf(u.doc.key)),{type:Bj(u.type),doc:f,oldIndex:_,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Bj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}function yF(n,e){return n instanceof du&&e instanceof du?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Zd&&e instanceof Zd&&n._firestore===e._firestore&&Uk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class zd extends ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new nc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}function vF(n,e,t){n=on(n,nr);const r=on(n.firestore,rr),i=AE(n.converter,e,t);return t_(r,[EE(op(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,or.none())])}function CF(n,e,t,...r){n=on(n,nr);const i=on(n.firestore,rr),l=op(i);let u;return u="string"==typeof(e=(0,sn.m9)(e))||e instanceof uu?Jk(l,"updateDoc",n._key,e,t,r):Kk(l,"updateDoc",n._key,e),t_(i,[u.toMutation(n._key,or.exists(!0))])}function wF(n,...e){var t,r,i;n=(0,sn.m9)(n);let l={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||Wk(e[u])||(l=e[u],u++);const f={includeMetadataChanges:l.includeMetadataChanges};if(Wk(e[u])){const A=e[u];e[u]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[u+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[u+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let _,C,I;if(n instanceof nr)C=on(n.firestore,rr),I=Nm(n._key.path),_={next:A=>{e[u]&&e[u](tx(C,n,A))},error:e[u+1],complete:e[u+2]};else{const A=on(n,Bi);C=on(A.firestore,rr),I=A._query;const V=new zd(C);_={next:$=>{e[u]&&e[u](new Zd(C,V,A,$))},error:e[u+1],complete:e[u+2]},uF(n._query)}return function(A,V,$,K){const we=new vE(K),Ce=new dk(V,we,$);return A.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return ok(yield e_(A),Ce)})),()=>{we.bc(),A.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return lk(yield e_(A),Ce)}))}}(kr(C),I,f,_)}function t_(n,e){return function(t,r){const i=new Wr;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function OB(n,e,t){return mk.apply(this,arguments)}(yield Gk(t),r,i)})),i.promise}(kr(n),e)}function tx(n,e,t){const r=t.docs.get(e._key),i=new zd(n);return new du(n,i,e._key,r,new lp(t.hasPendingWrites,t.fromCache),e.converter)}const Kj={maxAttempts:5};class bF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=op(e)}set(e,t,r){this._verifyNotCommitted();const i=Gd(e,this._firestore),l=AE(i.converter,t,r),u=EE(this._dataReader,"WriteBatch.set",i._key,l,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,or.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const l=Gd(e,this._firestore);let u;return u="string"==typeof(t=(0,sn.m9)(t))||t instanceof uu?Jk(this._dataReader,"WriteBatch.update",l._key,t,r,i):Kk(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,or.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Gd(e,this._firestore);return this._mutations=this._mutations.concat(new Bm(t._key,or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gd(n,e){if((n=(0,sn.m9)(n)).firestore!==e)throw new Fe(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Jj extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=op(e)}get(e){const t=Gd(e,this._firestore),r=new Uj(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return pt();const l=i[0];if(l.isFoundDocument())return new uw(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new uw(this._firestore,r,t._key,null,t.converter);throw pt()})}set(e,t,r){const i=Gd(e,this._firestore),l=AE(i.converter,t,r),u=EE(this._dataReader,"Transaction.set",i._key,l,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const l=Gd(e,this._firestore);let u;return u="string"==typeof(t=(0,sn.m9)(t))||t instanceof uu?Jk(this._dataReader,"Transaction.update",l._key,t,r,i):Kk(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=Gd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Gd(e,this._firestore),r=new zd(this._firestore);return super.get(e).then(i=>new du(this._firestore,r,t._key,i._document,new lp(!1,!1),t.converter))}}function nx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function EF(){if(typeof Uint8Array>"u")throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function IF(){if(!function CV(){return typeof atob<"u"}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){km=Ka.SDK_VERSION,(0,Ka._registerComponent)(new ff.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const l=t.getProvider("app").getImmediate(),u=new rr(new lV(t.getProvider("auth-internal")),new dV(t.getProvider("app-check-internal")),function(f,_){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Fe(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pd(f.options.projectId,_)}(l,r),l);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,Ka.registerVersion)(gP,"3.7.0",n),(0,Ka.registerVersion)(gP,"3.7.0","esm2017")}();class fw{constructor(e){this._delegate=e}static fromBase64String(e){return IF(),new fw(nc.fromBase64String(e))}static fromUint8Array(e){return EF(),new fw(nc.fromUint8Array(e))}toBase64(){return IF(),this._delegate.toBase64()}toUint8Array(){return EF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function rx(n){return function oH(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class aH{enableIndexedDbPersistence(e,t){return function fj(n,e){nF(n=on(n,rr));const t=kr(n),r=n._freezeSettings(),i=new Lk;return tF(t,i,new LN(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function pj(n){nF(n=on(n,rr));const e=kr(n),t=n._freezeSettings(),r=new Lk;return tF(e,r,new WB(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function gj(n){if(n._initialized&&!n._terminated)throw new Fe(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Wr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(r){if(!il.C())return Promise.resolve();const i=r+"main";yield il.delete(i)}),function(r){return t.apply(this,arguments)})(kM(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class SF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Pd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&jf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){ZN(this._delegate,e,t,r)}enableNetwork(){return function _j(n){return function nj(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield KN(n),t=yield zk(n);return e.setNetworkEnabled(!0),function(r){const i=tt(r);return i.wu.delete(0),ow(i)}(t)}))}(kr(n=on(n,rr)))}(this._delegate)}disableNetwork(){return function yj(n){return function rj(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield KN(n),t=yield zk(n);return e.setNetworkEnabled(!1),(r=(0,be.Z)(function*(i){const l=tt(i);l.wu.add(0),yield qm(l),l.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(kr(n=on(n,rr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,VN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function mj(n){return function(e){const t=new Wr;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function FB(n,e){return wk.apply(this,arguments)}(yield Gk(e),t)})),t.promise}(kr(n=on(n,rr)))}(this._delegate)}onSnapshotsInSync(e){return function Yj(n,e){return function oj(n,e){const t=new vE(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield e_(n),i=t,tt(r).bu.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield e_(n),i=t,void tt(r).bu.delete(i);var r,i}))}}(kr(n=on(n,rr)),Wk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new n_(this,zN(this._delegate,e))}catch(t){throw ps(t,"collection()","Firestore.collection()")}}doc(e){try{return new oa(this,yE(this._delegate,e))}catch(t){throw ps(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gs(this,function YB(n,e){if(n=on(n,lw),Vk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(me.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bi(n,null,(t=e,new ou(pn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ps(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Qj(n,e,t){n=on(n,rr);const r=Object.assign(Object.assign({},Kj),t);return function(i){if(i.maxAttempts<1)throw new Fe(me.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,l,u){const f=new Wr;return i.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const _=yield function JN(n){return CE(n).then(e=>e.datastore)}(i);new ej(i.asyncQueue,_,u,l,f).run()})),f.promise}(kr(n),i=>e(new Jj(n,i)),r)}(this._delegate,t=>e(new TF(this,t)))}batch(){return kr(this._delegate),new AF(new bF(this._delegate,e=>t_(this._delegate,e)))}loadBundle(e){return function vj(n,e){const t=kr(n=on(n,rr)),r=new uj;return function aj(n,e,t,r){const i=function(l,u){let f;return f="string"==typeof l?(new TextEncoder).encode(l):l,_=function(_,C){if(_ instanceof Uint8Array)return qN(_,C);if(_ instanceof ArrayBuffer)return qN(new Uint8Array(_),C);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new KB(_,u);var _}(t,sw(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function qB(n,e,t){const r=tt(n);var i;(i=(0,be.Z)(function*(l,u,f){try{const _=yield u.getMetadata();if(yield function(V,$){const K=tt(V),we=di($.createTime);return K.persistence.runTransaction("hasNewerBundle","readonly",Ce=>K.Ns.getBundleMetadata(Ce,$.id)).then(Ce=>!!Ce&&Ce.createTime.compareTo(we)>=0)}(l.localStore,_))return yield u.close(),f._completeWith({taskState:"Success",documentsLoaded:(V=_).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);f._updateProgress(TN(_));const C=new SB(_,l.localStore,u.It);let I=yield u.mc();for(;I;){const V=yield C.Fu(I);V&&f._updateProgress(V),I=yield u.mc()}const A=yield C.complete();return yield cu(l,A.Lu,void 0),yield function(V,$){const K=tt(V);return K.persistence.runTransaction("Save bundle","readwrite",we=>K.Ns.saveBundleMetadata(we,$))}(l.localStore,_),f._completeWith(A.progress),Promise.resolve(A.Bu)}catch(_){return jf("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var V}),function(l,u,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Gk(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Cj(n,e){return function lj(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,r){const i=tt(t);return i.persistence.runTransaction("Get named query","readonly",l=>i.Ns.getNamedQuery(l,r))}(yield wE(n),e)}))}(kr(n=on(n,rr)),e).then(t=>t?new Bi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new gs(this,t):null)}}class ME extends ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new fw(new nc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return oa.forKey(t,this.firestore,null)}}class TF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ME(e)}get(e){const t=up(e);return this._delegate.get(t).then(r=>new pw(this._firestore,new du(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=up(e);return r?(nx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const l=up(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...i),this}delete(e){const t=up(e);return this._delegate.delete(t),this}}class AF{constructor(e){this._delegate=e}set(e,t,r){const i=up(e);return r?(nx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const l=up(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...i),this}delete(e){const t=up(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class cp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new hw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=cp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let l=i.get(t);return l||(l=new cp(e,new ME(e),t),i.set(t,l)),l}}cp.INSTANCES=new WeakMap;class oa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ME(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new oa(t,new nr(t._delegate,r,new Ye(e)))}static forKey(e,t,r){return new oa(t,new nr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new n_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new n_(this.firestore,zN(this._delegate,e))}catch(t){throw ps(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,sn.m9)(e))instanceof nr&&GN(this._delegate,e)}set(e,t){t=nx("DocumentReference.set",t);try{return t?vF(this._delegate,e,t):vF(this._delegate,e)}catch(r){throw ps(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?CF(this._delegate,e):CF(this._delegate,e,t,...r)}catch(i){throw ps(i,"updateDoc()","DocumentReference.update()")}}delete(){return function qj(n){return t_(on(n.firestore,rr),[new Bm(n._key,or.none())])}(this._delegate)}onSnapshot(...e){const t=MF(e),r=kF(e,i=>new pw(this.firestore,new du(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return wF(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Hj(n){n=on(n,nr);const e=on(n.firestore,rr),t=kr(e),r=new zd(e);return function ij(n,e){const t=new Wr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,l,u){try{const f=yield function(_,C){const I=tt(_);return I.persistence.runTransaction("read document","readonly",A=>I.localDocuments.getDocument(A,C))}(i,l);f.isFoundDocument()?u.resolve(f):f.isNoDocument()?u.resolve(null):u.reject(new Fe(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=Km(f,`Failed to get document '${l} from cache`);u.reject(_)}}),function(i,l,u){return r.apply(this,arguments)})(yield wE(n),e,t);var r})),t.promise}(t,n._key).then(i=>new du(e,r,n._key,i,new lp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function $j(n){n=on(n,nr);const e=on(n.firestore,rr);return QN(kr(e),n._key,{source:"server"}).then(t=>tx(e,n,t))}(this._delegate):function jj(n){n=on(n,nr);const e=on(n.firestore,rr);return QN(kr(e),n._key).then(t=>tx(e,n,t))}(this._delegate),t.then(r=>new pw(this.firestore,new du(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new oa(this.firestore,this._delegate.withConverter(e?cp.getInstance(this.firestore,e):null))}}function ps(n,e,t){return n.message=n.message.replace(e,t),n}function MF(n){for(const e of n)if("object"==typeof e&&!rx(e))return e;return{}}function kF(n,e){var t,r;let i;return i=rx(n[0])?n[0]:rx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{i.next&&i.next(e(l))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class pw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new oa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yF(this._delegate,e._delegate)}}class gw extends pw{data(e){const t=this._delegate.data(e);return function sV(n,e){n||pt()}(void 0!==t),t}}class gs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ME(e)}where(e,t,r){try{return new gs(this.firestore,$d(this._delegate,function kj(n,e,t){const r=e,i=TE("where",n);return new Mj(i,r,t)}(e,t,r)))}catch(i){throw ps(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new gs(this.firestore,$d(this._delegate,function Oj(n,e="asc"){const t=e,r=TE("orderBy",n);return new xj(r,t)}(e,t)))}catch(r){throw ps(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new gs(this.firestore,$d(this._delegate,function Rj(n){return jN("limit",n),new dF("limit",n,"F")}(e)))}catch(t){throw ps(t,"limit()","Query.limit()")}}limitToLast(e){try{return new gs(this.firestore,$d(this._delegate,function Pj(n){return jN("limitToLast",n),new dF("limitToLast",n,"L")}(e)))}catch(t){throw ps(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new gs(this.firestore,$d(this._delegate,function Nj(...n){return new hF("startAt",n,!0)}(...e)))}catch(t){throw ps(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new gs(this.firestore,$d(this._delegate,function Fj(...n){return new hF("startAfter",n,!1)}(...e)))}catch(t){throw ps(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new gs(this.firestore,$d(this._delegate,function Lj(...n){return new fF("endBefore",n,!1)}(...e)))}catch(t){throw ps(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new gs(this.firestore,$d(this._delegate,function Vj(...n){return new fF("endAt",n,!0)}(...e)))}catch(t){throw ps(t,"endAt()","Query.endAt()")}}isEqual(e){return Uk(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function zj(n){n=on(n,Bi);const e=on(n.firestore,rr),t=kr(e),r=new zd(e);return function sj(n,e){const t=new Wr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,l,u){try{const f=yield dE(i,l,!0),_=new kN(l,f.Hi),C=_.Wu(f.documents),I=_.applyChanges(C,!1);u.resolve(I.snapshot)}catch(f){const _=Km(f,`Failed to execute query '${l} against cache`);u.reject(_)}}),function(i,l,u){return r.apply(this,arguments)})(yield wE(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Zd(e,r,n,i))}(this._delegate):"server"===e?.source?function Gj(n){n=on(n,Bi);const e=on(n.firestore,rr),t=kr(e),r=new zd(e);return XN(t,n._query,{source:"server"}).then(i=>new Zd(e,r,n,i))}(this._delegate):function Zj(n){n=on(n,Bi);const e=on(n.firestore,rr),t=kr(e),r=new zd(e);return uF(n._query),XN(t,n._query).then(i=>new Zd(e,r,n,i))}(this._delegate),t.then(r=>new ix(this.firestore,new Zd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=MF(e),r=kF(e,i=>new ix(this.firestore,new Zd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return wF(this._delegate,t,r)}withConverter(e){return new gs(this.firestore,this._delegate.withConverter(e?cp.getInstance(this.firestore,e):null))}}class cH{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new gw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ix{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new gs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new gw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new cH(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new gw(this._firestore,r))})}isEqual(e){return yF(this._delegate,e._delegate)}}class n_ extends gs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new oa(this.firestore,e):null}doc(e){try{return new oa(this.firestore,void 0===e?yE(this._delegate):yE(this._delegate,e))}catch(t){throw ps(t,"doc()","CollectionReference.doc()")}}add(e){return function Wj(n,e){const t=on(n.firestore,rr),r=yE(n),i=AE(n.converter,e);return t_(t,[EE(op(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,or.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new oa(this.firestore,t))}isEqual(e){return GN(this._delegate,e._delegate)}withConverter(e){return new n_(this.firestore,this._delegate.withConverter(e?cp.getInstance(this.firestore,e):null))}}function up(n){return on(n,nr)}class sx{constructor(...e){this._delegate=new uu(...e)}static documentId(){return new sx(vr.keyField().canonicalString())}isEqual(e){return(e=(0,sn.m9)(e))instanceof uu&&this._delegate._internalPath.isEqual(e._internalPath)}}class dp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function eH(){return new Yk("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new dp(e)}static delete(){const e=function Xj(){return new cw("deleteField")}();return e._methodName="FieldValue.delete",new dp(e)}static arrayUnion(...e){const t=function tH(...n){return new Ej("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new dp(t)}static arrayRemove(...e){const t=function nH(...n){return new Ij("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new dp(t)}static increment(e){const t=function rH(n){return new Sj("increment",n)}(e);return t._methodName="FieldValue.increment",new dp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const uH={Firestore:SF,GeoPoint:bE,Timestamp:sr,Blob:fw,Transaction:TF,WriteBatch:AF,DocumentReference:oa,DocumentSnapshot:pw,Query:gs,QueryDocumentSnapshot:gw,QuerySnapshot:ix,CollectionReference:n_,FieldPath:sx,FieldValue:dp,setLogLevel:function lH(n){!function iV(n){kd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function xF(n,e){return function fH(n,e=Oh.z){return new Mn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function ox(n,e){return xF(n,e).pipe((0,We.U)(t=>({payload:t,type:"query"})))}function kE(n,e){return ox(n,e).pipe(er(void 0),Pi(),(0,We.U)(([t,r])=>{const i=r.payload.docChanges(),l=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,f)=>{const _=i.find(I=>I.doc.ref.isEqual(u.ref)),C=t?.payload.docs.find(I=>I.ref.isEqual(u.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(u.metadata)||!_&&C&&JSON.stringify(C.metadata)===JSON.stringify(u.metadata)||l.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:u}})}),l}))}function OF(n,e,t){return kE(n,t).pipe(Hh((r,i)=>function gH(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function mH(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ax(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ax(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ax(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(l=>l.payload),e),[]),Nn(),(0,We.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function ax(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function RF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function hH(n){(function dH(n,e){n.INTERNAL.registerComponent(new ff.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},uH)))})(n,(e,t)=>new SF(e,t,new aH)),n.registerVersion("@firebase/firestore-compat","0.2.0")}(_A.Z);class PF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=kE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,We.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(er(void 0),Pi(),S(([r,i])=>i.length>0||!r),(0,We.U)(([r,i])=>i),fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Hh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RF(e);return OF(this.query,t,this.afs.schedulers.outsideAngular).pipe(fn.iC)}valueChanges(e={}){return ox(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),fn.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(fn.iC)}add(e){return this.ref.add(e)}doc(e){return new NF(this.ref.doc(e),this.afs)}}class NF{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:l}=FF(r,t);return new PF(i,l,this.afs)}snapshotChanges(){return function pH(n,e){return xF(n,e).pipe(er(void 0),Pi(),(0,We.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(fn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,We.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,rn.D)(this.ref.get(e)).pipe(fn.iC)}}class _H{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?kE(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),S(t=>t.length>0),fn.iC):kE(this.query,this.afs.schedulers.outsideAngular).pipe(fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Hh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RF(e);return OF(this.query,t,this.afs.schedulers.outsideAngular).pipe(fn.iC)}valueChanges(e={}){return ox(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),fn.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(fn.iC)}}const yH=new s.OlP("angularfire2.enableFirestorePersistence"),vH=new s.OlP("angularfire2.firestore.persistenceSettings"),CH=new s.OlP("angularfire2.firestore.settings"),wH=new s.OlP("angularfire2.firestore.use-emulator");function FF(n,e=(t=>t)){return{query:e(n),ref:n}}let xE=(()=>{class n{constructor(t,r,i,l,u,f,_,C,I,A,V,$,K,we,Ce,lt,St){this.schedulers=_;const xt=(0,Ci.on)(t,f,r),Ft=I;A&&eu(xt,f,V,K,we,Ce,$,lt),[this.firestore,this.persistenceEnabled$]=(0,Ci.cc)(`${xt.name}.firestore`,"AngularFirestore",xt.name,()=>{const jt=f.runOutsideAngular(()=>xt.firestore());if(l&&jt.settings(l),Ft&&jt.useEmulator(...Ft),i&&!Ws(u)){const Xt=()=>{try{return(0,rn.D)(jt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Kr){return typeof console<"u"&&console.warn(Kr),ze(!1)}};return[jt,f.runOutsideAngular(Xt)]}return[jt,ze(!1)]},[l,Ft,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:u}=FF(i,r),f=this.schedulers.ngZone.run(()=>l);return new PF(f,u,this)}collectionGroup(t,r){const i=r||(u=>u),l=this.firestore.collectionGroup(t);return new _H(i(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new NF(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Ci.Dh),s.LFG(Ci.xv,8),s.LFG(yH,8),s.LFG(CH,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(fn.HU),s.LFG(vH,8),s.LFG(wH,8),s.LFG(zv,8),s.LFG(bf,8),s.LFG(tm,8),s.LFG(gA,8),s.LFG($v,8),s.LFG(yD,8),s.LFG(Zv,8),s.LFG(Yg,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),hu=(()=>{class n{constructor(t){this.angularFirestore=t,this.searchWord=new Pn(""),this.orgId=sessionStorage.getItem("orgid")||null,this.userCollection=this.angularFirestore.collection("Users",r=>r),this.user$=this.angularFirestore.collection("Users",r=>r.where("organization","==",this.orgId)).snapshotChanges().pipe((0,We.U)(r=>r.map(i=>new Gv({...i.payload.doc.data(),id:i.payload.doc.id})))),this.users$=$c([this.user$,this.searchWord]).pipe((0,We.U)(([r,i])=>r.filter(l=>l.firstName.toLocaleLowerCase().includes(i.toLocaleLowerCase())||l.lastName.toLocaleLowerCase().includes(i.toLocaleLowerCase())||(l.firstName+" "+l.lastName).toLocaleLowerCase().includes(i.toLocaleLowerCase()))))}addUser(t){var r=this;return(0,be.Z)(function*(){let i;return yield r.userCollection.add(t).then(l=>i=l.id),i})()}setSearchWord(t){this.searchWord.next(t)}editUser(t){this.angularFirestore.collection("Users").doc(t.id).update(t)}deleteTask(t){this.angularFirestore.collection("Users").doc(t).delete()}updateScore(t,r){this.angularFirestore.collection("Users").doc(t).update({score:r})}setOrganization(t,r){this.angularFirestore.collection("Users").doc(t).update({organization:r})}getUser(t){return this.angularFirestore.collection("Users").doc(t).valueChanges()}getUserRole(t){return this.angularFirestore.collection("Users").doc(t).valueChanges().pipe((0,We.U)(r=>r.position))}findUserByEmail(t){return this.angularFirestore.collection("Users",r=>r.where("emailAddress","==",t)).valueChanges()}createUser(t){this.userCollection.doc(t.user.uid).set({emailAddress:t.user.email,id:"",firstName:"",lastName:"",phoneNumber:0,position:"",departament:"",manager:"",score:0,organization:""})}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(xE))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Si=class{constructor(e,t,r,i){this.fireauth=e,this.router=t,this.userService=r,this.store=i,this.isLoggedIn=!1,this.userData=new Pn(null),null!==sessionStorage.getItem("user")?(this.isLoggedIn=!0,this.router.navigate(["pages/dashboard"])):this.isLoggedIn=!1,this.fireauth.authState.subscribe(l=>{l?(this.userData.next(l),sessionStorage.setItem("userDetails",JSON.stringify(this.userData.value)),JSON.parse(sessionStorage.getItem("userDetails"))):(sessionStorage.setItem("userDetails","null"),JSON.parse(sessionStorage.getItem("userDetails")))})}login(e,t){var r=this;this.fireauth.signInWithEmailAndPassword(e,t).then(function(){var i=(0,be.Z)(function*(l){sessionStorage.setItem("user",JSON.stringify(l.user)),r.isLoggedIn=!0,r.store.dispatch(new em(l.user)),r.router.navigate(["organization",l.user?.uid])});return function(l){return i.apply(this,arguments)}}()).catch(i=>{alert(i.message),this.router.navigate(["/login"])})}register(e,t){this.fireauth.createUserWithEmailAndPassword(e,t).then(r=>{this.userService.createUser(r),alert("Sucsessful !"),this.router.navigate(["login"])}).catch(r=>{alert(r.message),this.router.navigate(["/login"])})}logout(){this.fireauth.signOut().then(()=>{sessionStorage.removeItem("user"),this.isLoggedIn=!1,this.store.dispatch(new gD),this.router.navigate(["/auth/login"])},e=>{alert(e.message)})}forgotPassword(e){this.fireauth.sendPasswordResetEmail(e).then(()=>{this.router.navigate(["auth/login"])},t=>{alert(t.message)})}googleSignIn(){return this.fireauth.signInWithPopup(new Lg.Q).then(e=>{sessionStorage.setItem("user",JSON.stringify(e.user)),this.isLoggedIn=!0,this.userService.getUser(e.user?.uid).subscribe(t=>{null==t&&this.userService.createUser(e)}),this.store.dispatch(new em(e.user)),this.router.navigate(["organization",e.user?.uid])},e=>{alert(e.message)})}isAuthenticated(){return this.isLoggedIn}getUser(){return this.userData}setDetails(e){return wf(this.userData.value,e).then(()=>{}).catch(t=>{console.log(t)})}};Si.\u0275fac=function(e){return new(e||Si)(s.LFG(zv),s.LFG(_r),s.LFG(hu),s.LFG(Bc))},Si.\u0275prov=s.Yz7({token:Si,factory:Si.\u0275fac,providedIn:"root"}),Si=(0,Nr.gn)([(0,s.GSi)()],Si);let rc=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!!this.authService.isAuthenticated()||(this.router.navigate(["/auth/login"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Si),s.LFG(_r))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ms(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function hx(n,e=Oh.z){return(0,E.e)((t,r)=>{let i=null,l=null,u=null;const f=()=>{if(i){i.unsubscribe(),i=null;const C=l;l=null,r.next(C)}};function _(){const C=u+n,I=e.now();if(I<C)return i=this.schedule(void 0,C-I),void r.add(i);f()}t.subscribe((0,En.x)(r,C=>{l=C,u=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{l=i=null}))})}function fx(n){return S((e,t)=>n<=t)}let RH=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),PH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[RH]}),n})();const VF=new Set;let s_,NH=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):LH}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function FH(n){if(!VF.has(n))try{s_||(s_=document.createElement("style"),s_.setAttribute("type","text/css"),document.head.appendChild(s_)),s_.sheet&&(s_.sheet.insertRule(`@media ${n} {body{ }}`,0),VF.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Ms))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function LH(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let VH=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new ct.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return UF(Wu(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let l=$c(UF(Wu(t)).map(u=>this._registerQuery(u).observable));return l=Ss(l.pipe(W(1)),l.pipe(fx(1),hx(0))),l.pipe((0,We.U)(u=>{const f={matches:!1,breakpoints:{}};return u.forEach(({matches:_,query:C})=>{f.matches=f.matches||_,f.breakpoints[C]=_}),f}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),l={observable:new Mn.y(u=>{const f=_=>this._zone.run(()=>u.next(_));return r.addListener(f),()=>{r.removeListener(f)}}).pipe(er(r),(0,We.U)(({matches:u})=>({query:t,matches:u})),Qe(this._destroySubject)),mql:r};return this._queries.set(t,l),l}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(NH),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function UF(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}class HH extends class jH{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ct.x,this._typeaheadSubscription=As.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new ct.x,this.change=new ct.x,e instanceof s.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,hn.b)(t=>this._pressedLetters.push(t)),hx(e),S(()=>this._pressedLetters.length>0),(0,We.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const l=(this._activeItemIndex+i)%r.length,u=r[l];if(!this._skipPredicateFn(u)&&0===u.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(l);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(l=>!e[l]||this._allowedModifierKeys.indexOf(l)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||ms(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e);this._activeItem=t[r]??null,this._activeItemIndex=r}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof s.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let HF=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function ZH(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function $H(n){try{return n.frameElement}catch{return null}}(function QH(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===ZF(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),l=ZF(t);return t.hasAttribute("contenteditable")?-1!==l:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function KH(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==l:"video"===i?-1!==l&&(null!==l||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function JH(n){return!function GH(n){return function WH(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function zH(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function qH(n){return function YH(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||$F(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Ms))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $F(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function ZF(n){if(!$F(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class XH{constructor(e,t,r,i,l=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,l||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(W(1)).subscribe(e)}}let e3=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new XH(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(HF),s.LFG(s.R0b),s.LFG(se))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zF(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function GF(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const t3=new s.OlP("cdk-input-modality-detector-options"),n3={ignoreKeys:[18,17,224,91,16]},o_=Ju({passive:!0,capture:!0});let r3=(()=>{class n{constructor(t,r,i,l){this._platform=t,this._mostRecentTarget=null,this._modality=new Pn(null),this._lastTouchMs=0,this._onKeydown=u=>{this._options?.ignoreKeys?.some(f=>f===u.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=io(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(zF(u)?"keyboard":"mouse"),this._mostRecentTarget=io(u))},this._onTouchstart=u=>{GF(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=io(u))},this._options={...n3,...l},this.modalityDetected=this._modality.pipe(fx(1)),this.modalityChanged=this.modalityDetected.pipe(Nn()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,o_),i.addEventListener("mousedown",this._onMousedown,o_),i.addEventListener("touchstart",this._onTouchstart,o_)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,o_),document.removeEventListener("mousedown",this._onMousedown,o_),document.removeEventListener("touchstart",this._onTouchstart,o_))}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Ms),s.LFG(s.R0b),s.LFG(se),s.LFG(t3,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const s3=new s.OlP("cdk-focus-monitor-default-options"),RE=Ju({passive:!0,capture:!0});let o3=(()=>{class n{constructor(t,r,i,l,u){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ct.x,this._rootNodeFocusAndBlurListener=f=>{for(let C=io(f);C;C=C.parentElement)"focus"===f.type?this._onFocus(f,C):this._onBlur(f,C)},this._document=l,this._detectionMode=u?.detectionMode||0}monitor(t,r=!1){const i=Sr(t);if(!this._platform.isBrowser||1!==i.nodeType)return ze(null);const l=$_(i)||this._getDocument(),u=this._elementInfo.get(i);if(u)return r&&(u.checkChildren=!0),u.subject;const f={checkChildren:r,subject:new ct.x,rootNode:l};return this._elementInfo.set(i,f),this._registerGlobalListeners(f),f.subject}stopMonitoring(t){const r=Sr(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const l=Sr(t);l===this._getDocument().activeElement?this._getClosestElementsInfo(l).forEach(([f,_])=>this._originChanged(f,r,_)):(this._setOrigin(r),"function"==typeof l.focus&&l.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),l=io(t);!i||!i.checkChildren&&r!==l||this._originChanged(r,this._getFocusOrigin(l),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,RE),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,RE)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Qe(this._stopInputModalityDetector)).subscribe(l=>{this._setOrigin(l,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,RE),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,RE),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,l)=>{(l===t||i.checkChildren&&l.contains(t))&&r.push([l,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const l=t.labels;if(l)for(let u=0;u<l.length;u++)if(l[u].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(s.R0b),s.LFG(Ms),s.LFG(r3),s.LFG(se,8),s.LFG(s3,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const WF="cdk-high-contrast-black-on-white",YF="cdk-high-contrast-white-on-black",px="cdk-high-contrast-active";let a3=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,s.f3M)(VH).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,l=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),l){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(px,WF,YF),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(px,WF):2===r&&t.add(px,YF)}}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(Ms),s.LFG(se))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),l3=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(a3))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[PH]}),n})();function c3(n,e){}class gx{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let u3=(()=>{class n extends Ba{constructor(t,r,i,l,u,f,_,C){super(),this._elementRef=t,this._focusTrapFactory=r,this._config=l,this._interactivityChecker=u,this._ngZone=f,this._overlayRef=_,this._focusMonitor=C,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=I=>{this._portalOutlet.hasAttached();const A=this._portalOutlet.attachDomPortal(I);return this._contentAttached(),A},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=i}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=Z_(),l=this._elementRef.nativeElement;(!i||i===this._document.body||i===l||l.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=Z_();return t===r||t.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Z_())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.SBq),s.Y36(e3),s.Y36(se,8),s.Y36(gx),s.Y36(HF),s.Y36(s.R0b),s.Y36(X_),s.Y36(o3))},n.\u0275cmp=s.Xpm({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,r){if(1&t&&s.Gf(_b,7),2&t){let i;s.iGM(i=s.CRH())&&(r._portalOutlet=i.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,r){2&t&&s.uIk("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[s.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&s.YNc(0,c3,0,0,"ng-template",0)},dependencies:[_b],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class go{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new ct.x,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!ms(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const KF=new s.OlP("DialogScrollStrategy"),ic=new s.OlP("DialogData"),d3=new s.OlP("DefaultDialogConfig"),f3={provide:KF,deps:[kt],useFactory:function h3(n){return()=>n.scrollStrategies.block()}};let p3=0,sc=(()=>{class n{constructor(t,r,i,l,u,f){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=l,this._overlayContainer=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ct.x,this._afterOpenedAtThisLevel=new ct.x,this._ariaHiddenElements=new Map,this.afterAllClosed=Bh(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(er(void 0))),this._scrollStrategy=f}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,r){(r={...this._defaultOptions||new gx,...r}).id=r.id||"cdk-dialog-"+p3++,r.id&&this.getDialogById(r.id);const l=this._getOverlayConfig(r),u=this._overlay.create(l),f=new go(u,r),_=this._attachContainer(u,f,r);return f.containerInstance=_,this._attachDialogContent(t,f,_,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(f),f.closed.subscribe(()=>this._removeOpenDialog(f,!0)),this.afterOpened.next(f),f}closeAll(){mx(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){mx(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),mx(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new Vh({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const l=i.injector||i.viewContainerRef?.injector,u=[{provide:gx,useValue:i},{provide:go,useValue:r},{provide:X_,useValue:t}];let f;i.container?"function"==typeof i.container?f=i.container:(f=i.container.type,u.push(...i.container.providers(i))):f=u3;const _=new Y_(f,i.viewContainerRef,s.zs3.create({parent:l||this._injector,providers:u}),i.componentFactoryResolver);return t.attach(_).instance}_attachDialogContent(t,r,i,l){if(t instanceof s.Rgc){const u=this._createInjector(l,r,i,void 0);let f={$implicit:l.data,dialogRef:r};l.templateContext&&(f={...f,..."function"==typeof l.templateContext?l.templateContext():l.templateContext}),i.attachTemplatePortal(new Wp(t,null,f,u))}else{const u=this._createInjector(l,r,i,this._injector),f=i.attachComponentPortal(new Y_(t,l.viewContainerRef,u,l.componentFactoryResolver));r.componentInstance=f.instance}}_createInjector(t,r,i,l){const u=t.injector||t.viewContainerRef?.injector,f=[{provide:ic,useValue:t.data},{provide:go,useValue:r}];return t.providers&&("function"==typeof t.providers?f.push(...t.providers(r,t,i)):f.push(...t.providers)),t.direction&&(!u||!u.get(Va,null,s.XFs.Optional))&&f.push({provide:Va,useValue:{value:t.direction,change:ze()}}),s.zs3.create({parent:u||l,providers:f})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((l,u)=>{l?u.setAttribute("aria-hidden",l):u.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const l=r[i];l!==t&&"SCRIPT"!==l.nodeName&&"STYLE"!==l.nodeName&&!l.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(l,l.getAttribute("aria-hidden")),l.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(kt),s.LFG(s.zs3),s.LFG(d3,8),s.LFG(n,12),s.LFG(Uh),s.LFG(KF))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();function mx(n,e){let t=n.length;for(;t--;)e(n[t])}let mw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[sc,f3],imports:[Ab,Yp,l3,Yp]}),n})(),JF=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.Qsj),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n}),n})(),hp=(()=>{class n extends JF{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,features:[s.qOj]}),n})();const oc=new s.OlP("NgValueAccessor"),g3={provide:oc,useExisting:(0,s.Gpc)(()=>_x),multi:!0};let _x=(()=>{class n extends hp{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&s.NdJ("change",function(l){return r.onChange(l.target.checked)})("blur",function(){return r.onTouched()})},features:[s._Bn([g3]),s.qOj]}),n})();const m3={provide:oc,useExisting:(0,s.Gpc)(()=>pi),multi:!0},y3=new s.OlP("CompositionEventMode");let pi=(()=>{class n extends JF{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _3(){const n=R()?R().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.Qsj),s.Y36(s.SBq),s.Y36(y3,8))},n.\u0275dir=s.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&s.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[s._Bn([m3]),s.qOj]}),n})();function qd(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function QF(n){return null!=n&&"number"==typeof n.length}const ji=new s.OlP("NgValidators"),Wd=new s.OlP("NgAsyncValidators"),C3=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class an{static min(e){return function XF(n){return e=>{if(qd(e.value)||qd(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function eL(n){return e=>{if(qd(e.value)||qd(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return tL(e)}static requiredTrue(e){return function nL(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function rL(n){return qd(n.value)||C3.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function iL(n){return e=>qd(e.value)||!QF(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function sL(n){return e=>QF(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function oL(n){if(!n)return PE;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(qd(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return hL(e)}static composeAsync(e){return fL(e)}}function tL(n){return qd(n.value)?{required:!0}:null}function PE(n){return null}function aL(n){return null!=n}function lL(n){return(0,s.QGY)(n)?(0,rn.D)(n):n}function cL(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function uL(n,e){return e.map(t=>t(n))}function dL(n){return n.map(e=>function w3(n){return!n.validate}(e)?e:t=>e.validate(t))}function hL(n){if(!n)return null;const e=n.filter(aL);return 0==e.length?null:function(t){return cL(uL(t,e))}}function yx(n){return null!=n?hL(dL(n)):null}function fL(n){if(!n)return null;const e=n.filter(aL);return 0==e.length?null:function(t){return no(uL(t,e).map(lL)).pipe((0,We.U)(cL))}}function vx(n){return null!=n?fL(dL(n)):null}function pL(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function gL(n){return n._rawValidators}function mL(n){return n._rawAsyncValidators}function Cx(n){return n?Array.isArray(n)?n:[n]:[]}function NE(n,e){return Array.isArray(n)?n.includes(e):n===e}function _L(n,e){const t=Cx(e);return Cx(n).forEach(i=>{NE(t,i)||t.push(i)}),t}function yL(n,e){return Cx(e).filter(t=>!NE(n,t))}class vL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=yx(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class _s extends vL{get formDirective(){return null}get path(){return null}}class Yd extends vL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class CL{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Hi=(()=>{class n extends CL{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(Yd,2))},n.\u0275dir=s.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&s.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[s.qOj]}),n})(),$i=(()=>{class n extends CL{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(_s,10))},n.\u0275dir=s.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&s.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[s.qOj]}),n})();const _w="VALID",LE="INVALID",a_="PENDING",yw="DISABLED";function Ex(n){return(VE(n)?n.validators:n)||null}function bL(n){return Array.isArray(n)?yx(n):n||null}function Ix(n,e){return(VE(e)?e.asyncValidators:n)||null}function DL(n){return Array.isArray(n)?vx(n):n||null}function VE(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function EL(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new s.vHH(1e3,"");if(!r[t])throw new s.vHH(1001,"")}function IL(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new s.vHH(1002,"")})}class UE{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=bL(this._rawValidators),this._composedAsyncValidatorFn=DL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===_w}get invalid(){return this.status===LE}get pending(){return this.status==a_}get disabled(){return this.status===yw}get enabled(){return this.status!==yw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=bL(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=DL(e)}addValidators(e){this.setValidators(_L(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(_L(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(yL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(yL(e,this._rawAsyncValidators))}hasValidator(e){return NE(this._rawValidators,e)}hasAsyncValidator(e){return NE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=a_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yw,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_w,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_w||this.status===a_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yw:_w}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=a_,this._hasOwnPendingAsyncValidator=!0;const t=lL(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new s.vpe,this.statusChanges=new s.vpe}_calculateStatus(){return this._allControlsDisabled()?yw:this.errors?LE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(a_)?a_:this._anyControlsHaveStatus(LE)?LE:_w}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){VE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class vw extends UE{constructor(e,t,r){super(Ex(t),Ix(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){IL(this,0,e),Object.keys(e).forEach(r=>{EL(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,l)=>{r=t(r,i,l)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class SL extends vw{}function BE(n,e){return[...e.path,n]}function Cw(n,e){Sx(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function M3(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&TL(n,e)})}(n,e),function x3(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function k3(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&TL(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function A3(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function jE(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),$E(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function HE(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Sx(n,e){const t=gL(n);null!==e.validator?n.setValidators(pL(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=mL(n);null!==e.asyncValidator?n.setAsyncValidators(pL(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();HE(e._rawValidators,i),HE(e._rawAsyncValidators,i)}function $E(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=gL(n);if(Array.isArray(i)&&i.length>0){const l=i.filter(u=>u!==e.validator);l.length!==i.length&&(t=!0,n.setValidators(l))}}if(null!==e.asyncValidator){const i=mL(n);if(Array.isArray(i)&&i.length>0){const l=i.filter(u=>u!==e.asyncValidator);l.length!==i.length&&(t=!0,n.setAsyncValidators(l))}}}const r=()=>{};return HE(e._rawValidators,r),HE(e._rawAsyncValidators,r),t}function TL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function AL(n,e){Sx(n,e)}function Tx(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function kL(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Ax(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(l=>{l.constructor===pi?t=l:function P3(n){return Object.getPrototypeOf(n.constructor)===hp}(l)?r=l:i=l}),i||r||t||null}const F3={provide:_s,useExisting:(0,s.Gpc)(()=>fu)},ww=(()=>Promise.resolve())();let fu=(()=>{class n extends _s{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new s.vpe,this.form=new vw({},yx(t),vx(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ww.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Cw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ww.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ww.then(()=>{const r=this._findContainer(t.path),i=new vw({});AL(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ww.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ww.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,kL(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(ji,10),s.Y36(Wd,10))},n.\u0275dir=s.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&s.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s._Bn([F3]),s.qOj]}),n})();function xL(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function OL(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const l_=class extends UE{constructor(e=null,t,r){super(Ex(t),Ix(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),VE(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=OL(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){OL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let RL=(()=>{class n extends _s{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return BE(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,features:[s.qOj]}),n})();const U3={provide:Yd,useExisting:(0,s.Gpc)(()=>Kd)},NL=(()=>Promise.resolve())();let Kd=(()=>{class n extends Yd{constructor(t,r,i,l,u){super(),this._changeDetectorRef=u,this.control=new l_,this._registered=!1,this.update=new s.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Ax(0,l)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Tx(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Cw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){NL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,s.D6c)(r);NL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?BE(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(_s,9),s.Y36(ji,10),s.Y36(Wd,10),s.Y36(oc,10),s.Y36(s.sBO,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[s._Bn([U3]),s.qOj,s.TTD]}),n})(),Zi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=s.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),LL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();const Mx=new s.OlP("NgModelWithFormControlWarning"),z3={provide:_s,useExisting:(0,s.Gpc)(()=>aa)};let aa=(()=>{class n extends _s{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new s.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($E(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Cw(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){jE(t.control||null,t,!1),function N3(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,kL(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(jE(r||null,t),(n=>n instanceof l_)(i)&&(Cw(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);AL(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function O3(n,e){return $E(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Sx(this.form,this),this._oldForm&&$E(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(ji,10),s.Y36(Wd,10))},n.\u0275dir=s.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&s.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s._Bn([z3]),s.qOj,s.TTD]}),n})();const G3={provide:_s,useExisting:(0,s.Gpc)(()=>kx)};let kx=(()=>{class n extends RL{constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){jL(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(_s,13),s.Y36(ji,10),s.Y36(Wd,10))},n.\u0275dir=s.lG2({type:n,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[s._Bn([G3]),s.qOj]}),n})();const q3={provide:_s,useExisting:(0,s.Gpc)(()=>ZE)};let ZE=(()=>{class n extends _s{constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return BE(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){jL(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(_s,13),s.Y36(ji,10),s.Y36(Wd,10))},n.\u0275dir=s.lG2({type:n,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[s._Bn([q3]),s.qOj]}),n})();function jL(n){return!(n instanceof kx||n instanceof aa||n instanceof ZE)}const W3={provide:Yd,useExisting:(0,s.Gpc)(()=>sl)};let sl=(()=>{class n extends Yd{constructor(t,r,i,l,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new s.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Ax(0,l)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),Tx(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return BE(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(s.Y36(_s,13),s.Y36(ji,10),s.Y36(Wd,10),s.Y36(oc,10),s.Y36(Mx,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[s._Bn([W3]),s.qOj,s.TTD]}),n})();const Y3={provide:oc,useExisting:(0,s.Gpc)(()=>pu),multi:!0};function HL(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let pu=(()=>{class n extends hp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=HL(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function K3(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&s.NdJ("change",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[s._Bn([Y3]),s.qOj]}),n})(),fp=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(HL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(pu,9))},n.\u0275dir=s.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const J3={provide:oc,useExisting:(0,s.Gpc)(()=>xx),multi:!0};function $L(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let xx=(()=>{class n extends hp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(l=>this._getOptionId(l));r=(l,u)=>{l._setSelected(i.indexOf(u.toString())>-1)}}else r=(i,l)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],l=r.selectedOptions;if(void 0!==l){const u=l;for(let f=0;f<u.length;f++){const C=this._getOptionValue(u[f].value);i.push(C)}}else{const u=r.options;for(let f=0;f<u.length;f++){const _=u[f];if(_.selected){const C=this._getOptionValue(_.value);i.push(C)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Q3(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&s.NdJ("change",function(l){return r.onChange(l.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[s._Bn([J3]),s.qOj]}),n})(),pp=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue($L(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue($L(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(xx,9))},n.\u0275dir=s.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),gp=(()=>{class n{constructor(){this._validator=PE}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):PE,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=s.lG2({type:n,features:[s.TTD]}),n})();const t$={provide:ji,useExisting:(0,s.Gpc)(()=>Jd),multi:!0};let Jd=(()=>{class n extends gp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=s.D6c,this.createValidator=t=>tL}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&s.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[s._Bn([t$]),s.qOj]}),n})(),XL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[LL]}),n})(),mo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[XL]}),n})(),ac=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Mx,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[XL]}),n})();class Ox extends UE{constructor(e,t,r){super(Ex(t),Ix(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){IL(this,0,e),e.forEach((r,i)=>{EL(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function e2(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let gu=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let l={};return e2(r)?l=r:null!==r&&(l.validators=r.validator,l.asyncValidators=r.asyncValidator),new vw(i,l)}record(t,r=null){const i=this._reduceControls(t);return new SL(i,r)}control(t,r,i){let l={};return this.useNonNullable?(e2(r)?l=r:(l.validators=r,l.asyncValidators=i),new l_(t,{...l,nonNullable:!0})):new l_(t,r,i)}array(t,r,i){const l=t.map(u=>this._createControl(u));return new Ox(l,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof l_||t instanceof UE?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:ac}),n})();const a$=["*"];let mu=(()=>{class n{constructor(){this.title=""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-card"]],inputs:{title:"title"},ngContentSelectors:a$,decls:4,vars:1,consts:[[1,"card"]],template:function(t,r){1&t&&(s.F$t(),s.TgZ(0,"h1"),s._uU(1),s.qZA(),s.TgZ(2,"div",0),s.Hsn(3),s.qZA()),2&t&&(s.xp6(1),s.Oqu(r.title))},styles:[".card[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;background-color:var(--bg01);padding:20px;border-radius:24px}"]}),n})(),t2=(()=>{class n{constructor(t){this.dialogRef=t,this.email=""}onSubmitRestPass(){this.dialogRef.close(this.email)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(go))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-forgot-password"]],decls:9,vars:1,consts:[[1,"content"],["title","Forgot Password"],[3,"ngSubmit"],["type","text","placeholder","email","name","email","required","",3,"ngModel","ngModelChange"],["type","submit",1,"btn"]],template:function(t,r){1&t&&(s.TgZ(0,"div",0)(1,"app-card",1)(2,"h4"),s._uU(3,"Forgot password? no problem"),s.qZA(),s._uU(4," After send emial, please check your mailbox ;) "),s.TgZ(5,"form",2),s.NdJ("ngSubmit",function(){return r.onSubmitRestPass()}),s.TgZ(6,"input",3),s.NdJ("ngModelChange",function(l){return r.email=l}),s.qZA(),s.TgZ(7,"button",4),s._uU(8,"Send"),s.qZA()()()()),2&t&&(s.xp6(6),s.Q6J("ngModel",r.email))},dependencies:[Zi,pi,Hi,$i,Jd,Kd,fu,mu],styles:[".content[_ngcontent-%COMP%]{padding:32px;color:var(--text02)}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:1em;margin-top:1em}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}"]}),n})();function l$(n,e){1&n&&(s.TgZ(0,"div",25),s._uU(1," check your email "),s.qZA())}function c$(n,e){1&n&&(s.TgZ(0,"div",25),s._uU(1," check your password "),s.qZA())}function u$(n,e){1&n&&(s.ynx(0),s._uU(1,"Login"),s.BQk())}function d$(n,e){1&n&&s._uU(0,"Loading ...")}function h$(n,e){1&n&&(s.TgZ(0,"div",25),s._uU(1," check your email "),s.qZA())}function f$(n,e){1&n&&(s.TgZ(0,"div",25),s._uU(1," check your password "),s.qZA())}function p$(n,e){1&n&&(s.ynx(0),s._uU(1,"Register"),s.BQk())}function g$(n,e){1&n&&s._uU(0,"Loading ...")}let m$=(()=>{class n{constructor(t,r){this.loginService=t,this.dialog=r,this.isLoggedIn=!1,this.formLogin={email:"",password:""},this.formSingup={email:"",password:""},this.isLoading=!1}ngOnInit(){alert("Login: a@crm.sii | password: admin123")}openDialog(){this.dialog.open(t2).closed.subscribe(r=>{null!=r&&this.loginService.forgotPassword(r)})}onSubmitLogin(){this.isLoading||(this.isLoading=!0,this.loginService.login(this.formLogin.email,this.formLogin.password),this.isLoading=!1)}onSubmitRegister(){this.isLoading||(this.isLoading=!0,this.loginService.register(this.formSingup.email,this.formSingup.password),this.isLoading=!1)}signInWithGoogle(){this.loginService.googleSignIn()}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(Si),s.Y36(sc))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-login"]],decls:39,vars:13,consts:[[1,"container"],["title","login"],[3,"ngSubmit"],["type","text","placeholder","login","name","email","required","",3,"ngModel","ngModelChange"],["email","ngModel"],["class","waring",4,"ngIf"],["type","password","placeholder","has\u0142o","name","password","required","",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"btn"],[4,"ngIf","ngIfElse"],["loading",""],[3,"title"],[1,"buttons"],[1,"btn",3,"click"],[1,"uil","uil-google"],[1,"btn"],[1,"uil","uil-microsoft"],[1,"uil","uil-github"],[1,"link"],[3,"click"],["title","Register"],["type","text","placeholder","login","name","emailSingUp","required","",3,"ngModel","ngModelChange"],["emailSingUp","ngModel"],["type","password","placeholder","has\u0142o","name","passwordSingUp","required","",3,"ngModel","ngModelChange"],["passwordSingUp","ngModel"],[1,"waring"]],template:function(t,r){if(1&t&&(s.TgZ(0,"div",0)(1,"app-card",1)(2,"form",2),s.NdJ("ngSubmit",function(){return r.onSubmitLogin()}),s.TgZ(3,"input",3,4),s.NdJ("ngModelChange",function(l){return r.formLogin.email=l}),s.qZA(),s.YNc(5,l$,2,0,"div",5),s.TgZ(6,"input",6,7),s.NdJ("ngModelChange",function(l){return r.formLogin.password=l}),s.qZA(),s.YNc(8,c$,2,0,"div",5),s.TgZ(9,"button",8),s.YNc(10,u$,2,0,"ng-container",9),s.YNc(11,d$,1,0,"ng-template",null,10,s.W1O),s.qZA()()(),s.TgZ(13,"app-card",11)(14,"div",12)(15,"button",13),s.NdJ("click",function(){return r.signInWithGoogle()}),s._uU(16,"Google "),s._UZ(17,"i",14),s.qZA(),s.TgZ(18,"button",15),s._uU(19,"Microsoft "),s._UZ(20,"i",16),s.qZA(),s.TgZ(21,"button",15),s._uU(22,"Github "),s._UZ(23,"i",17),s.qZA()(),s.TgZ(24,"div",18)(25,"a",19),s.NdJ("click",function(){return r.openDialog()}),s._uU(26,"Forgot Password ?"),s.qZA()()(),s.TgZ(27,"app-card",20)(28,"form",2),s.NdJ("ngSubmit",function(){return r.onSubmitRegister()}),s.TgZ(29,"input",21,22),s.NdJ("ngModelChange",function(l){return r.formSingup.email=l}),s.qZA(),s.YNc(31,h$,2,0,"div",5),s.TgZ(32,"input",23,24),s.NdJ("ngModelChange",function(l){return r.formSingup.password=l}),s.qZA(),s.YNc(34,f$,2,0,"div",5),s.TgZ(35,"button",8),s.YNc(36,p$,2,0,"ng-container",9),s.YNc(37,g$,1,0,"ng-template",null,10,s.W1O),s.qZA()()()()),2&t){const i=s.MAs(4),l=s.MAs(7),u=s.MAs(12),f=s.MAs(30),_=s.MAs(33);s.xp6(3),s.Q6J("ngModel",r.formLogin.email),s.xp6(2),s.Q6J("ngIf",(null==i||null==i.errors?null:i.errors.required)&&(null==i?null:i.touched)),s.xp6(1),s.Q6J("ngModel",r.formLogin.password),s.xp6(2),s.Q6J("ngIf",(null==l.errors?null:l.errors.required)&&(null==l?null:l.touched)),s.xp6(2),s.Q6J("ngIf",!r.isLoading)("ngIfElse",u),s.xp6(3),s.Q6J("title","Zaloguj za pomoc\u0105"),s.xp6(16),s.Q6J("ngModel",r.formSingup.email),s.xp6(2),s.Q6J("ngIf",(null==f||null==f.errors?null:f.errors.required)&&(null==f?null:f.touched)),s.xp6(1),s.Q6J("ngModel",r.formSingup.password),s.xp6(2),s.Q6J("ngIf",(null==_.errors?null:_.errors.required)&&(null==_?null:_.touched)),s.xp6(2),s.Q6J("ngIf",!r.isLoading)("ngIfElse",u)}},dependencies:[mu,Zi,pi,Hi,$i,Jd,Kd,fu,Zt],styles:["[_nghost-%COMP%]{height:100vh;align-items:center;display:flex;justify-content:center}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{background-color:var(--bg01);display:flex;justify-content:space-between;min-width:50%;max-width:max-content;margin-left:auto;margin-right:auto}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%], [_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1em}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-top:1em}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:1em}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background-color:var(--bg01)}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:auto}"]}),n})(),n2=(()=>{class n{constructor(t){this.httpClient=t}getData(){return this.httpClient.get("assets/navbaritems.json")}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(iv))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Rx(n){return n&&"function"==typeof n.connect&&!(n instanceof ny)}class _${applyChanges(e,t,r,i,l){e.forEachOperation((u,f,_)=>{let C,I;if(null==u.previousIndex){const A=r(u,f,_);C=t.createEmbeddedView(A.templateRef,A.context,A.index),I=1}else null==_?(t.remove(f),I=3):(C=t.get(f),t.move(C,_),I=2);l&&l({context:C?.context,operation:I,record:u})})}detach(){}}let Px=(()=>{class n{constructor(){this._listeners=[]}notify(t,r){for(let i of this._listeners)i(t,r)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(r=>t!==r)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Nx=new s.OlP("_ViewRepeater");let zE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkMenuGroup",""]],hostAttrs:["role","group",1,"cdk-menu-group"],exportAs:["cdkMenuGroup"],features:[s._Bn([{provide:Px,useClass:Px}])]}),n})();const GE=new s.OlP("cdk-menu"),lc=new s.OlP("cdk-menu-stack"),w$={provide:lc,deps:[[new s.FiY,new s.tp0,new s.tBr(lc)]],useFactory:n=>n||new qE},b$=n=>({provide:lc,deps:[[new s.FiY,new s.tp0,new s.tBr(lc)]],useFactory:e=>e||qE.inline(n)});let D$=0,qE=(()=>{class n{constructor(){this.id=""+D$++,this._elements=[],this._close=new ct.x,this._empty=new ct.x,this._hasFocus=new ct.x,this.closed=this._close,this.hasFocus=this._hasFocus.pipe(er(!1),hx(0),Nn()),this.emptied=this._empty,this._inlineMenuOrientation=null}static inline(t){const r=new n;return r._inlineMenuOrientation=t,r}push(t){this._elements.push(t)}close(t,r){const{focusNextOnEmpty:i,focusParentTrigger:l}={...r};if(this._elements.indexOf(t)>=0){let u;do{u=this._elements.pop(),this._close.next({item:u,focusParentTrigger:l})}while(u!==t);this.isEmpty()&&this._empty.next(i)}}closeSubMenuOf(t){let r=!1;if(this._elements.indexOf(t)>=0)for(r=this.peek()!==t;this.peek()!==t;)this._close.next({item:this._elements.pop()});return r}closeAll(t){const{focusNextOnEmpty:r,focusParentTrigger:i}={...t};if(!this.isEmpty()){for(;!this.isEmpty();){const l=this._elements.pop();l&&this._close.next({item:l,focusParentTrigger:i})}this._empty.next(r)}}isEmpty(){return!this._elements.length}length(){return this._elements.length}peek(){return this._elements[this._elements.length-1]}hasInlineMenu(){return null!=this._inlineMenuOrientation}inlineMenuOrientation(){return this._inlineMenuOrientation}setHasFocus(t){this._hasFocus.next(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const WE=new s.OlP("cdk-menu-trigger");let r2=(()=>{class n{constructor(){this.injector=(0,s.f3M)(s.zs3),this.viewContainerRef=(0,s.f3M)(s.s_b),this.menuStack=(0,s.f3M)(lc),this.opened=new s.vpe,this.closed=new s.vpe,this.overlayRef=null,this.destroyed=new ct.x,this.stopOutsideClicksListener=(0,ja.T)(this.closed,this.destroyed)}ngOnDestroy(){this._destroyOverlay(),this.destroyed.next(),this.destroyed.complete()}isOpen(){return!!this.overlayRef?.hasAttached()}registerChildMenu(t){this.childMenu=t}getMenuContentPortal(){return this.menuTemplateRef&&(!this._menuPortal||this.menuTemplateRef!==this._menuPortal?.templateRef)&&(this._menuPortal=new Wp(this.menuTemplateRef,this.viewContainerRef,void 0,this._getChildMenuInjector())),this._menuPortal}isElementInsideMenuStack(t){for(let r=t;r;r=r?.parentElement??null)if(r.getAttribute("data-cdk-menu-stack-id")===this.menuStack.id)return!0;return!1}_destroyOverlay(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null)}_getChildMenuInjector(){return this._childMenuInjector=this._childMenuInjector||s.zs3.create({providers:[{provide:WE,useValue:this},{provide:lc,useValue:this.menuStack}],parent:this.injector}),this._childMenuInjector}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=s.lG2({type:n,hostVars:2,hostBindings:function(t,r){2&t&&s.uIk("aria-controls",null==r.childMenu?null:r.childMenu.id)("data-cdk-menu-stack-id",r.menuStack.id)}}),n})();const YE=new s.OlP("cdk-menu-aim");let Fx=(()=>{class n extends r2{constructor(){super(),this._elementRef=(0,s.f3M)(s.SBq),this._overlay=(0,s.f3M)(kt),this._ngZone=(0,s.f3M)(s.R0b),this._parentMenu=(0,s.f3M)(GE,s.XFs.Optional),this._menuAim=(0,s.f3M)(YE,s.XFs.Optional),this._directionality=(0,s.f3M)(Va,s.XFs.Optional),this._setRole(),this._registerCloseHandler(),this._subscribeToMenuStackClosed(),this._subscribeToMouseEnter(),this._subscribeToMenuStackHasFocus(),this._setType()}toggle(){this.isOpen()?this.close():this.open()}open(){this.isOpen()||(this.opened.next(),this.overlayRef=this.overlayRef||this._overlay.create(this._getOverlayConfig()),this.overlayRef.attach(this.getMenuContentPortal()),this._subscribeToOutsideClicks())}close(){this.isOpen()&&(this.closed.next(),this.overlayRef.detach()),this._closeSiblingTriggers()}getMenu(){return this.childMenu}_toggleOnKeydown(t){const r="vertical"===this._parentMenu?.orientation,i=t.keyCode;switch(i){case 32:case 13:ms(t)||(this.toggle(),this.childMenu?.focusFirstItem("keyboard"));break;case 39:ms(t)||this._parentMenu&&r&&"rtl"!==this._directionality?.value&&(t.preventDefault(),this.open(),this.childMenu?.focusFirstItem("keyboard"));break;case 37:ms(t)||this._parentMenu&&r&&"rtl"===this._directionality?.value&&(t.preventDefault(),this.open(),this.childMenu?.focusFirstItem("keyboard"));break;case 40:case 38:ms(t)||r||(t.preventDefault(),this.open(),40===i?this.childMenu?.focusFirstItem("keyboard"):this.childMenu?.focusLastItem("keyboard"))}}_setHasFocus(t){this._parentMenu||this.menuStack.setHasFocus(t)}_subscribeToMouseEnter(){const t=()=>this._ngZone.run(()=>{this._closeSiblingTriggers(),this.open()});this._ngZone.runOutsideAngular(()=>{Ko(this._elementRef.nativeElement,"mouseenter").pipe(S(()=>!this.menuStack.isEmpty()&&!this.isOpen()),Qe(this.destroyed)).subscribe(()=>{this._menuAim?this._menuAim.toggle(t):t()})})}_closeSiblingTriggers(){this._parentMenu?!this.menuStack.closeSubMenuOf(this._parentMenu)&&this.menuStack.peek()!==this._parentMenu&&this.menuStack.closeAll():this.menuStack.closeAll()}_getOverlayConfig(){return new Vh({positionStrategy:this._getOverlayPositionStrategy(),scrollStrategy:this._overlay.scrollStrategies.reposition(),direction:this._directionality||void 0})}_getOverlayPositionStrategy(){return this._overlay.position().flexibleConnectedTo(this._elementRef).withLockedPosition().withGrowAfterOpen().withPositions(this._getOverlayPositions())}_getOverlayPositions(){return this.menuPosition??(this._parentMenu&&"horizontal"!==this._parentMenu.orientation?WI:Ib)}_registerCloseHandler(){this._parentMenu||this.menuStack.closed.pipe(Qe(this.destroyed)).subscribe(({item:t})=>{t===this.childMenu&&this.close()})}_subscribeToOutsideClicks(){this.overlayRef&&this.overlayRef.outsidePointerEvents().pipe(S(t=>t.target!=this._elementRef.nativeElement&&!this._elementRef.nativeElement.contains(t.target)),Qe(this.stopOutsideClicksListener)).subscribe(t=>{this.isElementInsideMenuStack(t.target)?this._closeSiblingTriggers():this.menuStack.closeAll()})}_subscribeToMenuStackHasFocus(){this._parentMenu||this.menuStack.hasFocus.pipe(Qe(this.destroyed)).subscribe(t=>{t||this.menuStack.closeAll()})}_subscribeToMenuStackClosed(){this._parentMenu||this.menuStack.closed.subscribe(({focusParentTrigger:t})=>{t&&!this.menuStack.length()&&this._elementRef.nativeElement.focus()})}_setRole(){this._parentMenu||this._elementRef.nativeElement.setAttribute("role","button")}_setType(){const t=this._elementRef.nativeElement;"BUTTON"===t.nodeName&&!t.getAttribute("type")&&t.setAttribute("type","button")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkMenuTriggerFor",""]],hostAttrs:["aria-haspopup","menu",1,"cdk-menu-trigger"],hostVars:1,hostBindings:function(t,r){1&t&&s.NdJ("focusin",function(){return r._setHasFocus(!0)})("focusout",function(){return r._setHasFocus(!1)})("keydown",function(l){return r._toggleOnKeydown(l)})("click",function(){return r.toggle()}),2&t&&s.uIk("aria-expanded",r.isOpen())},inputs:{menuTemplateRef:["cdkMenuTriggerFor","menuTemplateRef"],menuPosition:["cdkMenuPosition","menuPosition"]},outputs:{opened:"cdkMenuOpened",closed:"cdkMenuClosed"},exportAs:["cdkMenuTriggerFor"],features:[s._Bn([{provide:WE,useExisting:n},w$]),s.qOj]}),n})(),c_=(()=>{class n{constructor(){this._dir=(0,s.f3M)(Va,s.XFs.Optional),this._elementRef=(0,s.f3M)(s.SBq),this._ngZone=(0,s.f3M)(s.R0b),this._menuAim=(0,s.f3M)(YE,s.XFs.Optional),this._menuStack=(0,s.f3M)(lc),this._parentMenu=(0,s.f3M)(GE,s.XFs.Optional),this._menuTrigger=(0,s.f3M)(Fx,s.XFs.Optional|s.XFs.Self),this._disabled=!1,this.triggered=new s.vpe,this.hasMenu=!!this._menuTrigger,this._tabindex=-1,this.closeOnSpacebarTrigger=!0,this.destroyed=new ct.x,this._setupMouseEnter(),this._setType(),this._isStandaloneItem()&&(this._tabindex=0)}get disabled(){return this._disabled}set disabled(t){this._disabled=as(t)}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}trigger(t){const{keepOpen:r}={...t};!this.disabled&&!this.hasMenu&&(this.triggered.next(),r||this._menuStack.closeAll({focusParentTrigger:!0}))}isMenuOpen(){return!!this._menuTrigger?.isOpen()}getMenu(){return this._menuTrigger?.getMenu()}getMenuTrigger(){return this._menuTrigger}getLabel(){return this.typeaheadLabel||this._elementRef.nativeElement.textContent?.trim()||""}_resetTabIndex(){this._isStandaloneItem()||(this._tabindex=-1)}_setTabIndex(t){this.disabled||(!t||!this._menuStack.isEmpty())&&(this._tabindex=0)}_onKeydown(t){switch(t.keyCode){case 32:case 13:ms(t)||this.trigger({keepOpen:32===t.keyCode&&!this.closeOnSpacebarTrigger});break;case 39:ms(t)||this._parentMenu&&this._isParentVertical()&&("rtl"!==this._dir?.value?this._forwardArrowPressed(t):this._backArrowPressed(t));break;case 37:ms(t)||this._parentMenu&&this._isParentVertical()&&("rtl"!==this._dir?.value?this._backArrowPressed(t):this._forwardArrowPressed(t))}}_isStandaloneItem(){return!this._parentMenu}_backArrowPressed(t){const r=this._parentMenu;(this._menuStack.hasInlineMenu()||this._menuStack.length()>1)&&(t.preventDefault(),this._menuStack.close(r,{focusNextOnEmpty:"horizontal"===this._menuStack.inlineMenuOrientation()?1:2,focusParentTrigger:!0}))}_forwardArrowPressed(t){!this.hasMenu&&"horizontal"===this._menuStack.inlineMenuOrientation()&&(t.preventDefault(),this._menuStack.closeAll({focusNextOnEmpty:0,focusParentTrigger:!0}))}_setupMouseEnter(){if(!this._isStandaloneItem()){const t=()=>this._ngZone.run(()=>this._menuStack.closeSubMenuOf(this._parentMenu));this._ngZone.runOutsideAngular(()=>Ko(this._elementRef.nativeElement,"mouseenter").pipe(S(()=>!this._menuStack.isEmpty()&&!this.hasMenu),Qe(this.destroyed)).subscribe(()=>{this._menuAim?this._menuAim.toggle(t):t()}))}}_isParentVertical(){return"vertical"===this._parentMenu?.orientation}_setType(){const t=this._elementRef.nativeElement;"BUTTON"===t.nodeName&&!t.getAttribute("type")&&t.setAttribute("type","button")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkMenuItem",""]],hostAttrs:["role","menuitem",1,"cdk-menu-item"],hostVars:2,hostBindings:function(t,r){1&t&&s.NdJ("blur",function(){return r._resetTabIndex()})("focus",function(){return r._setTabIndex()})("click",function(){return r.trigger()})("keydown",function(l){return r._onKeydown(l)}),2&t&&(s.Ikx("tabindex",r._tabindex),s.uIk("aria-disabled",r.disabled||null))},inputs:{disabled:["cdkMenuItemDisabled","disabled"],typeaheadLabel:["cdkMenuitemTypeaheadLabel","typeaheadLabel"]},outputs:{triggered:"cdkMenuItemTriggered"},exportAs:["cdkMenuItem"]}),n})();class x${constructor(e){this._items=e,this.entered=this._getItemPointerEntries(),this.exited=this._getItemPointerExits(),this._destroyed=new ct.x,this.entered.subscribe(t=>this.activeElement=t),this.exited.subscribe(()=>{this.previousElement=this.activeElement,this.activeElement=void 0})}destroy(){this._destroyed.next(),this._destroyed.complete()}_getItemPointerEntries(){return Bh(()=>this._items.changes.pipe(er(this._items),(0,_e.z)(e=>e.map(t=>Ko(t._elementRef.nativeElement,"mouseenter").pipe(Zc(t),Qe(this._items.changes)))),(0,cr.J)()))}_getItemPointerExits(){return Bh(()=>this._items.changes.pipe(er(this._items),(0,_e.z)(e=>e.map(t=>Ko(t._elementRef.nativeElement,"mouseout").pipe(Zc(t),Qe(this._items.changes)))),(0,cr.J)()))}}let O$=0,o2=(()=>{class n extends zE{constructor(){super(...arguments),this.nativeElement=(0,s.f3M)(s.SBq).nativeElement,this.ngZone=(0,s.f3M)(s.R0b),this.menuStack=(0,s.f3M)(lc),this.menuAim=(0,s.f3M)(YE,s.XFs.Optional|s.XFs.Self),this.dir=(0,s.f3M)(Va,s.XFs.Optional),this.id="cdk-menu-"+O$++,this.orientation="vertical",this.isInline=!1,this.destroyed=new ct.x,this._menuStackHasFocus=!1}ngAfterContentInit(){this.isInline||this.menuStack.push(this),this._setKeyManager(),this._subscribeToMenuStackHasFocus(),this._subscribeToMenuOpen(),this._subscribeToMenuStackClosed(),this._setUpPointerTracker()}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete(),this.pointerTracker?.destroy()}focusFirstItem(t="program"){this.keyManager.setFocusOrigin(t),this.keyManager.setFirstItemActive()}focusLastItem(t="program"){this.keyManager.setFocusOrigin(t),this.keyManager.setLastItemActive()}_getTabIndex(){return this.isInline?this._menuStackHasFocus?-1:0:null}closeOpenMenu(t,r){const{focusParentTrigger:i}={...r},l=this.keyManager,u=this.triggerItem;t===u?.getMenuTrigger()?.getMenu()&&(u?.getMenuTrigger()?.close(),i&&(u?l.setActiveItem(u):l.setFirstItemActive()))}_setKeyManager(){this.keyManager=new HH(this.items).withWrap().withTypeAhead().withHomeAndEnd(),"horizontal"===this.orientation?this.keyManager.withHorizontalOrientation(this.dir?.value||"ltr"):this.keyManager.withVerticalOrientation()}_subscribeToMenuOpen(){const t=(0,ja.T)(this.items.changes,this.destroyed);this.items.changes.pipe(er(this.items),(0,_e.z)(r=>r.filter(i=>i.hasMenu).map(i=>i.getMenuTrigger().opened.pipe(Zc(i),Qe(t)))),(0,cr.J)(),mr(r=>(this.triggerItem=r,r.getMenuTrigger().closed)),Qe(this.destroyed)).subscribe(()=>this.triggerItem=void 0)}_subscribeToMenuStackClosed(){this.menuStack.closed.pipe(Qe(this.destroyed)).subscribe(({item:t,focusParentTrigger:r})=>this.closeOpenMenu(t,{focusParentTrigger:r}))}_subscribeToMenuStackHasFocus(){this.isInline&&this.menuStack.hasFocus.pipe(Qe(this.destroyed)).subscribe(t=>{this._menuStackHasFocus=t})}_setUpPointerTracker(){this.menuAim&&(this.ngZone.runOutsideAngular(()=>{this.pointerTracker=new x$(this.items)}),this.menuAim.initialize(this,this.pointerTracker))}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,contentQueries:function(t,r,i){if(1&t&&s.Suo(i,c_,5),2&t){let l;s.iGM(l=s.CRH())&&(r.items=l)}},hostAttrs:["role","menu"],hostVars:4,hostBindings:function(t,r){1&t&&s.NdJ("focus",function(){return r.focusFirstItem()})("focusin",function(){return r.menuStack.setHasFocus(!0)})("focusout",function(){return r.menuStack.setHasFocus(!1)}),2&t&&(s.Ikx("tabindex",r._getTabIndex())("id",r.id),s.uIk("aria-orientation",r.orientation)("data-cdk-menu-stack-id",r.menuStack.id))},inputs:{id:"id"},features:[s.qOj]}),n})(),Lx=(()=>{class n extends o2{constructor(){super(),this._parentTrigger=(0,s.f3M)(WE,s.XFs.Optional),this.closed=new s.vpe,this.orientation="vertical",this.isInline=!this._parentTrigger,this.destroyed.subscribe(this.closed),this._parentTrigger?.registerChildMenu(this)}ngAfterContentInit(){super.ngAfterContentInit(),this._subscribeToMenuStackEmptied()}ngOnDestroy(){super.ngOnDestroy(),this.closed.complete()}_handleKeyEvent(t){const r=this.keyManager;switch(t.keyCode){case 37:case 39:ms(t)||(t.preventDefault(),r.setFocusOrigin("keyboard"),r.onKeydown(t));break;case 27:ms(t)||(t.preventDefault(),this.menuStack.close(this,{focusNextOnEmpty:2,focusParentTrigger:!0}));break;case 9:ms(t,"altKey","metaKey","ctrlKey")||this.menuStack.closeAll({focusParentTrigger:!0});break;default:r.onKeydown(t)}}_toggleMenuFocus(t){const r=this.keyManager;switch(t){case 0:r.setFocusOrigin("keyboard"),r.setNextItemActive();break;case 1:r.setFocusOrigin("keyboard"),r.setPreviousItemActive();break;case 2:r.activeItem&&(r.setFocusOrigin("keyboard"),r.setActiveItem(r.activeItem))}}_subscribeToMenuStackEmptied(){this.menuStack.emptied.pipe(Qe(this.destroyed)).subscribe(t=>this._toggleMenuFocus(t))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkMenu",""]],hostAttrs:["role","menu",1,"cdk-menu"],hostVars:2,hostBindings:function(t,r){1&t&&s.NdJ("keydown",function(l){return r._handleKeyEvent(l)}),2&t&&s.ekj("cdk-menu-inline",r.isInline)},outputs:{closed:"closed"},exportAs:["cdkMenu"],features:[s._Bn([{provide:zE,useExisting:n},{provide:GE,useExisting:n},b$("vertical")]),s.qOj]}),n})(),a2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Ab]}),n})();function B$(n,e){if(1&n&&(s.TgZ(0,"button",5),s._UZ(1,"i",6),s.qZA()),2&n){const t=e.$implicit;s.Q6J("routerLink","../"+t.routeLink),s.xp6(1),s.Tol(t.icon)}}let j$=(()=>{class n{constructor(){this.navData=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-sidebar"]],inputs:{navData:"navData"},decls:6,vars:1,consts:[[1,"SideNav"],["cdkMenu","",1,"SideNavTopItems"],[1,"logo"],[1,"LogoText"],["class","SideNavItem",3,"routerLink",4,"ngFor","ngForOf"],[1,"SideNavItem",3,"routerLink"],[1,"icon"]],template:function(t,r){1&t&&(s.TgZ(0,"div",0)(1,"div",1)(2,"button",2)(3,"span",3),s._uU(4,"CRM "),s.qZA()()(),s.YNc(5,B$,2,3,"button",4),s.qZA()),2&t&&(s.xp6(5),s.Q6J("ngForOf",r.navData))},dependencies:[Lx,Er,pd],styles:[".SideNav[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;align-items:stretch;align-content:flex-start;width:7rem;padding:35px 0;height:100vh;transition:all .4s ease}.SideNav[_ngcontent-%COMP%]   .SideNavItem[_ngcontent-%COMP%]{text-align:center;background-color:transparent;cursor:pointer;color:var(--text02);font-size:1.6em;border:none;border-radius:24px;margin:0 auto;width:-moz-fit-content;width:fit-content;-webkit-user-select:none;user-select:none;line-height:36px;padding:16px 24px;transition:all .4s ease}.SideNav[_ngcontent-%COMP%]   .SideNavItem[_ngcontent-%COMP%]:hover{background-color:var(--bg02)}.SideNav[_ngcontent-%COMP%]   .SideNavItem[_ngcontent-%COMP%]:active{background-color:#aaa}.SideNav[_ngcontent-%COMP%]   .SideNavTopItems[_ngcontent-%COMP%]{text-align:center}.SideNav[_ngcontent-%COMP%]   .SideNavTopItems[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{background-color:transparent;border:none;margin:10px 0;color:var(--text02)}.SideNav[_ngcontent-%COMP%]   .SideNavTopItems[_ngcontent-%COMP%]   .LogoText[_ngcontent-%COMP%]{font-weight:700;font-size:1.4em;color:var(--green)}.SideNav[_ngcontent-%COMP%]   .SideNavTopItems[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]:hover{color:var(--hoverColor)}"]}),n})();function H$(n,e){if(1&n){const t=s.EpF();s.ynx(0),s.TgZ(1,"div",5),s._UZ(2,"img",6),s.qZA(),s.TgZ(3,"div",7)(4,"p"),s._uU(5,"User ID: "),s.TgZ(6,"strong"),s._uU(7),s.qZA()(),s.TgZ(8,"p"),s._uU(9,"Email: "),s.TgZ(10,"strong"),s._uU(11),s.qZA()(),s.TgZ(12,"p"),s._uU(13,"Email Verified: "),s.TgZ(14,"strong"),s._uU(15),s.qZA()(),s.TgZ(16,"p"),s._uU(17,"Phone Number: "),s.TgZ(18,"strong"),s._uU(19),s.qZA()(),s.TgZ(20,"button",8),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.onEdit())}),s._uU(21,"Edit data"),s.qZA()(),s.BQk()}if(2&n){const t=s.oxw();s.xp6(2),s.Q6J("src",t.user.photoURL,s.LSH),s.xp6(5),s.Oqu(t.user.uid),s.xp6(4),s.Oqu(t.user.email),s.xp6(4),s.Oqu(t.user.emailVerified),s.xp6(4),s.Oqu(t.user.phoneNumber)}}function $$(n,e){1&n&&(s.TgZ(0,"div",17)(1,"span",18),s._uU(2,"Please check yours task Phone Number field"),s.qZA()())}function Z$(n,e){1&n&&(s.TgZ(0,"div",17)(1,"span",18),s._uU(2,"Please check yours task Phone Number field"),s.qZA()())}function z$(n,e){1&n&&(s.TgZ(0,"div",17)(1,"span",18),s._uU(2,"Please check yours task Phone Number field"),s.qZA()())}function G$(n,e){1&n&&(s.TgZ(0,"div",17)(1,"span",18),s._uU(2,"Please check yours task Phone Number field"),s.qZA()())}function q$(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",5),s._UZ(1,"img",6),s.qZA(),s.TgZ(2,"div",7)(3,"form",9),s.NdJ("ngSubmit",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.onSaveShanges())}),s.TgZ(4,"input",10),s.NdJ("ngModelChange",function(i){s.CHM(t);const l=s.oxw();return s.KtG(l.userForm.displayName=i)}),s.qZA(),s.TgZ(5,"input",11),s.NdJ("ngModelChange",function(i){s.CHM(t);const l=s.oxw();return s.KtG(l.userForm.email=i)}),s.qZA(),s.TgZ(6,"input",12),s.NdJ("ngModelChange",function(i){s.CHM(t);const l=s.oxw();return s.KtG(l.userForm.phoneNumber=i)}),s.qZA(),s.TgZ(7,"input",13),s.NdJ("ngModelChange",function(i){s.CHM(t);const l=s.oxw();return s.KtG(l.userForm.photoURL=i)}),s.qZA(),s.TgZ(8,"div",14)(9,"button",15),s._uU(10,"Save changes"),s.qZA(),s.TgZ(11,"button",8),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.onEdit())}),s._uU(12,"Back without changes"),s.qZA()()(),s.YNc(13,$$,3,0,"div",16),s.YNc(14,Z$,3,0,"div",16),s.YNc(15,z$,3,0,"div",16),s.YNc(16,G$,3,0,"div",16),s.qZA()}if(2&n){const t=s.oxw();s.xp6(1),s.Q6J("src",t.user.photoURL,s.LSH),s.xp6(2),s.Q6J("formGroup",t.userEditForm),s.xp6(1),s.Q6J("ngModel",t.userForm.displayName),s.xp6(1),s.Q6J("ngModel",t.userForm.email),s.xp6(1),s.Q6J("ngModel",t.userForm.phoneNumber),s.xp6(1),s.Q6J("ngModel",t.userForm.photoURL),s.xp6(2),s.Q6J("disabled",!t.userEditForm.valid),s.xp6(4),s.Q6J("ngIf",(null==t.phoneNumber||null==t.phoneNumber.errors?null:t.phoneNumber.errors.required)&&(null==t.phoneNumber?null:t.phoneNumber.touched)),s.xp6(1),s.Q6J("ngIf",(null==t.displayName||null==t.displayName.errors?null:t.displayName.errors.required)&&(null==t.displayName?null:t.displayName.touched)),s.xp6(1),s.Q6J("ngIf",(null==t.emailAddress||null==t.emailAddress.errors?null:t.emailAddress.errors.required)&&(null==t.emailAddress?null:t.emailAddress.touched)),s.xp6(1),s.Q6J("ngIf",(null==t.photoURL||null==t.photoURL.errors?null:t.photoURL.errors.required)&&(null==t.photoURL?null:t.photoURL.touched))}}let W$=(()=>{class n{constructor(t,r){this.fb=t,this.data=r,this.userEdit=!1,this.userName="",this.onAdd=new s.vpe,this._user={...this.data.user},this.userForm={...this.data.user},this.userName=this.user.displayName}get user(){return this._user}ngOnInit(){this.userEditForm=this.fb.group({displayName:["",[an.required]],phoneNumber:["",[an.required]],emailAddress:["",[an.required]],photoURL:["",[an.required]]})}get displayName(){return this.userEditForm.get("displayName")}get phoneNumber(){return this.userEditForm.get("phoneNumber")}get emailAddress(){return this.userEditForm.get("emailAddress")}get photoURL(){return this.userEditForm.get("photoURL")}onEdit(){this.userEdit=!this.userEdit}onSaveShanges(){this.userEdit=!this.userEdit,this.onAdd.emit(this.userEditForm.value)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(gu),s.Y36(ic))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-user-dashboard"]],decls:6,vars:3,consts:[[1,"user-dashboard"],[3,"title"],[1,"content"],[4,"ngIf","ngIfElse"],["userEditMode",""],[1,"content-photo"],["onError","this.src='../../assets/avatar.png'","alt","",3,"src"],[1,"content-details"],[1,"btn",3,"click"],[3,"formGroup","ngSubmit"],["type","text","formControlName","displayName","name","displayName","placeholder","displayName","required","",3,"ngModel","ngModelChange"],["type","text","formControlName","emailAddress","name","email","placeholder","Email","required","",3,"ngModel","ngModelChange"],["type","text","formControlName","phoneNumber","name","phoneNumber","placeholder","phoneNumber","required","",3,"ngModel","ngModelChange"],["type","text","title","plase use only photo with ratio 1:1","formControlName","photoURL","name","photoURL","placeholder","photoURL","required","",3,"ngModel","ngModelChange"],[1,"content-details-buttons"],["type","submit",1,"btn",3,"disabled"],["class","invalidfFeedback",4,"ngIf"],[1,"invalidfFeedback"],[1,"waring"]],template:function(t,r){if(1&t&&(s.TgZ(0,"div",0)(1,"app-card",1)(2,"div",2),s.YNc(3,H$,22,5,"ng-container",3),s.YNc(4,q$,17,11,"ng-template",null,4,s.W1O),s.qZA()()()),2&t){const i=s.MAs(5);s.xp6(1),s.Q6J("title",r.userName),s.xp6(2),s.Q6J("ngIf",!r.userEdit)("ngIfElse",i)}},dependencies:[mu,Zt,Zi,pi,Hi,$i,Jd,aa,sl],styles:[".user-dashboard[_ngcontent-%COMP%]{width:100%;border-radius:24px;padding:3em;color:var(--text02);transition:all .4s ease}.user-dashboard[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;column-gap:2em;min-height:20vh;min-width:40vh}.user-dashboard[_ngcontent-%COMP%]   .content-photo[_ngcontent-%COMP%]{height:128px;border-radius:48%;background-color:var(--bg02)}.user-dashboard[_ngcontent-%COMP%]   .content-photo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:48%;aspect-ratio:1/1}.user-dashboard[_ngcontent-%COMP%]   .content-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em}.user-dashboard[_ngcontent-%COMP%]   .content-details[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1em}.user-dashboard[_ngcontent-%COMP%]   .content-details[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.user-dashboard[_ngcontent-%COMP%]   .content-details-buttons[_ngcontent-%COMP%]{display:flex;gap:1em}"]}),n})();function Y$(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",4)(1,"button",5),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.openProfile())}),s._uU(2,"Profile"),s.qZA(),s.TgZ(3,"button",5),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.logout())}),s._uU(4,"Sign out"),s.qZA()()}}let K$=(()=>{class n{constructor(t,r){this.loginService=t,this.dialog=r}ngOnInit(){this.loginService.getUser().subscribe(t=>this.user=t._delegate)}logout(){this.loginService.logout()}openProfile(){this.dialog.open(W$,{data:{user:this.user}}).componentInstance?.onAdd.subscribe(i=>{this.loginService.setDetails(i)})}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(Si),s.Y36(sc))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-header-info"]],decls:5,vars:1,consts:[["cdkMenuItem","",1,"toggle-button",3,"cdkMenuTriggerFor"],[1,"uil","uil-user"],[1,"headerInfo"],["menu",""],["cdkMenu","",1,"menu-dropdown"],["cdkMenuItem","",1,"menu-dropdown-item",3,"click"]],template:function(t,r){if(1&t&&(s.TgZ(0,"button",0),s._UZ(1,"i",1),s.qZA(),s.TgZ(2,"div",2),s.YNc(3,Y$,5,0,"ng-template",null,3,s.W1O),s.qZA()),2&t){const i=s.MAs(4);s.Q6J("cdkMenuTriggerFor",i)}},dependencies:[Lx,c_,Fx],styles:[".toggle-button[_ngcontent-%COMP%]{color:var(--text02);font-size:2em;margin-right:2em;border-radius:24px;padding:6px 8px;border:1px solid;transition:.4s all ease-in-out}.toggle-button[_ngcontent-%COMP%]:hover, .toggle-button[aria-expanded=true][_ngcontent-%COMP%]{background-color:var(--grey-transparent)}.menu-dropdown[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;min-width:120px;max-width:180px;margin-top:.5em;padding:8px;background-color:var(--grey-transparent);border-radius:24px;gap:.4em;overflow:hidden}.menu-dropdown-item[_ngcontent-%COMP%]{color:var(--text02);cursor:pointer;border-radius:24px;-webkit-user-select:none;user-select:none;min-width:64px;line-height:24px;padding:0 16px;display:flex;align-items:center;justify-content:center;flex-direction:row;flex:1}.menu-dropdown-item[_ngcontent-%COMP%]:hover{background-color:var(--grey-transparent)}"]}),n})(),J$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-header"]],decls:2,vars:0,consts:[[1,"header-container"]],template:function(t,r){1&t&&(s.TgZ(0,"div",0),s._UZ(1,"app-header-info"),s.qZA())},dependencies:[K$]}),n})(),Q$=(()=>{class n{constructor(t){this.bodyService=t,this.navbarData=[]}ngOnInit(){this.bodyService.getData().subscribe(t=>this.navbarData=t)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(n2))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-body"]],decls:5,vars:1,consts:[[3,"navData"],[1,"content"],[1,"header"],[1,"main"]],template:function(t,r){1&t&&(s._UZ(0,"app-sidebar",0),s.TgZ(1,"div",1),s._UZ(2,"app-header",2),s.TgZ(3,"div",3),s._UZ(4,"router-outlet"),s.qZA()()),2&t&&s.Q6J("navData",r.navbarData)},dependencies:[j$,J$,Wc],styles:["[_nghost-%COMP%]{display:flex;overflow:hidden}.content[_ngcontent-%COMP%]{width:100%}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{width:100%;height:50px;display:flex;align-items:center;justify-content:flex-end}.content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{padding:2em;overflow-y:auto}"]}),n})();class X${constructor(e){this.id=e.id||"",this.name=e.name||"",this.people=e.people||"",this.description=e.description||"",this.level=e.level||"",this.time=e.time||"",this.tasks=this.mapTasks(e.tasks)}mapTasks(e){return e?.map(t=>new eZ(t))||[]}}class eZ{constructor(e){this.title=e.title||"",this.description=e.description||"",this.stage=e.stage||"",this.score=e.score||0}}let _u=class{constructor(e,t,r){this.angularFirestore=e,this.userService=t,this.router=r,this.organizationId="",this.subscription=new As.w0,this.organizationCollection=this.angularFirestore.collection("Organizations",l=>l);const i=sessionStorage.getItem("orgid");null!==i&&(this.organizationId=i)}createOgranization(e,t){this.organizationCollection.add(e).then(r=>{this.organizationId=r.id,this.userService.setOrganization(t,r.id),this.setOrganization(r.id),this.router.navigate(["pages/dashboard"])}).finally(()=>{this.organizationCollection.doc(this.organizationId).collection("Tasks").add({}),this.organizationCollection.doc(this.organizationId).collection("Project").add({}),this.organizationCollection.doc(this.organizationId).collection("Users").add({})})}joinToOrganization(e,t){const r=this.organizationCollection.doc(e).get().subscribe(i=>{i.exists?(this.organizationId=e,this.userService.setOrganization(t,e),this.setOrganization(e),this.router.navigate(["pages/dashboard"])):alert("Incorrect ID !")});this.subscription.add(r)}setOrganization(e){this.organizationId=e,sessionStorage.setItem("orgid",this.organizationId),this.router.navigate(["pages/dashboard"])}ngOnDestroy(){this.subscription.unsubscribe()}};_u.\u0275fac=function(e){return new(e||_u)(s.LFG(xE),s.LFG(hu),s.LFG(_r))},_u.\u0275prov=s.Yz7({token:_u,factory:_u.\u0275fac,providedIn:"root"}),_u=(0,Nr.gn)([(0,s.GSi)()],_u);let d_=(()=>{class n{constructor(t,r){this.angularFirestore=t,this.orgService=r,this.searchWord=new Pn(""),this.projectCollection=this.angularFirestore.collection("Organizations/"+this.orgService.organizationId+"/Projects",i=>i),this.project$=this.projectCollection.snapshotChanges().pipe((0,We.U)(i=>i.map(l=>new X$({...l.payload.doc.data(),id:l.payload.doc.id})))),this.projects$=$c([this.project$,this.searchWord]).pipe((0,We.U)(([i,l])=>i.filter(u=>u.name.toLocaleLowerCase().includes(l.toLocaleLowerCase()))))}addProject(t){this.projectCollection.add(t)}setSearchWord(t){this.searchWord.next(t)}getProject(t){return this.projectCollection.doc(t).valueChanges()}updateTasks(t,r){this.angularFirestore.collection("Organizations/"+this.orgService.organizationId+"/Projects").doc(r).update({tasks:t})}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(xE),s.LFG(_u))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class tZ{constructor(e){this.id=e.id||"",this.name=e.name||"",this.description=e.description||"",this.deadline=e.deadline||"",this.comments=this.mapComments(e.comments),this.check=e.check||!1,this.level=e.level||"",this.added=e.added||"",this.userId=e.userId||""}mapComments(e){return e?.map(t=>new nZ(t))||[]}}class nZ{constructor(e){this.user=e.user||"",this.comment=e.comment||""}}let mp=(()=>{class n{constructor(t,r){this.angularFireStore=t,this.loginService=r,this.searchWord=new Pn(""),this.userId="",this.task$=this.loginService.getUser().pipe((0,We.U)(i=>i?.uid),(0,hn.b)(i=>{this.userId=i,this.tasksCollection=this.angularFireStore.collection("Tasks",l=>l.where("userId","==",this.userId))}),mr(()=>this.tasksCollection.snapshotChanges().pipe((0,We.U)(i=>i.map(l=>new tZ({...l.payload.doc.data(),id:l.payload.doc.id})))))),this.tasks$=$c([this.task$,this.searchWord]).pipe((0,We.U)(([i,l])=>i.filter(u=>u.name.toLocaleLowerCase().includes(l.toLocaleLowerCase()))))}addTask(t){this.tasksCollection.add(t)}setSearchWord(t){this.searchWord.next(t)}getTask(t){return this.angularFireStore.collection("Tasks").doc(t).valueChanges()}checkTask(t){this.angularFireStore.collection("Tasks").doc(t).update({check:!0})}uncheckTask(t){this.angularFireStore.collection("Tasks").doc(t).update({check:!1})}editTask(t){this.angularFireStore.collection("Tasks").doc(t.id).update(t)}deleteTask(t){this.angularFireStore.collection("Tasks").doc(t).delete()}addComment(t,r){this.angularFireStore.collection("Tasks").doc(r).update({comments:t})}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(xE),s.LFG(Si))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rZ=(()=>{class n{constructor(t){this.eleRef=t}ngOnInit(){let t=this.eleRef.nativeElement.classList;switch(this.appCheckStage){case"toDo":return t.add("to-do");case"inProgress":return t.add("in-progress");case"inReview":return t.add("in-review");case"done":return t.add("done");default:return t}}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n,selectors:[["","appCheckStage",""]],inputs:{appCheckStage:"appCheckStage"}}),n})(),iZ=(()=>{class n{constructor(t){this.eleRef=t}ngOnInit(){this.eleRef.nativeElement.title=this.levelOfComplited(this.appTitleProgress)}levelOfComplited(t){const r=t.length,i=t.filter(_=>"toDo"==_.stage).length/r*100,l=t.filter(_=>"inProgress"==_.stage).length/r*100,u=t.filter(_=>"inReview"==_.stage).length/r*100;return`Project complited\u2714 in ${(t.filter(_=>"done"==_.stage).length/r*100).toFixed(2)} %, tasks to do: \u{1f7e7}${i.toFixed(2)} %, in progress \u{1f7e8}${l.toFixed(2)} %, in review \u{1f7e9}${u.toFixed(2)} %`}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n,selectors:[["","appTitleProgress",""]],inputs:{appTitleProgress:"appTitleProgress"}}),n})();function sZ(n,e){if(1&n&&s._UZ(0,"div",15),2&n){const t=e.$implicit;s.Q6J("appCheckStage",t.stage),s.uIk("data-stage",t.stage)}}function oZ(n,e){if(1&n&&(s.TgZ(0,"div",16)(1,"span",17),s._UZ(2,"i",18),s.qZA()()),2&n){const t=e.$implicit;s.xp6(1),s.Q6J("title",t)}}function aZ(n,e){if(1&n&&(s.TgZ(0,"span",19),s._uU(1),s.qZA()),2&n){const t=s.oxw().$implicit;s.MGl("title","The project has ",t.tasks.length," tasks"),s.xp6(1),s.Oqu(t.tasks.length)}}function lZ(n,e){1&n&&s._UZ(0,"div",20),2&n&&s.Q6J("title",e.$implicit.title)}const cZ=function(n){return{id:n}};function uZ(n,e){if(1&n&&(s.TgZ(0,"div",2)(1,"div",3)(2,"h3"),s._uU(3),s.qZA(),s.TgZ(4,"div",4),s.YNc(5,sZ,1,2,"div",5),s.qZA()(),s._UZ(6,"hr"),s.TgZ(7,"span",6),s._uU(8,"People and tasks"),s.qZA(),s.TgZ(9,"div",7)(10,"div",8),s.YNc(11,oZ,3,1,"div",9),s.qZA(),s.TgZ(12,"div",10),s.YNc(13,aZ,2,2,"span",11),s.YNc(14,lZ,1,1,"div",12),s.qZA()(),s._UZ(15,"hr"),s.TgZ(16,"div",13)(17,"p"),s._uU(18),s.qZA()(),s.TgZ(19,"button",14),s._uU(20," Go to Project "),s.qZA()()),2&n){const t=e.$implicit;s.xp6(3),s.hij("Project ",t.name,""),s.xp6(1),s.Q6J("appTitleProgress",t.tasks),s.xp6(1),s.Q6J("ngForOf",t.tasks),s.xp6(6),s.Q6J("ngForOf",t.people),s.xp6(2),s.Q6J("ngIf",t.tasks.length>1),s.xp6(1),s.Q6J("ngForOf",t.tasks),s.xp6(4),s.Oqu(t.description),s.xp6(1),s.Q6J("routerLink","../../pages/projects/")("queryParams",s.VKq(9,cZ,t.id))}}let dZ=(()=>{class n{constructor(){this.projects=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-progress-cards"]],inputs:{projects:"projects"},decls:2,vars:1,consts:[[1,"cards"],["class","card-progress",4,"ngFor","ngForOf"],[1,"card-progress"],[1,"card-progress-header"],[1,"card-progress-header-stage",3,"appTitleProgress"],["class","stages",3,"appCheckStage",4,"ngFor","ngForOf"],[1,"section-title"],[1,"card-progress-details"],[1,"card-progress-people"],["class","person",4,"ngFor","ngForOf"],[1,"card-progress-tasks"],["class","tasks-number",3,"title",4,"ngIf"],["class","task",3,"title",4,"ngFor","ngForOf"],[1,"card-progress-description"],[1,"btn",3,"routerLink","queryParams"],[1,"stages",3,"appCheckStage"],[1,"person"],[1,"person-avatar",3,"title"],[1,"uil","uil-user"],[1,"tasks-number",3,"title"],[1,"task",3,"title"]],template:function(t,r){1&t&&(s.TgZ(0,"div",0),s.YNc(1,uZ,21,11,"div",1),s.qZA()),2&t&&(s.xp6(1),s.Q6J("ngForOf",r.projects))},dependencies:[Er,Zt,pd,rZ,iZ],styles:[".card-header[_ngcontent-%COMP%]{color:var(--green);display:flex;padding:10px 0;align-items:center}.to-do[_ngcontent-%COMP%]{background:orange}.in-progress[_ngcontent-%COMP%]{background-color:#ff0}.in-review[_ngcontent-%COMP%]{background-color:#9acd32}.done[_ngcontent-%COMP%]{background-color:green}.cards[_ngcontent-%COMP%]{max-height:450px;overflow-y:auto;padding:0 20px}.cards[_ngcontent-%COMP%]   .card-progress[_ngcontent-%COMP%]{padding:20px;margin:20px 0;border:1px solid var(--green);border-radius:24px}.cards[_ngcontent-%COMP%]   .card-progress[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-weight:600;font-size:1.2em}.cards[_ngcontent-%COMP%]   .card-progress-header[_ngcontent-%COMP%]{display:block;color:var(--green)}.cards[_ngcontent-%COMP%]   .card-progress-header-stage[_ngcontent-%COMP%]{display:flex;margin-top:10px;max-width:80px}.cards[_ngcontent-%COMP%]   .card-progress-header-stage[_ngcontent-%COMP%]   .stages[_ngcontent-%COMP%]{max-height:16px;height:16px;width:16px}.cards[_ngcontent-%COMP%]   .card-progress-description[_ngcontent-%COMP%]{background-color:var(--bg02);padding:10px;border-radius:15px}.cards[_ngcontent-%COMP%]   .card-progress-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{height:100px;overflow-y:auto}.cards[_ngcontent-%COMP%]   .card-progress[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:10px}.cards[_ngcontent-%COMP%]   .card-progress-details[_ngcontent-%COMP%]{display:flex;gap:20px;margin-top:10px}.cards[_ngcontent-%COMP%]   .card-progress-people[_ngcontent-%COMP%]{display:flex;gap:5px}.cards[_ngcontent-%COMP%]   .card-progress-people[_ngcontent-%COMP%]   .person[_ngcontent-%COMP%]{cursor:pointer}.cards[_ngcontent-%COMP%]   .card-progress-people[_ngcontent-%COMP%]   .person-avatar[_ngcontent-%COMP%]{color:var(--text02);background-color:var(--bg02);border-radius:24px;border:1px solid;height:12px;width:18px;padding:7px 9px;transition:all .4s ease}.cards[_ngcontent-%COMP%]   .card-progress-people[_ngcontent-%COMP%]   .person-avatar[_ngcontent-%COMP%]:hover{color:var(--green);background-color:var(--bg01);border-color:var(--green)}.cards[_ngcontent-%COMP%]   .card-progress-tasks[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2px;position:relative}.cards[_ngcontent-%COMP%]   .card-progress-tasks[_ngcontent-%COMP%]   .tasks-number[_ngcontent-%COMP%]{color:var(--text02);position:absolute;bottom:-10px;right:-10px;padding:2px 6px;border-radius:24px;background-color:var(--green);border:1px solid var(--bg01);cursor:context-menu;z-index:1}.cards[_ngcontent-%COMP%]   .card-progress-tasks[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]{max-height:16px;height:16px;width:12px;cursor:pointer;background-color:var(--bg02);border:1px solid var(--text02);transition:all .4s ease}.cards[_ngcontent-%COMP%]   .card-progress-tasks[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]:hover{background-color:var(--green);border-color:var(--green);transform:scale(1.5)}"],changeDetection:0}),n})();const hZ=[[["caption"]],[["colgroup"],["col"]]],fZ=["caption","colgroup, col"];function Vx(n){return class extends n{constructor(...e){super(...e),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(e){const t=this._sticky;this._sticky=as(e),this._hasStickyChanged=t!==this._sticky}hasStickyChanged(){const e=this._hasStickyChanged;return this._hasStickyChanged=!1,e}resetStickyChanged(){this._hasStickyChanged=!1}}}const bw=new s.OlP("CDK_TABLE");let Dw=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.Rgc))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkCellDef",""]]}),n})(),Ew=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.Rgc))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),l2=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.Rgc))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class _Z{}const yZ=Vx(_Z);let Qd=(()=>{class n extends yZ{constructor(t){super(),this._table=t,this._stickyEnd=!1}get name(){return this._name}set name(t){this._setNameInput(t)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){const r=this._stickyEnd;this._stickyEnd=as(t),this._hasStickyChanged=r!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(bw,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(t,r,i){if(1&t&&(s.Suo(i,Dw,5),s.Suo(i,Ew,5),s.Suo(i,l2,5)),2&t){let l;s.iGM(l=s.CRH())&&(r.cell=l.first),s.iGM(l=s.CRH())&&(r.headerCell=l.first),s.iGM(l=s.CRH())&&(r.footerCell=l.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[s._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),s.qOj]}),n})();class Ux{constructor(e,t){t.nativeElement.classList.add(...e._columnCssClassName)}}let Bx=(()=>{class n extends Ux{constructor(t,r){super(t,r)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(Qd),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[s.qOj]}),n})(),jx=(()=>{class n extends Ux{constructor(t,r){if(super(t,r),1===t._table?._elementRef.nativeElement.nodeType){const i=t._table._elementRef.nativeElement.getAttribute("role");r.nativeElement.setAttribute("role","grid"===i||"treegrid"===i?"gridcell":"cell")}}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(Qd),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[s.qOj]}),n})();class c2{constructor(){this.tasks=[],this.endTasks=[]}}const u2=new s.OlP("_COALESCED_STYLE_SCHEDULER");let CZ=(()=>{class n{constructor(t){this._ngZone=t,this._currentSchedule=null,this._destroyed=new ct.x}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new c2,this._getScheduleObservable().pipe(Qe(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const t=this._currentSchedule;this._currentSchedule=new c2;for(const r of t.tasks)r();for(const r of t.endTasks)r()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,rn.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe(W(1))}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Hx=(()=>{class n{constructor(t,r){this.template=t,this._differs=r}ngOnChanges(t){if(!this._columnsDiffer){const r=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(r).create(),this._columnsDiffer.diff(r)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof KE?t.headerCell.template:this instanceof $x?t.footerCell.template:t.cell.template}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.Rgc),s.Y36(s.ZZ4))},n.\u0275dir=s.lG2({type:n,features:[s.TTD]}),n})();class wZ extends Hx{}const bZ=Vx(wZ);let KE=(()=>{class n extends bZ{constructor(t,r,i){super(t,r),this._table=i}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.Rgc),s.Y36(s.ZZ4),s.Y36(bw,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[s.qOj,s.TTD]}),n})();class DZ extends Hx{}const EZ=Vx(DZ);let $x=(()=>{class n extends EZ{constructor(t,r,i){super(t,r),this._table=i}ngOnChanges(t){super.ngOnChanges(t)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.Rgc),s.Y36(s.ZZ4),s.Y36(bw,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[s.qOj,s.TTD]}),n})(),Zx=(()=>{class n extends Hx{constructor(t,r,i){super(t,r),this._table=i}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.Rgc),s.Y36(s.ZZ4),s.Y36(bw,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[s.qOj]}),n})(),h_=(()=>{class n{constructor(t){this._viewContainer=t,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(t){return new(t||n)(s.Y36(s.s_b))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),d2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,r){1&t&&s.GkF(0,0)},dependencies:[h_],encapsulation:2}),n})(),h2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(t,r){1&t&&s.GkF(0,0)},dependencies:[h_],encapsulation:2}),n})(),f2=(()=>{class n{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.Rgc))},n.\u0275dir=s.lG2({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const p2=["top","bottom","left","right"];class SZ{constructor(e,t,r,i,l=!0,u=!0,f){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=r,this._coalescedStyleScheduler=i,this._isBrowser=l,this._needsPositionStickyOnElement=u,this._positionListener=f,this._cachedCellWidths=[],this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){const r=[];for(const i of e)if(i.nodeType===i.ELEMENT_NODE){r.push(i);for(let l=0;l<i.children.length;l++)r.push(i.children[l])}this._coalescedStyleScheduler.schedule(()=>{for(const i of r)this._removeStickyStyle(i,t)})}updateStickyColumns(e,t,r,i=!0){if(!e.length||!this._isBrowser||!t.some(V=>V)&&!r.some(V=>V))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const l=e[0],u=l.children.length,f=this._getCellWidths(l,i),_=this._getStickyStartColumnPositions(f,t),C=this._getStickyEndColumnPositions(f,r),I=t.lastIndexOf(!0),A=r.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const V="rtl"===this.direction,$=V?"right":"left",K=V?"left":"right";for(const we of e)for(let Ce=0;Ce<u;Ce++){const lt=we.children[Ce];t[Ce]&&this._addStickyStyle(lt,$,_[Ce],Ce===I),r[Ce]&&this._addStickyStyle(lt,K,C[Ce],Ce===A)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===I?[]:f.slice(0,I+1).map((we,Ce)=>t[Ce]?we:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===A?[]:f.slice(A).map((we,Ce)=>r[Ce+A]?we:null).reverse()}))})}stickRows(e,t,r){if(!this._isBrowser)return;const i="bottom"===r?e.slice().reverse():e,l="bottom"===r?t.slice().reverse():t,u=[],f=[],_=[];for(let I=0,A=0;I<i.length;I++){if(!l[I])continue;u[I]=A;const V=i[I];_[I]=this._isNativeHtmlTable?Array.from(V.children):[V];const $=V.getBoundingClientRect().height;A+=$,f[I]=$}const C=l.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let I=0;I<i.length;I++){if(!l[I])continue;const A=u[I],V=I===C;for(const $ of _[I])this._addStickyStyle($,r,A,V)}"top"===r?this._positionListener?.stickyHeaderRowsUpdated({sizes:f,offsets:u,elements:_}):this._positionListener?.stickyFooterRowsUpdated({sizes:f,offsets:u,elements:_})})}updateStickyFooterContainer(e,t){if(!this._isNativeHtmlTable)return;const r=e.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{t.some(i=>!i)?this._removeStickyStyle(r,["bottom"]):this._addStickyStyle(r,"bottom",0,!1)})}_removeStickyStyle(e,t){for(const i of t)e.style[i]="",e.classList.remove(this._borderCellCss[i]);p2.some(i=>-1===t.indexOf(i)&&e.style[i])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,r,i){e.classList.add(this._stickCellCss),i&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${r}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){const t={top:100,bottom:10,left:1,right:1};let r=0;for(const i of p2)e.style[i]&&(r+=t[i]);return r?`${r}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;const r=[],i=e.children;for(let l=0;l<i.length;l++)r.push(i[l].getBoundingClientRect().width);return this._cachedCellWidths=r,r}_getStickyStartColumnPositions(e,t){const r=[];let i=0;for(let l=0;l<e.length;l++)t[l]&&(r[l]=i,i+=e[l]);return r}_getStickyEndColumnPositions(e,t){const r=[];let i=0;for(let l=e.length;l>0;l--)t[l]&&(r[l]=i,i+=e[l]);return r}}const g2=new s.OlP("CDK_SPL");let zx=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.s_b),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n,selectors:[["","rowOutlet",""]]}),n})(),Gx=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.s_b),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),qx=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.s_b),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),Wx=(()=>{class n{constructor(t,r){this.viewContainer=t,this.elementRef=r}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.s_b),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),Yx=(()=>{class n{constructor(t,r,i,l,u,f,_,C,I,A,V,$){this._differs=t,this._changeDetectorRef=r,this._elementRef=i,this._dir=u,this._platform=_,this._viewRepeater=C,this._coalescedStyleScheduler=I,this._viewportRuler=A,this._stickyPositioningListener=V,this._ngZone=$,this._onDestroy=new ct.x,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new s.vpe,this.viewChange=new Pn({start:0,end:Number.MAX_VALUE}),l||this._elementRef.nativeElement.setAttribute("role","table"),this._document=f,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=as(t),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=as(t),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((t,r)=>this.trackBy?this.trackBy(r.dataIndex,r.data):r),this._viewportRuler.change().pipe(Qe(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const r=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||r,this._forceRecalculateCellWidths=r,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),Rx(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const t=this._dataDiffer.diff(this._renderRows);if(!t)return this._updateNoDataRow(),void this.contentChanged.next();const r=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,r,(i,l,u)=>this._getEmbeddedViewArgs(i.item,u),i=>i.item.data,i=>{1===i.operation&&i.context&&this._renderCellTemplateForItem(i.record.item.rowDef,i.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(i=>{r.get(i.currentIndex).context.$implicit=i.item.data}),this._updateNoDataRow(),this._ngZone&&s.R0b.isInAngularZone()?this._ngZone.onStable.pipe(W(1),Qe(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){const t=this._getRenderedRows(this._headerRowOutlet),i=this._elementRef.nativeElement.querySelector("thead");i&&(i.style.display=t.length?"":"none");const l=this._headerRowDefs.map(u=>u.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,l,"top"),this._headerRowDefs.forEach(u=>u.resetStickyChanged())}updateStickyFooterRowStyles(){const t=this._getRenderedRows(this._footerRowOutlet),i=this._elementRef.nativeElement.querySelector("tfoot");i&&(i.style.display=t.length?"":"none");const l=this._footerRowDefs.map(u=>u.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,l,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,l),this._footerRowDefs.forEach(u=>u.resetStickyChanged())}updateStickyColumnStyles(){const t=this._getRenderedRows(this._headerRowOutlet),r=this._getRenderedRows(this._rowOutlet),i=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...r,...i],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((l,u)=>{this._addStickyColumnStyles([l],this._headerRowDefs[u])}),this._rowDefs.forEach(l=>{const u=[];for(let f=0;f<r.length;f++)this._renderRows[f].rowDef===l&&u.push(r[f]);this._addStickyColumnStyles(u,l)}),i.forEach((l,u)=>{this._addStickyColumnStyles([l],this._footerRowDefs[u])}),Array.from(this._columnDefsByName.values()).forEach(l=>l.resetStickyChanged())}_getAllRenderRows(){const t=[],r=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let i=0;i<this._data.length;i++){let l=this._data[i];const u=this._getRenderRowsForData(l,i,r.get(l));this._cachedRenderRowsMap.has(l)||this._cachedRenderRowsMap.set(l,new WeakMap);for(let f=0;f<u.length;f++){let _=u[f];const C=this._cachedRenderRowsMap.get(_.data);C.has(_.rowDef)?C.get(_.rowDef).push(_):C.set(_.rowDef,[_]),t.push(_)}}return t}_getRenderRowsForData(t,r,i){return this._getRowDefs(t,r).map(u=>{const f=i&&i.has(u)?i.get(u):[];if(f.length){const _=f.shift();return _.dataIndex=r,_}return{data:t,rowDef:u,dataIndex:r}})}_cacheColumnDefs(){this._columnDefsByName.clear(),JE(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(r=>{this._columnDefsByName.has(r.name),this._columnDefsByName.set(r.name,r)})}_cacheRowDefs(){this._headerRowDefs=JE(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=JE(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=JE(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const t=this._rowDefs.filter(r=>!r.when);this._defaultRowDef=t[0]}_renderUpdatedColumns(){const t=(u,f)=>u||!!f.getColumnsDiff(),r=this._rowDefs.reduce(t,!1);r&&this._forceRenderDataRows();const i=this._headerRowDefs.reduce(t,!1);i&&this._forceRenderHeaderRows();const l=this._footerRowDefs.reduce(t,!1);return l&&this._forceRenderFooterRows(),r||i||l}_switchDataSource(t){this._data=[],Rx(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;Rx(this.dataSource)?t=this.dataSource.connect(this):Oa(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=ze(this.dataSource)),this._renderChangeSubscription=t.pipe(Qe(this._onDestroy)).subscribe(r=>{this._data=r||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,r)=>this._renderRow(this._headerRowOutlet,t,r)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,r)=>this._renderRow(this._footerRowOutlet,t,r)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,r){const i=Array.from(r.columns||[]).map(f=>this._columnDefsByName.get(f)),l=i.map(f=>f.sticky),u=i.map(f=>f.stickyEnd);this._stickyStyler.updateStickyColumns(t,l,u,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){const r=[];for(let i=0;i<t.viewContainer.length;i++){const l=t.viewContainer.get(i);r.push(l.rootNodes[0])}return r}_getRowDefs(t,r){if(1==this._rowDefs.length)return[this._rowDefs[0]];let i=[];if(this.multiTemplateDataRows)i=this._rowDefs.filter(l=>!l.when||l.when(r,t));else{let l=this._rowDefs.find(u=>u.when&&u.when(r,t))||this._defaultRowDef;l&&i.push(l)}return i}_getEmbeddedViewArgs(t,r){return{templateRef:t.rowDef.template,context:{$implicit:t.data},index:r}}_renderRow(t,r,i,l={}){const u=t.viewContainer.createEmbeddedView(r.template,l,i);return this._renderCellTemplateForItem(r,l),u}_renderCellTemplateForItem(t,r){for(let i of this._getCellTemplates(t))h_.mostRecentCellOutlet&&h_.mostRecentCellOutlet._viewContainer.createEmbeddedView(i,r);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const t=this._rowOutlet.viewContainer;for(let r=0,i=t.length;r<i;r++){const u=t.get(r).context;u.count=i,u.first=0===r,u.last=r===i-1,u.even=r%2==0,u.odd=!u.even,this.multiTemplateDataRows?(u.dataIndex=this._renderRows[r].dataIndex,u.renderIndex=r):u.index=this._renderRows[r].dataIndex}}_getCellTemplates(t){return t&&t.columns?Array.from(t.columns,r=>{const i=this._columnDefsByName.get(r);return t.extractCellTemplate(i)}):[]}_applyNativeTableSections(){const t=this._document.createDocumentFragment(),r=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const i of r){const l=this._document.createElement(i.tag);l.setAttribute("role","rowgroup");for(const u of i.outlets)l.appendChild(u.elementRef.nativeElement);t.appendChild(l)}this._elementRef.nativeElement.appendChild(t)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const t=(r,i)=>r||i.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new SZ(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:ze()).pipe(Qe(this._onDestroy)).subscribe(r=>{this._stickyStyler.direction=r,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(r=>!r._table||r._table===this)}_updateNoDataRow(){const t=this._customNoDataRow||this._noDataRow;if(!t)return;const r=0===this._rowOutlet.viewContainer.length;if(r===this._isShowingNoDataRow)return;const i=this._noDataRowOutlet.viewContainer;if(r){const l=i.createEmbeddedView(t.templateRef),u=l.rootNodes[0];1===l.rootNodes.length&&u?.nodeType===this._document.ELEMENT_NODE&&(u.setAttribute("role","row"),u.classList.add(t._contentClassName))}else i.clear();this._isShowingNoDataRow=r}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.ZZ4),s.Y36(s.sBO),s.Y36(s.SBq),s.$8M("role"),s.Y36(Va,8),s.Y36(se),s.Y36(Ms),s.Y36(Nx),s.Y36(u2),s.Y36(Qu),s.Y36(g2,12),s.Y36(s.R0b,8))},n.\u0275cmp=s.Xpm({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(t,r,i){if(1&t&&(s.Suo(i,f2,5),s.Suo(i,Qd,5),s.Suo(i,Zx,5),s.Suo(i,KE,5),s.Suo(i,$x,5)),2&t){let l;s.iGM(l=s.CRH())&&(r._noDataRow=l.first),s.iGM(l=s.CRH())&&(r._contentColumnDefs=l),s.iGM(l=s.CRH())&&(r._contentRowDefs=l),s.iGM(l=s.CRH())&&(r._contentHeaderRowDefs=l),s.iGM(l=s.CRH())&&(r._contentFooterRowDefs=l)}},viewQuery:function(t,r){if(1&t&&(s.Gf(zx,7),s.Gf(Gx,7),s.Gf(qx,7),s.Gf(Wx,7)),2&t){let i;s.iGM(i=s.CRH())&&(r._rowOutlet=i.first),s.iGM(i=s.CRH())&&(r._headerRowOutlet=i.first),s.iGM(i=s.CRH())&&(r._footerRowOutlet=i.first),s.iGM(i=s.CRH())&&(r._noDataRowOutlet=i.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(t,r){2&t&&s.ekj("cdk-table-fixed-layout",r.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[s._Bn([{provide:bw,useExisting:n},{provide:Nx,useClass:_$},{provide:u2,useClass:CZ},{provide:g2,useValue:null}])],ngContentSelectors:fZ,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(t,r){1&t&&(s.F$t(hZ),s.Hsn(0),s.Hsn(1,1),s.GkF(2,0)(3,1)(4,2)(5,3))},dependencies:[zx,Gx,qx,Wx],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2}),n})();function JE(n,e){return n.concat(Array.from(e))}let m2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[q_]}),n})();function MZ(n,e){if(1&n&&(s.TgZ(0,"th",8),s._uU(1),s.qZA()),2&n){const t=s.oxw().$implicit;s.xp6(1),s.Oqu(t.cdkColumnDefTitle)}}function kZ(n,e){if(1&n&&(s.TgZ(0,"td",9),s._uU(1),s.qZA()),2&n){const t=e.$implicit,r=s.oxw().$implicit;s.xp6(1),s.Oqu(t[r.cdkColumnDef])}}function xZ(n,e){1&n&&(s.ynx(0,7),s.YNc(1,MZ,2,1,"th",3),s.YNc(2,kZ,2,1,"td",4),s.BQk()),2&n&&s.s9C("cdkColumnDef",e.$implicit.cdkColumnDef)}function OZ(n,e){1&n&&(s.TgZ(0,"th",8),s._uU(1,"View More"),s.qZA())}const RZ=function(n){return{id:n}};function PZ(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"td",9)(1,"button",10),s.NdJ("click",function(){const l=s.CHM(t).$implicit,u=s.oxw();return s.KtG(u.onShowDetails(l.id))}),s._uU(2," Show more "),s.qZA()()}if(2&n){const t=e.$implicit,r=s.oxw();s.xp6(1),s.Q6J("routerLink","../../pages/"+r.category+"/")("queryParams",s.VKq(2,RZ,t.id))}}function NZ(n,e){1&n&&s._UZ(0,"tr",11)}function FZ(n,e){if(1&n&&s._UZ(0,"tr",12),2&n){const t=e.$implicit,r=s.oxw();s.Tol(r.chcekClass(t.check))}}let QE=(()=>{class n{constructor(){this.eventEmitt=new s.vpe}onShowDetails(t){this.eventEmitt.emit(t)}chcekClass(t){return t?"checked":"unchecked"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-table"]],inputs:{data:"data",displayedColumns:"displayedColumns",columnDef:"columnDef",category:"category"},outputs:{eventEmitt:"eventEmitt"},decls:7,vars:4,consts:[["cdk-table","",3,"dataSource"],[3,"cdkColumnDef",4,"ngFor","ngForOf"],["cdkColumnDef","viewMore"],["cdk-header-cell","",4,"cdkHeaderCellDef"],["cdk-cell","",4,"cdkCellDef"],["cdk-header-row","",4,"cdkHeaderRowDef"],["cdk-row","",3,"class",4,"cdkRowDef","cdkRowDefColumns"],[3,"cdkColumnDef"],["cdk-header-cell",""],["cdk-cell",""],[1,"btn",3,"routerLink","queryParams","click"],["cdk-header-row",""],["cdk-row",""]],template:function(t,r){1&t&&(s.TgZ(0,"table",0),s.YNc(1,xZ,3,1,"ng-container",1),s.ynx(2,2),s.YNc(3,OZ,2,0,"th",3),s.YNc(4,PZ,3,4,"td",4),s.BQk(),s.YNc(5,NZ,1,0,"tr",5),s.YNc(6,FZ,1,2,"tr",6),s.qZA()),2&t&&(s.Q6J("dataSource",r.data),s.xp6(1),s.Q6J("ngForOf",r.columnDef),s.xp6(4),s.Q6J("cdkHeaderRowDef",r.displayedColumns),s.xp6(1),s.Q6J("cdkRowDefColumns",r.displayedColumns))},dependencies:[Yx,Zx,Dw,Ew,Qd,jx,h2,Bx,d2,KE,pd,Er],styles:["[_nghost-%COMP%]{width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:6em}table[_ngcontent-%COMP%]   .checked[_ngcontent-%COMP%]{opacity:.4}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-radius:24px 0 0 24px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-radius:0 24px 24px 0}"]}),n})();function LZ(n,e){if(1&n&&(s.ynx(0),s._UZ(1,"app-table",6),s.BQk()),2&n){const t=s.oxw();s.xp6(1),s.Q6J("data",t.tasks)("displayedColumns",t.displayedColumns)("columnDef",t.columnDef)("category","tasks")}}function VZ(n,e){1&n&&(s.TgZ(0,"div",7),s._UZ(1,"i",8),s.TgZ(2,"div",9),s._uU(3," You don't have any notifications yet "),s.TgZ(4,"p"),s._uU(5,"If something comes up, we'll let you know"),s.qZA()()())}let UZ=(()=>{class n{constructor(){this.displayedColumns=["name","description","viewMore"],this.columnDef=[{cdkColumnDef:"name",cdkColumnDefTitle:"Title"},{cdkColumnDef:"description",cdkColumnDefTitle:"Description"},{cdkColumnDef:"time",cdkColumnDefTitle:"Deadline"}]}get tasks(){return this._tasks}set tasks(t){const r=new Date;r.setDate(r.getDate()-5);const i=r.toJSON().slice(0,10);this._tasks=t.filter(l=>l.added>i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-notf-card"]],inputs:{tasks:"tasks"},decls:10,vars:2,consts:[[1,"card-header"],[1,"uil","uil-bell"],[1,"card-header-title"],[1,"card-content"],[4,"ngIf","ngIfElse"],["noData",""],[3,"data","displayedColumns","columnDef","category"],[1,"card-nottfication-empty"],[1,"uil","uil-apps"],[1,"card-nottfication-empty-title"]],template:function(t,r){if(1&t&&(s.TgZ(0,"div",0)(1,"span"),s._UZ(2,"i",1),s.qZA(),s.TgZ(3,"span",2),s._uU(4,"Latest tasks"),s.qZA()(),s._UZ(5,"hr"),s.TgZ(6,"div",3),s.YNc(7,LZ,2,4,"ng-container",4),s.YNc(8,VZ,6,0,"ng-template",null,5,s.W1O),s.qZA()),2&t){const i=s.MAs(9);s.xp6(7),s.Q6J("ngIf",r.tasks.length>0)("ngIfElse",i)}},dependencies:[Zt,QE],styles:[".card-header[_ngcontent-%COMP%]{display:flex;align-items:center}.card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--green);font-size:4em}.card-header-title[_ngcontent-%COMP%]{font-size:3em;font-weight:500}.card-content[_ngcontent-%COMP%]{height:350px;padding:0 20px;overflow-y:auto;display:flex}.card-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.card-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .card-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:0}.card-content[_ngcontent-%COMP%]   .card-nottfication-empty[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-weight:500;font-size:24px;cursor:default}.card-content[_ngcontent-%COMP%]   .card-nottfication-empty-title[_ngcontent-%COMP%]{transition:all .4s ease}.card-content[_ngcontent-%COMP%]   .card-nottfication-empty-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--text02)}.card-content[_ngcontent-%COMP%]   .card-nottfication-empty-title[_ngcontent-%COMP%]:hover{color:var(--green)}.card-content[_ngcontent-%COMP%]   .card-nottfication-empty[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--green);background-color:var(--bg01);border-radius:24px;padding:10px 12px;margin-right:10px}"]}),n})(),BZ=(()=>{class n{constructor(){this.projects=[],this.tasks=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-card-dashboard"]],inputs:{projects:"projects",tasks:"tasks"},decls:4,vars:2,consts:[[3,"projects"],[3,"tasks"]],template:function(t,r){1&t&&(s.TgZ(0,"app-card"),s._UZ(1,"app-progress-cards",0),s.qZA(),s.TgZ(2,"app-card"),s._UZ(3,"app-notf-card",1),s.qZA()),2&t&&(s.xp6(1),s.Q6J("projects",r.projects),s.xp6(2),s.Q6J("tasks",r.tasks))},dependencies:[dZ,UZ,mu],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:10px}[_nghost-%COMP%]   .card[_ngcontent-%COMP%]{max-height:600px}"]}),n})(),jZ=(()=>{class n{constructor(t,r){this.projectsService=t,this.tasksService=r,this.projects=[],this.tasks=[]}ngOnInit(){this.projectsService.project$.subscribe(t=>this.projects=t),this.tasksService.tasks$.subscribe(t=>this.tasks=t)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(d_),s.Y36(mp))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-dashboard"]],decls:4,vars:2,consts:[[1,"container"],[3,"projects","tasks"]],template:function(t,r){1&t&&(s.TgZ(0,"h1"),s._uU(1,"My Dashboard"),s.qZA(),s.TgZ(2,"div",0),s._UZ(3,"app-card-dashboard",1),s.qZA()),2&t&&(s.xp6(3),s.Q6J("projects",r.projects)("tasks",r.tasks))},dependencies:[BZ]}),n})(),ol=class{login({patchState:e},t){e({loggedIn:!0,user:t.user})}logout({patchState:e}){e({loggedIn:!1,user:null})}};function HZ(n,e){1&n&&(s.TgZ(0,"div",21)(1,"span",22),s._uU(2,"Please check yours project name field"),s.qZA()())}function $Z(n,e){1&n&&(s.TgZ(0,"div",21)(1,"span",22),s._uU(2,"Please check yours description field"),s.qZA()())}function ZZ(n,e){1&n&&(s.TgZ(0,"div",21)(1,"span",22),s._uU(2,"Please check yours level field"),s.qZA()())}function zZ(n,e){1&n&&(s.TgZ(0,"div",21)(1,"span",22),s._uU(2,"Please check yours time field"),s.qZA()())}function GZ(n,e){if(1&n&&(s.TgZ(0,"div",23)(1,"span",24)(2,"span",25),s._UZ(3,"i",26),s.qZA(),s.TgZ(4,"span",27),s._uU(5),s.qZA(),s.TgZ(6,"span",28),s._uU(7),s.qZA(),s.TgZ(8,"span",29),s._uU(9),s.qZA(),s._UZ(10,"input",30),s.qZA()()),2&n){const t=e.$implicit,r=e.index;s.xp6(5),s.Oqu(t.firstName),s.xp6(2),s.Oqu(t.lastName),s.xp6(2),s.Oqu(t.position),s.xp6(1),s.Q6J("value",t.firstName+" "+t.lastName)("formControlName",r)}}ol.\u0275fac=function(e){return new(e||ol)},ol.\u0275prov=s.Yz7({token:ol,factory:ol.\u0275fac}),(0,Nr.gn)([$p(em)],ol.prototype,"login",null),(0,Nr.gn)([$p(gD)],ol.prototype,"logout",null),ol=(0,Nr.gn)([Jw({name:"login",defaults:{loggedIn:!1,user:null}})],ol);let qZ=(()=>{class n{constructor(t,r,i){this.fb=t,this.dialogRef=r,this.users=i,this.usersArray=[]}ngOnInit(){this.addProjectForm=this.fb.group({name:["",[an.required]],description:["",[an.required]],level:["",[an.required]],time:["",[an.required]],people:new Ox([]),tasks:this.fb.array([])}),this.addCheckBox()}get name(){return this.addProjectForm.get("name")}get description(){return this.addProjectForm.get("description")}get level(){return this.addProjectForm.get("level")}get time(){return this.addProjectForm.get("time")}get people(){return this.addProjectForm.controls.people}addCheckBox(){this.users.forEach(()=>this.people.push(new l_(!1)))}changeValue(){const t=this.addProjectForm.value.people.map((r,i)=>r?r=this.users[i].firstName+" "+this.users[i].lastName:null);this.addProjectForm.value.people=t.filter(r=>null!=r)}onSubmit(){this.addProjectForm.valid&&(this.changeValue(),this.dialogRef.close(this.addProjectForm.value))}closeDialog(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(gu),s.Y36(go),s.Y36(ic))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-add-project"]],decls:35,vars:6,consts:[[1,"content-form"],["id","taskForm",3,"formGroup","ngSubmit"],["for","name"],["type","text","name","NameOfTask","id","name","formControlName","name","placeholder","Some title of project "],["class","invalid-feedback",4,"ngIf"],["for","description"],["id","description","cols","30","rows","10","formControlName","description","placeholder","description exp. its always good to take brake, sometime 5 minuts can recharge battery ;) "],["for","level"],["name","LevelOfTask","id","level","formControlName","level"],["value","low","selected","selected"],["value","Mid"],["value","Hard"],["for","time"],["type","date","name","timeOfTasks","id","time","formControlName","time"],["formArrayName","people",1,"users"],["class","user",4,"ngFor","ngForOf"],[1,"content-form-buttons"],["type","submit",1,"btn"],[1,"uil","uil-save"],[1,"btn",3,"click"],[1,"uil","uil-cancel"],[1,"invalid-feedback"],[1,"waring"],[1,"user"],[1,"user-card"],[1,"user-card-avatar"],[1,"uil","uil-user"],[1,"user-card-title"],[1,"user-card-subtitle"],[1,"user-card-description"],["type","checkbox",3,"value","formControlName"]],template:function(t,r){1&t&&(s.TgZ(0,"div",0)(1,"h2"),s._uU(2,"Add new Project"),s.qZA(),s.TgZ(3,"form",1),s.NdJ("ngSubmit",function(){return r.onSubmit()}),s.TgZ(4,"label",2),s._uU(5,"Name of project"),s.qZA(),s._UZ(6,"input",3),s.YNc(7,HZ,3,0,"div",4),s.TgZ(8,"label",5),s._uU(9,"description of project"),s.qZA(),s._UZ(10,"textarea",6),s.YNc(11,$Z,3,0,"div",4),s.TgZ(12,"label",7),s._uU(13,"Level od project"),s.qZA(),s.TgZ(14,"select",8)(15,"option",9),s._uU(16,"Low"),s.qZA(),s.TgZ(17,"option",10),s._uU(18,"Medium"),s.qZA(),s.TgZ(19,"option",11),s._uU(20,"Hard"),s.qZA()(),s.YNc(21,ZZ,3,0,"div",4),s.TgZ(22,"label",12),s._uU(23,"time"),s.qZA(),s._UZ(24,"input",13),s.YNc(25,zZ,3,0,"div",4),s.TgZ(26,"div",14),s.YNc(27,GZ,11,5,"div",15),s.qZA(),s.TgZ(28,"div",16)(29,"button",17),s._uU(30," Save "),s._UZ(31,"i",18),s.qZA(),s.TgZ(32,"button",19),s.NdJ("click",function(){return r.closeDialog()}),s._uU(33," Cancel "),s._UZ(34,"i",20),s.qZA()()()()),2&t&&(s.xp6(3),s.Q6J("formGroup",r.addProjectForm),s.xp6(4),s.Q6J("ngIf",(null==r.name||null==r.name.errors?null:r.name.errors.required)&&(null==r.name?null:r.name.touched)),s.xp6(4),s.Q6J("ngIf",(null==r.description||null==r.description.errors?null:r.description.errors.required)&&(null==r.description?null:r.description.touched)),s.xp6(10),s.Q6J("ngIf",(null==r.level||null==r.level.errors?null:r.level.errors.required)&&(null==r.level?null:r.level.touched)),s.xp6(4),s.Q6J("ngIf",(null==r.time||null==r.time.errors?null:r.time.errors.required)&&(null==r.time?null:r.time.touched)),s.xp6(2),s.Q6J("ngForOf",r.users))},dependencies:[Zi,fp,pp,pi,_x,pu,Hi,$i,aa,sl,ZE,Er,Zt],styles:["[_nghost-%COMP%]{display:block;background:var(--bg01);border:1px solid var(--green);border-radius:24px;min-width:50vw;padding:30px;color:var(--text02);overflow-y:auto}.content-form[_ngcontent-%COMP%]{padding:20px;max-height:90vh;overflow-y:auto}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px;font-weight:500}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{color:var(--text02);width:100%;background-color:var(--bg01);padding:10px}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:30px}.content-form-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.users[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);background-color:var(--bg02);border-radius:24px;gap:20px;max-height:50%;overflow-y:auto;padding:20px}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{min-width:25%;padding:20px 0;border-radius:24px;background-color:var(--bg01);border:1px solid var(--color01);transition:all .4s ease}.users[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;position:relative}.users[_ngcontent-%COMP%]   .user-card-avatar[_ngcontent-%COMP%]{background-color:var(--bg02);border-radius:24px;padding:6px 9px;font-size:2em;transition:all .4s ease;margin:5px}.users[_ngcontent-%COMP%]   .user-card-title[_ngcontent-%COMP%]{font-size:1.2em}.users[_ngcontent-%COMP%]   .user-card-subtitle[_ngcontent-%COMP%]{font-size:1em}.users[_ngcontent-%COMP%]   .user-card-description[_ngcontent-%COMP%]{font-size:.8em;color:var(--green)}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]:hover{background-color:var(--bg02)}"]}),n})();function Kx(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function f_(n,e){const t=e?"":"none";Kx(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function _2(n,e,t){Kx(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function XE(n,e){return e&&"none"!=e?n+" "+e:n}function y2(n){const e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function Jx(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}function Qx(n){const e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function Xx(n,e,t){const{top:r,bottom:i,left:l,right:u}=n;return t>=r&&t<=i&&e>=l&&e<=u}function Iw(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function v2(n,e,t,r){const{top:i,right:l,bottom:u,left:f,width:_,height:C}=n,I=_*e,A=C*e;return r>i-A&&r<u+A&&t>f-I&&t<l+I}class C2{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:Qx(t)})})}handleScroll(e){const t=io(e),r=this.positions.get(t);if(!r)return null;const i=r.scrollPosition;let l,u;if(t===this._document){const C=this.getViewportScrollPosition();l=C.top,u=C.left}else l=t.scrollTop,u=t.scrollLeft;const f=i.top-l,_=i.left-u;return this.positions.forEach((C,I)=>{C.clientRect&&t!==I&&t.contains(I)&&Iw(C.clientRect,f,_)}),i.top=l,i.left=u,{top:f,left:_}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function w2(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return"canvas"===r?E2(n,e):("input"===r||"select"===r||"textarea"===r)&&D2(n,e),b2("canvas",n,e,E2),b2("input, textarea, select",n,e,D2),e}function b2(n,e,t,r){const i=e.querySelectorAll(n);if(i.length){const l=t.querySelectorAll(n);for(let u=0;u<i.length;u++)r(i[u],l[u])}}let KZ=0;function D2(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${KZ++}`)}function E2(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}const I2=Ju({passive:!0}),eI=Ju({passive:!1}),eO=new Set(["position"]);class QZ{constructor(e,t,r,i,l,u){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=l,this._dragDropRegistry=u,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new ct.x,this._pointerMoveSubscription=As.w0.EMPTY,this._pointerUpSubscription=As.w0.EMPTY,this._scrollSubscription=As.w0.EMPTY,this._resizeSubscription=As.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new ct.x,this.started=new ct.x,this.released=new ct.x,this.ended=new ct.x,this.entered=new ct.x,this.exited=new ct.x,this.dropped=new ct.x,this.moved=this._moveEvents,this._pointerDown=f=>{if(this.beforeStarted.next(),this._handles.length){const _=this._getTargetHandle(f);_&&!this._disabledHandles.has(_)&&!this.disabled&&this._initializeDragSequence(_,f)}else this.disabled||this._initializeDragSequence(this._rootElement,f)},this._pointerMove=f=>{const _=this._getPointerPositionOnPage(f);if(!this._hasStartedDragging){if(Math.abs(_.x-this._pickupPositionOnPage.x)+Math.abs(_.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const $=Date.now()>=this._dragStartTime+this._getDragStartDelay(f),K=this._dropContainer;if(!$)return void this._endDragSequence(f);(!K||!K.isDragging()&&!K.isReceiving())&&(f.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(f)))}return}f.preventDefault();const C=this._getConstrainedPointerPosition(_);if(this._hasMoved=!0,this._lastKnownPointerPosition=_,this._updatePointerDirectionDelta(C),this._dropContainer)this._updateActiveDropContainer(C,_);else{const I=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,A=this._activeTransform;A.x=C.x-I.x+this._passiveTransform.x,A.y=C.y-I.y+this._passiveTransform.y,this._applyRootElementTransform(A.x,A.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:C,event:f,distance:this._getDragDistance(C),delta:this._pointerDirectionDelta})})},this._pointerUp=f=>{this._endDragSequence(f)},this._nativeDragStart=f=>{if(this._handles.length){const _=this._getTargetHandle(f);_&&!this._disabledHandles.has(_)&&!this.disabled&&f.preventDefault()}else this.disabled||f.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new C2(r),u.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=as(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(r=>f_(r,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>Sr(r)),this._handles.forEach(r=>f_(r,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=Sr(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,eI),t.addEventListener("touchstart",this._pointerDown,I2),t.addEventListener("dragstart",this._nativeDragStart,eI)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Sr(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),f_(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),f_(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){Sw(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const r=this._rootElement,i=r.parentNode,l=this._placeholder=this._createPlaceholderElement(),u=this._anchor=this._anchor||this._document.createComment(""),f=this._getShadowRoot();i.insertBefore(u,r),this._initialTransform=r.style.transform||"",this._preview=this._createPreviewElement(),_2(r,!1,eO),this._document.body.appendChild(i.replaceChild(l,r)),this._getPreviewInsertionPoint(i,f).appendChild(this._preview),this.started.next({source:this,event:e}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const r=this.isDragging(),i=Sw(t),l=!i&&0!==t.button,u=this._rootElement,f=io(t),_=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),C=i?GF(t):zF(t);if(f&&f.draggable&&"mousedown"===t.type&&t.preventDefault(),r||l||_||C)return;if(this._handles.length){const V=u.style;this._rootElementTapHighlight=V.webkitTapHighlightColor||"",V.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(V=>this._updateOnScroll(V)),this._boundaryElement&&(this._boundaryRect=Qx(this._boundaryElement));const I=this._previewTemplate;this._pickupPositionInElement=I&&I.template&&!I.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,e,t);const A=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:A.x,y:A.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){_2(this._rootElement,!0,eO),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),l=this._getDragDistance(i),u=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:l,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:u,distance:l,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,u,l,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let l=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!l&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(l=this._initialContainer),l&&l!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=l,this._dropContainer.enter(this,e,t,l===this._initialContainer&&l.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:l,currentIndex:l.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,r=e?e.template:null;let i;if(r&&e){const l=e.matchSize?this._initialClientRect:null,u=e.viewContainer.createEmbeddedView(r,e.context);u.detectChanges(),i=T2(u,this._document),this._previewRef=u,e.matchSize?A2(i,l):i.style.transform=tI(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=w2(this._rootElement),A2(i,this._initialClientRect),this._initialTransform&&(i.style.transform=this._initialTransform);return Kx(i.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},eO),f_(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(l=>i.classList.add(l)):i.classList.add(t)),i}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function YZ(n){const e=getComputedStyle(n),t=Jx(e,"transition-property"),r=t.find(f=>"transform"===f||"all"===f);if(!r)return 0;const i=t.indexOf(r),l=Jx(e,"transition-duration"),u=Jx(e,"transition-delay");return y2(l[i])+y2(u[i])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{const i=u=>{(!u||io(u)===this._preview&&"transform"===u.propertyName)&&(this._preview?.removeEventListener("transitionend",i),r(),clearTimeout(l))},l=setTimeout(i,1.5*t);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=T2(this._placeholderRef,this._document)):r=w2(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(e,t,r){const i=t===this._rootElement?null:t,l=i?i.getBoundingClientRect():e,u=Sw(r)?r.targetTouches[0]:r,f=this._getViewportScrollPosition();return{x:l.left-e.left+(u.pageX-l.left-f.left),y:l.top-e.top+(u.pageY-l.top-f.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),r=Sw(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,l=r.pageY-t.top;if(this._ownerSVGElement){const u=this._ownerSVGElement.getScreenCTM();if(u){const f=this._ownerSVGElement.createSVGPoint();return f.x=i,f.y=l,f.matrixTransform(u.inverse())}}return{x:i,y:l}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialClientRect,this._pickupPositionInElement):e;if("x"===this.lockAxis||"x"===t?i=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(r=this._pickupPositionOnPage.x),this._boundaryRect){const{x:l,y:u}=this._pickupPositionInElement,f=this._boundaryRect,{width:_,height:C}=this._getPreviewRect(),I=f.top+u,A=f.bottom-(C-u);r=S2(r,f.left+l,f.right-(_-l)),i=S2(i,I,A)}return{x:r,y:i}}_updatePointerDirectionDelta(e){const{x:t,y:r}=e,i=this._pointerDirectionDelta,l=this._pointerPositionAtLastDirectionChange,u=Math.abs(t-l.x),f=Math.abs(r-l.y);return u>this._config.pointerDirectionChangeThreshold&&(i.x=t>l.x?1:-1,l.x=t),f>this._config.pointerDirectionChangeThreshold&&(i.y=r>l.y?1:-1,l.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,f_(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,eI),e.removeEventListener("touchstart",this._pointerDown,I2),e.removeEventListener("dragstart",this._nativeDragStart,eI)}_applyRootElementTransform(e,t){const r=tI(e,t),i=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=i.transform&&"none"!=i.transform?i.transform:""),i.transform=XE(r,this._initialTransform)}_applyPreviewTransform(e,t){const r=this._previewTemplate?.template?void 0:this._initialTransform,i=tI(e,t);this._preview.style.transform=XE(i,r)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===r.width&&0===r.height)return;const l=i.left-r.left,u=r.right-i.right,f=i.top-r.top,_=r.bottom-i.bottom;i.width>r.width?(l>0&&(e+=l),u>0&&(e-=u)):e=0,i.height>r.height?(f>0&&(t+=f),_>0&&(t-=_)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:Sw(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const r=io(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&Iw(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=$_(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const r=this._previewContainer||"global";if("parent"===r)return e;if("global"===r){const i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return Sr(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function tI(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function S2(n,e,t){return Math.max(e,Math.min(t,n))}function Sw(n){return"t"===n.type[0]}function T2(n,e){const t=n.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function A2(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=tI(e.left,e.top)}function M2(n,e,t){const r=Tw(e,n.length-1),i=Tw(t,n.length-1);if(r===i)return;const l=n[r],u=i<r?-1:1;for(let f=r;f!==i;f+=u)n[f]=n[f+u];n[i]=l}function k2(n,e,t,r){const i=Tw(t,n.length-1),l=Tw(r,e.length);n.length&&e.splice(l,0,n.splice(i,1)[0])}function Tw(n,e){return Math.max(0,Math.min(e,n))}class XZ{constructor(e,t){this._element=e,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,r,i){const l=this._itemPositions,u=this._getItemIndexFromPointerPosition(e,t,r,i);if(-1===u&&l.length>0)return null;const f="horizontal"===this.orientation,_=l.findIndex(Ce=>Ce.drag===e),C=l[u],A=C.clientRect,V=_>u?1:-1,$=this._getItemOffsetPx(l[_].clientRect,A,V),K=this._getSiblingOffsetPx(_,l,V),we=l.slice();return M2(l,_,u),l.forEach((Ce,lt)=>{if(we[lt]===Ce)return;const St=Ce.drag===e,xt=St?$:K,Ft=St?e.getPlaceholderElement():Ce.drag.getRootElement();Ce.offset+=xt,f?(Ft.style.transform=XE(`translate3d(${Math.round(Ce.offset)}px, 0, 0)`,Ce.initialTransform),Iw(Ce.clientRect,0,xt)):(Ft.style.transform=XE(`translate3d(0, ${Math.round(Ce.offset)}px, 0)`,Ce.initialTransform),Iw(Ce.clientRect,xt,0))}),this._previousSwap.overlaps=Xx(A,t,r),this._previousSwap.drag=C.drag,this._previousSwap.delta=f?i.x:i.y,{previousIndex:_,currentIndex:u}}enter(e,t,r,i){const l=null==i||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,u=this._activeDraggables,f=u.indexOf(e),_=e.getPlaceholderElement();let C=u[l];if(C===e&&(C=u[l+1]),!C&&(null==l||-1===l||l<u.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(C=u[0]),f>-1&&u.splice(f,1),C&&!this._dragDropRegistry.isDragging(C)){const I=C.getRootElement();I.parentElement.insertBefore(_,I),u.splice(l,0,e)}else Sr(this._element).appendChild(_),u.push(e);_.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{const t=e.getRootElement();if(t){const r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{Iw(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}_cacheItemPositions(){const e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:Qx(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getItemOffsetPx(e,t,r){const i="horizontal"===this.orientation;let l=i?t.left-e.left:t.top-e.top;return-1===r&&(l+=i?t.width-e.width:t.height-e.height),l}_getSiblingOffsetPx(e,t,r){const i="horizontal"===this.orientation,l=t[e].clientRect,u=t[e+-1*r];let f=l[i?"width":"height"]*r;if(u){const _=i?"left":"top",C=i?"right":"bottom";-1===r?f-=u.clientRect[_]-l[C]:f+=l[_]-u.clientRect[C]}return f}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const r=this._itemPositions,i="horizontal"===this.orientation;if(r[0].drag!==this._activeDraggables[0]){const u=r[r.length-1].clientRect;return i?e>=u.right:t>=u.bottom}{const u=r[0].clientRect;return i?e<=u.left:t<=u.top}}_getItemIndexFromPointerPosition(e,t,r,i){const l="horizontal"===this.orientation,u=this._itemPositions.findIndex(({drag:f,clientRect:_})=>{if(f===e)return!1;if(i){const C=l?i.x:i.y;if(f===this._previousSwap.drag&&this._previousSwap.overlaps&&C===this._previousSwap.delta)return!1}return l?t>=Math.floor(_.left)&&t<Math.floor(_.right):r>=Math.floor(_.top)&&r<Math.floor(_.bottom)});return-1!==u&&this._sortPredicate(u,e)?u:-1}}class ez{constructor(e,t,r,i,l){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=l,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new ct.x,this.entered=new ct.x,this.exited=new ct.x,this.dropped=new ct.x,this.sorted=new ct.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=As.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new ct.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function WZ(n=0,e=Oh.z){return n<0&&(n=0),sb(n,n,e)}(0,B_).pipe(Qe(this._stopScrollTimers)).subscribe(()=>{const u=this._scrollNode,f=this.autoScrollStep;1===this._verticalScrollDirection?u.scrollBy(0,-f):2===this._verticalScrollDirection&&u.scrollBy(0,f),1===this._horizontalScrollDirection?u.scrollBy(-f,0):2===this._horizontalScrollDirection&&u.scrollBy(f,0)})},this.element=Sr(e),this._document=r,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new C2(r),this._sortStrategy=new XZ(this.element,t),this._sortStrategy.withSortPredicate((u,f)=>this.sortPredicate(u,f,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),null==i&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,l,u,f,_={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:l,distance:u,dropPoint:f,event:_})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>-1===e.indexOf(i))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){const t=Sr(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._clientRect||!v2(this._clientRect,.05,t,r))return;const l=this._sortStrategy.sort(e,t,r,i);l&&this.sorted.next({previousIndex:l.previousIndex,currentIndex:l.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=0,l=0;if(this._parentPositions.positions.forEach((u,f)=>{f===this._document||!u.clientRect||r||v2(u.clientRect,.05,e,t)&&([i,l]=function tz(n,e,t,r){const i=R2(e,r),l=P2(e,t);let u=0,f=0;if(i){const _=n.scrollTop;1===i?_>0&&(u=1):n.scrollHeight-_>n.clientHeight&&(u=2)}if(l){const _=n.scrollLeft;1===l?_>0&&(f=1):n.scrollWidth-_>n.clientWidth&&(f=2)}return[u,f]}(f,u.clientRect,e,t),(i||l)&&(r=f))}),!i&&!l){const{width:u,height:f}=this._viewportRuler.getViewportSize(),_={width:u,height:f,top:0,right:u,bottom:f,left:0};i=R2(_,t),l=P2(_,e),r=window}r&&(i!==this._verticalScrollDirection||l!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=l,this._scrollNode=r,(i||l)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=Sr(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=Sr(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;const e=Sr(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return null!=this._clientRect&&Xx(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._clientRect||!Xx(this._clientRect,t,r)||!this.enterPredicate(e,this))return!1;const i=this._getShadowRoot().elementFromPoint(t,r);if(!i)return!1;const l=Sr(this.element);return i===l||l.contains(i)}_startReceiving(e,t){const r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=$_(Sr(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function R2(n,e){const{top:t,bottom:r,height:i}=n,l=.05*i;return e>=t-l&&e<=t+l?1:e>=r-l&&e<=r+l?2:0}function P2(n,e){const{left:t,right:r,width:i}=n,l=.05*i;return e>=t-l&&e<=t+l?1:e>=r-l&&e<=r+l?2:0}const nI=Ju({passive:!1,capture:!0});let nz=(()=>{class n{constructor(t,r){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=i=>i.isDragging(),this.pointerMove=new ct.x,this.pointerUp=new ct.x,this.scroll=new ct.x,this._preventDefaultWhileDragging=i=>{this._activeDragInstances.length>0&&i.preventDefault()},this._persistentTouchmoveListener=i=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&i.preventDefault(),this.pointerMove.next(i))},this._document=r}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,nI)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,nI)}startDragging(t,r){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const i=r.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:l=>this.pointerUp.next(l),options:!0}).set("scroll",{handler:l=>this.scroll.next(l),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:nI}),i||this._globalListeners.set("mousemove",{handler:l=>this.pointerMove.next(l),options:nI}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((l,u)=>{this._document.addEventListener(u,l.handler,l.options)})})}}stopDragging(t){const r=this._activeDragInstances.indexOf(t);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const r=[this.scroll];return t&&t!==this._document&&r.push(new Mn.y(i=>this._ngZone.runOutsideAngular(()=>{const u=f=>{this._activeDragInstances.length&&i.next(f)};return t.addEventListener("scroll",u,!0),()=>{t.removeEventListener("scroll",u,!0)}}))),(0,ja.T)(...r)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,r)=>{this._document.removeEventListener(r,t.handler,t.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(s.R0b),s.LFG(se))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rz={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let tO=(()=>{class n{constructor(t,r,i,l){this._document=t,this._ngZone=r,this._viewportRuler=i,this._dragDropRegistry=l}createDrag(t,r=rz){return new QZ(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new ez(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(se),s.LFG(s.R0b),s.LFG(Qu),s.LFG(nz))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const N2=new s.OlP("CDK_DRAG_PARENT"),nO=new s.OlP("CdkDropListGroup");let iz=(()=>{class n{constructor(){this._items=new Set,this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=as(t)}ngOnDestroy(){this._items.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:["cdkDropListGroupDisabled","disabled"]},exportAs:["cdkDropListGroup"],features:[s._Bn([{provide:nO,useExisting:n}])]}),n})();const F2=new s.OlP("CDK_DRAG_CONFIG");let sz=0;const L2=new s.OlP("CdkDropList");let oz=(()=>{class n{constructor(t,r,i,l,u,f,_){this.element=t,this._changeDetectorRef=i,this._scrollDispatcher=l,this._dir=u,this._group=f,this._destroyed=new ct.x,this.connectedTo=[],this.id="cdk-drop-list-"+sz++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new s.vpe,this.entered=new s.vpe,this.exited=new s.vpe,this.sorted=new s.vpe,this._unsortedItems=new Set,this._dropListRef=r.createDropList(t),this._dropListRef.data=this,_&&this._assignDefaults(_),this._dropListRef.enterPredicate=(C,I)=>this.enterPredicate(C.data,I.data),this._dropListRef.sortPredicate=(C,I,A)=>this.sortPredicate(C,I.data,A.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),f&&f._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=as(t)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,r)=>t._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=n._dropLists.indexOf(this);t>-1&&n._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe(er(this._dir.value),Qe(this._destroyed)).subscribe(r=>t.withDirection(r)),t.beforeStarted.subscribe(()=>{const r=Wu(this.connectedTo).map(i=>"string"==typeof i?n._dropLists.find(u=>u.id===i):i);if(this._group&&this._group._items.forEach(i=>{-1===r.indexOf(i)&&r.push(i)}),!this._scrollableParentsResolved){const i=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(l=>l.getElementRef().nativeElement);this._dropListRef.withScrollableParents(i),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=as(this.sortingDisabled),t.autoScrollDisabled=as(this.autoScrollDisabled),t.autoScrollStep=Xw(this.autoScrollStep,2),t.connectedTo(r.filter(i=>i&&i!==this).map(i=>i._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()})}_assignDefaults(t){const{lockAxis:r,draggingDisabled:i,sortingDisabled:l,listAutoScrollDisabled:u,listOrientation:f}=t;this.disabled=i??!1,this.sortingDisabled=l??!1,this.autoScrollDisabled=u??!1,this.orientation=f||"vertical",r&&(this.lockAxis=r)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}}return n._dropLists=[],n.\u0275fac=function(t){return new(t||n)(s.Y36(s.SBq),s.Y36(tO),s.Y36(s.sBO),s.Y36(ub),s.Y36(Va,8),s.Y36(nO,12),s.Y36(F2,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,r){2&t&&(s.uIk("id",r.id),s.ekj("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[s._Bn([{provide:nO,useValue:void 0},{provide:L2,useExisting:n}])]}),n})();const V2=new s.OlP("CdkDragHandle"),az=new s.OlP("CdkDragPlaceholder"),lz=new s.OlP("CdkDragPreview");let uz=(()=>{class n{constructor(t,r,i,l,u,f,_,C,I,A,V){this.element=t,this.dropContainer=r,this._ngZone=l,this._viewContainerRef=u,this._dir=_,this._changeDetectorRef=I,this._selfHandle=A,this._parentDrag=V,this._destroyed=new ct.x,this.started=new s.vpe,this.released=new s.vpe,this.ended=new s.vpe,this.entered=new s.vpe,this.exited=new s.vpe,this.dropped=new s.vpe,this.moved=new Mn.y($=>{const K=this._dragRef.moved.pipe((0,We.U)(we=>({source:this,pointerPosition:we.pointerPosition,event:we.event,delta:we.delta,distance:we.distance}))).subscribe($);return()=>{K.unsubscribe()}}),this._dragRef=C.createDrag(t,{dragStartThreshold:f&&null!=f.dragStartThreshold?f.dragStartThreshold:5,pointerDirectionChangeThreshold:f&&null!=f.pointerDirectionChangeThreshold?f.pointerDirectionChangeThreshold:5,zIndex:f?.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),f&&this._assignDefaults(f),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=as(t),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(W(1),Qe(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=n._dragInstances.indexOf(this);t>-1&&n._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let r=t;this.rootElementSelector&&(r=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):Sr(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const r=this._dir,i=this.dragStartDelay,l=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,u=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof i&&i?i:Xw(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(l).withPreviewTemplate(u).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(W(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let r=this.element.nativeElement.parentElement;for(;r;){if(r.classList.contains("cdk-drag")){t.withParent(n._dragInstances.find(i=>i.element.nativeElement===r)?._dragRef||null);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){const{lockAxis:r,dragStartDelay:i,constrainPosition:l,previewClass:u,boundaryElement:f,draggingDisabled:_,rootElementSelector:C,previewContainer:I}=t;this.disabled=_??!1,this.dragStartDelay=i||0,r&&(this.lockAxis=r),l&&(this.constrainPosition=l),u&&(this.previewClass=u),f&&(this.boundaryElement=f),C&&(this.rootElementSelector=C),I&&(this.previewContainer=I)}_setupHandlesListener(){this._handles.changes.pipe(er(this._handles),(0,hn.b)(t=>{const r=t.filter(i=>i._parentDrag===this).map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),mr(t=>(0,ja.T)(...t.map(r=>r._stateChanges.pipe(er(r))))),Qe(this._destroyed)).subscribe(t=>{const r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}}return n._dragInstances=[],n.\u0275fac=function(t){return new(t||n)(s.Y36(s.SBq),s.Y36(L2,12),s.Y36(se),s.Y36(s.R0b),s.Y36(s.s_b),s.Y36(F2,8),s.Y36(Va,8),s.Y36(tO),s.Y36(s.sBO),s.Y36(V2,10),s.Y36(N2,12))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkDrag",""]],contentQueries:function(t,r,i){if(1&t&&(s.Suo(i,lz,5),s.Suo(i,az,5),s.Suo(i,V2,5)),2&t){let l;s.iGM(l=s.CRH())&&(r._previewTemplate=l.first),s.iGM(l=s.CRH())&&(r._placeholderTemplate=l.first),s.iGM(l=s.CRH())&&(r._handles=l)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,r){2&t&&s.ekj("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[s._Bn([{provide:N2,useExisting:n}]),s.TTD]}),n})(),dz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[tO],imports:[G_]}),n})();function hz(n,e){1&n&&(s.TgZ(0,"div",12)(1,"span",13),s._uU(2,"Please check yours task title field"),s.qZA()())}function fz(n,e){1&n&&(s.TgZ(0,"div",12)(1,"span",13),s._uU(2,"Please check yours description field"),s.qZA()())}let pz=(()=>{class n{constructor(t,r){this.fb=t,this.dialogRef=r,this.taskEmitter=new s.vpe,this.users=[]}ngOnInit(){this.addProjectTaskForm=this.fb.group({title:["",[an.required]],description:["",[an.required]],stage:"toDo",score:0})}get title(){return this.addProjectTaskForm.get("title")}get description(){return this.addProjectTaskForm.get("description")}onSubmit(){this.addProjectTaskForm.valid&&this.dialogRef.close(this.addProjectTaskForm.value)}closeDialog(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(gu),s.Y36(go))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-add-project-task"]],outputs:{taskEmitter:"taskEmitter"},decls:19,vars:3,consts:[[1,"content-form"],["id","project-task-form",3,"formGroup","ngSubmit"],["for","title"],["type","text","title","titleOfTask","id","title","formControlName","title","placeholder","Some title of task "],["class","invalid-feedback",4,"ngIf"],["for","description"],["id","description","cols","30","rows","10","formControlName","description","placeholder","description exp. its always good to take brake, sometime 5 minuts can recharge battery ;) "],[1,"content-form-buttons"],["type","submit",1,"btn"],[1,"uil","uil-save"],[1,"btn",3,"click"],[1,"uil","uil-cancel"],[1,"invalid-feedback"],[1,"waring"]],template:function(t,r){1&t&&(s.TgZ(0,"h2"),s._uU(1,"Add new task"),s.qZA(),s.TgZ(2,"div",0)(3,"form",1),s.NdJ("ngSubmit",function(){return r.onSubmit()}),s.TgZ(4,"label",2),s._uU(5,"title of task"),s.qZA(),s._UZ(6,"input",3),s.YNc(7,hz,3,0,"div",4),s.TgZ(8,"label",5),s._uU(9,"description of task"),s.qZA(),s._UZ(10,"textarea",6),s.YNc(11,fz,3,0,"div",4),s.TgZ(12,"div",7)(13,"button",8),s._uU(14," Save "),s._UZ(15,"i",9),s.qZA(),s.TgZ(16,"button",10),s.NdJ("click",function(){return r.closeDialog()}),s._uU(17," Cancel "),s._UZ(18,"i",11),s.qZA()()()()),2&t&&(s.xp6(3),s.Q6J("formGroup",r.addProjectTaskForm),s.xp6(4),s.Q6J("ngIf",(null==r.title||null==r.title.errors?null:r.title.errors.required)&&(null==r.title?null:r.title.touched)),s.xp6(4),s.Q6J("ngIf",(null==r.description||null==r.description.errors?null:r.description.errors.required)&&(null==r.description?null:r.description.touched)))},dependencies:[Zi,pi,Hi,$i,aa,sl,Zt],styles:["[_nghost-%COMP%]{display:block;background:var(--bg01);border:1px solid var(--green);border-radius:24px;min-width:50vw;padding:30px;color:var(--text02);overflow-y:auto}.content-form[_ngcontent-%COMP%]{padding:20px;max-height:90vh}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px;font-weight:500}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{color:var(--text02);width:100%;background-color:var(--bg01);padding:10px}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:30px}.content-form-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}"]}),n})();const gz=["*"];let rO=(()=>{class n{constructor(t,r){this.dialogRef=t,this.data=r}approveMoveToTrash(){this.dialogRef.close(!0)}cancelTrash(){this.dialogRef.close(!1)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(go),s.Y36(ic))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-alert-dialog"]],ngContentSelectors:gz,decls:17,vars:1,consts:[[1,"alert"],[1,"alert-header"],[1,"alert-header-icon"],[1,"uil","uil-exclamation-octagon"],[1,"alert-header-title"],[1,"alert-buttons"],[1,"btn","waring",3,"click"],[1,"btn",3,"click"]],template:function(t,r){1&t&&(s.F$t(),s.TgZ(0,"div",0)(1,"div",1)(2,"div",2),s._UZ(3,"hr")(4,"i",3)(5,"hr"),s.qZA(),s.TgZ(6,"div",4),s.Hsn(7),s._uU(8," Are you sure you want to "),s.TgZ(9,"b"),s._uU(10,"remove"),s.qZA(),s._uU(11),s.qZA()(),s.TgZ(12,"div",5)(13,"button",6),s.NdJ("click",function(){return r.approveMoveToTrash()}),s._uU(14," Yes i'am sure "),s.qZA(),s.TgZ(15,"button",7),s.NdJ("click",function(){return r.cancelTrash()}),s._uU(16,"Cancel"),s.qZA()()()),2&t&&(s.xp6(11),s.hij(" this ",r.data.type,"? "))},styles:["[_nghost-%COMP%]{display:block;background:var(--bg01);border-radius:25px;min-width:25vw;padding:30px;color:var(--text02);overflow-y:auto}.alert[_ngcontent-%COMP%]{border-radius:25px;min-width:400px;border-color:10px solid var(--green);background-color:var(--bg01);color:var(--text02);display:flex;flex-direction:column;gap:10px;padding:10px;justify-content:center;align-items:center}.alert[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{background-color:red}.alert-header[_ngcontent-%COMP%]{width:100%}.alert-header-title[_ngcontent-%COMP%]{text-align:center}.alert-header-icon[_ngcontent-%COMP%]{font-size:4em;text-align:center}.alert-header-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:red}.alert-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px;padding:10px 0}.alert-buttons[_ngcontent-%COMP%]   .waring[_ngcontent-%COMP%]{border-color:red}.alert-buttons[_ngcontent-%COMP%]   .waring[_ngcontent-%COMP%]:hover{background-color:red;color:var(--text02);border-color:var(--white)}"]}),n})();function mz(n,e){1&n&&(s.TgZ(0,"span",17),s._UZ(1,"i",18),s.qZA()),2&n&&s.Q6J("title",e.$implicit)}function _z(n,e){1&n&&s._UZ(0,"span",22)}function yz(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",19),s.NdJ("cdkDropListDropped",function(i){s.CHM(t);const l=s.oxw();return s.KtG(l.drop(i))}),s.YNc(1,_z,1,0,"span",20),s._UZ(2,"i",21),s.qZA()}if(2&n){const t=s.oxw();s.Q6J("cdkDropListData",t.trash),s.xp6(1),s.Q6J("ngForOf",t.todo)}}function vz(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",23)(1,"div",24),s._uU(2),s.qZA(),s.TgZ(3,"span",25),s._uU(4),s.qZA(),s.TgZ(5,"div",26)(6,"div",27),s._uU(7),s.qZA(),s.TgZ(8,"div",28)(9,"button",29),s.NdJ("click",function(){const l=s.CHM(t).$implicit,u=s.oxw();return s.KtG(u.addScore(l,1))}),s._uU(10," Score"),s._UZ(11,"i",30),s.qZA(),s.TgZ(12,"button",29),s.NdJ("click",function(){const l=s.CHM(t).$implicit,u=s.oxw();return s.KtG(u.addScore(l,-1))}),s._uU(13," Score"),s._UZ(14,"i",31),s.qZA()()()()}if(2&n){const t=e.$implicit;s.xp6(2),s.Oqu(t.title),s.xp6(2),s.hij("score ",t.score,""),s.xp6(3),s.hij(" ",t.description," ")}}function Cz(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"button",32),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.openDialog())}),s._uU(1," Add "),s._UZ(2,"i",33),s.qZA()}}function wz(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",23)(1,"div",24),s._uU(2),s.qZA(),s.TgZ(3,"span",25),s._uU(4),s.qZA(),s.TgZ(5,"div",26)(6,"div",27),s._uU(7),s.qZA(),s.TgZ(8,"div",28)(9,"button",29),s.NdJ("click",function(){const l=s.CHM(t).$implicit,u=s.oxw();return s.KtG(u.addScore(l,1))}),s._uU(10," Score"),s._UZ(11,"i",30),s.qZA(),s.TgZ(12,"button",29),s.NdJ("click",function(){const l=s.CHM(t).$implicit,u=s.oxw();return s.KtG(u.addScore(l,-1))}),s._uU(13," Score"),s._UZ(14,"i",31),s.qZA()()()()}if(2&n){const t=e.$implicit;s.xp6(2),s.Oqu(t.title),s.xp6(2),s.hij("score ",t.score,""),s.xp6(3),s.hij(" ",t.description," ")}}function bz(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",23)(1,"div",24),s._uU(2),s.qZA(),s.TgZ(3,"span",25),s._uU(4),s.qZA(),s.TgZ(5,"div",26)(6,"div",27),s._uU(7),s.qZA(),s.TgZ(8,"div",28)(9,"button",29),s.NdJ("click",function(){const l=s.CHM(t).$implicit,u=s.oxw();return s.KtG(u.addScore(l,1))}),s._uU(10," Score"),s._UZ(11,"i",30),s.qZA(),s.TgZ(12,"button",29),s.NdJ("click",function(){const l=s.CHM(t).$implicit,u=s.oxw();return s.KtG(u.addScore(l,-1))}),s._uU(13," Score"),s._UZ(14,"i",31),s.qZA()()()()}if(2&n){const t=e.$implicit;s.xp6(2),s.Oqu(t.title),s.xp6(2),s.hij("score ",t.score,""),s.xp6(3),s.hij(" ",t.description," ")}}function Dz(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",23)(1,"div",24),s._uU(2),s.qZA(),s.TgZ(3,"span",25),s._uU(4),s.qZA(),s.TgZ(5,"div",26)(6,"div",27),s._uU(7),s.qZA(),s.TgZ(8,"div",28)(9,"button",29),s.NdJ("click",function(){const l=s.CHM(t).$implicit,u=s.oxw();return s.KtG(u.addScore(l,1))}),s._uU(10," Score"),s._UZ(11,"i",30),s.qZA(),s.TgZ(12,"button",29),s.NdJ("click",function(){const l=s.CHM(t).$implicit,u=s.oxw();return s.KtG(u.addScore(l,-1))}),s._uU(13," Score"),s._UZ(14,"i",31),s.qZA()()()()}if(2&n){const t=e.$implicit;s.xp6(2),s.Oqu(t.title),s.xp6(2),s.hij("score ",t.score,""),s.xp6(3),s.hij(" ",t.description," ")}}let Ez=(()=>{class n{constructor(t,r){this.dialog=t,this.projectService=r,this.todo=[],this.inProgress=[],this.inReview=[],this.done=[],this.trash=[],this.projectName="",this.projectUsers=[]}get project(){return this._project}set project(t){this.projectName=t.name,this.projectUsers=t.people,this._project=t,this.todo=t.tasks.filter(r=>"toDo"==r.stage)||[],this.inProgress=t.tasks.filter(r=>"inProgress"==r.stage)||[],this.inReview=t.tasks.filter(r=>"inReview"==r.stage)||[],this.done=t.tasks.filter(r=>"done"==r.stage)||[]}openDialog(){this.dialog.open(pz).closed.subscribe(r=>{null!=r&&(this.todo.push(r),this.sendArray())})}drop(t){t.previousContainer===t.container?M2(t.container.data,t.previousIndex,t.currentIndex):(k2(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex),"trash"==t.container.id?this.dialog.open(rO,{data:{type:"task"}}).closed.subscribe(i=>{i||(k2(t.container.data,t.previousContainer.data,t.currentIndex,t.previousIndex),this.changeStage(t.previousContainer.data,t.previousContainer.id)),this.sendArray()}):(this.changeStage(t.container.data,t.container.id),this.sendArray()))}ngOnChanges(){}changeStage(t,r){t.map(i=>i.stage=r)}sendArray(){let t=[...this.todo,...this.inProgress,...this.inReview,...this.done];this.projectService.updateTasks(t,this._project.id)}addScore(t,r){t.score+=r,this.sendArray()}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(sc),s.Y36(d_))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-detail-view"]],inputs:{userRole$:"userRole$",project:"project"},features:[s.TTD],decls:37,vars:16,consts:[["cdkDropListGroup","",1,"detail"],[1,"detail-header"],[1,"detail-header-prime"],[1,"detail-header-prime-stage"],[1,"detail-header-subsection"],[1,"detail-header-people"],["class","user-avatar",3,"title",4,"ngFor","ngForOf"],["class","detail-header-trash","cdkDropList","","id","trash",3,"cdkDropListData","cdkDropListDropped",4,"ngIf"],[1,"detail-content"],[1,"column"],[1,"column-header"],["cdkDropList","","id","toDo",1,"cards",3,"cdkDropListData","cdkDropListDropped"],["class","card","cdkDrag","",4,"ngFor","ngForOf"],["class","btn btn-add",3,"click",4,"ngIf"],["cdkDropList","","id","inProgress",1,"cards",3,"cdkDropListData","cdkDropListDropped"],["cdkDropList","","id","inReview",1,"cards",3,"cdkDropListData","cdkDropListDropped"],["cdkDropList","","id","done",1,"cards",3,"cdkDropListData","cdkDropListDropped"],[1,"user-avatar",3,"title"],[1,"uil","uil-user"],["cdkDropList","","id","trash",1,"detail-header-trash",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","",4,"ngFor","ngForOf"],[1,"uil","uil-trash-alt"],["cdkDrag",""],["cdkDrag","",1,"card"],[1,"card-title"],[1,"card-score"],[1,"card-content"],[1,"card-content-discription"],[1,"card-content-level"],[1,"btn",3,"click"],[1,"uil","uil-angle-up"],[1,"uil","uil-angle-down"],[1,"btn","btn-add",3,"click"],[1,"uil","uil-book-medical"]],template:function(t,r){1&t&&(s.TgZ(0,"div",0)(1,"div",1)(2,"h2"),s._uU(3),s.qZA(),s.TgZ(4,"div",2),s._uU(5," Project in "),s.TgZ(6,"span",3),s._uU(7,"progress"),s.qZA()(),s.TgZ(8,"div",4)(9,"div")(10,"div",5),s.YNc(11,mz,2,1,"span",6),s.qZA()(),s.YNc(12,yz,3,2,"div",7),s.ALo(13,"async"),s.qZA()(),s.TgZ(14,"div",8)(15,"div",9)(16,"div",10),s._uU(17,"To do"),s.qZA(),s.TgZ(18,"div",11),s.NdJ("cdkDropListDropped",function(l){return r.drop(l)}),s.YNc(19,vz,15,3,"div",12),s.qZA(),s.YNc(20,Cz,3,0,"button",13),s.ALo(21,"async"),s.qZA(),s.TgZ(22,"div",9)(23,"div",10),s._uU(24,"In progress"),s.qZA(),s.TgZ(25,"div",14),s.NdJ("cdkDropListDropped",function(l){return r.drop(l)}),s.YNc(26,wz,15,3,"div",12),s.qZA()(),s.TgZ(27,"div",9)(28,"div",10),s._uU(29,"In review"),s.qZA(),s.TgZ(30,"div",15),s.NdJ("cdkDropListDropped",function(l){return r.drop(l)}),s.YNc(31,bz,15,3,"div",12),s.qZA()(),s.TgZ(32,"div",9)(33,"div",10),s._uU(34,"Done"),s.qZA(),s.TgZ(35,"div",16),s.NdJ("cdkDropListDropped",function(l){return r.drop(l)}),s.YNc(36,Dz,15,3,"div",12),s.qZA()()()()),2&t&&(s.xp6(3),s.Oqu(r.projectName),s.xp6(8),s.Q6J("ngForOf",r.projectUsers),s.xp6(1),s.Q6J("ngIf","Admin"==s.lcZ(13,12,r.userRole$)),s.xp6(6),s.Q6J("cdkDropListData",r.todo),s.xp6(1),s.Q6J("ngForOf",r.todo),s.xp6(1),s.Q6J("ngIf","Admin"==s.lcZ(21,14,r.userRole$)),s.xp6(5),s.Q6J("cdkDropListData",r.inProgress),s.xp6(1),s.Q6J("ngForOf",r.inProgress),s.xp6(4),s.Q6J("cdkDropListData",r.inReview),s.xp6(1),s.Q6J("ngForOf",r.inReview),s.xp6(4),s.Q6J("cdkDropListData",r.done),s.xp6(1),s.Q6J("ngForOf",r.done))},dependencies:[Er,Zt,oz,iz,uz,ha],styles:[".detail[_ngcontent-%COMP%]{padding:20px;border-radius:24px;max-height:80vh}.detail-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;letter-spacing:1px}.detail-header-prime[_ngcontent-%COMP%]{font-weight:500;color:var(--green)}.detail-header-prime-stage[_ngcontent-%COMP%]{color:var(--text02)}.detail-header-subsection[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.detail-header-trash[_ngcontent-%COMP%]{margin-left:auto;border-radius:24px;display:flex;align-items:center;justify-content:center;height:50px;width:150px;background-color:var(--bg01);border:1px solid var(--color01);font-size:2em;position:relative}.detail-header-trash[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute}.detail-header-people[_ngcontent-%COMP%]{margin-top:20px;display:flex;align-items:center}.detail-header-people[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{background-color:var(--bg01);border-radius:24px;padding:8px 12px;border:1px solid var(--color01);transition:all .4s ease;margin:5px;display:block;width:-moz-fit-content;width:fit-content;cursor:pointer}.detail-header-people[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]:hover{color:var(--green);background-color:var(--bg01);border-color:var(--green)}.detail-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);border-radius:24px}.detail-content[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{margin:5px;background-color:var(--bg01);padding:10px;border-radius:24px;min-width:25%}.detail-content[_ngcontent-%COMP%]   .column-header[_ngcontent-%COMP%]{font-weight:600;color:var(--green);margin:10px 0;font-size:1.2em}.detail-content[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px;max-height:40vh;overflow-y:auto;min-height:40vh}.detail-content[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:var(--bg01);padding:15px 10px;border-radius:24px;border:1px solid var(--grey-transparent);cursor:grab}.detail-content[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-weight:500;font-size:1em}.detail-content[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .card-score[_ngcontent-%COMP%]{margin-right:auto;color:var(--green)}.detail-content[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{margin-top:10px;display:flex;flex-direction:column;row-gap:10px}.detail-content[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .card-content-level[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;font-size:.9em;gap:5px;margin-top:10px}.detail-content[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{width:100%;padding:10px 0;margin-top:10px;font-weight:600;background-color:var(--bg01)}.cdk-drag-preview[_ngcontent-%COMP%]{background-color:var(--bg01);backdrop-filter:blur(11.5px);-webkit-backdrop-filter:blur(11.5px);padding:15px 10px;color:var(--text02);border-radius:24px;cursor:grab;border:1px solid var(--green);box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-preview[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:var(--bg01);padding:15px 10px;border-radius:24px;border:1px solid var(--color01);cursor:grab}.cdk-drag-preview[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-weight:500;font-size:1em}.cdk-drag-preview[_ngcontent-%COMP%]   .card-score[_ngcontent-%COMP%]{margin-right:auto;color:var(--green)}.cdk-drag-preview[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{margin-top:10px;display:flex;flex-direction:column;row-gap:10px}.cdk-drag-preview[_ngcontent-%COMP%]   .card-content-level[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;font-size:.9em;gap:5px;margin-top:10px}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.detail-header[_ngcontent-%COMP%]   .cdk-drop-list-dragging[_ngcontent-%COMP%]{background-color:red;border-color:red}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),n})(),iO=(()=>{class n{constructor(){this.icon="",this.typeOfData=""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-empty-data"]],inputs:{icon:"icon",typeOfData:"typeOfData"},decls:6,vars:4,consts:[[1,"empty-data"],[1,"empty-data-title"]],template:function(t,r){1&t&&(s.TgZ(0,"div",0),s._UZ(1,"i"),s.TgZ(2,"div",1),s._uU(3),s.TgZ(4,"p"),s._uU(5),s.qZA()()()),2&t&&(s.xp6(1),s.Tol(r.icon),s.xp6(2),s.hij(" No ",r.typeOfData," selected "),s.xp6(2),s.hij("Select ",r.typeOfData," to view details"))},styles:["[_nghost-%COMP%]   .empty-data[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-weight:500;font-size:24px;cursor:default}[_nghost-%COMP%]   .empty-data[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--green);background-color:var(--bg01);border-radius:25px;padding:10px 12px;margin-right:10px}[_nghost-%COMP%]   .empty-data-title[_ngcontent-%COMP%]{transition:all .4s ease}[_nghost-%COMP%]   .empty-data-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--text02)}[_nghost-%COMP%]   .empty-data-title[_ngcontent-%COMP%]:hover{color:var(--green)}"]}),n})();function Iz(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"button",7),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.openAddDialog())}),s._uU(1,"Add +"),s.qZA()}}function Sz(n,e){if(1&n){const t=s.EpF();s.ynx(0),s.TgZ(1,"button",7),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.ShowSearch())}),s._uU(2," Search "),s._UZ(3,"i",8),s.qZA(),s.BQk()}}function Tz(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"form")(1,"input",9),s.NdJ("ngModelChange",function(i){s.CHM(t);const l=s.oxw();return s.KtG(l.searchName=i)})("input",function(i){s.CHM(t);const l=s.oxw();return s.KtG(l.search(i))})("blur",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.ShowSearch())}),s.qZA()()}if(2&n){const t=s.oxw();s.xp6(1),s.Q6J("ngModel",t.searchName)}}function Az(n,e){if(1&n&&(s.ynx(0),s._UZ(1,"app-detail-view",10),s.BQk()),2&n){const t=s.oxw();s.xp6(1),s.Q6J("project",t.projectDetail)("userRole$",t.userRole$)}}function Mz(n,e){1&n&&s._UZ(0,"app-empty-data",11)}class p_{constructor(e,t,r){this.dialog=e,this.projectService=t,this.userService=r,this.projects=[],this.users=[],this.displaySearch=!0,this.displayedColumns=["name","description","level","time","viewMore"],this.columnDef=[{cdkColumnDef:"name",cdkColumnDefTitle:"Name"},{cdkColumnDef:"description",cdkColumnDefTitle:"Description"},{cdkColumnDef:"level",cdkColumnDefTitle:"Level"},{cdkColumnDef:"time",cdkColumnDefTitle:"Deadline"}],this.user$?.pipe((0,We.U)(i=>i.user.uid),(0,hn.b)(i=>{this.userRole$=this.userService.getUserRole(i)})).subscribe()}ngOnInit(){this.idProject&&this.onGetDetail(this.idProject)}openAddDialog(){this.dialog.open(qZ,{data:this.users}).closed.subscribe(t=>this.projectService.addProject(t))}onGetDetail(e){return this.projectService.getProject(e).subscribe(t=>{this.projectDetail=t,this.projectDetail.id=e})}search(e){this.projectService.setSearchWord(e.target.value)}ShowSearch(){this.displaySearch=!this.displaySearch}}p_.\u0275fac=function(e){return new(e||p_)(s.Y36(sc),s.Y36(d_),s.Y36(hu))},p_.\u0275cmp=s.Xpm({type:p_,selectors:[["app-card-projects"]],inputs:{projects:"projects",idProject:"idProject",users:"users"},decls:12,vars:13,consts:[[3,"title"],[1,"card-header-buttons"],["class","btn",3,"click",4,"ngIf"],[4,"ngIf","ngIfElse"],["searchDisplay",""],[3,"data","displayedColumns","columnDef","category","eventEmitt"],["emptyData",""],[1,"btn",3,"click"],[1,"uil","uil-search"],["type","text","name","task name","placeholder","Search name",3,"ngModel","ngModelChange","input","blur"],[3,"project","userRole$"],["icon","uil uil-apps","typeOfData","project"]],template:function(e,t){if(1&e&&(s.TgZ(0,"app-card",0)(1,"div",1),s.YNc(2,Iz,2,0,"button",2),s.ALo(3,"async"),s.YNc(4,Sz,4,0,"ng-container",3),s.YNc(5,Tz,2,1,"ng-template",null,4,s.W1O),s.qZA(),s.TgZ(7,"app-table",5),s.NdJ("eventEmitt",function(i){return t.onGetDetail(i)}),s.qZA()(),s.TgZ(8,"app-card",0),s.YNc(9,Az,2,2,"ng-container",3),s.YNc(10,Mz,1,0,"ng-template",null,6,s.W1O),s.qZA()),2&e){const r=s.MAs(6),i=s.MAs(11);s.Q6J("title","Projects"),s.xp6(2),s.Q6J("ngIf","Admin"==s.lcZ(3,11,t.userRole$)),s.xp6(2),s.Q6J("ngIf",t.displaySearch)("ngIfElse",r),s.xp6(3),s.Q6J("data",t.projects)("displayedColumns",t.displayedColumns)("columnDef",t.columnDef)("category","projects"),s.xp6(1),s.Q6J("title","Project"),s.xp6(1),s.Q6J("ngIf",t.projectDetail)("ngIfElse",i)}},dependencies:[Zt,Ez,Zi,pi,Hi,$i,Kd,fu,QE,mu,iO,ha],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:3fr 4fr;column-gap:1em}[_nghost-%COMP%]   .card-header-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end}.project-detail-empty[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-weight:500;font-size:24px;cursor:default}.project-detail-empty[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--green);background-color:var(--bg01);border-radius:24px;padding:10px 12px;margin-right:10px}.project-detail-empty[_ngcontent-%COMP%]   .project-detail-empty-title[_ngcontent-%COMP%]{transition:all .4s ease}.project-detail-empty[_ngcontent-%COMP%]   .project-detail-empty-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--text02)}.project-detail-empty[_ngcontent-%COMP%]   .project-detail-empty-title[_ngcontent-%COMP%]:hover{color:var(--green)}"]}),(0,Nr.gn)([N_(ol)],p_.prototype,"user$",void 0);let U2=(()=>{class n{constructor(t,r,i){this.projectService=t,this.usersService=r,this.route=i,this.projects=[],this.users=[],this.route.queryParams.subscribe(l=>{this.idItem=l.id})}ngOnInit(){this.projectService.projects$.subscribe(t=>this.projects=t),this.usersService.user$.subscribe(t=>this.users=t)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(d_),s.Y36(hu),s.Y36(Xo))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-projects"]],decls:4,vars:3,consts:[[1,"container"],[3,"projects","idProject","users"]],template:function(t,r){1&t&&(s.TgZ(0,"h1"),s._uU(1,"My Projects"),s.qZA(),s.TgZ(2,"div",0),s._UZ(3,"app-card-projects",1),s.qZA()),2&t&&(s.xp6(3),s.Q6J("projects",r.projects)("idProject",r.idItem)("users",r.users))},dependencies:[p_]}),n})();class g_{constructor(e){this.store=e,this.checked=!0}onToggle(){this.checked=!this.checked,this.store.dispatch(new Qw(this.checked))}}g_.\u0275fac=function(e){return new(e||g_)(s.Y36(Bc))},g_.\u0275cmp=s.Xpm({type:g_,selectors:[["app-light-dark-mode"]],decls:5,vars:3,consts:[[1,"toggle"],["id","status","type","checkbox","name","status",3,"checked","change"],["for","status"],["data-unchecked","Light","data-checked","Dark",1,"status-switch"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0)(1,"input",1),s.NdJ("change",function(){return t.onToggle()}),s.ALo(2,"async"),s.qZA(),s.TgZ(3,"label",2),s._UZ(4,"div",3),s.qZA()()),2&e&&(s.xp6(1),s.Q6J("checked",s.lcZ(2,1,t.darkMode$)))},dependencies:[ha],encapsulation:2}),(0,Nr.gn)([N_(Yo)],g_.prototype,"darkMode$",void 0);let kz=(()=>{class n{constructor(t){this.appService=t,this.fontSize=10,this.date=(new Date).toJSON().slice(0,4)}resizeFont(t){this.fontSize+=t,this.appService.onResizeFont(this.fontSize)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(F_))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-settings"]],decls:30,vars:2,consts:[[1,"container"],[1,"settings"],[1,"settings-buttons"],[1,"btn",3,"click"],[1,"btn","sm-radius"],["href","https://github.com/OXYAbc/CRM"],[1,"credits"],["href","https://sii.pl"]],template:function(t,r){1&t&&(s.TgZ(0,"h1"),s._uU(1,"My Settings"),s.qZA(),s.TgZ(2,"div",0)(3,"div",1)(4,"app-card")(5,"section")(6,"h2"),s._uU(7,"Chenge mode"),s.qZA(),s._UZ(8,"app-light-dark-mode"),s.qZA(),s.TgZ(9,"section")(10,"h2"),s._uU(11,"Chenge font size"),s.qZA(),s.TgZ(12,"div",2)(13,"button",3),s.NdJ("click",function(){return r.resizeFont(1)}),s._uU(14,"+"),s.qZA(),s.TgZ(15,"span",4),s._uU(16),s.qZA(),s.TgZ(17,"button",3),s.NdJ("click",function(){return r.resizeFont(-1)}),s._uU(18,"-"),s.qZA()()(),s.TgZ(19,"section")(20,"h2"),s._uU(21,"Repo to view on:"),s.qZA(),s.TgZ(22,"a",5),s._uU(23,"CRM by Pawe\u0142 Pyra"),s.qZA()()()()(),s.TgZ(24,"div",6)(25,"h2"),s._uU(26,"About"),s.qZA(),s._uU(27," Code by Pawe\u0142 Pyra , code review by Rafa\u0142 Kudlik "),s.TgZ(28,"a",7),s._uU(29),s.qZA()()),2&t&&(s.xp6(16),s.hij("Actual: ",r.fontSize,"px"),s.xp6(13),s.hij("SII ",r.date,""))},dependencies:[mu,g_],styles:[".settings[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:25px;padding:0 20px;border-radius:24px;width:35%}.settings[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{margin-top:12px;display:flex;justify-content:space-between}.settings-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.settings-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:4px 8px}.credits[_ngcontent-%COMP%]{position:absolute;color:var(--text02);bottom:15px;left:8rem}a[_ngcontent-%COMP%]{color:var(--green)}"]}),n})();function xz(n,e){1&n&&(s.TgZ(0,"div",19)(1,"span",20),s._uU(2,"Please check yours task name field"),s.qZA()())}function Oz(n,e){1&n&&(s.TgZ(0,"div",19)(1,"span",20),s._uU(2,"Please check yours description field"),s.qZA()())}function Rz(n,e){1&n&&(s.TgZ(0,"div",19)(1,"span",20),s._uU(2,"Please check yours level field"),s.qZA()())}function Pz(n,e){1&n&&(s.TgZ(0,"div",19)(1,"span",20),s._uU(2,"Please check yours deadline field"),s.qZA()())}let Nz=(()=>{class n{constructor(t,r,i){this.fb=t,this.dialogRef=r,this.uid=i}ngOnInit(){this.taskForm=this.fb.group({name:["",[an.required]],description:["",[an.required]],level:["",[an.required]],deadline:["",[an.required]],check:!1,comments:[[{user:null,comment:null}]],added:(new Date).toJSON().slice(0,10),userId:this.uid})}get name(){return this.taskForm.get("name")}get description(){return this.taskForm.get("description")}get level(){return this.taskForm.get("level")}get deadline(){return this.taskForm.get("deadline")}onSubmit(){this.taskForm.valid&&this.dialogRef.close(this.taskForm.value)}closeDialog(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(gu),s.Y36(go),s.Y36(ic))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-add-task"]],decls:33,vars:5,consts:[[1,"content-form"],["id","taskForm",3,"formGroup","ngSubmit"],["for","name"],["type","text","name","NameOfTask","id","name","formControlName","name"],["class","invalid-feedback",4,"ngIf"],["for","description"],["name","descriptionOfTask","id","description","cols","30","rows","10","formControlName","description"],["for","level"],["name","LevelOfTask","id","level","formControlName","level"],["value","low"],["value","Mid"],["value","Hard"],["for","deadline"],["type","date","name","DeadlineOfTasks","id","deadline","formControlName","deadline"],[1,"content-form-buttons"],["type","submit",1,"btn"],[1,"uil","uil-save"],[1,"btn",3,"click"],[1,"uil","uil-cancel"],[1,"invalid-feedback"],[1,"waring"]],template:function(t,r){1&t&&(s.TgZ(0,"h1"),s._uU(1,"Add new tasks"),s.qZA(),s.TgZ(2,"div",0)(3,"form",1),s.NdJ("ngSubmit",function(){return r.onSubmit()}),s.TgZ(4,"label",2),s._uU(5,"Name of Task"),s.qZA(),s._UZ(6,"input",3),s.YNc(7,xz,3,0,"div",4),s.TgZ(8,"label",5),s._uU(9,"description of Task"),s.qZA(),s._UZ(10,"textarea",6),s.YNc(11,Oz,3,0,"div",4),s.TgZ(12,"label",7),s._uU(13,"Level od Task"),s.qZA(),s.TgZ(14,"select",8)(15,"option",9),s._uU(16,"Low"),s.qZA(),s.TgZ(17,"option",10),s._uU(18,"Medium"),s.qZA(),s.TgZ(19,"option",11),s._uU(20,"Hard"),s.qZA()(),s.YNc(21,Rz,3,0,"div",4),s.TgZ(22,"label",12),s._uU(23,"Deadline"),s.qZA(),s._UZ(24,"input",13),s.YNc(25,Pz,3,0,"div",4),s.TgZ(26,"div",14)(27,"button",15),s._uU(28," Save "),s._UZ(29,"i",16),s.qZA(),s.TgZ(30,"button",17),s.NdJ("click",function(){return r.closeDialog()}),s._uU(31," Cancel "),s._UZ(32,"i",18),s.qZA()()()()),2&t&&(s.xp6(3),s.Q6J("formGroup",r.taskForm),s.xp6(4),s.Q6J("ngIf",(null==r.name||null==r.name.errors?null:r.name.errors.required)&&(null==r.name?null:r.name.touched)),s.xp6(4),s.Q6J("ngIf",(null==r.description||null==r.description.errors?null:r.description.errors.required)&&(null==r.description?null:r.description.touched)),s.xp6(10),s.Q6J("ngIf",(null==r.level||null==r.level.errors?null:r.level.errors.required)&&(null==r.level?null:r.level.touched)),s.xp6(4),s.Q6J("ngIf",(null==r.deadline||null==r.deadline.errors?null:r.deadline.errors.required)&&(null==r.deadline?null:r.deadline.touched)))},dependencies:[Zi,fp,pp,pi,pu,Hi,$i,aa,sl,Zt],styles:["[_nghost-%COMP%]{display:block;background:var(--bg01);border:1px solid var(--green);border-radius:24px;min-width:50vw;padding:30px;color:var(--text02)}.content-form[_ngcontent-%COMP%]{padding:20px}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{color:var(--text02);width:100%;background-color:var(--bg01);padding:10px}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:30px}.content-form-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}"]}),n})();function Fz(n,e){1&n&&(s.TgZ(0,"div",9)(1,"span",10),s._uU(2,"Please check yours comment field"),s.qZA()())}let Lz=(()=>{class n{constructor(t,r){this.fb=t,this.dialogRef=r,this.userName="",this.form=new s.vpe}ngOnInit(){this.commentForm=this.fb.group({comment:["",an.required],user:this.userName})}get comment(){return this.commentForm.get("comment")}onSubmit(){this.commentForm.valid&&(this.form.emit(this.commentForm.value),this.commentForm.controls.comment.setValue(""))}closeDialog(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(gu),s.Y36(go))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-comment-form"]],inputs:{userName:"userName"},outputs:{form:"form"},decls:13,vars:2,consts:[[1,"content-form"],[3,"formGroup","ngSubmit"],["formControlName","comment","cols","50","rows","10","placeholder","Yours comment"],["class","invalid-feedback",4,"ngIf"],[1,"content-form-buttons"],["type","submit",1,"btn"],[1,"uil","uil-plus-circle"],[1,"btn",3,"click"],[1,"uil","uil-cancel"],[1,"invalid-feedback"],[1,"waring"]],template:function(t,r){1&t&&(s.TgZ(0,"h2"),s._uU(1,"Add New comment"),s.qZA(),s.TgZ(2,"div",0)(3,"form",1),s.NdJ("ngSubmit",function(){return r.onSubmit()}),s._UZ(4,"textarea",2),s.YNc(5,Fz,3,0,"div",3),s.TgZ(6,"div",4)(7,"button",5),s._uU(8," Add "),s._UZ(9,"i",6),s.qZA(),s.TgZ(10,"button",7),s.NdJ("click",function(){return r.closeDialog()}),s._uU(11," Cancel "),s._UZ(12,"i",8),s.qZA()()()()),2&t&&(s.xp6(3),s.Q6J("formGroup",r.commentForm),s.xp6(2),s.Q6J("ngIf",(null==r.comment||null==r.comment.errors?null:r.comment.errors.required)&&(null==r.comment?null:r.comment.touched)))},dependencies:[Zi,pi,Hi,$i,aa,sl,Zt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;row-gap:20px}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:20px}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background-color:var(--bg01)}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus-visible{border-color:var(--green)}.content-form-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}"]}),n})();function Vz(n,e){if(1&n&&(s.TgZ(0,"div",7)(1,"span",8),s._uU(2),s.qZA(),s.TgZ(3,"span",9),s._uU(4),s.qZA()()),2&n){const t=e.$implicit;s.xp6(2),s.hij("",t.user,": "),s.xp6(2),s.hij(" ",t.comment," ")}}function Uz(n,e){if(1&n&&(s.ynx(0),s.YNc(1,Vz,5,2,"div",6),s.BQk()),2&n){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.data.comments)}}function Bz(n,e){1&n&&(s.TgZ(0,"div",10),s._UZ(1,"i",11),s.TgZ(2,"div",12)(3,"h4"),s._uU(4,"This task has no comments yet"),s.qZA(),s.TgZ(5,"p"),s._uU(6,"Be first one"),s.qZA()()())}let jz=(()=>{class n{constructor(t,r){this.data=t,this.taskService=r,this.onsave=new s.vpe,t.comments=t.comments.filter(i=>null!=i.user)}onSave(t){this.onsave.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(ic),s.Y36(mp))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-comments"]],decls:7,vars:3,consts:[[1,"content"],[3,"userName","form"],[1,"comments-section"],[1,"comments-section-content"],[4,"ngIf","ngIfElse"],["noData",""],["class","comment",4,"ngFor","ngForOf"],[1,"comment"],[1,"comment-user"],[1,"comment-content"],[1,"comment-blank"],[1,"uil","uil-file-check-alt"],[1,"task-detail-empty-title"]],template:function(t,r){if(1&t&&(s.TgZ(0,"div",0)(1,"app-comment-form",1),s.NdJ("form",function(l){return r.onSave(l)}),s.qZA(),s.TgZ(2,"div",2)(3,"div",3),s.YNc(4,Uz,2,1,"ng-container",4),s.YNc(5,Bz,7,0,"ng-template",null,5,s.W1O),s.qZA()()()),2&t){const i=s.MAs(6);s.xp6(1),s.Q6J("userName",r.data.userName),s.xp6(3),s.Q6J("ngIf",r.data.comments.length>0)("ngIfElse",i)}},dependencies:[Lz,Er,Zt],styles:["[_nghost-%COMP%]{background-color:var(--white)}.content[_ngcontent-%COMP%]{flex-wrap:nowrap;display:flex;justify-content:space-between;gap:60px;align-items:center;color:var(--text02);padding:30px}.content[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]{display:flex;row-gap:10px;flex-direction:column;height:100%}.content[_ngcontent-%COMP%]   .comments-section-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:20px;overflow-y:auto;height:200px;padding:20px}.content[_ngcontent-%COMP%]   .comments-section-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--green)}.content[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]{background-color:var(--bg02);padding:10px 20px;border-radius:24px;max-width:450px;min-width:250px}.content[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-user[_ngcontent-%COMP%]{color:var(--green)}.content[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-left:1px solid var(--green);padding-left:10px;color:var(--text02);margin:5px 0}.content[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-blank[_ngcontent-%COMP%]{display:flex;margin:auto 0}.content[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-blank[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--green);background-color:var(--bg01);border-radius:24px;padding:10px 12px;margin-right:10px;font-size:1.4em}.content[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   .comment-blank[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text02)}"]}),n})();function Hz(n,e){1&n&&(s.TgZ(0,"div",19)(1,"span",20),s._uU(2,"Please check yours task name field"),s.qZA()())}function $z(n,e){1&n&&(s.TgZ(0,"div",19)(1,"span",20),s._uU(2,"Please check yours description field"),s.qZA()())}function Zz(n,e){1&n&&(s.TgZ(0,"div",19)(1,"span",20),s._uU(2,"Please check yours level field"),s.qZA()())}function zz(n,e){1&n&&(s.TgZ(0,"div",19)(1,"span",20),s._uU(2,"Please check yours deadline field"),s.qZA()())}let Gz=(()=>{class n{constructor(t,r,i){this.fb=t,this.dialogRef=r,this.data=i,this.task={...i}}ngOnInit(){this.taskFormEdit=this.fb.group({name:["",[an.required]],description:["",[an.required]],level:["",[an.required]],deadline:["",[an.required]],id:this.data.id})}get name(){return this.taskFormEdit.get("name")}get description(){return this.taskFormEdit.get("description")}get level(){return this.taskFormEdit.get("level")}get deadline(){return this.taskFormEdit.get("deadline")}onSubmit(){this.taskFormEdit.valid&&this.dialogRef.close(this.taskFormEdit.value)}closeDialog(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(gu),s.Y36(go),s.Y36(ic))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-edit-task"]],decls:33,vars:9,consts:[[1,"content-form"],[3,"formGroup","ngSubmit"],["for","name"],["type","text","name","NameOfTask","id","name","formControlName","name",3,"ngModel","ngModelChange"],["class","invalid-feedback",4,"ngIf"],["for","description"],["name","descriptionOfTask","id","description","cols","30","rows","10","formControlName","description",3,"ngModel","ngModelChange"],["for","Level"],["name","LevelOfTask","id","Level","formControlName","level",3,"ngModel","ngModelChange"],["value","low"],["value","Mid"],["value","Hard"],["for","deadline"],["type","date","name","DeadlineOfTasks","id","deadline","formControlName","deadline",3,"ngModel","ngModelChange"],[1,"content-form-buttons"],["type","submit",1,"btn"],[1,"uil","uil-save"],[1,"btn",3,"click"],[1,"uil","uil-cancel"],[1,"invalid-feedback"],[1,"waring"]],template:function(t,r){1&t&&(s.TgZ(0,"h1"),s._uU(1,"Edit tasks"),s.qZA(),s.TgZ(2,"div",0)(3,"form",1),s.NdJ("ngSubmit",function(){return r.onSubmit()}),s.TgZ(4,"label",2),s._uU(5,"Name of Task"),s.qZA(),s.TgZ(6,"input",3),s.NdJ("ngModelChange",function(l){return r.task.name=l}),s.qZA(),s.YNc(7,Hz,3,0,"div",4),s.TgZ(8,"label",5),s._uU(9,"description of Task"),s.qZA(),s.TgZ(10,"textarea",6),s.NdJ("ngModelChange",function(l){return r.task.description=l}),s.qZA(),s.YNc(11,$z,3,0,"div",4),s.TgZ(12,"label",7),s._uU(13,"Level od Task"),s.qZA(),s.TgZ(14,"select",8),s.NdJ("ngModelChange",function(l){return r.task.level=l}),s.TgZ(15,"option",9),s._uU(16,"Low"),s.qZA(),s.TgZ(17,"option",10),s._uU(18,"Medium"),s.qZA(),s.TgZ(19,"option",11),s._uU(20,"Hard"),s.qZA()(),s.YNc(21,Zz,3,0,"div",4),s.TgZ(22,"label",12),s._uU(23,"Deadline"),s.qZA(),s.TgZ(24,"input",13),s.NdJ("ngModelChange",function(l){return r.task.deadline=l}),s.qZA(),s.YNc(25,zz,3,0,"div",4),s.TgZ(26,"div",14)(27,"button",15),s._uU(28," Save "),s._UZ(29,"i",16),s.qZA(),s.TgZ(30,"button",17),s.NdJ("click",function(){return r.closeDialog()}),s._uU(31," Cancel "),s._UZ(32,"i",18),s.qZA()()()()),2&t&&(s.xp6(3),s.Q6J("formGroup",r.taskFormEdit),s.xp6(3),s.Q6J("ngModel",r.task.name),s.xp6(1),s.Q6J("ngIf",(null==r.name||null==r.name.errors?null:r.name.errors.required)&&(null==r.name?null:r.name.touched)),s.xp6(3),s.Q6J("ngModel",r.task.description),s.xp6(1),s.Q6J("ngIf",(null==r.description||null==r.description.errors?null:r.description.errors.required)&&(null==r.description?null:r.description.touched)),s.xp6(3),s.Q6J("ngModel",r.task.level),s.xp6(7),s.Q6J("ngIf",(null==r.level||null==r.level.errors?null:r.level.errors.required)&&(null==r.level?null:r.level.touched)),s.xp6(3),s.Q6J("ngModel",r.task.deadline),s.xp6(1),s.Q6J("ngIf",(null==r.deadline||null==r.deadline.errors?null:r.deadline.errors.required)&&(null==r.deadline?null:r.deadline.invalid)))},dependencies:[Zi,fp,pp,pi,pu,Hi,$i,aa,sl,Zt],styles:["[_nghost-%COMP%]{display:block;background:var(--bg01);border:1px solid var(--green);border-radius:24px;width:80vw;padding:30px;color:var(--text02)}.content-form[_ngcontent-%COMP%]{padding:20px}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{color:var(--text02);width:100%;background-color:var(--bg01);padding:10px}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:30px}.content-form-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}"]}),n})();function qz(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"button",8),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.checkTask())}),s._uU(1," Check "),s._UZ(2,"i",12),s.qZA()}}function Wz(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"button",8),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.uncheckTask())}),s._uU(1," uncheck "),s._UZ(2,"i",13),s.qZA()}}let Yz=(()=>{class n{constructor(t,r,i){this.dialog=t,this.taskService=r,this.loginService=i,this.userName="",this.loginService.getUser().pipe((0,We.U)(l=>l?.displayName)).subscribe(l=>this.userName=l)}onOpenCommnentsDialog(){const t=this.task?.id;this.dialog.open(jz,{data:{comments:this.task?.comments,itemID:t,userName:this.userName}}).componentInstance?.onsave.subscribe(i=>{null!=i&&(this.task?.comments.push(i),this.taskService.addComment(this.task?.comments,t))})}onOpenDialogEditTask(){this.dialog.open(Gz,{data:this.task}).closed.subscribe(r=>{null!=r&&this.taskService.editTask(r)})}checkTask(){this.task?this.taskService.checkTask(this.task.id):console.log("error check task :/")}uncheckTask(){this.task?this.taskService.uncheckTask(this.task.id):console.log("error check task :/")}deleteTask(){this.dialog.open(rO,{data:{type:"task"}}).closed.subscribe(r=>{r&&this.taskService.deleteTask(this.task.id)})}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(sc),s.Y36(mp),s.Y36(Si))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-detail-view"]],inputs:{task:"task"},decls:29,vars:8,consts:[[1,"detail"],[1,"detail-header"],[1,"detail-header-prime"],[1,"detail-discription"],[1,"detail-discription-content"],[1,"detail-discription-more"],[1,"detail-discription-more-time"],[1,"detail-discription-more-buttons"],[1,"btn",3,"click"],["class","btn",3,"click",4,"ngIf"],[1,"uil","uil-edit-alt"],[1,"uil","uil-trash-alt"],[1,"uil","uil-check-circle"],[1,"uil","uil-times-circle"]],template:function(t,r){1&t&&(s.TgZ(0,"div",0)(1,"div",1)(2,"h2"),s._uU(3),s.qZA(),s.TgZ(4,"div",2),s._uU(5),s.qZA()(),s.TgZ(6,"div",3)(7,"div",4)(8,"p"),s._uU(9),s.qZA()(),s._UZ(10,"hr"),s.TgZ(11,"div",5)(12,"div",6)(13,"h3"),s._uU(14,"Time to end"),s.qZA(),s.TgZ(15,"p"),s._uU(16),s.ALo(17,"date"),s.qZA()(),s.TgZ(18,"div",7)(19,"button",8),s.NdJ("click",function(){return r.onOpenCommnentsDialog()}),s._uU(20,"View Comments"),s.qZA(),s.YNc(21,qz,3,0,"button",9),s.YNc(22,Wz,3,0,"button",9),s.TgZ(23,"button",8),s.NdJ("click",function(){return r.onOpenDialogEditTask()}),s._uU(24," Edit Task "),s._UZ(25,"i",10),s.qZA(),s.TgZ(26,"button",8),s.NdJ("click",function(){return r.deleteTask()}),s._uU(27,"Delete task "),s._UZ(28,"i",11),s.qZA()()()()()),2&t&&(s.xp6(3),s.Oqu(null==r.task?null:r.task.name),s.xp6(2),s.hij("Level: ",null==r.task?null:r.task.level,""),s.xp6(4),s.hij(" ",null==r.task?null:r.task.description," "),s.xp6(7),s.Oqu(s.lcZ(17,6,null==r.task?null:r.task.deadline)),s.xp6(5),s.Q6J("ngIf",1!=(null==r.task?null:r.task.check)),s.xp6(1),s.Q6J("ngIf",1==(null==r.task?null:r.task.check)))},dependencies:[Zt,hc],styles:[".detail[_ngcontent-%COMP%]{padding:0 20px}.detail-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;letter-spacing:1px}.detail-header-prime[_ngcontent-%COMP%]{font-weight:500;color:var(--green)}.detail-discription[_ngcontent-%COMP%]{background-color:var(--bg01);padding:2em;margin-top:1em;border-radius:24px}.detail-discription[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--green)}.detail-discription-content[_ngcontent-%COMP%]{height:10em;overflow-y:auto;padding-right:20px}.detail-discription-more[_ngcontent-%COMP%]{padding:20px 0;display:flex;justify-content:space-between;align-items:center}.detail-discription-more-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;flex-wrap:wrap;gap:1em}"]}),n})();function Kz(n,e){if(1&n){const t=s.EpF();s.ynx(0),s.TgZ(1,"button",3),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.ShowSearch())}),s._uU(2," Search "),s._UZ(3,"i",8),s.qZA(),s.BQk()}}function Jz(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"form")(1,"input",9),s.NdJ("ngModelChange",function(i){s.CHM(t);const l=s.oxw();return s.KtG(l.searchName=i)})("input",function(i){s.CHM(t);const l=s.oxw();return s.KtG(l.search(i))})("blur",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.ShowSearch())}),s.qZA()()}if(2&n){const t=s.oxw();s.xp6(1),s.Q6J("ngModel",t.searchName)}}function Qz(n,e){if(1&n&&(s.ynx(0),s.TgZ(1,"div",10),s._UZ(2,"app-detail-view",11),s.qZA(),s.BQk()),2&n){const t=s.oxw();s.xp6(2),s.Q6J("task",t.task)}}function Xz(n,e){1&n&&s._UZ(0,"app-empty-data",12)}let eG=(()=>{class n{constructor(t,r){this.dialog=t,this.tasksService=r,this.tasks=[],this.displayedColumns=["id","name","description","deadline","level","viewMore"],this.columnDef=[{cdkColumnDef:"id",cdkColumnDefTitle:"id"},{cdkColumnDef:"name",cdkColumnDefTitle:"Name"},{cdkColumnDef:"description",cdkColumnDefTitle:"Description"},{cdkColumnDef:"deadline",cdkColumnDefTitle:"Deadline"},{cdkColumnDef:"level",cdkColumnDefTitle:"Level"}],this.displayData=!1,this.displaySearch=!0,this.isLoading=!0}ngOnInit(){this.idTask&&this.onGetDetail(this.idTask)}openDialog(){this.dialog.open(Nz,{data:this.tasksService.userId}).closed.subscribe(r=>{null!=r&&this.tasksService.addTask(r)})}ShowSearch(){this.displaySearch=!this.displaySearch}onGetDetail(t){return this.tasksService.getTask(t).subscribe(r=>{this.task=r,this.task.id=t})}search(t){this.tasksService.setSearchWord(t.target.value)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(sc),s.Y36(mp))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-card-tasks"]],inputs:{tasks:"tasks",idTask:"idTask"},decls:13,vars:10,consts:[[3,"title"],[1,"card-header"],[1,"card-header-buttons"],[1,"btn",3,"click"],[4,"ngIf","ngIfElse"],["searchDisplay",""],[3,"data","displayedColumns","columnDef","category","eventEmitt"],["emptyData",""],[1,"uil","uil-search"],["type","text","name","task name","placeholder","Search name",3,"ngModel","ngModelChange","input","blur"],[1,"task-detail"],[3,"task"],["icon","uil uil-apps","typeOfData","task"]],template:function(t,r){if(1&t&&(s.TgZ(0,"app-card",0)(1,"div",1)(2,"div",2)(3,"button",3),s.NdJ("click",function(){return r.openDialog()}),s._uU(4,"Add +"),s.qZA(),s.YNc(5,Kz,4,0,"ng-container",4),s.YNc(6,Jz,2,1,"ng-template",null,5,s.W1O),s.qZA()(),s.TgZ(8,"app-table",6),s.NdJ("eventEmitt",function(l){return r.onGetDetail(l)}),s.qZA()(),s.TgZ(9,"app-card",0),s.YNc(10,Qz,3,1,"ng-container",4),s.YNc(11,Xz,1,0,"ng-template",null,7,s.W1O),s.qZA()),2&t){const i=s.MAs(7),l=s.MAs(12);s.Q6J("title","Tasks"),s.xp6(5),s.Q6J("ngIf",r.displaySearch)("ngIfElse",i),s.xp6(3),s.Q6J("data",r.tasks)("displayedColumns",r.displayedColumns)("columnDef",r.columnDef)("category","tasks"),s.xp6(1),s.Q6J("title","Task"),s.xp6(1),s.Q6J("ngIf",r.task)("ngIfElse",l)}},dependencies:[Yz,Zt,Zi,pi,Hi,$i,Kd,fu,QE,mu,iO],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:4fr 3fr;column-gap:1em}[_nghost-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end}[_nghost-%COMP%]   .card-header-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}[_nghost-%COMP%]   .task-detail-empty[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-weight:500;font-size:24px;cursor:default}[_nghost-%COMP%]   .task-detail-empty[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--green);background-color:var(--bg01);border-radius:24px;padding:10px 12px;margin-right:10px}[_nghost-%COMP%]   .task-detail-empty[_ngcontent-%COMP%]   .task-detail-empty-title[_ngcontent-%COMP%]{transition:all .4s ease}[_nghost-%COMP%]   .task-detail-empty[_ngcontent-%COMP%]   .task-detail-empty-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--text02)}[_nghost-%COMP%]   .task-detail-empty[_ngcontent-%COMP%]   .task-detail-empty-title[_ngcontent-%COMP%]:hover{color:var(--green)}"]}),n})(),B2=(()=>{class n{constructor(t,r){this.tasksCardsService=t,this.route=r,this.tasks=[],this.route.queryParams.subscribe(i=>{this.idItem=i.id})}ngOnInit(){this.tasksCardsService.tasks$.subscribe(t=>{this.tasks=t})}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(mp),s.Y36(Xo))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-tasks"]],decls:4,vars:2,consts:[[1,"container"],[3,"tasks","idTask"]],template:function(t,r){1&t&&(s.TgZ(0,"h1"),s._uU(1,"My Tasks"),s.qZA(),s.TgZ(2,"div",0),s._UZ(3,"app-card-tasks",1),s.qZA()),2&t&&(s.xp6(3),s.Q6J("tasks",r.tasks)("idTask",r.idItem))},dependencies:[eG]}),n})();function tG(n,e){1&n&&(s.TgZ(0,"div",17)(1,"span",18),s._uU(2,"Please check yours organization name field"),s.qZA()())}function nG(n,e){1&n&&(s.TgZ(0,"div",17)(1,"span",18),s._uU(2,"Please check yours description field"),s.qZA()())}function rG(n,e){1&n&&(s.TgZ(0,"div",17)(1,"span",18),s._uU(2,"Please check yours type field"),s.qZA()())}let iG=(()=>{class n{constructor(t,r,i){this.fb=t,this.dialogRef=r,this.users=i,this.usersArray=[],this.organizationForm=this.fb.group({name:["",[an.required]],description:["",[an.required]],sector:["",[an.required]]})}resetForm(){this.organizationForm.reset()}get name(){return this.organizationForm.get("name")}get description(){return this.organizationForm.get("description")}get sector(){return this.organizationForm.get("sector")}onSubmit(){this.organizationForm.valid&&(this.dialogRef.close(this.organizationForm.value),this.resetForm())}closeDialog(){this.dialogRef.close(),this.resetForm()}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(gu),s.Y36(go),s.Y36(ic))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-create-organization"]],decls:29,vars:4,consts:[[1,"content-form"],["id","organizationForm",3,"formGroup","ngSubmit"],["for","name"],["type","text","name","NameOfTask","id","name","formControlName","name","placeholder","Name of project "],["class","invalid-feedback",4,"ngIf"],["for","description"],["id","description","cols","30","rows","10","formControlName","description","placeholder","description exp. its always good to take brake, sometime 5 minuts can recharge battery ;) "],["for","sector"],["name","sector","id","sector","formControlName","sector"],["value","IT","selected","selected"],["value","Medicine"],["value","Other"],[1,"content-form-buttons"],["type","submit",1,"btn"],[1,"uil","uil-create-dashboard"],[1,"btn",3,"click"],[1,"uil","uil-cancel"],[1,"invalid-feedback"],[1,"waring"]],template:function(t,r){1&t&&(s.TgZ(0,"div",0)(1,"h2"),s._uU(2,"Creat new organization"),s.qZA(),s.TgZ(3,"form",1),s.NdJ("ngSubmit",function(){return r.onSubmit()}),s.TgZ(4,"label",2),s._uU(5,"Name of organization"),s.qZA(),s._UZ(6,"input",3),s.YNc(7,tG,3,0,"div",4),s.TgZ(8,"label",5),s._uU(9,"Description of organization"),s.qZA(),s._UZ(10,"textarea",6),s.YNc(11,nG,3,0,"div",4),s.TgZ(12,"label",7),s._uU(13,"Sector of organization"),s.qZA(),s.TgZ(14,"select",8)(15,"option",9),s._uU(16,"IT"),s.qZA(),s.TgZ(17,"option",10),s._uU(18,"Medicine"),s.qZA(),s.TgZ(19,"option",11),s._uU(20,"Other"),s.qZA()(),s.YNc(21,rG,3,0,"div",4),s.TgZ(22,"div",12)(23,"button",13),s._uU(24," Create Organization "),s._UZ(25,"i",14),s.qZA(),s.TgZ(26,"button",15),s.NdJ("click",function(){return r.closeDialog()}),s._uU(27," Cancel "),s._UZ(28,"i",16),s.qZA()()()()),2&t&&(s.xp6(3),s.Q6J("formGroup",r.organizationForm),s.xp6(4),s.Q6J("ngIf",(null==r.name||null==r.name.errors?null:r.name.errors.required)&&(null==r.name?null:r.name.touched)),s.xp6(4),s.Q6J("ngIf",(null==r.description||null==r.description.errors?null:r.description.errors.required)&&(null==r.description?null:r.description.touched)),s.xp6(10),s.Q6J("ngIf",(null==r.sector||null==r.sector.errors?null:r.sector.errors.required)&&(null==r.sector?null:r.sector.touched)))},dependencies:[Zt,Zi,fp,pp,pi,pu,Hi,$i,aa,sl],styles:["[_nghost-%COMP%]{display:block;background:var(--bg01);border:1px solid var(--green);border-radius:24px;min-width:50vw;padding:30px;color:var(--text02);overflow-y:auto}.content-form[_ngcontent-%COMP%]{padding:20px;max-height:90vh;overflow-y:auto}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px;font-weight:500}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{color:var(--text02);width:100%;background-color:var(--bg01);padding:10px}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:30px}.content-form-buttons[_ngcontent-%COMP%]{display:flex;gap:1em}.users[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);background-color:var(--bg02);border-radius:24px;gap:20px;max-height:50%;overflow-y:auto;padding:20px}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{min-width:25%;padding:20px 0;border-radius:24px;background-color:var(--bg01);border:1px solid var(--color01);transition:all .4s ease}.users[_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;position:relative}.users[_ngcontent-%COMP%]   .user-card-avatar[_ngcontent-%COMP%]{background-color:var(--bg02);border-radius:24px;padding:6px 9px;font-size:2em;transition:all .4s ease;margin:5px}.users[_ngcontent-%COMP%]   .user-card-title[_ngcontent-%COMP%]{font-size:1.2em}.users[_ngcontent-%COMP%]   .user-card-subtitle[_ngcontent-%COMP%]{font-size:1em}.users[_ngcontent-%COMP%]   .user-card-description[_ngcontent-%COMP%]{font-size:.8em;color:var(--green)}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]:hover{background-color:var(--bg02)}"]}),n})();function sG(n,e){1&n&&s.GkF(0)}function oG(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",2)(1,"app-card",3)(2,"div",4),s._uU(3," Enter your organization code "),s.TgZ(4,"form",5),s.NdJ("ngSubmit",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.onJoinOrganization())}),s.TgZ(5,"input",6),s.NdJ("ngModelChange",function(i){s.CHM(t);const l=s.oxw();return s.KtG(l.orgId=i)}),s.qZA(),s.TgZ(6,"button",7),s._uU(7,"Join"),s.qZA()()()(),s.TgZ(8,"app-card",3)(9,"div",4)(10,"p"),s._uU(11," You can also create your own organization, then invite your colleagues to it with the organization code "),s.qZA(),s.TgZ(12,"button",8),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.onCreateOrganization())}),s._uU(13,"Create organization"),s.qZA()()()()}if(2&n){const t=s.oxw();s.xp6(1),s.Q6J("title","Im in organization"),s.xp6(4),s.Q6J("ngModel",t.orgId),s.xp6(3),s.Q6J("title","Im not in organization")}}let j2=(()=>{class n{constructor(t,r,i,l){this.dialog=t,this.orgService=r,this.userService=i,this.route=l,this.organization=!1,this.orgId="",this.userID="",this.route.params.subscribe(u=>this.userID=u.id),this.userService.getUser(this.userID).subscribe(u=>{u.organization&&this.orgService.setOrganization(u.organization)})}onCreateOrganization(){this.dialog.open(iG).closed.subscribe(r=>{r&&this.orgService.createOgranization(r,this.userID)})}onJoinOrganization(){this.orgService.joinToOrganization(this.orgId,this.userID)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(sc),s.Y36(_u),s.Y36(hu),s.Y36(Xo))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-organization"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noOrganization",""],[1,"container"],[3,"title"],[1,"card-content"],[3,"ngSubmit"],["type","text","placeholder","organization code","name","orgId","required","",3,"ngModel","ngModelChange"],["type","submit",1,"btn"],[1,"btn",3,"click"]],template:function(t,r){if(1&t&&(s.YNc(0,sG,1,0,"ng-container",0),s.YNc(1,oG,14,3,"ng-template",null,1,s.W1O)),2&t){const i=s.MAs(2);s.Q6J("ngIf",r.organization)("ngIfElse",i)}},dependencies:[mu,Zt,Zi,pi,Hi,$i,Jd,Kd,fu],styles:["[_nghost-%COMP%]{height:100vh;align-items:center;display:flex;justify-content:center}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;width:80vw;height:40vh;align-items:center;flex-wrap:nowrap;justify-content:space-around}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:350px;height:100px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:1em}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], [_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}"]}),n})();function aG(n,e){1&n&&(s.TgZ(0,"div",27)(1,"span",28),s._uU(2,"Please check yours Name field"),s.qZA()())}function lG(n,e){1&n&&(s.TgZ(0,"div",27)(1,"span",28),s._uU(2,"Please check yours surname field"),s.qZA()())}function cG(n,e){1&n&&(s.TgZ(0,"div",27)(1,"span",28),s._uU(2,"Please check yours Position field"),s.qZA()())}function uG(n,e){1&n&&(s.TgZ(0,"div",27)(1,"span",28),s._uU(2,"Please check yours departament option"),s.qZA()())}function dG(n,e){1&n&&(s.TgZ(0,"div",27)(1,"span",28),s._uU(2,"Please check yours task Phone Number field"),s.qZA()())}function hG(n,e){1&n&&(s.TgZ(0,"div",27)(1,"span",28),s._uU(2,"Please check yours task emial field"),s.qZA()())}function fG(n,e){if(1&n&&(s.TgZ(0,"option",29),s._uU(1),s.qZA()),2&n){const t=e.$implicit;s.Q6J("value",t.firstName+" "+t.lastName),s.xp6(1),s.AsE(" ",t.firstName," ",t.lastName," ")}}let pG=(()=>{class n{constructor(t,r,i){this.fb=t,this.dialogRef=r,this.users=i,this.users=this.users.filter(l=>"Line Manager"==l.position)}ngOnInit(){this.userForm=this.fb.group({firstName:["",[an.required]],lastName:["",[an.required]],phoneNumber:["",[an.required]],departament:["",[an.required]],emailAddress:["",[an.required]],position:["",[an.required]],manager:["",[an.required]],score:0})}get firstName(){return this.userForm.get("firstName")}get lastName(){return this.userForm.get("lastName")}get phoneNumber(){return this.userForm.get("phoneNumber")}get departament(){return this.userForm.get("departament")}get emailAddress(){return this.userForm.get("emailAddress")}get position(){return this.userForm.get("position")}get manager(){return this.userForm.get("manager")}onSubmit(){this.userForm.valid&&this.dialogRef.close(this.userForm.value)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(gu),s.Y36(go),s.Y36(ic))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-add-user"]],decls:47,vars:8,consts:[[1,"content-form"],["id","userForm",3,"formGroup","ngSubmit"],["for","firstName"],["type","text","id","firstName","formControlName","firstName","required",""],["class","invalidfFeedback",4,"ngIf"],["for","lastName"],["type","text","id","lastName","formControlName","lastName","required",""],["for","position"],["type","text","id","position","formControlName","position","required",""],["for","departament"],["id","departament","formControlName","departament","required",""],["value","Digital"],["value","Support"],["value","HR"],["for","phoneNumber"],["type","tel","id","phoneNumber","formControlName","phoneNumber","required",""],["for","emailAddress"],["type","email","id","emailAddress","formControlName","emailAddress","required",""],["for","manager"],["formControlName","manager"],["disabled",""],["class","user-card",3,"value",4,"ngFor","ngForOf"],[1,"content-form-buttons"],["type","submit",1,"btn"],[1,"btn",3,"click"],[1,"uil","uil-cancel"],[1,"dialog-ilustration"],[1,"invalidfFeedback"],[1,"waring"],[1,"user-card",3,"value"]],template:function(t,r){1&t&&(s.TgZ(0,"div",0)(1,"h2"),s._uU(2,"Add new User"),s.qZA(),s.TgZ(3,"form",1),s.NdJ("ngSubmit",function(){return r.onSubmit()}),s.TgZ(4,"label",2),s._uU(5,"Fistname"),s.qZA(),s._UZ(6,"input",3),s.YNc(7,aG,3,0,"div",4),s.TgZ(8,"label",5),s._uU(9,"Lastname"),s.qZA(),s._UZ(10,"input",6),s.YNc(11,lG,3,0,"div",4),s.TgZ(12,"label",7),s._uU(13,"Position"),s.qZA(),s._UZ(14,"input",8),s.YNc(15,cG,3,0,"div",4),s.TgZ(16,"label",9),s._uU(17,"Departament"),s.qZA(),s.TgZ(18,"select",10)(19,"option",11),s._uU(20,"Digital"),s.qZA(),s.TgZ(21,"option",12),s._uU(22,"Support"),s.qZA(),s.TgZ(23,"option",13),s._uU(24,"HR"),s.qZA()(),s.YNc(25,uG,3,0,"div",4),s.TgZ(26,"label",14),s._uU(27,"Number"),s.qZA(),s._UZ(28,"input",15),s.YNc(29,dG,3,0,"div",4),s.TgZ(30,"label",16),s._uU(31,"Email"),s.qZA(),s._UZ(32,"input",17),s.YNc(33,hG,3,0,"div",4),s.TgZ(34,"label",18),s._uU(35,"manager"),s.qZA(),s.TgZ(36,"select",19)(37,"option",20),s._uU(38,"--Please choose an option--"),s.qZA(),s.YNc(39,fG,2,3,"option",21),s.qZA(),s.TgZ(40,"div",22)(41,"button",23),s._uU(42,"Save"),s.qZA(),s.TgZ(43,"button",24),s.NdJ("click",function(){return r.dialogRef.close()}),s._uU(44," Cancel "),s._UZ(45,"i",25),s.qZA()()()(),s._UZ(46,"div",26)),2&t&&(s.xp6(3),s.Q6J("formGroup",r.userForm),s.xp6(4),s.Q6J("ngIf",(null==r.firstName||null==r.firstName.errors?null:r.firstName.errors.required)&&(null==r.firstName?null:r.firstName.touched)),s.xp6(4),s.Q6J("ngIf",(null==r.lastName||null==r.lastName.errors?null:r.lastName.errors.required)&&(null==r.lastName?null:r.lastName.touched)),s.xp6(4),s.Q6J("ngIf",(null==r.position||null==r.position.errors?null:r.position.errors.required)&&(null==r.position?null:r.position.touched)),s.xp6(10),s.Q6J("ngIf",(null==r.departament||null==r.departament.errors?null:r.departament.errors.required)&&(null==r.departament?null:r.departament.touched)),s.xp6(4),s.Q6J("ngIf",(null==r.phoneNumber||null==r.phoneNumber.errors?null:r.phoneNumber.errors.required)&&(null==r.phoneNumber?null:r.phoneNumber.touched)),s.xp6(4),s.Q6J("ngIf",(null==r.emailAddress||null==r.emailAddress.errors?null:r.emailAddress.errors.required)&&(null==r.emailAddress?null:r.emailAddress.touched)),s.xp6(6),s.Q6J("ngForOf",r.users))},dependencies:[Zi,fp,pp,pi,pu,Hi,$i,Jd,aa,sl,Er,Zt],styles:["[_nghost-%COMP%]{display:flex;background:var(--bg01);border:1px solid var(--green);border-radius:24px;width:80vw;padding:30px;color:var(--text02)}[_nghost-%COMP%]   .dialog-ilustration[_ngcontent-%COMP%]{width:50%;background-image:url(newUser.dd9ac0865dbbd43c.png);background-repeat:no-repeat;background-size:contain;background-position:center}.content-form[_ngcontent-%COMP%]{padding:20px;width:50%}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{color:var(--text02);width:100%;background-color:var(--bg01);padding:10px}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:30px}.content-form-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}"]}),n})();function gG(n,e){1&n&&(s.TgZ(0,"div",26)(1,"span",27),s._uU(2,"Please check yours Name field"),s.qZA()())}function mG(n,e){1&n&&(s.TgZ(0,"div",26)(1,"span",27),s._uU(2,"Please check yours surname field"),s.qZA()())}function _G(n,e){1&n&&(s.TgZ(0,"div",26)(1,"span",27),s._uU(2,"Please check yours Position field"),s.qZA()())}function yG(n,e){1&n&&(s.TgZ(0,"div",26)(1,"span",27),s._uU(2,"Please check yours departament option"),s.qZA()())}function vG(n,e){1&n&&(s.TgZ(0,"div",26)(1,"span",27),s._uU(2,"Please check yours task Phone Number field"),s.qZA()())}function CG(n,e){1&n&&(s.TgZ(0,"div",26)(1,"span",27),s._uU(2,"Please check yours task emial field"),s.qZA()())}function wG(n,e){if(1&n&&(s.TgZ(0,"option",28),s._uU(1),s.qZA()),2&n){const t=e.$implicit;s.Q6J("value",t.firstName+" "+t.lastName),s.xp6(1),s.AsE(" ",t.firstName," ",t.lastName," ")}}let bG=(()=>{class n{constructor(t,r,i){this.fb=t,this.dialogRef=r,this.data=i,this.user={...i.user}}ngOnInit(){this.editUser=this.fb.group({firstName:["",[an.required]],lastName:["",[an.required]],phoneNumber:["",[an.required]],departament:["",[an.required]],emailAddress:["",[an.required]],position:["",[an.required]],manager:["",[an.required]],id:this.user.id})}get firstName(){return this.editUser.get("firstName")}get lastName(){return this.editUser.get("lastName")}get phoneNumber(){return this.editUser.get("phoneNumber")}get departament(){return this.editUser.get("departament")}get emailAddress(){return this.editUser.get("emailAddress")}get position(){return this.editUser.get("position")}get manager(){return this.editUser.get("manager")}onSubmit(){this.editUser.valid&&this.dialogRef.close(this.editUser.value)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(gu),s.Y36(go),s.Y36(ic))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-trash-component"]],decls:47,vars:15,consts:[[1,"content-form"],["id","UserForm",3,"formGroup","ngSubmit"],["for","firstName"],["type","text","id","firstName","formControlName","firstName",3,"ngModel","ngModelChange"],["class","invalidfFeedback",4,"ngIf"],["for","lastName"],["type","text","id","lastName","formControlName","lastName",3,"ngModel","ngModelChange"],["for","position"],["type","text","id","position","formControlName","position",3,"ngModel","ngModelChange"],["for","departament"],["id","departament","formControlName","departament",3,"ngModel","ngModelChange"],["value","Digital"],["value","Support"],["value","HR"],["for","phoneNumber"],["type","tel","id","phoneNumber","formControlName","phoneNumber",3,"ngModel","ngModelChange"],["for","emailAddress"],["type","email","id","emailAddress","formControlName","emailAddress",3,"ngModel","ngModelChange"],["for","manager"],["formControlName","manager",3,"ngModel","ngModelChange"],["class","user-card",3,"value",4,"ngFor","ngForOf"],[1,"content-form-buttons"],["type","submit",1,"btn"],[1,"btn",3,"click"],[1,"uil","uil-cancel"],[1,"dialog-ilustration"],[1,"invalidfFeedback"],[1,"waring"],[1,"user-card",3,"value"]],template:function(t,r){1&t&&(s.TgZ(0,"div",0)(1,"h2"),s._uU(2,"Edit User"),s.qZA(),s.TgZ(3,"form",1),s.NdJ("ngSubmit",function(){return r.onSubmit()}),s.TgZ(4,"label",2),s._uU(5,"Fistname"),s.qZA(),s.TgZ(6,"input",3),s.NdJ("ngModelChange",function(l){return r.user.firstName=l}),s.qZA(),s.YNc(7,gG,3,0,"div",4),s.TgZ(8,"label",5),s._uU(9,"Lastname"),s.qZA(),s.TgZ(10,"input",6),s.NdJ("ngModelChange",function(l){return r.user.lastName=l}),s.qZA(),s.YNc(11,mG,3,0,"div",4),s.TgZ(12,"label",7),s._uU(13,"Position"),s.qZA(),s.TgZ(14,"input",8),s.NdJ("ngModelChange",function(l){return r.user.position=l}),s.qZA(),s.YNc(15,_G,3,0,"div",4),s.TgZ(16,"label",9),s._uU(17,"Departament"),s.qZA(),s.TgZ(18,"select",10),s.NdJ("ngModelChange",function(l){return r.user.departament=l}),s.TgZ(19,"option",11),s._uU(20,"Digital"),s.qZA(),s.TgZ(21,"option",12),s._uU(22,"Support"),s.qZA(),s.TgZ(23,"option",13),s._uU(24,"HR"),s.qZA()(),s.YNc(25,yG,3,0,"div",4),s.TgZ(26,"label",14),s._uU(27,"Number"),s.qZA(),s.TgZ(28,"input",15),s.NdJ("ngModelChange",function(l){return r.user.phoneNumber=l}),s.qZA(),s.YNc(29,vG,3,0,"div",4),s.TgZ(30,"label",16),s._uU(31,"Email"),s.qZA(),s.TgZ(32,"input",17),s.NdJ("ngModelChange",function(l){return r.user.emailAddress=l}),s.qZA(),s.YNc(33,CG,3,0,"div",4),s.TgZ(34,"label",18),s._uU(35,"manager"),s.qZA(),s.TgZ(36,"select",19),s.NdJ("ngModelChange",function(l){return r.user.manager=l}),s.TgZ(37,"option"),s._uU(38,"--Please choose an option--"),s.qZA(),s.YNc(39,wG,2,3,"option",20),s.qZA(),s.TgZ(40,"div",21)(41,"button",22),s._uU(42,"Save"),s.qZA(),s.TgZ(43,"button",23),s.NdJ("click",function(){return r.dialogRef.close()}),s._uU(44," Cancel "),s._UZ(45,"i",24),s.qZA()()()(),s._UZ(46,"div",25)),2&t&&(s.xp6(3),s.Q6J("formGroup",r.editUser),s.xp6(3),s.Q6J("ngModel",r.user.firstName),s.xp6(1),s.Q6J("ngIf",(null==r.firstName||null==r.firstName.errors?null:r.firstName.errors.required)&&(null==r.firstName?null:r.firstName.touched)),s.xp6(3),s.Q6J("ngModel",r.user.lastName),s.xp6(1),s.Q6J("ngIf",(null==r.lastName||null==r.lastName.errors?null:r.lastName.errors.required)&&(null==r.lastName?null:r.lastName.touched)),s.xp6(3),s.Q6J("ngModel",r.user.position),s.xp6(1),s.Q6J("ngIf",(null==r.position||null==r.position.errors?null:r.position.errors.required)&&(null==r.position?null:r.position.touched)),s.xp6(3),s.Q6J("ngModel",r.user.departament),s.xp6(7),s.Q6J("ngIf",(null==r.departament||null==r.departament.errors?null:r.departament.errors.required)&&(null==r.departament?null:r.departament.touched)),s.xp6(3),s.Q6J("ngModel",r.user.phoneNumber),s.xp6(1),s.Q6J("ngIf",(null==r.phoneNumber||null==r.phoneNumber.errors?null:r.phoneNumber.errors.required)&&(null==r.phoneNumber?null:r.phoneNumber.touched)),s.xp6(3),s.Q6J("ngModel",r.user.emailAddress),s.xp6(1),s.Q6J("ngIf",(null==r.emailAddress||null==r.emailAddress.errors?null:r.emailAddress.errors.required)&&(null==r.emailAddress?null:r.emailAddress.touched)),s.xp6(3),s.Q6J("ngModel",r.user.manager),s.xp6(3),s.Q6J("ngForOf",r.data.users))},dependencies:[Zi,fp,pp,pi,pu,Hi,$i,aa,sl,Er,Zt],styles:["[_nghost-%COMP%]{display:flex;background:var(--bg01);border:1px solid var(--green);border-radius:24px;width:80vw;padding:30px;color:var(--text02)}[_nghost-%COMP%]   .dialog-ilustration[_ngcontent-%COMP%]{width:50%;background-image:url(editUser.76704a2cf11f1422.png);background-repeat:no-repeat;background-size:contain;background-position:center}.content-form[_ngcontent-%COMP%]{padding:20px;width:50%}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{color:var(--text02);width:100%;background-color:var(--bg01);padding:10px}.content-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:30px}.content-form-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}"]}),n})();function DG(n,e){if(1&n){const t=s.EpF();s.ynx(0),s.TgZ(1,"button",9),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.addScore(1))}),s._uU(2," Score"),s._UZ(3,"i",11),s.qZA(),s.TgZ(4,"button",9),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.addScore(-1))}),s._uU(5," Score"),s._UZ(6,"i",12),s.qZA(),s.TgZ(7,"button",9),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.onDeleteUser())}),s._uU(8,"Delete user "),s._UZ(9,"i",13),s.qZA(),s.TgZ(10,"button",9),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.openEditUserDialog())}),s._uU(11," Edit User "),s._UZ(12,"i",14),s.qZA(),s.BQk()}}let EG=(()=>{class n{constructor(t,r){this.dialog=t,this.usersService=r,this.score="No Data"}openEditUserDialog(){this.dialog.open(bG,{data:{user:this.user,users:this.users}}).closed.subscribe(r=>{r&&this.usersService.editUser(r)})}mailto(t){return window.location.href=`mailto:${t}`}onDeleteUser(){this.dialog.open(rO,{data:{type:"user"}}).closed.subscribe(r=>{r&&this.usersService.deleteTask(this.user?.id)})}scoreLevel(){return this.user?.score>=0?"Good Worker":"Sufficient"}addScore(t){this.user.score+=t,this.usersService.updateScore(this.user?.id,this.user?.score)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(sc),s.Y36(hu))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-data-detail-view"]],inputs:{user:"user",users:"users",userRole$:"userRole$"},decls:42,vars:14,consts:[[1,"card-header"],[1,"card-header-avatar"],[1,"uil","uil-user"],[1,"card-description"],[1,"information"],["title","click to call",3,"href"],[3,"href"],[1,"card-buttons"],[4,"ngIf"],[1,"btn",3,"click"],[1,"uil","uil-envelope-edit"],[1,"uil","uil-angle-up"],[1,"uil","uil-angle-down"],[1,"uil","uil-trash-alt"],[1,"uil","uil-edit-alt"]],template:function(t,r){1&t&&(s.TgZ(0,"div",0)(1,"span",1),s._UZ(2,"i",2),s.qZA(),s.TgZ(3,"h2"),s._uU(4),s.qZA(),s.TgZ(5,"p"),s._uU(6),s.qZA()(),s.TgZ(7,"div",3)(8,"table",4)(9,"tr")(10,"td"),s._uU(11,"Departament:"),s.qZA(),s.TgZ(12,"td"),s._uU(13),s.qZA()(),s.TgZ(14,"tr")(15,"td"),s._uU(16,"Manager:"),s.qZA(),s.TgZ(17,"td"),s._uU(18),s.qZA()(),s.TgZ(19,"tr")(20,"td"),s._uU(21,"Phone Number:"),s.qZA(),s.TgZ(22,"td")(23,"a",5),s._uU(24),s.qZA()()(),s.TgZ(25,"tr")(26,"td"),s._uU(27,"Emial address:"),s.qZA(),s.TgZ(28,"td")(29,"a",6),s._uU(30),s.qZA()()(),s.TgZ(31,"tr")(32,"td"),s._uU(33,"Score:"),s.qZA(),s.TgZ(34,"td"),s._uU(35),s.qZA()()(),s.TgZ(36,"div",7),s.YNc(37,DG,13,0,"ng-container",8),s.ALo(38,"async"),s.TgZ(39,"button",9),s.NdJ("click",function(){return r.mailto(r.user.emailAddress)}),s._uU(40,"Send message\xa0 "),s._UZ(41,"i",10),s.qZA()()()),2&t&&(s.xp6(4),s.AsE("",null==r.user?null:r.user.firstName," ",null==r.user?null:r.user.lastName,""),s.xp6(2),s.Oqu(null==r.user?null:r.user.position),s.xp6(7),s.Oqu(null==r.user?null:r.user.departament),s.xp6(5),s.Oqu(null==r.user?null:r.user.manager),s.xp6(5),s.Q6J("href","tel:+48"+(null==r.user?null:r.user.phoneNumber),s.LSH),s.xp6(1),s.Oqu(null==r.user?null:r.user.phoneNumber),s.xp6(5),s.Q6J("href","mailto:"+(null==r.user?null:r.user.emailAddress),s.LSH),s.xp6(1),s.Oqu(null==r.user?null:r.user.emailAddress),s.xp6(5),s.AsE("",r.scoreLevel()," (",null==r.user?null:r.user.score,")"),s.xp6(2),s.Q6J("ngIf","Admin"==s.lcZ(38,12,r.userRole$)))},dependencies:[Zt,ha],styles:[".card-header[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.card-header-avatar[_ngcontent-%COMP%]{margin-left:0;margin-right:10px;font-size:3em}.card-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--green)}.card-description[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.card-description[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2n){color:var(--green)}.card-description[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left}.card-buttons[_ngcontent-%COMP%]{width:100%;display:flex;gap:10px;justify-content:flex-end}"]}),n})();function IG(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"button",7),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.openAddtask())}),s._uU(1,"Add +"),s.qZA()}}function SG(n,e){if(1&n){const t=s.EpF();s.ynx(0),s.TgZ(1,"button",7),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.toggleSearchButtonVisibility())}),s._uU(2," Search "),s._UZ(3,"i",8),s.qZA(),s.BQk()}}function TG(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"form")(1,"input",9),s.NdJ("ngModelChange",function(i){s.CHM(t);const l=s.oxw();return s.KtG(l.searchName=i)})("input",function(i){s.CHM(t);const l=s.oxw();return s.KtG(l.search(i))})("blur",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.toggleSearchButtonVisibility())}),s.qZA()()}if(2&n){const t=s.oxw();s.xp6(1),s.Q6J("ngModel",t.searchName)}}function AG(n,e){if(1&n&&(s.ynx(0),s.TgZ(1,"div",10),s._UZ(2,"app-data-detail-view",11),s.qZA(),s.BQk()),2&n){const t=s.oxw();s.xp6(2),s.Q6J("user",t.user)("users",t.users)("userRole$",t.userRole$)}}function MG(n,e){1&n&&s._UZ(0,"app-empty-data",12)}let kG=(()=>{class n{constructor(t,r,i){this.dialog=t,this.userService=r,this.loginService=i,this.displayedColumns=["id","firstName","lastName","position","viewMore"],this.columnDef=[{cdkColumnDef:"id",cdkColumnDefTitle:"Id"},{cdkColumnDef:"firstName",cdkColumnDefTitle:"first name"},{cdkColumnDef:"lastName",cdkColumnDefTitle:"last name"},{cdkColumnDef:"position",cdkColumnDefTitle:"position"}],this.isLoading=!1,this.displaySearch=!0,this.users=[],this.loginService.getUser().pipe((0,We.U)(l=>{if(l)return this.userService.getUserRole(l.uid).pipe()})).subscribe(l=>{this.userRole$=l})}onGetDetail(t){return this.userService.getUser(t).subscribe(r=>{this.user=r,this.user.id=t})}openAddtask(){this.dialog.open(pG,{data:this.users}).closed.subscribe(r=>{r&&this.userService.addUser(r)})}search(t){this.userService.setSearchWord(t.target.value)}toggleSearchButtonVisibility(){this.displaySearch=!this.displaySearch}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(sc),s.Y36(hu),s.Y36(Si))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-card-users"]],inputs:{users:"users"},decls:12,vars:13,consts:[[3,"title"],[1,"card-buttons"],["class","btn",3,"click",4,"ngIf"],[4,"ngIf","ngIfElse"],["searchDisplay",""],[3,"data","displayedColumns","columnDef","category","eventEmitt"],["emptyData",""],[1,"btn",3,"click"],[1,"uil","uil-search"],["type","text","name","task name","placeholder","Search name",3,"ngModel","ngModelChange","input","blur"],[1,"card"],[3,"user","users","userRole$"],["icon","uil uil-apps","typeOfData","users"]],template:function(t,r){if(1&t&&(s.TgZ(0,"app-card",0)(1,"div",1),s.YNc(2,IG,2,0,"button",2),s.ALo(3,"async"),s.YNc(4,SG,4,0,"ng-container",3),s.YNc(5,TG,2,1,"ng-template",null,4,s.W1O),s.qZA(),s.TgZ(7,"app-table",5),s.NdJ("eventEmitt",function(l){return r.onGetDetail(l)}),s.qZA()(),s.TgZ(8,"app-card",0),s.YNc(9,AG,3,3,"ng-container",3),s.YNc(10,MG,1,0,"ng-template",null,6,s.W1O),s.qZA()),2&t){const i=s.MAs(6),l=s.MAs(11);s.Q6J("title","Users"),s.xp6(2),s.Q6J("ngIf","Admin"==s.lcZ(3,11,r.userRole$)),s.xp6(2),s.Q6J("ngIf",r.displaySearch)("ngIfElse",i),s.xp6(3),s.Q6J("data",r.users)("displayedColumns",r.displayedColumns)("columnDef",r.columnDef)("category","users"),s.xp6(1),s.Q6J("title","User"),s.xp6(1),s.Q6J("ngIf",r.user)("ngIfElse",l)}},dependencies:[EG,Zt,Zi,pi,Hi,$i,Kd,fu,QE,mu,iO,ha],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:10px}[_nghost-%COMP%]   .card-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end}[_nghost-%COMP%]   .card-buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:var(--bg01)}[_nghost-%COMP%]   .card-detail-empty[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-weight:500;font-size:24px;cursor:default}[_nghost-%COMP%]   .card-detail-empty[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--green);background-color:var(--bg01);border-radius:24px;padding:10px 12px;margin-right:10px}[_nghost-%COMP%]   .card-detail-empty-title[_ngcontent-%COMP%]{transition:all .4s ease}[_nghost-%COMP%]   .card-detail-empty-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text02)}[_nghost-%COMP%]   .card-detail-empty-title[_ngcontent-%COMP%]:hover{color:var(--green)}"]}),n})();const xG=[{path:"pages",component:Q$,children:[{path:"dashboard",component:jZ,title:"Dashboard",canActivate:[rc]},{path:"projects",component:U2,title:"Projects",canActivate:[rc]},{path:"projects/:id",component:U2,title:"Projects",canActivate:[rc]},{path:"tasks/:id",component:B2,title:"Tasks",canActivate:[rc]},{path:"tasks",component:B2,title:"Tasks",canActivate:[rc]},{path:"users",component:(()=>{class n{constructor(t){this.usersService=t,this.users=[]}ngOnInit(){this.usersService.users$.subscribe(t=>this.users=t)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(hu))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-users"]],decls:4,vars:1,consts:[[1,"container"],[3,"users"]],template:function(t,r){1&t&&(s.TgZ(0,"h1"),s._uU(1,"My Friend"),s.qZA(),s.TgZ(2,"div",0),s._UZ(3,"app-card-users",1),s.qZA()),2&t&&(s.xp6(3),s.Q6J("users",r.users))},dependencies:[kG]}),n})(),title:"Users",canActivate:[rc]},{path:"settings",component:kz,title:"Settings",canActivate:[rc]},{path:"",redirectTo:"organization",pathMatch:"full"},{path:"**",redirectTo:"organization"}]},{path:"auth",children:[{path:"login",component:m$,title:"Login"},{path:"forgot-password",component:t2,title:"Forgot password"}]},{path:"organization",component:j2,canActivate:[rc],title:"Your organiztion"},{path:"organization/:id",component:j2,canActivate:[rc],title:"Your organiztion"},{path:"",redirectTo:"auth/login",pathMatch:"full"},{path:"**",redirectTo:"auth/login",pathMatch:"full"}];let OG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Ya.forRoot(xG)]}),n})(),RG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[Si],imports:[a2,Ya]}),n})(),PG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[RG]}),n})(),NG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[a2,On,Ya]}),n})(),al=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})(),rI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[m2,Ya,On]}),n})(),FG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[m2,On,Ya,rI]}),n})(),LG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[On,Ya]}),n})(),VG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[LG,FG,al]}),n})(),UG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[d_,mp],imports:[VG,Gl]}),n})(),BG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[al,On,mo,ac]}),n})(),jG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[mo,ac,On]}),n})(),sO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})(),HG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[mw,On,dz,jG,sO]}),n})(),$G=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[mo,ac,On]}),n})(),oO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})(),ZG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[On,HG,$G,mo,rI,al,oO]}),n})(),zG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[d_],imports:[Gl,ZG]}),n})(),GG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[mo,On,al]}),n})(),qG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[mo,ac,On]}),n})(),WG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[mo,ac,On]}),n})(),YG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[WG,On]}),n})(),KG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[Si],imports:[mw,qG,YG,On,sO]}),n})(),JG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[mo,ac,On]}),n})(),QG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[mw,KG,On,JG,mo,rI,al,oO]}),n})(),XG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[mp],imports:[Gl,QG,al]}),n})(),e6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[al,On,mo,ac]}),n})(),t6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[mw,ac,On]}),n})(),n6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[ac,mw,On,sO]}),n})(),r6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[n6,t6,On,mo,rI,al,oO]}),n})(),i6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[hu],imports:[r6,Gl]}),n})(),s6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[n2],imports:[Gl,zG,XG,i6,UG,NG,PG,OG,Ya,GG,e6,BG]}),n})();const aO={firebase:{projectId:"crmbyoxy",appId:"1:295905211191:web:a823601eba9a48d296a0b2",databaseURL:"https://crmbyoxy-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"crmbyoxy.appspot.com",locationId:"europe-west",apiKey:"AIzaSyDLy_S_Q8qQAujYYmbYNC2qucCqjAUlMnE",authDomain:"crmbyoxy.firebaseapp.com",messagingSenderId:"295905211191"},production:!0};class lO{constructor(e){return e}}const H2="firestore",cO=new s.OlP("angularfire2.firestore-instances");function l6(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new lO(r)}}const c6={provide:class o6{constructor(){return(0,fn.vb)(H2)}},deps:[[new s.FiY,cO]]},u6={provide:lO,useFactory:function a6(n,e){const t=(0,fn.JM)(H2,n,e);return t&&new lO(t)},deps:[[new s.FiY,cO],vd]};let d6=(()=>{class n{constructor(){(0,Qa.KN)("angularfire",fn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[u6,c6]}),n})();function h6(n,...e){return{ngModule:d6,providers:[{provide:cO,useFactory:l6(n),multi:!0,deps:[s.R0b,s.zs3,fn.HU,uv,[new s.FiY,Lv],[new s.FiY,Yg],...e]}]}}const f6=(0,fn.u3)(hj,!0);let p6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[mo,On,al]}),n})(),g6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[Si],imports:[al,mo,On,Ci.hO,p6]}),n})(),m6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n,bootstrap:[Qc]}),n.\u0275inj=s.cJS({providers:[{provide:Ci.Dh,useValue:aO.firebase},Si,rc],imports:[No,s6,al,g6,Ci.hO,Ya,V0(()=>gf(aO.firebase)),JT(()=>QT()),h6(()=>f6()),Ni.forRoot([ol,Yo])]}),n})();aO.production&&(0,s.G48)(),Aa().bootstrapModule(m6).catch(n=>console.error(n))},5867:(ht,Se,N)=>{N.d(Se,{C6:()=>s.getApps,KN:()=>s.registerVersion,Mq:()=>s.getApp,ZF:()=>s.initializeApp});var s=N(9681);(0,s.registerVersion)("firebase","9.12.0","app")},127:(ht,Se,N)=>{N.d(Se,{Z:()=>s.Z});var s=N(3942);s.Z.registerVersion("firebase","9.12.0","app-compat")},5881:(ht,Se,N)=>{N.r(Se);var s=N(5861),j=N(3942),R=N(9934),re=N(2090),se=(N(9681),N(1877),N(4859));function ae(){return window}function z(){return(z=(0,s.Z)(function*(B,O,L){var ne;const{BuildInfo:Ne}=ae();(0,R.aq)(O.sessionId,"AuthEvent did not contain a session ID");const ot=yield pe(O.sessionId),at={};return(0,R.ar)()?at.ibi=Ne.packageName:(0,R.as)()?at.apn=Ne.packageName:(0,R.at)(B,"operation-not-supported-in-this-environment"),Ne.displayName&&(at.appDisplayName=Ne.displayName),at.sessionId=ot,(0,R.au)(B,L,O.type,void 0,null!==(ne=O.eventId)&&void 0!==ne?ne:void 0,at)})).apply(this,arguments)}function je(){return(je=(0,s.Z)(function*(B){const{BuildInfo:O}=ae(),L={};(0,R.ar)()?L.iosBundleId=O.packageName:(0,R.as)()?L.androidPackageName=O.packageName:(0,R.at)(B,"operation-not-supported-in-this-environment"),yield(0,R.av)(B,L)})).apply(this,arguments)}function st(){return(st=(0,s.Z)(function*(B,O,L){const{cordova:ne}=ae();let Ne=()=>{};try{yield new Promise((ot,at)=>{let Me=null;function Le(){var Ot;ot();const un=null===(Ot=ne.plugins.browsertab)||void 0===Ot?void 0:Ot.close;"function"==typeof un&&un(),"function"==typeof L?.close&&L.close()}function Tt(){Me||(Me=window.setTimeout(()=>{at((0,R.aw)(B,"redirect-cancelled-by-user"))},2e3))}function cn(){"visible"===document?.visibilityState&&Tt()}O.addPassiveListener(Le),document.addEventListener("resume",Tt,!1),(0,R.as)()&&document.addEventListener("visibilitychange",cn,!1),Ne=()=>{O.removePassiveListener(Le),document.removeEventListener("resume",Tt,!1),document.removeEventListener("visibilitychange",cn,!1),Me&&window.clearTimeout(Me)}})}finally{Ne()}})).apply(this,arguments)}function pe(B){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,s.Z)(function*(B){const O=Ke(B),L=yield crypto.subtle.digest("SHA-256",O);return Array.from(new Uint8Array(L)).map(Ne=>Ne.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ke(B){if((0,R.aq)(/[0-9a-zA-Z]+/.test(B),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(B);const O=new ArrayBuffer(B.length),L=new Uint8Array(O);for(let ne=0;ne<B.length;ne++)L[ne]=B.charCodeAt(ne);return L}class xe extends R.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(O=>{this.resolveInialized=O})}addPassiveListener(O){this.passiveListeners.add(O)}removePassiveListener(O){this.passiveListeners.delete(O)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(O){return this.resolveInialized(),this.passiveListeners.forEach(L=>L(O)),super.onEvent(O)}initialized(){var O=this;return(0,s.Z)(function*(){yield O.initPromise})()}}function ie(B){return ue.apply(this,arguments)}function ue(){return(ue=(0,s.Z)(function*(B){const O=yield X()._get(fe(B));return O&&(yield X()._remove(fe(B))),O})).apply(this,arguments)}function J(){const B=[],O="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let L=0;L<20;L++){const ne=Math.floor(Math.random()*O.length);B.push(O.charAt(ne))}return B.join("")}function X(){return(0,R.ay)(R.b)}function fe(B){return(0,R.az)("authEvent",B.config.apiKey,B.name)}function Ue(B){if(!B?.includes("?"))return{};const[O,...L]=B.split("?");return(0,re.zd)(L.join("?"))}function qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,R.aw)("no-auth-event")}}function Ht(){var B;return(null===(B=self?.location)||void 0===B?void 0:B.protocol)||null}function br(B=(0,re.z$)()){return!("file:"!==Ht()&&"ionic:"!==Ht()&&"capacitor:"!==Ht()||!B.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gi(){try{const B=self.localStorage,O=R.aI();if(B)return B.setItem(O,"1"),B.removeItem(O),!function zi(B=(0,re.z$)()){return function xr(){return(0,re.w1)()&&11===document?.documentMode}()||function xn(B=(0,re.z$)()){return/Edge\/\d+/.test(B)}(B)}()||(0,re.hl)()}catch{return Or()&&(0,re.hl)()}return!1}function Or(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function jn(){return(function Vt(){return"http:"===Ht()||"https:"===Ht()}()||(0,re.ru)()||br())&&!function Ti(){return(0,re.b$)()||(0,re.UG)()}()&&Gi()&&!Or()}function gi(){return br()&&typeof document<"u"}function Je(){return(Je=(0,s.Z)(function*(){return!!gi()&&new Promise(B=>{const O=setTimeout(()=>{B(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(O),B(!0)})})})).apply(this,arguments)}const Hn={LOCAL:"local",NONE:"none",SESSION:"session"},yn=R.ax,ar="persistence";function Cn(B){return wn.apply(this,arguments)}function wn(){return(wn=(0,s.Z)(function*(B){yield B._initializationPromise;const O=gt(),L=R.az(ar,B.config.apiKey,B.name);O&&O.setItem(L,B._getPersistence())})).apply(this,arguments)}function gt(){var B;try{return(null===(B=function Wn(){return typeof window<"u"?window:null}())||void 0===B?void 0:B.sessionStorage)||null}catch{return null}}const mt=R.ax;class It{constructor(){this.browserResolver=R.ay(R.k),this.cordovaResolver=R.ay(class tn{constructor(){this._redirectPersistence=R.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=R.aB,this._overrideRedirectResult=R.aC}_initialize(O){var L=this;return(0,s.Z)(function*(){const ne=O._key();let Ne=L.eventManagers.get(ne);return Ne||(Ne=new xe(O),L.eventManagers.set(ne,Ne),L.attachCallbackListeners(O,Ne)),Ne})()}_openPopup(O){(0,R.at)(O,"operation-not-supported-in-this-environment")}_openRedirect(O,L,ne,Ne){var ot=this;return(0,s.Z)(function*(){!function ve(B){var O,L,ne,Ne,ot,at,Me,Le,Tt,cn;const Ot=ae();(0,R.ax)("function"==typeof(null===(O=Ot?.universalLinks)||void 0===O?void 0:O.subscribe),B,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,R.ax)(typeof(null===(L=Ot?.BuildInfo)||void 0===L?void 0:L.packageName)<"u",B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,R.ax)("function"==typeof(null===(ot=null===(Ne=null===(ne=Ot?.cordova)||void 0===ne?void 0:ne.plugins)||void 0===Ne?void 0:Ne.browsertab)||void 0===ot?void 0:ot.openUrl),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.ax)("function"==typeof(null===(Le=null===(Me=null===(at=Ot?.cordova)||void 0===at?void 0:at.plugins)||void 0===Me?void 0:Me.browsertab)||void 0===Le?void 0:Le.isAvailable),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.ax)("function"==typeof(null===(cn=null===(Tt=Ot?.cordova)||void 0===Tt?void 0:Tt.InAppBrowser)||void 0===cn?void 0:cn.open),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(O);const at=yield ot._initialize(O);yield at.initialized(),at.resetRedirect(),(0,R.aD)(),yield ot._originValidation(O);const Me=function De(B,O,L=null){return{type:O,eventId:L,urlResponse:null,sessionId:J(),postBody:null,tenantId:B.tenantId,error:(0,R.aw)(B,"no-auth-event")}}(O,ne,Ne);yield function $e(B,O){return X()._set(fe(B),O)}(O,Me);const Le=yield function Z(B,O,L){return z.apply(this,arguments)}(O,Me,L),Tt=yield function Re(B){const{cordova:O}=ae();return new Promise(L=>{O.plugins.browsertab.isAvailable(ne=>{let Ne=null;ne?O.plugins.browsertab.openUrl(B):Ne=O.InAppBrowser.open(B,(0,R.ap)()?"_blank":"_system","location=yes"),L(Ne)})})}(Le);return function Ie(B,O,L){return st.apply(this,arguments)}(O,at,Tt)})()}_isIframeWebStorageSupported(O,L){throw new Error("Method not implemented.")}_originValidation(O){const L=O._key();return this.originValidationPromises[L]||(this.originValidationPromises[L]=function Q(B){return je.apply(this,arguments)}(O)),this.originValidationPromises[L]}attachCallbackListeners(O,L){const{universalLinks:ne,handleOpenURL:Ne,BuildInfo:ot}=ae(),at=setTimeout((0,s.Z)(function*(){yield ie(O),L.onEvent(qe())}),500),Me=function(){var cn=(0,s.Z)(function*(Ot){clearTimeout(at);const un=yield ie(O);let Wi=null;un&&Ot?.url&&(Wi=function ye(B,O){var L,ne;const Ne=function Ve(B){const O=Ue(B),L=O.link?decodeURIComponent(O.link):void 0,ne=Ue(L).link,Ne=O.deep_link_id?decodeURIComponent(O.deep_link_id):void 0;return Ue(Ne).link||Ne||ne||L||B}(O);if(Ne.includes("/__/auth/callback")){const ot=Ue(Ne),at=ot.firebaseError?function oe(B){try{return JSON.parse(B)}catch{return null}}(decodeURIComponent(ot.firebaseError)):null,Me=null===(ne=null===(L=at?.code)||void 0===L?void 0:L.split("auth/"))||void 0===ne?void 0:ne[1],Le=Me?(0,R.aw)(Me):null;return Le?{type:B.type,eventId:B.eventId,tenantId:B.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:B.type,eventId:B.eventId,tenantId:B.tenantId,sessionId:B.sessionId,urlResponse:Ne,postBody:null}}return null}(un,Ot.url)),L.onEvent(Wi||qe())});return function(un){return cn.apply(this,arguments)}}();typeof ne<"u"&&"function"==typeof ne.subscribe&&ne.subscribe(null,Me);const Le=Ne,Tt=`${ot.packageName.toLowerCase()}://`;ae().handleOpenURL=function(){var cn=(0,s.Z)(function*(Ot){if(Ot.toLowerCase().startsWith(Tt)&&Me({url:Ot}),"function"==typeof Le)try{Le(Ot)}catch(un){console.error(un)}});return function(Ot){return cn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=R.a,this._completeRedirectFn=R.aB,this._overrideRedirectResult=R.aC}_initialize(O){var L=this;return(0,s.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._initialize(O)})()}_openPopup(O,L,ne,Ne){var ot=this;return(0,s.Z)(function*(){return yield ot.selectUnderlyingResolver(),ot.assertedUnderlyingResolver._openPopup(O,L,ne,Ne)})()}_openRedirect(O,L,ne,Ne){var ot=this;return(0,s.Z)(function*(){return yield ot.selectUnderlyingResolver(),ot.assertedUnderlyingResolver._openRedirect(O,L,ne,Ne)})()}_isIframeWebStorageSupported(O,L){this.assertedUnderlyingResolver._isIframeWebStorageSupported(O,L)}_originValidation(O){return this.assertedUnderlyingResolver._originValidation(O)}get _shouldInitProactively(){return gi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var O=this;return(0,s.Z)(function*(){if(O.underlyingResolver)return;const L=yield function qi(){return Je.apply(this,arguments)}();O.underlyingResolver=L?O.cordovaResolver:O.browserResolver})()}}function Br(B){return B.unwrap()}function Dr(B){return Rr(B)}function Rr(B){const{_tokenResponse:O}=B instanceof re.ZR?B.customData:B;if(!O)return null;if(!(B instanceof re.ZR)&&"temporaryProof"in O&&"phoneNumber"in O)return R.P.credentialFromResult(B);const L=O.providerId;if(!L||L===R.o.PASSWORD)return null;let ne;switch(L){case R.o.GOOGLE:ne=R.Q;break;case R.o.FACEBOOK:ne=R.N;break;case R.o.GITHUB:ne=R.T;break;case R.o.TWITTER:ne=R.W;break;default:const{oauthIdToken:Ne,oauthAccessToken:ot,oauthTokenSecret:at,pendingToken:Me,nonce:Le}=O;return ot||at||Ne||Me?Me?L.startsWith("saml.")?R.aL._create(L,Me):R.J._fromParams({providerId:L,signInMethod:L,pendingToken:Me,idToken:Ne,accessToken:ot}):new R.U(L).credential({idToken:Ne,accessToken:ot,rawNonce:Le}):null}return B instanceof re.ZR?ne.credentialFromError(B):ne.credentialFromResult(B)}function Lt(B,O){return O.catch(L=>{throw L instanceof re.ZR&&function Dt(B,O){var L,ne;const Ne=null===(L=O.customData)||void 0===L?void 0:L._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ne=O)||void 0===ne?void 0:ne.code))O.resolver=new ir(B,R.an(B,O));else if(Ne){const ot=Rr(O),at=O;ot&&(at.credential=ot,at.tenantId=Ne.tenantId||void 0,at.email=Ne.email||void 0,at.phoneNumber=Ne.phoneNumber||void 0)}}(B,L),L}).then(L=>{const Ne=L.user;return{operationType:L.operationType,credential:Dr(L),additionalUserInfo:R.al(L),user:In.getOrCreate(Ne)}})}function Jr(B,O){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,s.Z)(function*(B,O){const L=yield O;return{verificationId:L.verificationId,confirm:ne=>Lt(B,L.confirm(ne))}})).apply(this,arguments)}class ir{constructor(O,L){this.resolver=L,this.auth=function Yn(B){return B.wrapped()}(O)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(O){return Lt(Br(this.auth),this.resolver.resolveSignIn(O))}}class In{constructor(O){this._delegate=O,this.multiFactor=R.ao(O)}static getOrCreate(O){return In.USER_MAP.has(O)||In.USER_MAP.set(O,new In(O)),In.USER_MAP.get(O)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(O){return this._delegate.getIdTokenResult(O)}getIdToken(O){return this._delegate.getIdToken(O)}linkAndRetrieveDataWithCredential(O){return this.linkWithCredential(O)}linkWithCredential(O){var L=this;return(0,s.Z)(function*(){return Lt(L.auth,R.Z(L._delegate,O))})()}linkWithPhoneNumber(O,L){var ne=this;return(0,s.Z)(function*(){return Jr(ne.auth,R.l(ne._delegate,O,L))})()}linkWithPopup(O){var L=this;return(0,s.Z)(function*(){return Lt(L.auth,R.d(L._delegate,O,It))})()}linkWithRedirect(O){var L=this;return(0,s.Z)(function*(){return yield Cn(R.aE(L.auth)),R.g(L._delegate,O,It)})()}reauthenticateAndRetrieveDataWithCredential(O){return this.reauthenticateWithCredential(O)}reauthenticateWithCredential(O){var L=this;return(0,s.Z)(function*(){return Lt(L.auth,R._(L._delegate,O))})()}reauthenticateWithPhoneNumber(O,L){return Jr(this.auth,R.r(this._delegate,O,L))}reauthenticateWithPopup(O){return Lt(this.auth,R.e(this._delegate,O,It))}reauthenticateWithRedirect(O){var L=this;return(0,s.Z)(function*(){return yield Cn(R.aE(L.auth)),R.h(L._delegate,O,It)})()}sendEmailVerification(O){return R.ab(this._delegate,O)}unlink(O){var L=this;return(0,s.Z)(function*(){return yield R.ak(L._delegate,O),L})()}updateEmail(O){return R.ag(this._delegate,O)}updatePassword(O){return R.ah(this._delegate,O)}updatePhoneNumber(O){return R.u(this._delegate,O)}updateProfile(O){return R.af(this._delegate,O)}verifyBeforeUpdateEmail(O,L){return R.ac(this._delegate,O,L)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}In.USER_MAP=new WeakMap;const nt=R.ax;let Ae=(()=>{class B{constructor(L,ne){if(this.app=L,ne.isInitialized())return this._delegate=ne.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ne}=L.options;nt(Ne,"invalid-api-key",{appName:L.name}),nt(Ne,"invalid-api-key",{appName:L.name});const ot=typeof window<"u"?It:void 0;this._delegate=ne.initialize({options:{persistence:Ct(Ne,L.name),popupRedirectResolver:ot}}),this._delegate._updateErrorMap(R.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?In.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(L){this._delegate.languageCode=L}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(L){this._delegate.tenantId=L}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(L,ne){R.G(this._delegate,L,ne)}applyActionCode(L){return R.a2(this._delegate,L)}checkActionCode(L){return R.a3(this._delegate,L)}confirmPasswordReset(L,ne){return R.a1(this._delegate,L,ne)}createUserWithEmailAndPassword(L,ne){var Ne=this;return(0,s.Z)(function*(){return Lt(Ne._delegate,R.a5(Ne._delegate,L,ne))})()}fetchProvidersForEmail(L){return this.fetchSignInMethodsForEmail(L)}fetchSignInMethodsForEmail(L){return R.aa(this._delegate,L)}isSignInWithEmailLink(L){return R.a8(this._delegate,L)}getRedirectResult(){var L=this;return(0,s.Z)(function*(){nt(jn(),L._delegate,"operation-not-supported-in-this-environment");const ne=yield R.j(L._delegate,It);return ne?Lt(L._delegate,Promise.resolve(ne)):{credential:null,user:null}})()}addFrameworkForLogging(L){!function ln(B,O){(0,R.aE)(B)._logFramework(O)}(this._delegate,L)}onAuthStateChanged(L,ne,Ne){const{next:ot,error:at,complete:Me}=rt(L,ne,Ne);return this._delegate.onAuthStateChanged(ot,at,Me)}onIdTokenChanged(L,ne,Ne){const{next:ot,error:at,complete:Me}=rt(L,ne,Ne);return this._delegate.onIdTokenChanged(ot,at,Me)}sendSignInLinkToEmail(L,ne){return R.a7(this._delegate,L,ne)}sendPasswordResetEmail(L,ne){return R.a0(this._delegate,L,ne||void 0)}setPersistence(L){var ne=this;return(0,s.Z)(function*(){let Ne;switch(function Us(B,O){yn(Object.values(Hn).includes(O),B,"invalid-persistence-type"),(0,re.b$)()?yn(O!==Hn.SESSION,B,"unsupported-persistence-type"):(0,re.UG)()?yn(O===Hn.NONE,B,"unsupported-persistence-type"):Or()?yn(O===Hn.NONE||O===Hn.LOCAL&&(0,re.hl)(),B,"unsupported-persistence-type"):yn(O===Hn.NONE||Gi(),B,"unsupported-persistence-type")}(ne._delegate,L),L){case Hn.SESSION:Ne=R.a;break;case Hn.LOCAL:Ne=(yield R.ay(R.i)._isAvailable())?R.i:R.b;break;case Hn.NONE:Ne=R.L;break;default:return R.at("argument-error",{appName:ne._delegate.name})}return ne._delegate.setPersistence(Ne)})()}signInAndRetrieveDataWithCredential(L){return this.signInWithCredential(L)}signInAnonymously(){return Lt(this._delegate,R.X(this._delegate))}signInWithCredential(L){return Lt(this._delegate,R.Y(this._delegate,L))}signInWithCustomToken(L){return Lt(this._delegate,R.$(this._delegate,L))}signInWithEmailAndPassword(L,ne){return Lt(this._delegate,R.a6(this._delegate,L,ne))}signInWithEmailLink(L,ne){return Lt(this._delegate,R.a9(this._delegate,L,ne))}signInWithPhoneNumber(L,ne){return Jr(this._delegate,R.s(this._delegate,L,ne))}signInWithPopup(L){var ne=this;return(0,s.Z)(function*(){return nt(jn(),ne._delegate,"operation-not-supported-in-this-environment"),Lt(ne._delegate,R.c(ne._delegate,L,It))})()}signInWithRedirect(L){var ne=this;return(0,s.Z)(function*(){return nt(jn(),ne._delegate,"operation-not-supported-in-this-environment"),yield Cn(ne._delegate),R.f(ne._delegate,L,It)})()}updateCurrentUser(L){return this._delegate.updateCurrentUser(L)}verifyPasswordResetCode(L){return R.a4(this._delegate,L)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return B.Persistence=Hn,B})();function rt(B,O,L){let ne=B;"function"!=typeof B&&({next:ne,error:O,complete:L}=B);const Ne=ne;return{next:at=>Ne(at&&In.getOrCreate(at)),error:O,complete:L}}function Ct(B,O){const L=function mn(B,O){const L=gt();if(!L)return[];const ne=R.az(ar,B,O);switch(L.getItem(ne)){case Hn.NONE:return[R.L];case Hn.LOCAL:return[R.i,R.a];case Hn.SESSION:return[R.a];default:return[]}}(B,O);if(typeof self<"u"&&!L.includes(R.i)&&L.push(R.i),typeof window<"u")for(const ne of[R.b,R.a])L.includes(ne)||L.push(ne);return L.includes(R.L)||L.push(R.L),L}class wt{constructor(){this.providerId="phone",this._delegate=new R.P(Br(j.Z.auth()))}static credential(O,L){return R.P.credential(O,L)}verifyPhoneNumber(O,L){return this._delegate.verifyPhoneNumber(O,L)}unwrap(){return this._delegate}}wt.PHONE_SIGN_IN_METHOD=R.P.PHONE_SIGN_IN_METHOD,wt.PROVIDER_ID=R.P.PROVIDER_ID;const Kt=R.ax;class G{constructor(O,L,ne=j.Z.app()){var Ne;Kt(null===(Ne=ne.options)||void 0===Ne?void 0:Ne.apiKey,"invalid-api-key",{appName:ne.name}),this._delegate=new R.R(O,L,ne.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Y(B){B.INTERNAL.registerComponent(new se.wA("auth-compat",O=>{const L=O.getProvider("app-compat").getImmediate(),ne=O.getProvider("auth");return new Ae(L,ne)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:R.A.EMAIL_SIGNIN,PASSWORD_RESET:R.A.PASSWORD_RESET,RECOVER_EMAIL:R.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:R.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:R.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:R.A.VERIFY_EMAIL}},EmailAuthProvider:R.M,FacebookAuthProvider:R.N,GithubAuthProvider:R.T,GoogleAuthProvider:R.Q,OAuthProvider:R.U,SAMLAuthProvider:R.V,PhoneAuthProvider:wt,PhoneMultiFactorGenerator:R.m,RecaptchaVerifier:G,TwitterAuthProvider:R.W,Auth:Ae,AuthCredential:R.H,Error:re.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),B.registerVersion("@firebase/auth-compat","0.2.22")}(j.Z)},9751:(ht,Se,N)=>{N.d(Se,{y:()=>ae});var s=N(930),j=N(727),R=N(8822),re=N(9635),le=N(2416),ge=N(576),se=N(2806);let ae=(()=>{class Q{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const Ie=new Q;return Ie.source=this,Ie.operator=Re,Ie}subscribe(Re,Ie,st){const ve=function z(Q){return Q&&Q instanceof s.Lv||function Z(Q){return Q&&(0,ge.m)(Q.next)&&(0,ge.m)(Q.error)&&(0,ge.m)(Q.complete)}(Q)&&(0,j.Nn)(Q)}(Re)?Re:new s.Hp(Re,Ie,st);return(0,se.x)(()=>{const{operator:pe,source:Xe}=this;ve.add(pe?pe.call(ve,Xe):Xe?this._subscribe(ve):this._trySubscribe(ve))}),ve}_trySubscribe(Re){try{return this._subscribe(Re)}catch(Ie){Re.error(Ie)}}forEach(Re,Ie){return new(Ie=he(Ie))((st,ve)=>{const pe=new s.Hp({next:Xe=>{try{Re(Xe)}catch(Ke){ve(Ke),pe.unsubscribe()}},error:ve,complete:st});this.subscribe(pe)})}_subscribe(Re){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(Re)}[R.L](){return this}pipe(...Re){return(0,re.U)(Re)(this)}toPromise(Re){return new(Re=he(Re))((Ie,st)=>{let ve;this.subscribe(pe=>ve=pe,pe=>st(pe),()=>Ie(ve))})}}return Q.create=je=>new Q(je),Q})();function he(Q){var je;return null!==(je=Q??le.v.Promise)&&void 0!==je?je:Promise}},7579:(ht,Se,N)=>{N.d(Se,{x:()=>se});var s=N(9751),j=N(727);const re=(0,N(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=N(8737),ge=N(2806);let se=(()=>{class he extends s.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const Q=new ae(this,this);return Q.operator=z,Q}_throwIfClosed(){if(this.closed)throw new re}next(z){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(z)}})}error(z){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:Q}=this;for(;Q.length;)Q.shift().error(z)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:Q,isStopped:je,observers:Re}=this;return Q||je?j.Lc:(this.currentObservers=null,Re.push(z),new j.w0(()=>{this.currentObservers=null,(0,le.P)(Re,z)}))}_checkFinalizedStatuses(z){const{hasError:Q,thrownError:je,isStopped:Re}=this;Q?z.error(je):Re&&z.complete()}asObservable(){const z=new s.y;return z.source=this,z}}return he.create=(Z,z)=>new ae(Z,z),he})();class ae extends se{constructor(Z,z){super(),this.destination=Z,this.source=z}next(Z){var z,Q;null===(Q=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===Q||Q.call(z,Z)}error(Z){var z,Q;null===(Q=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===Q||Q.call(z,Z)}complete(){var Z,z;null===(z=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===z||z.call(Z)}_subscribe(Z){var z,Q;return null!==(Q=null===(z=this.source)||void 0===z?void 0:z.subscribe(Z))&&void 0!==Q?Q:j.Lc}}},930:(ht,Se,N)=>{N.d(Se,{Hp:()=>st,Lv:()=>Q});var s=N(576),j=N(727),R=N(2416),re=N(7849),le=N(5032);const ge=he("C",void 0,void 0);function he(Pe,xe,De){return{kind:Pe,value:xe,error:De}}var Z=N(3410),z=N(2806);class Q extends j.w0{constructor(xe){super(),this.isStopped=!1,xe?(this.destination=xe,(0,j.Nn)(xe)&&xe.add(this)):this.destination=Ke}static create(xe,De,$e){return new st(xe,De,$e)}next(xe){this.isStopped?Xe(function ae(Pe){return he("N",Pe,void 0)}(xe),this):this._next(xe)}error(xe){this.isStopped?Xe(function se(Pe){return he("E",void 0,Pe)}(xe),this):(this.isStopped=!0,this._error(xe))}complete(){this.isStopped?Xe(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(xe){this.destination.next(xe)}_error(xe){try{this.destination.error(xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function Re(Pe,xe){return je.call(Pe,xe)}class Ie{constructor(xe){this.partialObserver=xe}next(xe){const{partialObserver:De}=this;if(De.next)try{De.next(xe)}catch($e){ve($e)}}error(xe){const{partialObserver:De}=this;if(De.error)try{De.error(xe)}catch($e){ve($e)}else ve(xe)}complete(){const{partialObserver:xe}=this;if(xe.complete)try{xe.complete()}catch(De){ve(De)}}}class st extends Q{constructor(xe,De,$e){let ie;if(super(),(0,s.m)(xe)||!xe)ie={next:xe??void 0,error:De??void 0,complete:$e??void 0};else{let ue;this&&R.v.useDeprecatedNextContext?(ue=Object.create(xe),ue.unsubscribe=()=>this.unsubscribe(),ie={next:xe.next&&Re(xe.next,ue),error:xe.error&&Re(xe.error,ue),complete:xe.complete&&Re(xe.complete,ue)}):ie=xe}this.destination=new Ie(ie)}}function ve(Pe){R.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Pe):(0,re.h)(Pe)}function Xe(Pe,xe){const{onStoppedNotification:De}=R.v;De&&Z.z.setTimeout(()=>De(Pe,xe))}const Ke={closed:!0,next:le.Z,error:function pe(Pe){throw Pe},complete:le.Z}},727:(ht,Se,N)=>{N.d(Se,{Lc:()=>ge,w0:()=>le,Nn:()=>se});var s=N(576);const R=(0,N(3888).d)(he=>function(z){he(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((Q,je)=>`${je+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var re=N(8737);class le{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Re of z)Re.remove(this);else z.remove(this);const{initialTeardown:Q}=this;if((0,s.m)(Q))try{Q()}catch(Re){Z=Re instanceof R?Re.errors:[Re]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const Re of je)try{ae(Re)}catch(Ie){Z=Z??[],Ie instanceof R?Z=[...Z,...Ie.errors]:Z.push(Ie)}}if(Z)throw new R(Z)}}add(Z){var z;if(Z&&Z!==this)if(this.closed)ae(Z);else{if(Z instanceof le){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(Z)}}_hasParent(Z){const{_parentage:z}=this;return z===Z||Array.isArray(z)&&z.includes(Z)}_addParent(Z){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(Z),z):z?[z,Z]:Z}_removeParent(Z){const{_parentage:z}=this;z===Z?this._parentage=null:Array.isArray(z)&&(0,re.P)(z,Z)}remove(Z){const{_finalizers:z}=this;z&&(0,re.P)(z,Z),Z instanceof le&&Z._removeParent(this)}}le.EMPTY=(()=>{const he=new le;return he.closed=!0,he})();const ge=le.EMPTY;function se(he){return he instanceof le||he&&"closed"in he&&(0,s.m)(he.remove)&&(0,s.m)(he.add)&&(0,s.m)(he.unsubscribe)}function ae(he){(0,s.m)(he)?he():he.unsubscribe()}},2416:(ht,Se,N)=>{N.d(Se,{v:()=>s});const s={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ht,Se,N)=>{N.d(Se,{E:()=>j});const j=new(N(9751).y)(le=>le.complete())},8996:(ht,Se,N)=>{N.d(Se,{D:()=>xe});var s=N(8421),j=N(5363),R=N(9468),ge=N(9751),ae=N(2202),he=N(576),Z=N(9672);function Q(De,$e){if(!De)throw new Error("Iterable cannot be null");return new ge.y(ie=>{(0,Z.f)(ie,$e,()=>{const ue=De[Symbol.asyncIterator]();(0,Z.f)(ie,$e,()=>{ue.next().then(ye=>{ye.done?ie.complete():ie.next(ye.value)})},0,!0)})})}var je=N(3670),Re=N(8239),Ie=N(1144),st=N(6495),ve=N(2206),pe=N(4532),Xe=N(3260);function xe(De,$e){return $e?function Pe(De,$e){if(null!=De){if((0,je.c)(De))return function re(De,$e){return(0,s.Xf)(De).pipe((0,R.R)($e),(0,j.Q)($e))}(De,$e);if((0,Ie.z)(De))return function se(De,$e){return new ge.y(ie=>{let ue=0;return $e.schedule(function(){ue===De.length?ie.complete():(ie.next(De[ue++]),ie.closed||this.schedule())})})}(De,$e);if((0,Re.t)(De))return function le(De,$e){return(0,s.Xf)(De).pipe((0,R.R)($e),(0,j.Q)($e))}(De,$e);if((0,ve.D)(De))return Q(De,$e);if((0,st.T)(De))return function z(De,$e){return new ge.y(ie=>{let ue;return(0,Z.f)(ie,$e,()=>{ue=De[ae.h](),(0,Z.f)(ie,$e,()=>{let ye,J;try{({value:ye,done:J}=ue.next())}catch(X){return void ie.error(X)}J?ie.complete():ie.next(ye)},0,!0)}),()=>(0,he.m)(ue?.return)&&ue.return()})}(De,$e);if((0,Xe.L)(De))return function Ke(De,$e){return Q((0,Xe.Q)(De),$e)}(De,$e)}throw(0,pe.z)(De)}(De,$e):(0,s.Xf)(De)}},8421:(ht,Se,N)=>{N.d(Se,{Xf:()=>je});var s=N(655),j=N(1144),R=N(8239),re=N(9751),le=N(3670),ge=N(2206),se=N(4532),ae=N(6495),he=N(3260),Z=N(576),z=N(7849),Q=N(8822);function je(Pe){if(Pe instanceof re.y)return Pe;if(null!=Pe){if((0,le.c)(Pe))return function Re(Pe){return new re.y(xe=>{const De=Pe[Q.L]();if((0,Z.m)(De.subscribe))return De.subscribe(xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,j.z)(Pe))return function Ie(Pe){return new re.y(xe=>{for(let De=0;De<Pe.length&&!xe.closed;De++)xe.next(Pe[De]);xe.complete()})}(Pe);if((0,R.t)(Pe))return function st(Pe){return new re.y(xe=>{Pe.then(De=>{xe.closed||(xe.next(De),xe.complete())},De=>xe.error(De)).then(null,z.h)})}(Pe);if((0,ge.D)(Pe))return pe(Pe);if((0,ae.T)(Pe))return function ve(Pe){return new re.y(xe=>{for(const De of Pe)if(xe.next(De),xe.closed)return;xe.complete()})}(Pe);if((0,he.L)(Pe))return function Xe(Pe){return pe((0,he.Q)(Pe))}(Pe)}throw(0,se.z)(Pe)}function pe(Pe){return new re.y(xe=>{(function Ke(Pe,xe){var De,$e,ie,ue;return(0,s.mG)(this,void 0,void 0,function*(){try{for(De=(0,s.KL)(Pe);!($e=yield De.next()).done;)if(xe.next($e.value),xe.closed)return}catch(ye){ie={error:ye}}finally{try{$e&&!$e.done&&(ue=De.return)&&(yield ue.call(De))}finally{if(ie)throw ie.error}}xe.complete()})})(Pe,xe).catch(De=>xe.error(De))})}},6451:(ht,Se,N)=>{N.d(Se,{T:()=>ge});var s=N(8189),j=N(8421),R=N(515),re=N(3269),le=N(8996);function ge(...se){const ae=(0,re.yG)(se),he=(0,re._6)(se,1/0),Z=se;return Z.length?1===Z.length?(0,j.Xf)(Z[0]):(0,s.J)(he)((0,le.D)(Z,ae)):R.E}},5403:(ht,Se,N)=>{N.d(Se,{x:()=>j});var s=N(930);function j(re,le,ge,se,ae){return new R(re,le,ge,se,ae)}class R extends s.Lv{constructor(le,ge,se,ae,he,Z){super(le),this.onFinalize=he,this.shouldUnsubscribe=Z,this._next=ge?function(z){try{ge(z)}catch(Q){le.error(Q)}}:super._next,this._error=ae?function(z){try{ae(z)}catch(Q){le.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=se?function(){try{se()}catch(z){le.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(ht,Se,N)=>{N.d(Se,{U:()=>R});var s=N(4482),j=N(5403);function R(re,le){return(0,s.e)((ge,se)=>{let ae=0;ge.subscribe((0,j.x)(se,he=>{se.next(re.call(le,he,ae++))}))})}},8189:(ht,Se,N)=>{N.d(Se,{J:()=>R});var s=N(5577),j=N(4671);function R(re=1/0){return(0,s.z)(j.y,re)}},5577:(ht,Se,N)=>{N.d(Se,{z:()=>ae});var s=N(4004),j=N(8421),R=N(4482),re=N(9672),le=N(5403),se=N(576);function ae(he,Z,z=1/0){return(0,se.m)(Z)?ae((Q,je)=>(0,s.U)((Re,Ie)=>Z(Q,Re,je,Ie))((0,j.Xf)(he(Q,je))),z):("number"==typeof Z&&(z=Z),(0,R.e)((Q,je)=>function ge(he,Z,z,Q,je,Re,Ie,st){const ve=[];let pe=0,Xe=0,Ke=!1;const Pe=()=>{Ke&&!ve.length&&!pe&&Z.complete()},xe=$e=>pe<Q?De($e):ve.push($e),De=$e=>{Re&&Z.next($e),pe++;let ie=!1;(0,j.Xf)(z($e,Xe++)).subscribe((0,le.x)(Z,ue=>{je?.(ue),Re?xe(ue):Z.next(ue)},()=>{ie=!0},void 0,()=>{if(ie)try{for(pe--;ve.length&&pe<Q;){const ue=ve.shift();Ie?(0,re.f)(Z,Ie,()=>De(ue)):De(ue)}Pe()}catch(ue){Z.error(ue)}}))};return he.subscribe((0,le.x)(Z,xe,()=>{Ke=!0,Pe()})),()=>{st?.()}}(Q,je,he,z)))}},5363:(ht,Se,N)=>{N.d(Se,{Q:()=>re});var s=N(9672),j=N(4482),R=N(5403);function re(le,ge=0){return(0,j.e)((se,ae)=>{se.subscribe((0,R.x)(ae,he=>(0,s.f)(ae,le,()=>ae.next(he),ge),()=>(0,s.f)(ae,le,()=>ae.complete(),ge),he=>(0,s.f)(ae,le,()=>ae.error(he),ge)))})}},3099:(ht,Se,N)=>{N.d(Se,{B:()=>le});var s=N(8421),j=N(7579),R=N(930),re=N(4482);function le(se={}){const{connector:ae=(()=>new j.x),resetOnError:he=!0,resetOnComplete:Z=!0,resetOnRefCountZero:z=!0}=se;return Q=>{let je,Re,Ie,st=0,ve=!1,pe=!1;const Xe=()=>{Re?.unsubscribe(),Re=void 0},Ke=()=>{Xe(),je=Ie=void 0,ve=pe=!1},Pe=()=>{const xe=je;Ke(),xe?.unsubscribe()};return(0,re.e)((xe,De)=>{st++,!pe&&!ve&&Xe();const $e=Ie=Ie??ae();De.add(()=>{st--,0===st&&!pe&&!ve&&(Re=ge(Pe,z))}),$e.subscribe(De),!je&&st>0&&(je=new R.Hp({next:ie=>$e.next(ie),error:ie=>{pe=!0,Xe(),Re=ge(Ke,he,ie),$e.error(ie)},complete:()=>{ve=!0,Xe(),Re=ge(Ke,Z),$e.complete()}}),(0,s.Xf)(xe).subscribe(je))})(Q)}}function ge(se,ae,...he){if(!0===ae)return void se();if(!1===ae)return;const Z=new R.Hp({next:()=>{Z.unsubscribe(),se()}});return ae(...he).subscribe(Z)}},9468:(ht,Se,N)=>{N.d(Se,{R:()=>j});var s=N(4482);function j(R,re=0){return(0,s.e)((le,ge)=>{ge.add(R.schedule(()=>le.subscribe(ge),re))})}},8505:(ht,Se,N)=>{N.d(Se,{b:()=>le});var s=N(576),j=N(4482),R=N(5403),re=N(4671);function le(ge,se,ae){const he=(0,s.m)(ge)||se||ae?{next:ge,error:se,complete:ae}:ge;return he?(0,j.e)((Z,z)=>{var Q;null===(Q=he.subscribe)||void 0===Q||Q.call(he);let je=!0;Z.subscribe((0,R.x)(z,Re=>{var Ie;null===(Ie=he.next)||void 0===Ie||Ie.call(he,Re),z.next(Re)},()=>{var Re;je=!1,null===(Re=he.complete)||void 0===Re||Re.call(he),z.complete()},Re=>{var Ie;je=!1,null===(Ie=he.error)||void 0===Ie||Ie.call(he,Re),z.error(Re)},()=>{var Re,Ie;je&&(null===(Re=he.unsubscribe)||void 0===Re||Re.call(he)),null===(Ie=he.finalize)||void 0===Ie||Ie.call(he)}))}):re.y}},4408:(ht,Se,N)=>{N.d(Se,{o:()=>le});var s=N(727);class j extends s.w0{constructor(se,ae){super()}schedule(se,ae=0){return this}}const R={setInterval(ge,se,...ae){const{delegate:he}=R;return he?.setInterval?he.setInterval(ge,se,...ae):setInterval(ge,se,...ae)},clearInterval(ge){const{delegate:se}=R;return(se?.clearInterval||clearInterval)(ge)},delegate:void 0};var re=N(8737);class le extends j{constructor(se,ae){super(se,ae),this.scheduler=se,this.work=ae,this.pending=!1}schedule(se,ae=0){if(this.closed)return this;this.state=se;const he=this.id,Z=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(Z,he,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId(Z,this.id,ae),this}requestAsyncId(se,ae,he=0){return R.setInterval(se.flush.bind(se,this),he)}recycleAsyncId(se,ae,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return ae;R.clearInterval(ae)}execute(se,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(se,ae);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,ae){let Z,he=!1;try{this.work(se)}catch(z){he=!0,Z=z||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:se,scheduler:ae}=this,{actions:he}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(he,this),null!=se&&(this.id=this.recycleAsyncId(ae,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(ht,Se,N)=>{N.d(Se,{v:()=>R});var s=N(6063);class j{constructor(le,ge=j.now){this.schedulerActionCtor=le,this.now=ge}schedule(le,ge=0,se){return new this.schedulerActionCtor(this,le).schedule(se,ge)}}j.now=s.l.now;class R extends j{constructor(le,ge=j.now){super(le,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(le){const{actions:ge}=this;if(this._active)return void ge.push(le);let se;this._active=!0;do{if(se=le.execute(le.state,le.delay))break}while(le=ge.shift());if(this._active=!1,se){for(;le=ge.shift();)le.unsubscribe();throw se}}}},4986:(ht,Se,N)=>{N.d(Se,{P:()=>re,z:()=>R});var s=N(4408);const R=new(N(7565).v)(s.o),re=R},6063:(ht,Se,N)=>{N.d(Se,{l:()=>s});const s={now:()=>(s.delegate||Date).now(),delegate:void 0}},233:(ht,Se,N)=>{N.d(Se,{N:()=>le});var s=N(4408),R=N(7565);const le=new class re extends R.v{}(class j extends s.o{constructor(ae,he){super(ae,he),this.scheduler=ae,this.work=he}schedule(ae,he=0){return he>0?super.schedule(ae,he):(this.delay=he,this.state=ae,this.scheduler.flush(this),this)}execute(ae,he){return he>0||this.closed?super.execute(ae,he):this._execute(ae,he)}requestAsyncId(ae,he,Z=0){return null!=Z&&Z>0||null==Z&&this.delay>0?super.requestAsyncId(ae,he,Z):ae.flush(this)}})},3410:(ht,Se,N)=>{N.d(Se,{z:()=>s});const s={setTimeout(j,R,...re){const{delegate:le}=s;return le?.setTimeout?le.setTimeout(j,R,...re):setTimeout(j,R,...re)},clearTimeout(j){const{delegate:R}=s;return(R?.clearTimeout||clearTimeout)(j)},delegate:void 0}},2202:(ht,Se,N)=>{N.d(Se,{h:()=>j});const j=function s(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ht,Se,N)=>{N.d(Se,{L:()=>s});const s="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ht,Se,N)=>{N.d(Se,{_6:()=>ge,jO:()=>re,yG:()=>le});var s=N(576),j=N(3532);function R(se){return se[se.length-1]}function re(se){return(0,s.m)(R(se))?se.pop():void 0}function le(se){return(0,j.K)(R(se))?se.pop():void 0}function ge(se,ae){return"number"==typeof R(se)?se.pop():ae}},8737:(ht,Se,N)=>{function s(j,R){if(j){const re=j.indexOf(R);0<=re&&j.splice(re,1)}}N.d(Se,{P:()=>s})},3888:(ht,Se,N)=>{function s(j){const re=j(le=>{Error.call(le),le.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}N.d(Se,{d:()=>s})},2806:(ht,Se,N)=>{N.d(Se,{O:()=>re,x:()=>R});var s=N(2416);let j=null;function R(le){if(s.v.useDeprecatedSynchronousErrorHandling){const ge=!j;if(ge&&(j={errorThrown:!1,error:null}),le(),ge){const{errorThrown:se,error:ae}=j;if(j=null,se)throw ae}}else le()}function re(le){s.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=le)}},9672:(ht,Se,N)=>{function s(j,R,re,le=0,ge=!1){const se=R.schedule(function(){re(),ge?j.add(this.schedule(null,le)):this.unsubscribe()},le);if(j.add(se),!ge)return se}N.d(Se,{f:()=>s})},4671:(ht,Se,N)=>{function s(j){return j}N.d(Se,{y:()=>s})},1144:(ht,Se,N)=>{N.d(Se,{z:()=>s});const s=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(ht,Se,N)=>{N.d(Se,{D:()=>j});var s=N(576);function j(R){return Symbol.asyncIterator&&(0,s.m)(R?.[Symbol.asyncIterator])}},576:(ht,Se,N)=>{function s(j){return"function"==typeof j}N.d(Se,{m:()=>s})},3670:(ht,Se,N)=>{N.d(Se,{c:()=>R});var s=N(8822),j=N(576);function R(re){return(0,j.m)(re[s.L])}},6495:(ht,Se,N)=>{N.d(Se,{T:()=>R});var s=N(2202),j=N(576);function R(re){return(0,j.m)(re?.[s.h])}},8239:(ht,Se,N)=>{N.d(Se,{t:()=>j});var s=N(576);function j(R){return(0,s.m)(R?.then)}},3260:(ht,Se,N)=>{N.d(Se,{L:()=>re,Q:()=>R});var s=N(655),j=N(576);function R(le){return(0,s.FC)(this,arguments,function*(){const se=le.getReader();try{for(;;){const{value:ae,done:he}=yield(0,s.qq)(se.read());if(he)return yield(0,s.qq)(void 0);yield yield(0,s.qq)(ae)}}finally{se.releaseLock()}})}function re(le){return(0,j.m)(le?.getReader)}},3532:(ht,Se,N)=>{N.d(Se,{K:()=>j});var s=N(576);function j(R){return R&&(0,s.m)(R.schedule)}},4482:(ht,Se,N)=>{N.d(Se,{A:()=>j,e:()=>R});var s=N(576);function j(re){return(0,s.m)(re?.lift)}function R(re){return le=>{if(j(le))return le.lift(function(ge){try{return re(ge,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ht,Se,N)=>{function s(){}N.d(Se,{Z:()=>s})},9635:(ht,Se,N)=>{N.d(Se,{U:()=>R,z:()=>j});var s=N(4671);function j(...re){return R(re)}function R(re){return 0===re.length?s.y:1===re.length?re[0]:function(ge){return re.reduce((se,ae)=>ae(se),ge)}}},7849:(ht,Se,N)=>{N.d(Se,{h:()=>R});var s=N(2416),j=N(3410);function R(re){j.z.setTimeout(()=>{const{onUnhandledError:le}=s.v;if(!le)throw re;le(re)})}},4532:(ht,Se,N)=>{function s(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(Se,{z:()=>s})},655:(ht,Se,N)=>{function re(J,X){var fe={};for(var oe in J)Object.prototype.hasOwnProperty.call(J,oe)&&X.indexOf(oe)<0&&(fe[oe]=J[oe]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var Ve=0;for(oe=Object.getOwnPropertySymbols(J);Ve<oe.length;Ve++)X.indexOf(oe[Ve])<0&&Object.prototype.propertyIsEnumerable.call(J,oe[Ve])&&(fe[oe[Ve]]=J[oe[Ve]])}return fe}function le(J,X,fe,oe){var yt,Ve=arguments.length,Ue=Ve<3?X:null===oe?oe=Object.getOwnPropertyDescriptor(X,fe):oe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ue=Reflect.decorate(J,X,fe,oe);else for(var tn=J.length-1;tn>=0;tn--)(yt=J[tn])&&(Ue=(Ve<3?yt(Ue):Ve>3?yt(X,fe,Ue):yt(X,fe))||Ue);return Ve>3&&Ue&&Object.defineProperty(X,fe,Ue),Ue}function ae(J,X,fe,oe){return new(fe||(fe=Promise))(function(Ue,yt){function tn(ln){try{qe(oe.next(ln))}catch(vn){yt(vn)}}function Bt(ln){try{qe(oe.throw(ln))}catch(vn){yt(vn)}}function qe(ln){ln.done?Ue(ln.value):function Ve(Ue){return Ue instanceof fe?Ue:new fe(function(yt){yt(Ue)})}(ln.value).then(tn,Bt)}qe((oe=oe.apply(J,X||[])).next())})}function ve(J){return this instanceof ve?(this.v=J,this):new ve(J)}function pe(J,X,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,oe=fe.apply(J,X||[]),Ue=[];return Ve={},yt("next"),yt("throw"),yt("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve;function yt(en){oe[en]&&(Ve[en]=function(Qt){return new Promise(function(Ht,Vt){Ue.push([en,Qt,Ht,Vt])>1||tn(en,Qt)})})}function tn(en,Qt){try{!function Bt(en){en.value instanceof ve?Promise.resolve(en.value.v).then(qe,ln):vn(Ue[0][2],en)}(oe[en](Qt))}catch(Ht){vn(Ue[0][3],Ht)}}function qe(en){tn("next",en)}function ln(en){tn("throw",en)}function vn(en,Qt){en(Qt),Ue.shift(),Ue.length&&tn(Ue[0][0],Ue[0][1])}}function Ke(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,X=J[Symbol.asyncIterator];return X?X.call(J):(J=function Q(J){var X="function"==typeof Symbol&&Symbol.iterator,fe=X&&J[X],oe=0;if(fe)return fe.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&oe>=J.length&&(J=void 0),{value:J&&J[oe++],done:!J}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),fe={},oe("next"),oe("throw"),oe("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function oe(Ue){fe[Ue]=J[Ue]&&function(yt){return new Promise(function(tn,Bt){!function Ve(Ue,yt,tn,Bt){Promise.resolve(Bt).then(function(qe){Ue({value:qe,done:tn})},yt)}(tn,Bt,(yt=J[Ue](yt)).done,yt.value)})}}}N.d(Se,{FC:()=>pe,KL:()=>Ke,_T:()=>re,gn:()=>le,mG:()=>ae,qq:()=>ve})},4650:(ht,Se,N)=>{N.d(Se,{$8M:()=>Dl,$Z:()=>ay,AFp:()=>Jv,ALo:()=>qT,AaK:()=>ae,AsE:()=>Qy,BQk:()=>af,CHM:()=>nh,CRH:()=>aA,CZH:()=>rl,CqO:()=>d0,D6c:()=>GA,EJc:()=>ED,EpF:()=>By,Ez6:()=>Ht,F$t:()=>Zy,F4k:()=>jy,FYo:()=>F_,FiY:()=>dt,G48:()=>mm,GSi:()=>rS,Gf:()=>sA,GfV:()=>Wu,GkF:()=>wg,Gpc:()=>z,Hsn:()=>jS,Ikx:()=>F0,JOm:()=>Ua,KtG:()=>Io,LFG:()=>k,LSH:()=>Gu,Lbi:()=>sm,Lck:()=>qg,MAs:()=>c0,MGl:()=>Eg,MMx:()=>Av,NdJ:()=>Hy,OlP:()=>Dn,Oqu:()=>Jy,PSE:()=>qA,PXZ:()=>uC,Q6J:()=>Ly,QGY:()=>bg,QP$:()=>Ne,QbO:()=>eC,Qsj:()=>as,R0b:()=>Ui,RDi:()=>vh,Rgc:()=>Xg,SBq:()=>zp,Sil:()=>AA,Suo:()=>oA,TTD:()=>ys,TgZ:()=>yg,Tol:()=>Mg,Udp:()=>md,VKq:()=>sD,W1O:()=>dA,X6Q:()=>kD,XFs:()=>Je,Xpm:()=>Ae,Xts:()=>Ml,Y36:()=>ed,YKP:()=>nD,YNc:()=>l0,Yjl:()=>B,Yz7:()=>Qt,Z0I:()=>Ti,ZZ4:()=>Ad,_Bn:()=>tD,_UZ:()=>Uy,_Vd:()=>Zp,_c5:()=>PD,_uU:()=>M0,aQg:()=>Fn,c2e:()=>SA,cJS:()=>Vt,cg1:()=>av,dDg:()=>lC,dqk:()=>It,eFA:()=>Tf,ekj:()=>D0,eoX:()=>Ar,f3M:()=>W,g9A:()=>Xv,gxx:()=>zw,h0i:()=>wd,hGG:()=>zA,hij:()=>cf,iGM:()=>iA,ifc:()=>mt,ip1:()=>bD,jDz:()=>Mv,kL8:()=>Ng,lG2:()=>Y,lcZ:()=>oD,lqb:()=>jc,lri:()=>dm,n5z:()=>Ds,n_E:()=>Uv,oAB:()=>Kt,oxw:()=>Dg,q4F:()=>ur,qLn:()=>xl,qOj:()=>Yc,qZA:()=>vg,rWj:()=>hm,s9C:()=>zy,sBO:()=>bi,sIi:()=>ea,s_b:()=>jv,soG:()=>Ed,tBr:()=>Qe,tb:()=>om,tp0:()=>Nn,uIk:()=>Oy,vHH:()=>Ie,vpe:()=>Xa,wAp:()=>Et,xp6:()=>QI,ynx:()=>Cg,z2F:()=>pm,zSh:()=>O_,zs3:()=>Pl});var s=N(7579),j=N(727),R=N(9751),re=N(6451),le=N(3099);function ge(o){for(let a in o)if(o[a]===ge)return a;throw Error("Could not find renamed property on target object.")}function se(o,a){for(const c in a)a.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=a[c])}function ae(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ae).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function he(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const Z=ge({__forward_ref__:ge});function z(o){return o.__forward_ref__=z,o.toString=function(){return ae(this())},o}function Q(o){return je(o)?o():o}function je(o){return"function"==typeof o&&o.hasOwnProperty(Z)&&o.__forward_ref__===z}class Ie extends Error{constructor(a,c){super(function st(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,c)),this.code=a}}function ve(o){return"string"==typeof o?o:null==o?"":String(o)}function xe(o,a){throw new Ie(-201,!1)}function Bt(o,a){null==o&&function qe(o,a,c,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${c} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function Qt(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}const Ht=Qt;function Vt(o){return{providers:o.providers||[],imports:o.imports||[]}}function br(o){return xr(o,Or)||xr(o,gi)}function Ti(o){return null!==br(o)}function xr(o,a){return o.hasOwnProperty(a)?o[a]:null}function Gi(o){return o&&(o.hasOwnProperty(jn)||o.hasOwnProperty(qi))?o[jn]:null}const Or=ge({\u0275prov:ge}),jn=ge({\u0275inj:ge}),gi=ge({ngInjectableDef:ge}),qi=ge({ngInjectorDef:ge});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let Wn;function yn(o){const a=Wn;return Wn=o,a}function ar(o,a,c){const d=br(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&Je.Optional?null:void 0!==a?a:void xe(ae(o))}function Cn(o){return{toString:o}.toString()}var wn=(()=>((wn=wn||{})[wn.OnPush=0]="OnPush",wn[wn.Default=1]="Default",wn))(),mt=(()=>{return(o=mt||(mt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",mt;var o})();const It=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Dr={},Dt=[],Rr=ge({\u0275cmp:ge}),Lt=ge({\u0275dir:ge}),Jr=ge({\u0275pipe:ge}),Gt=ge({\u0275mod:ge}),ir=ge({\u0275fac:ge}),In=ge({__NG_ELEMENT_ID__:ge});let nt=0;function Ae(o){return Cn(()=>{const c=!0===o.standalone,d={},h={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===wn.OnPush,directiveDefs:null,pipeDefs:null,standalone:c,dependencies:c&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||Dt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||mt.Emulated,id:"c"+nt++,styles:o.styles||Dt,_:null,setInput:null,schemas:o.schemas||null,tView:null},p=o.dependencies,y=o.features;return h.inputs=H(o.inputs,d),h.outputs=H(o.outputs),y&&y.forEach(w=>w(h)),h.directiveDefs=p?()=>("function"==typeof p?p():p).map(Ct).filter(wt):null,h.pipeDefs=p?()=>("function"==typeof p?p():p).map(ne).filter(wt):null,h})}function Ct(o){return O(o)||L(o)}function wt(o){return null!==o}function Kt(o){return Cn(()=>({type:o.type,bootstrap:o.bootstrap||Dt,declarations:o.declarations||Dt,imports:o.imports||Dt,exports:o.exports||Dt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function H(o,a){if(null==o)return Dr;const c={};for(const d in o)if(o.hasOwnProperty(d)){let h=o[d],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),c[h]=d,a&&(a[h]=p)}return c}const Y=Ae;function B(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function O(o){return o[Rr]||null}function L(o){return o[Lt]||null}function ne(o){return o[Jr]||null}function Ne(o){const a=O(o)||L(o)||ne(o);return null!==a&&a.standalone}function ot(o,a){const c=o[Gt]||null;if(!c&&!0===a)throw new Error(`Type ${ae(o)} does not have '\u0275mod' property.`);return c}function Kn(o){return Array.isArray(o)&&"object"==typeof o[1]}function Xr(o){return Array.isArray(o)&&!0===o[1]}function yo(o){return 0!=(8&o.flags)}function cc(o){return 2==(2&o.flags)}function ua(o){return 1==(1&o.flags)}function Hr(o){return null!==o.template}function uc(o){return 0!=(256&o[2])}function fr(o,a){return o.hasOwnProperty(ir)?o[ir]:null}class bo{constructor(a,c,d){this.previousValue=a,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function ys(){return bu}function bu(o){return o.type.prototype.ngOnChanges&&(o.setInput=fc),dl}function dl(){const o=Do(this),a=o?.current;if(a){const c=o.previous;if(c===Dr)o.previous=a;else for(let d in a)c[d]=a[d];o.current=null,this.ngOnChanges(a)}}function fc(o,a,c,d){const h=Do(o)||function On(o,a){return o[Du]=a}(o,{previous:Dr,current:null}),p=h.current||(h.current={}),y=h.previous,w=this.declaredInputs[c],D=y[w];p[w]=new bo(D&&D.currentValue,a,y===Dr),o[d]=a}ys.ngInherit=!0;const Du="__ngSimpleChanges__";function Do(o){return o[Du]||null}function Rn(o){for(;Array.isArray(o);)o=o[0];return o}function mi(o,a){return Rn(a[o])}function pr(o,a){return Rn(a[o.index])}function Ys(o,a){return o.data[a]}function Ai(o,a){return o[a]}function nn(o,a){const c=a[o];return Kn(c)?c:c[0]}function vs(o){return 64==(64&o[2])}function ri(o,a){return null==a?null:o[a]}function pa(o){o[18]=0}function Vn(o,a){o[5]+=a;let c=o,d=o[3];for(;null!==d&&(1===a&&1===c[5]||-1===a&&0===c[5]);)d[5]+=a,c=d,d=d[3]}const Mt={lFrame:Ea(null),bindingsEnabled:!0};function Ks(){return Mt.bindingsEnabled}function ke(){return Mt.lFrame.lView}function zt(){return Mt.lFrame.tView}function nh(o){return Mt.lFrame.contextLView=o,o[8]}function Io(o){return Mt.lFrame.contextLView=null,o}function Jn(){let o=So();for(;null!==o&&64===o.type;)o=o.parent;return o}function So(){return Mt.lFrame.currentTNode}function Pr(o,a){const c=Mt.lFrame;c.currentTNode=o,c.isParent=a}function pl(){return Mt.lFrame.isParent}function To(){Mt.lFrame.isParent=!1}function Qn(){const o=Mt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function wa(){return Mt.lFrame.bindingIndex++}function Xi(o){const a=Mt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}function Tu(o,a){const c=Mt.lFrame;c.bindingIndex=c.bindingRootIndex=o,Ao(a)}function Ao(o){Mt.lFrame.currentDirectiveIndex=o}function ba(){return Mt.lFrame.currentQueryIndex}function vc(o){Mt.lFrame.currentQueryIndex=o}function Da(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Au(o,a,c){if(c&Je.SkipSelf){let h=a,p=o;for(;!(h=h.parent,null!==h||c&Je.Host||(h=Da(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;a=h,o=p}const d=Mt.lFrame=sh();return d.currentTNode=a,d.lView=o,!0}function Mo(o){const a=sh(),c=o[1];Mt.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function sh(){const o=Mt.lFrame,a=null===o?null:o.child;return null===a?Ea(o):a}function Ea(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function oh(){const o=Mt.lFrame;return Mt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Mu=oh;function Cs(){const o=oh();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Tn(){return Mt.lFrame.selectedIndex}function es(o){Mt.lFrame.selectedIndex=o}function An(){const o=Mt.lFrame;return Ys(o.tView,o.selectedIndex)}function gl(o,a){for(let c=a.directiveStart,d=a.directiveEnd;c<d;c++){const p=o.data[c].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:T,ngOnDestroy:x}=p;y&&(o.contentHooks||(o.contentHooks=[])).push(-c,y),w&&((o.contentHooks||(o.contentHooks=[])).push(c,w),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(c,w)),D&&(o.viewHooks||(o.viewHooks=[])).push(-c,D),T&&((o.viewHooks||(o.viewHooks=[])).push(c,T),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(c,T)),null!=x&&(o.destroyHooks||(o.destroyHooks=[])).push(c,x)}}function ko(o,a,c){Oo(o,a,3,c)}function xo(o,a,c,d){(3&o[2])===c&&Oo(o,a,c,d)}function Ou(o,a){let c=o[2];(3&c)===a&&(c&=2047,c+=1,o[2]=c)}function Oo(o,a,c,d){const p=d??-1,y=a.length-1;let w=0;for(let D=void 0!==d?65535&o[18]:0;D<y;D++)if("number"==typeof a[D+1]){if(w=a[D],null!=d&&w>=d)break}else a[D]<0&&(o[18]+=65536),(w<p||-1==p)&&(Ru(o,c,a,D),o[18]=(4294901760&o[18])+D+2),D++}function Ru(o,a,c,d){const h=c[d]<0,p=c[d+1],w=o[h?-c[d]:c[d]];if(h){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class ii{constructor(a,c,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function ts(o,a,c){let d=0;for(;d<c.length;){const h=c[d];if("number"==typeof h){if(0!==h)break;d++;const p=c[d++],y=c[d++],w=c[d++];o.setAttribute(a,y,w,p)}else{const p=h,y=c[++d];Ic(p)?o.setProperty(a,p,y):o.setAttribute(a,p,y),d++}}return d}function Ia(o){return 3===o||4===o||6===o}function Ic(o){return 64===o.charCodeAt(0)}function Sa(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let d=0;d<a.length;d++){const h=a[d];"number"==typeof h?c=h:0===c||Nu(o,c,h,null,-1===c||2===c?a[++d]:null)}}return o}function Nu(o,a,c,d,h){let p=0,y=o.length;if(-1===a)y=-1;else for(;p<o.length;){const w=o[p++];if("number"==typeof w){if(w===a){y=-1;break}if(w>a){y=p-1;break}}}for(;p<o.length;){const w=o[p];if("number"==typeof w)break;if(w===c){if(null===d)return void(null!==h&&(o[p+1]=h));if(d===o[p+1])return void(o[p+2]=h)}p++,null!==d&&p++,null!==h&&p++}-1!==y&&(o.splice(y,0,a),p=y+1),o.splice(p++,0,c),null!==d&&o.splice(p++,0,d),null!==h&&o.splice(p++,0,h)}function ch(o){return-1!==o}function Xn(o){return 32767&o}function bs(o,a){let c=function uh(o){return o>>16}(o),d=a;for(;c>0;)d=d[15],c--;return d}let Sc=!0;function Ta(o){const a=Sc;return Sc=o,a}let Fu=0;const Zr={};function ns(o,a){const c=Cl(o,a);if(-1!==c)return c;const d=a[1];d.firstCreatePass&&(o.injectorIndex=a.length,Tc(d.data,o),Tc(a,null),Tc(d.blueprint,null));const h=Aa(o,a),p=o.injectorIndex;if(ch(h)){const y=Xn(h),w=bs(h,a),D=w[1].data;for(let T=0;T<8;T++)a[p+T]=w[y+T]|D[y+T]}return a[p+8]=h,p}function Tc(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Cl(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Aa(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,d=null,h=a;for(;null!==h;){if(d=Bo(h),null===d)return-1;if(c++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function Qs(o,a,c){!function Lu(o,a,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(In)&&(d=c[In]),null==d&&(d=c[In]=Fu++);const h=255&d;a.data[o+(h>>5)]|=1<<h}(o,a,c)}function Po(o,a,c){if(c&Je.Optional||void 0!==o)return o;xe()}function No(o,a,c,d){if(c&Je.Optional&&void 0===d&&(d=null),0==(c&(Je.Self|Je.Host))){const h=o[9],p=yn(void 0);try{return h?h.get(a,d,c&Je.Optional):ar(a,d,c&Je.Optional)}finally{yn(p)}}return Po(d,0,c)}function Fo(o,a,c,d=Je.Default,h){if(null!==o){if(1024&a[2]){const y=function fh(o,a,c,d,h){let p=o,y=a;for(;null!==p&&null!==y&&1024&y[2]&&!(256&y[2]);){const w=Vu(p,y,c,d|Je.Self,Zr);if(w!==Zr)return w;let D=p.parent;if(!D){const T=y[21];if(T){const x=T.get(c,Zr,d);if(x!==Zr)return x}D=Bo(y),y=y[15]}p=D}return h}(o,a,c,d,Zr);if(y!==Zr)return y}const p=Vu(o,a,c,d,Zr);if(p!==Zr)return p}return No(a,c,d,h)}function Vu(o,a,c,d,h){const p=function hh(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(In)?o[In]:void 0;return"number"==typeof a?a>=0?255&a:Ac:a}(c);if("function"==typeof p){if(!Au(a,o,d))return d&Je.Host?Po(h,0,d):No(a,c,d,h);try{const y=p(d);if(null!=y||d&Je.Optional)return y;xe()}finally{Mu()}}else if("number"==typeof p){let y=null,w=Cl(o,a),D=-1,T=d&Je.Host?a[16][6]:null;for((-1===w||d&Je.SkipSelf)&&(D=-1===w?Aa(o,a):a[w+8],-1!==D&&bl(d,!1)?(y=a[1],w=Xn(D),a=bs(D,a)):w=-1);-1!==w;){const x=a[1];if(Lo(p,w,x.data)){const F=wl(w,a,c,y,d,T);if(F!==Zr)return F}D=a[w+8],-1!==D&&bl(d,a[1].data[w+8]===T)&&Lo(p,w,a)?(y=x,w=Xn(D),a=bs(D,a)):w=-1}}return h}function wl(o,a,c,d,h,p){const y=a[1],w=y.data[o+8],x=ka(w,y,c,null==d?cc(w)&&Sc:d!=y&&0!=(3&w.type),h&Je.Host&&p===w);return null!==x?ki(a,y,x,w):Zr}function ka(o,a,c,d,h){const p=o.providerIndexes,y=a.data,w=1048575&p,D=o.directiveStart,x=p>>20,q=h?w+x:o.directiveEnd;for(let te=d?w:w+x;te<q;te++){const Ee=y[te];if(te<D&&c===Ee||te>=D&&Ee.type===c)return te}if(h){const te=y[D];if(te&&Hr(te)&&te.type===c)return D}return null}function ki(o,a,c,d){let h=o[c];const p=a.data;if(function Ec(o){return o instanceof ii}(h)){const y=h;y.resolving&&function Xe(o,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${o}${c}`)}(function pe(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():ve(o)}(p[c]));const w=Ta(y.canSeeViewProviders);y.resolving=!0;const D=y.injectImpl?yn(y.injectImpl):null;Au(o,d,Je.Default);try{h=o[c]=y.factory(void 0,p,o,d),a.firstCreatePass&&c>=d.directiveStart&&function Dc(o,a,c){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:p}=a.type.prototype;if(d){const y=bu(a);(c.preOrderHooks||(c.preOrderHooks=[])).push(o,y),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,y)}h&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-o,h),p&&((c.preOrderHooks||(c.preOrderHooks=[])).push(o,p),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,p))}(c,p[c],a)}finally{null!==D&&yn(D),Ta(w),y.resolving=!1,Mu()}}return h}function Lo(o,a,c){return!!(c[a+(o>>5)]&1<<o)}function bl(o,a){return!(o&Je.Self||o&Je.Host&&a)}class Vo{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,d){return Fo(this._tNode,this._lView,a,d,c)}}function Ac(){return new Vo(Jn(),ke())}function Ds(o){return Cn(()=>{const a=o.prototype.constructor,c=a[ir]||Uo(a),d=Object.prototype;let h=Object.getPrototypeOf(o.prototype).constructor;for(;h&&h!==d;){const p=h[ir]||Uo(h);if(p&&p!==c)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function Uo(o){return je(o)?()=>{const a=Uo(Q(o));return a&&a()}:fr(o)}function Bo(o){const a=o[1],c=a.type;return 2===c?a.declTNode:1===c?o[6]:null}function Dl(o){return function Ma(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const d=c.length;let h=0;for(;h<d;){const p=c[h];if(Ia(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<d&&"string"==typeof c[h];)h++;else{if(p===a)return c[h+1];h+=2}}}return null}(Jn(),o)}const Ir="__annotations__",jo="__parameters__",Xs="__prop__metadata__";function Ho(o,a,c,d,h){return Cn(()=>{const p=Mc(a);function y(...w){if(this instanceof y)return p.call(this,...w),this;const D=new y(...w);return function(x){return h&&h(x,...w),(x.hasOwnProperty(Ir)?x[Ir]:Object.defineProperty(x,Ir,{value:[]})[Ir]).push(D),d&&d(x),x}}return c&&(y.prototype=Object.create(c.prototype)),y.prototype.ngMetadataName=o,y.annotationCls=y,y})}function Mc(o){return function(...c){if(o){const d=o(...c);for(const h in d)this[h]=d[h]}}}function $o(o,a,c){return Cn(()=>{const d=Mc(a);function h(...p){if(this instanceof h)return d.apply(this,p),this;const y=new h(...p);return w.annotation=y,w;function w(D,T,x){const F=D.hasOwnProperty(jo)?D[jo]:Object.defineProperty(D,jo,{value:[]})[jo];for(;F.length<=x;)F.push(null);return(F[x]=F[x]||[]).push(y),D}}return c&&(h.prototype=Object.create(c.prototype)),h.prototype.ngMetadataName=o,h.annotationCls=h,h})}const Uu=$o("Attribute",o=>({attributeName:o,__NG_ELEMENT_ID__:()=>Dl(o)}));class Dn{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Qt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function lr(o){const a=It.ng;if(a&&a.\u0275compilerFacade)return a.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}const Nr=Function;function ct(o){return"function"==typeof o}function Fr(o,a){void 0===a&&(a=o);for(let c=0;c<o.length;c++){let d=o[c];Array.isArray(d)?(a===o&&(a=o.slice(0,c)),Fr(d,a)):a!==o&&a.push(d)}return a}function yi(o,a){o.forEach(c=>Array.isArray(c)?yi(c,a):a(c))}function Il(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function Es(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function eo(o,a){const c=[];for(let d=0;d<o;d++)c.push(a);return c}function zn(o,a,c){let d=ze(o,a);return d>=0?o[1|d]=c:(d=~d,function mh(o,a,c,d){let h=o.length;if(h==a)o.push(c,d);else if(1===h)o.push(d,o[0]),o[0]=c;else{for(h--,o.push(o[h-1],o[h]);h>a;)o[h]=o[h-2],h--;o[a]=c,o[a+1]=d}}(o,d,a,c)),d}function rn(o,a){const c=ze(o,a);if(c>=0)return o[1|c]}function ze(o,a){return function _h(o,a,c){let d=0,h=o.length>>c;for(;h!==d;){const p=d+(h-d>>1),y=o[p<<c];if(a===y)return p<<c;y>a?h=p:d=p+1}return~(h<<c)}(o,a,1)}const Sp=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\).*)\)/,Bu=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,ju=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Rc=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{[^}]*super\(\.\.\.arguments\)/;class En{constructor(a){this._reflect=a||It.Reflect}factory(a){return(...c)=>new a(...c)}_zipTypesAndAnnotations(a,c){let d;d=eo(typeof a>"u"?c.length:a.length);for(let h=0;h<d.length;h++)d[h]=typeof a>"u"?[]:a[h]&&a[h]!=Object?[a[h]]:[],c&&null!=c[h]&&(d[h]=d[h].concat(c[h]));return d}_ownParameters(a,c){if(function gr(o){return Sp.test(o)||Rc.test(o)||Bu.test(o)&&!ju.test(o)}(a.toString()))return null;if(a.parameters&&a.parameters!==c.parameters)return a.parameters;const h=a.ctorParameters;if(h&&h!==c.ctorParameters){const w="function"==typeof h?h():h,D=w.map(x=>x&&x.type),T=w.map(x=>x&&We(x.decorators));return this._zipTypesAndAnnotations(D,T)}const p=a.hasOwnProperty(jo)&&a[jo],y=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",a);return y||p?this._zipTypesAndAnnotations(y,p):eo(a.length)}parameters(a){if(!ct(a))return[];const c=Tl(a);let d=this._ownParameters(a,c);return!d&&c!==Object&&(d=this.parameters(c)),d||[]}_ownAnnotations(a,c){if(a.annotations&&a.annotations!==c.annotations){let d=a.annotations;return"function"==typeof d&&d.annotations&&(d=d.annotations),d}return a.decorators&&a.decorators!==c.decorators?We(a.decorators):a.hasOwnProperty(Ir)?a[Ir]:null}annotations(a){if(!ct(a))return[];const c=Tl(a),d=this._ownAnnotations(a,c)||[];return(c!==Object?this.annotations(c):[]).concat(d)}_ownPropMetadata(a,c){if(a.propMetadata&&a.propMetadata!==c.propMetadata){let d=a.propMetadata;return"function"==typeof d&&d.propMetadata&&(d=d.propMetadata),d}if(a.propDecorators&&a.propDecorators!==c.propDecorators){const d=a.propDecorators,h={};return Object.keys(d).forEach(p=>{h[p]=We(d[p])}),h}return a.hasOwnProperty(Xs)?a[Xs]:null}propMetadata(a){if(!ct(a))return{};const c=Tl(a),d={};if(c!==Object){const p=this.propMetadata(c);Object.keys(p).forEach(y=>{d[y]=p[y]})}const h=this._ownPropMetadata(a,c);return h&&Object.keys(h).forEach(p=>{const y=[];d.hasOwnProperty(p)&&y.push(...d[p]),y.push(...h[p]),d[p]=y}),d}ownPropMetadata(a){return ct(a)&&this._ownPropMetadata(a,Tl(a))||{}}hasLifecycleHook(a,c){return a instanceof Nr&&c in a.prototype}}function We(o){return o?o.map(a=>new(0,a.type.annotationCls)(...a.args?a.args:[])):[]}function Tl(o){const a=o.prototype?Object.getPrototypeOf(o.prototype):null;return(a?a.constructor:null)||Object}const to={},Ri="__NG_DI_FLAG__",no="ngTempTokenPath",vi=/\n/gm,Oa="__source";let Zo;function E(o){const a=Zo;return Zo=o,a}function S(o,a=Je.Default){if(void 0===Zo)throw new Ie(-203,!1);return null===Zo?ar(o,void 0,a):Zo.get(o,a&Je.Optional?null:void 0,a)}function k(o,a=Je.Default){return(function Hn(){return Wn}()||S)(Q(o),a)}function W(o,a=Je.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),k(o,a)}function ce(o){const a=[];for(let c=0;c<o.length;c++){const d=Q(o[c]);if(Array.isArray(d)){if(0===d.length)throw new Ie(900,!1);let h,p=Je.Default;for(let y=0;y<d.length;y++){const w=d[y],D=Ze(w);"number"==typeof D?-1===D?h=w.token:p|=D:h=w}a.push(k(h,p))}else a.push(k(d))}return a}function _e(o,a){return o[Ri]=a,o.prototype[Ri]=a,o}function Ze(o){return o[Ri]}const Qe=_e($o("Inject",o=>({token:o})),-1),dt=_e($o("Optional"),8),kn=_e($o("Self"),2),Nn=_e($o("SkipSelf"),4),Ra=_e($o("Host"),1);let Hu,hn=null;function Pa(o){return Ss(function cr(){return hn=hn||new En}().parameters(o))}function Ss(o){return o.map(a=>function er(o){const a={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(o)&&o.length>0)for(let c=0;c<o.length;c++){const d=o[c];if(void 0===d)continue;const h=Object.getPrototypeOf(d);if(d instanceof dt||"Optional"===h.ngMetadataName)a.optional=!0;else if(d instanceof Nn||"SkipSelf"===h.ngMetadataName)a.skipSelf=!0;else if(d instanceof kn||"Self"===h.ngMetadataName)a.self=!0;else if(d instanceof Ra||"Host"===h.ngMetadataName)a.host=!0;else if(d instanceof Qe)a.token=d.token;else if(d instanceof Uu){if(void 0===d.attributeName)throw new Ie(204,!1);a.attribute=d.attributeName}else a.token=d}else a.token=void 0===o||Array.isArray(o)&&0===o.length?null:o;return a}(a))}function vh(o){Hu=o}class S_{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Fa(o){return o instanceof S_?o.changingThisBreaksApplicationSecurity:o}const g=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var tr=(()=>((tr=tr||{})[tr.NONE=0]="NONE",tr[tr.HTML=1]="HTML",tr[tr.STYLE=2]="STYLE",tr[tr.SCRIPT=3]="SCRIPT",tr[tr.URL=4]="URL",tr[tr.RESOURCE_URL=5]="RESOURCE_URL",tr))();function Gu(o){const a=function qu(){const o=ke();return o&&o[12]}();return a?a.sanitize(tr.URL,o)||"":function Nc(o,a){const c=function $u(o){return o instanceof S_&&o.getTypeName()||null}(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===a}(o,"URL")?Fa(o):function m(o){return(o=String(o)).match(g)?o:"unsafe:"+o}(ve(o))}const Ml=new Dn("ENVIRONMENT_INITIALIZER"),zw=new Dn("INJECTOR",-1),Gw=new Dn("INJECTOR_DEF_TYPES");class Sh{get(a,c=to){if(c===to){const d=new Error(`NullInjectorError: No provider for ${ae(a)}!`);throw d.name="NullInjectorError",d}return c}}function aI(...o){return{\u0275providers:lI(0,o)}}function lI(o,...a){const c=[],d=new Set;let h;return yi(a,p=>{const y=p;Hp(y,c,[],d)&&(h||(h=[]),h.push(y))}),void 0!==h&&Vc(h,c),c}function Vc(o,a){for(let c=0;c<o.length;c++){const{providers:h}=o[c];yi(h,p=>{a.push(p)})}}function Hp(o,a,c,d){if(!(o=Q(o)))return!1;let h=null,p=Gi(o);const y=!p&&O(o);if(p||y){if(y&&!y.standalone)return!1;h=o}else{const D=o.ngModule;if(p=Gi(D),!p)return!1;h=D}const w=d.has(h);if(y){if(w)return!1;if(d.add(h),y.dependencies){const D="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const T of D)Hp(T,a,c,d)}}else{if(!p)return!1;{if(null!=p.imports&&!w){let T;d.add(h);try{yi(p.imports,x=>{Hp(x,a,c,d)&&(T||(T=[]),T.push(x))})}finally{}void 0!==T&&Vc(T,a)}if(!w){const T=fr(h)||(()=>new h);a.push({provide:h,useFactory:T,deps:Dt},{provide:Gw,useValue:h,multi:!0},{provide:Ml,useValue:()=>k(h),multi:!0})}const D=p.providers;null==D||w||yi(D,x=>{a.push(x)})}}return h!==o&&void 0!==o.providers}const uO=ge({provide:String,useValue:ge});function qw(o){return null!==o&&"object"==typeof o&&uO in o}function Uc(o){return"function"==typeof o}const O_=new Dn("Set Injector scope."),Th={},Bc={};let Ah;function kl(){return void 0===Ah&&(Ah=new Sh),Ah}class jc{}class Kw extends jc{constructor(a,c,d,h){super(),this.parent=c,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,P_(a,y=>this.processProvider(y)),this.records.set(zw,Mh(void 0,this)),h.has("environment")&&this.records.set(jc,Mh(void 0,this));const p=this.records.get(O_);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Gw.multi,Dt,Je.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const c=E(this),d=yn(void 0);try{return a()}finally{E(c),yn(d)}}get(a,c=to,d=Je.Default){this.assertNotDestroyed();const h=E(this),p=yn(void 0);try{if(!(d&Je.SkipSelf)){let w=this.records.get(a);if(void 0===w){const D=function hI(o){return"function"==typeof o||"object"==typeof o&&o instanceof Dn}(a)&&br(a);w=D&&this.injectableDefInScope(D)?Mh(R_(a),Th):null,this.records.set(a,w)}if(null!=w)return this.hydrate(a,w)}return(d&Je.Self?kl():this.parent).get(a,c=d&Je.Optional&&c===to?null:c)}catch(y){if("NullInjectorError"===y.name){if((y[no]=y[no]||[]).unshift(ae(a)),h)throw y;return function ut(o,a,c,d){const h=o[no];throw a[Oa]&&h.unshift(a[Oa]),o.message=function Rt(o,a,c,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let h=ae(a);if(Array.isArray(a))h=a.map(ae).join(" -> ");else if("object"==typeof a){let p=[];for(let y in a)if(a.hasOwnProperty(y)){let w=a[y];p.push(y+":"+("string"==typeof w?JSON.stringify(w):ae(w)))}h=`{${p.join(", ")}}`}return`${c}${d?"("+d+")":""}[${h}]: ${o.replace(vi,"\n  ")}`}("\n"+o.message,h,c,d),o.ngTokenPath=h,o[no]=null,o}(y,a,"R3InjectorError",this.source)}throw y}finally{yn(p),E(h)}}resolveInjectorInitializers(){const a=E(this),c=yn(void 0);try{const d=this.get(Ml.multi,Dt,Je.Self);for(const h of d)h()}finally{E(a),yn(c)}}toString(){const a=[],c=this.records;for(const d of c.keys())a.push(ae(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(a){let c=Uc(a=Q(a))?a:Q(a&&a.provide);const d=function Ni(o){return qw(o)?Mh(void 0,o.useValue):Mh($p(o),Th)}(a);if(Uc(a)||!0!==a.multi)this.records.get(c);else{let h=this.records.get(c);h||(h=Mh(void 0,Th,!0),h.factory=()=>ce(h.multi),this.records.set(c,h)),c=a,h.multi.push(a)}this.records.set(c,d)}hydrate(a,c){return c.value===Th&&(c.value=Bc,c.value=c.factory()),"object"==typeof c.value&&c.value&&function dI(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=Q(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function R_(o){const a=br(o),c=null!==a?a.factory:fr(o);if(null!==c)return c;if(o instanceof Dn)throw new Ie(204,!1);if(o instanceof Function)return function uI(o){const a=o.length;if(a>0)throw eo(a,"?"),new Ie(204,!1);const c=function xn(o){const a=o&&(o[Or]||o[gi]);if(a){const c=function zi(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),a}return null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new Ie(204,!1)}function $p(o,a,c){let d;if(Uc(o)){const h=Q(o);return fr(h)||R_(h)}if(qw(o))d=()=>Q(o.useValue);else if(function Yw(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...ce(o.deps||[]));else if(function Ww(o){return!(!o||!o.useExisting)}(o))d=()=>k(Q(o.useExisting));else{const h=Q(o&&(o.useClass||o.provide));if(!function Jw(o){return!!o.deps}(o))return fr(h)||R_(h);d=()=>new h(...ce(o.deps))}return d}function Mh(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function fI(o){return!!o.\u0275providers}function P_(o,a){for(const c of o)Array.isArray(c)?P_(c,a):fI(c)?P_(c.\u0275providers,a):a(c)}class pI{}class hO{resolveComponentFactory(a){throw function dO(o){const a=Error(`No component factory found for ${ae(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Zp=(()=>{class o{}return o.NULL=new hO,o})();function fO(){return kh(Jn(),ke())}function kh(o,a){return new zp(pr(o,a))}let zp=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=fO,o})();function Qw(o){return o instanceof zp?o.nativeElement:o}class F_{}let as=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function Xw(){const o=ke(),c=nn(Jn().index,o);return(Kn(c)?c:o)[11]}(),o})(),mI=(()=>{class o{}return o.\u0275prov=Qt({token:o,providedIn:"root",factory:()=>null}),o})();class Wu{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const ur=new Wu("14.2.2"),Sr={};function xh(o){return o.ngOriginalError}class xl{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&xh(a);for(;c&&xh(c);)c=xh(c);return c||null}}const j_=new Map;let wO=0;const ob="__ngContext__";function dr(o,a){Kn(a)?(o[ob]=a[20],function II(o){j_.set(o[20],o)}(a)):o[ob]=a}function La(o){return o instanceof Function?o():o}var Ua=(()=>((Ua=Ua||{})[Ua.Important=1]="Important",Ua[Ua.DashCase=2]="DashCase",Ua))();function cb(o,a){return undefined(o,a)}function Nh(o){const a=o[3];return Xr(a)?a[3]:a}function z_(o){return FI(o[13])}function Qu(o){return FI(o[4])}function FI(o){for(;null!==o&&!Xr(o);)o=o[4];return o}function Fh(o,a,c,d,h){if(null!=d){let p,y=!1;Xr(d)?p=d:Kn(d)&&(y=!0,d=d[0]);const w=Rn(d);0===o&&null!==c?null==h?BI(a,c,w):Ba(a,c,w,h||null,!0):1===o&&null!==c?Ba(a,c,w,h||null,!0):2===o?function Qp(o,a,c){const d=K_(o,a);d&&function xO(o,a,c,d){o.removeChild(a,c,d)}(o,d,a,c)}(a,w,y):3===o&&a.destroyNode(w),null!=p&&function OO(o,a,c,d,h){const p=c[7];p!==Rn(c)&&Fh(a,o,d,p,h);for(let w=10;w<c.length;w++){const D=c[w];Lh(D[1],D,o,a,d,p)}}(a,o,p,c,h)}}function hb(o,a,c){return o.createElement(a,c)}function VI(o,a){const c=o[9],d=c.indexOf(a),h=a[3];512&a[2]&&(a[2]&=-513,Vn(h,-1)),c.splice(d,1)}function fb(o,a){if(o.length<=10)return;const c=10+a,d=o[c];if(d){const h=d[17];null!==h&&h!==o&&VI(h,d),a>0&&(o[c-1][4]=d[4]);const p=Es(o,10+a);!function TO(o,a){Lh(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const y=p[19];null!==y&&y.detachView(p[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function UI(o,a){if(!(128&a[2])){const c=a[11];c.destroyNode&&Lh(o,a,c,3,null,null),function q_(o){let a=o[13];if(!a)return pb(o[1],o);for(;a;){let c=null;if(Kn(a))c=a[13];else{const d=a[10];d&&(c=d)}if(!c){for(;a&&!a[4]&&a!==o;)Kn(a)&&pb(a[1],a),a=a[3];null===a&&(a=o),Kn(a)&&pb(a[1],a),c=a&&a[4]}a=c}}(a)}}function pb(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function Y_(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let d=0;d<c.length;d+=2){const h=a[c[d]];if(!(h instanceof ii)){const p=c[d+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const w=h[p[y]],D=p[y+1];try{D.call(w)}finally{}}else try{p.call(h)}finally{}}}}(o,a),function W_(o,a){const c=o.cleanup,d=a[7];let h=-1;if(null!==c)for(let p=0;p<c.length-1;p+=2)if("string"==typeof c[p]){const y=c[p+1],w="function"==typeof y?y(a):Rn(a[y]),D=d[h=c[p+2]],T=c[p+3];"boolean"==typeof T?w.removeEventListener(c[p],D,T):T>=0?d[h=T]():d[h=-T].unsubscribe(),p+=2}else{const y=d[h=c[p+1]];c[p].call(y)}if(null!==d){for(let p=h+1;p<d.length;p++)(0,d[p])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const c=a[17];if(null!==c&&Xr(a[3])){c!==a[3]&&VI(c,a);const d=a[19];null!==d&&d.detachView(o)}!function SI(o){j_.delete(o[20])}(a)}}function Wp(o,a,c){return function gb(o,a,c){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return c[0];if(2&d.flags){const h=o.data[d.directiveStart].encapsulation;if(h===mt.None||h===mt.Emulated)return null}return pr(d,c)}(o,a.parent,c)}function Ba(o,a,c,d,h){o.insertBefore(a,c,d,h)}function BI(o,a,c){o.appendChild(a,c)}function mb(o,a,c,d,h){null!==d?Ba(o,a,c,d,h):BI(o,a,c)}function K_(o,a){return o.parentNode(a)}function jI(o,a,c){return HI(o,a,c)}let HI=function Yp(o,a,c){return 40&o.type?pr(o,c):null};function Kp(o,a,c,d){const h=Wp(o,d,a),p=a[11],w=jI(d.parent||a[6],d,a);if(null!=h)if(Array.isArray(c))for(let D=0;D<c.length;D++)mb(p,h,c[D],w,!1);else mb(p,h,c,w,!1)}function Q_(o,a){if(null!==a){const c=a.type;if(3&c)return pr(a,o);if(4&c)return Jp(-1,o[a.index]);if(8&c){const d=a.child;if(null!==d)return Q_(o,d);{const h=o[a.index];return Xr(h)?Jp(-1,h):Rn(h)}}if(32&c)return cb(a,o)()||Rn(o[a.index]);{const d=yb(o,a);return null!==d?Array.isArray(d)?d[0]:Q_(Nh(o[16]),d):Q_(o,a.next)}}return null}function yb(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Jp(o,a){const c=10+o+1;if(c<a.length){const d=a[c],h=d[1].firstChild;if(null!==h)return Q_(d,h)}return a[7]}function Xp(o,a,c,d,h,p,y){for(;null!=c;){const w=d[c.index],D=c.type;if(y&&0===a&&(w&&dr(Rn(w),d),c.flags|=4),64!=(64&c.flags))if(8&D)Xp(o,a,c.child,d,h,p,!1),Fh(a,o,h,w,p);else if(32&D){const T=cb(c,d);let x;for(;x=T();)Fh(a,o,h,x,p);Fh(a,o,h,w,p)}else 16&D?Vh(o,a,d,c,h,p):Fh(a,o,h,w,p);c=y?c.projectionNext:c.next}}function Lh(o,a,c,d,h,p){Xp(c,d,o.firstChild,a,h,p,!1)}function Vh(o,a,c,d,h,p){const y=c[16],D=y[6].projection[d.projection];if(Array.isArray(D))for(let T=0;T<D.length;T++)Fh(a,o,h,D[T],p);else Xp(o,a,D,y[3],h,p,!0)}function vb(o,a,c){o.setAttribute(a,"style",c)}function Cb(o,a,c){""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c)}function ZI(o,a,c){let d=o.length;for(;;){const h=o.indexOf(a,c);if(-1===h)return h;if(0===h||o.charCodeAt(h-1)<=32){const p=a.length;if(h+p===d||o.charCodeAt(h+p)<=32)return h}c=h+1}}const wb="ng-template";function GI(o,a,c){let d=0;for(;d<o.length;){let h=o[d++];if(c&&"class"===h){if(h=o[d],-1!==ZI(h.toLowerCase(),a,0))return!0}else if(1===h){for(;d<o.length&&"string"==typeof(h=o[d++]);)if(h.toLowerCase()===a)return!0;return!1}}return!1}function Uh(o){return 4===o.type&&o.value!==wb}function X_(o,a,c){return a===(4!==o.type||c?o.value:wb)}function bb(o,a,c){let d=4;const h=o.attrs||[],p=function Eb(o){for(let a=0;a<o.length;a++)if(Ia(o[a]))return a;return o.length}(h);let y=!1;for(let w=0;w<a.length;w++){const D=a[w];if("number"!=typeof D){if(!y)if(4&d){if(d=2|1&d,""!==D&&!X_(o,D,c)||""===D&&1===a.length){if(so(d))return!1;y=!0}}else{const T=8&d?D:a[++w];if(8&d&&null!==o.attrs){if(!GI(o.attrs,T,c)){if(so(d))return!1;y=!0}continue}const F=qI(8&d?"class":D,h,Uh(o),c);if(-1===F){if(so(d))return!1;y=!0;continue}if(""!==T){let q;q=F>p?"":h[F+1].toLowerCase();const te=8&d?q:null;if(te&&-1!==ZI(te,T,0)||2&d&&T!==q){if(so(d))return!1;y=!0}}}}else{if(!y&&!so(d)&&!so(D))return!1;if(y&&so(D))continue;y=!1,d=D|1&d}}return so(d)||y}function so(o){return 0==(1&o)}function qI(o,a,c,d){if(null===a)return-1;let h=0;if(d||!c){let p=!1;for(;h<a.length;){const y=a[h];if(y===o)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let w=a[++h];for(;"string"==typeof w;)w=a[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function Ib(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const d=o[c];if("number"==typeof d)return-1;if(d===a)return c;c++}return-1}(a,o)}function Rl(o,a,c=!1){for(let d=0;d<a.length;d++)if(bb(o,a[d],c))return!0;return!1}function WI(o,a){e:for(let c=0;c<a.length;c++){const d=a[c];if(o.length===d.length){for(let h=0;h<o.length;h++)if(o[h]!==d[h])continue e;return!0}}return!1}function ey(o,a){return o?":not("+a.trim()+")":a}function YI(o){let a=o[0],c=1,d=2,h="",p=!1;for(;c<o.length;){let y=o[c];if("string"==typeof y)if(2&d){const w=o[++c];h+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&d?h+="."+y:4&d&&(h+=" "+y);else""!==h&&!so(y)&&(a+=ey(p,h),h=""),d=y,p=p||!so(d);c++}return""!==h&&(a+=ey(p,h)),a}const kt={};function QI(o){Sb(zt(),ke(),Tn()+o,!1)}function Sb(o,a,c,d){if(!d)if(3==(3&a[2])){const p=o.preOrderCheckHooks;null!==p&&ko(a,p,c)}else{const p=o.preOrderHooks;null!==p&&xo(a,p,0,c)}es(c)}const XI={\u0275\u0275defineInjectable:Qt,\u0275\u0275defineInjector:Vt,\u0275\u0275inject:k,\u0275\u0275invalidFactoryDep:function U(o){throw new Ie(202,!1)},resolveForwardRef:Q};const eS=ge({provide:String,useValue:ge});function Tb(o){return void 0!==o.useClass}function tS(o){return void 0!==o.useFactory}const rS=Ho("Injectable",void 0,void 0,void 0,(o,a)=>function PO(o,a){let c=null,d=null;o.hasOwnProperty(Or)||Object.defineProperty(o,Or,{get:()=>(null===c&&(c=lr().compileInjectable(XI,`ng:///${o.name}/\u0275prov.js`,function eg(o,a){const c=a||{providedIn:null},d={name:o.name,type:o,typeArgumentCount:0,providedIn:c.providedIn};return(Tb(c)||tS(c))&&void 0!==c.deps&&(d.deps=Ss(c.deps)),Tb(c)?d.useClass=c.useClass:function Ab(o){return eS in o}(c)?d.useValue=c.useValue:tS(c)?d.useFactory=c.useFactory:function nS(o){return void 0!==o.useExisting}(c)&&(d.useExisting=c.useExisting),d}(o,a))),c)}),o.hasOwnProperty(ir)||Object.defineProperty(o,ir,{get:()=>{if(null===d){const h=lr();d=h.compileFactory(XI,`ng:///${o.name}/\u0275fac.js`,{name:o.name,type:o,typeArgumentCount:0,deps:Pa(o),target:h.FactoryTarget.Injectable})}return d},configurable:!0})}(o,a));function $c(o,a=null,c=null,d){const h=Mb(o,a,c,d);return h.resolveInjectorInitializers(),h}function Mb(o,a=null,c=null,d,h=new Set){const p=[c||Dt,aI(o)];return d=d||("object"==typeof o?void 0:ae(o)),new Kw(p,a||kl(),d||null,h)}let Pl=(()=>{class o{static create(c,d){if(Array.isArray(c))return $c({name:""},d,c,"");{const h=c.name??"";return $c({name:h},c.parent,c.providers,h)}}}return o.THROW_IF_NOT_FOUND=to,o.NULL=new Sh,o.\u0275prov=Qt({token:o,providedIn:"any",factory:()=>k(zw)}),o.__NG_ELEMENT_ID__=-1,o})();function ed(o,a=Je.Default){const c=ke();return null===c?k(o,a):Fo(Jn(),c,Q(o),a)}function ay(){throw new Error("invalid")}function tg(o,a){return o<<17|a<<2}function ks(o){return o>>17&32767}function ng(o){return 2|o}function xs(o){return(131068&o)>>2}function Za(o,a){return-131069&o|a<<2}function zc(o){return 1|o}function Hb(o,a){const c=o.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const h=c[d],p=c[d+1];if(-1!==p){const y=o.data[p];vc(h),y.contentQueries(2,a[p],p)}}}function og(o,a,c,d,h,p,y,w,D,T,x){const F=a.blueprint.slice();return F[0]=h,F[2]=76|d,(null!==x||o&&1024&o[2])&&(F[2]|=1024),pa(F),F[3]=F[15]=o,F[8]=c,F[10]=y||o&&o[10],F[11]=w||o&&o[11],F[12]=D||o&&o[12]||null,F[9]=T||o&&o[9]||null,F[6]=p,F[20]=function Oh(){return wO++}(),F[21]=x,F[16]=2==a.type?o[16]:F,F}function Ul(o,a,c,d,h){let p=o.data[a];if(null===p)p=function _y(o,a,c,d,h){const p=So(),y=pl(),D=o.data[a]=function mS(o,a,c,d,h,p){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,c,a,d,h);return null===o.firstChild&&(o.firstChild=D),null!==p&&(y?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D)),D}(o,a,c,d,h),function Su(){return Mt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=c,p.value=d,p.attrs=h;const y=function fl(){const o=Mt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return Pr(p,!0),p}function qc(o,a,c,d){if(0===c)return-1;const h=a.length;for(let p=0;p<c;p++)a.push(d),o.blueprint.push(d),o.data.push(null);return h}function ag(o,a,c){Mo(a);try{const d=o.viewQuery;null!==d&&Ey(1,d,c);const h=o.template;null!==h&&lg(o,a,h,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&Hb(o,a),o.staticViewQueries&&Ey(2,o.viewQuery,c);const p=o.components;null!==p&&function qh(o,a){for(let c=0;c<a.length;c++)e0(o,a[c])}(a,p)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[2]&=-5,Cs()}}function Os(o,a,c,d){const h=a[2];if(128!=(128&h)){Mo(a);try{pa(a),function Ca(o){return Mt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&lg(o,a,c,2,d);const y=3==(3&h);if(y){const T=o.preOrderCheckHooks;null!==T&&ko(a,T,null)}else{const T=o.preOrderHooks;null!==T&&xo(a,T,0,null),Ou(a,0)}if(function Qb(o){for(let a=z_(o);null!==a;a=Qu(a)){if(!a[2])continue;const c=a[9];for(let d=0;d<c.length;d++){const h=c[d],p=h[3];0==(512&h[2])&&Vn(p,1),h[2]|=512}}}(a),function Dy(o){for(let a=z_(o);null!==a;a=Qu(a))for(let c=10;c<a.length;c++){const d=a[c],h=d[1];vs(d)&&Os(h,d,h.template,d[8])}}(a),null!==o.contentQueries&&Hb(o,a),y){const T=o.contentCheckHooks;null!==T&&ko(a,T)}else{const T=o.contentHooks;null!==T&&xo(a,T,1),Ou(a,1)}!function jb(o,a){const c=o.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const h=c[d];if(h<0)es(~h);else{const p=h,y=c[++d],w=c[++d];Tu(y,p),w(2,a[p])}}}finally{es(-1)}}(o,a);const w=o.components;null!==w&&function my(o,a){for(let c=0;c<a.length;c++)Xb(o,a[c])}(a,w);const D=o.viewQuery;if(null!==D&&Ey(2,D,d),y){const T=o.viewCheckHooks;null!==T&&ko(a,T)}else{const T=o.viewHooks;null!==T&&xo(a,T,2),Ou(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Vn(a[3],-1))}finally{Cs()}}}function lg(o,a,c,d,h){const p=Tn(),y=2&d;try{es(-1),y&&a.length>22&&Sb(o,a,22,!1),c(d,h)}finally{es(p)}}function Bl(o,a,c){if(yo(a)){const h=a.directiveEnd;for(let p=a.directiveStart;p<h;p++){const y=o.data[p];y.contentQueries&&y.contentQueries(1,c[p],p)}}}function sd(o,a,c){!Ks()||(function qb(o,a,c,d){const h=c.directiveStart,p=c.directiveEnd;o.firstCreatePass||ns(c,a),dr(d,a);const y=c.initialInputs;for(let w=h;w<p;w++){const D=o.data[w],T=Hr(D);T&&Kb(a,c,D);const x=ki(a,o,w,c);dr(x,a),null!==y&&wS(0,w-h,x,D,0,y),T&&(nn(c.index,a)[8]=x)}}(o,a,c,pr(c,a)),128==(128&c.flags)&&function Wb(o,a,c){const d=c.directiveStart,h=c.directiveEnd,p=c.index,y=function ih(){return Mt.lFrame.currentDirectiveIndex}();try{es(p);for(let w=d;w<h;w++){const D=o.data[w],T=a[w];Ao(w),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&Yb(D,T)}}finally{es(-1),Ao(y)}}(o,a,c))}function cg(o,a,c=pr){const d=a.localNames;if(null!==d){let h=a.index+1;for(let p=0;p<d.length;p+=2){const y=d[p+1],w=-1===y?c(a,o):o[y];o[h++]=w}}}function $b(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=yy(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function yy(o,a,c,d,h,p,y,w,D,T){const x=22+d,F=x+h,q=function pS(o,a){const c=[];for(let d=0;d<a;d++)c.push(d<o?null:kt);return c}(x,F),te="function"==typeof T?T():T;return q[1]={type:o,blueprint:q,template:c,queries:null,viewQuery:w,declTNode:a,data:q.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:D,consts:te,incompleteFirstPass:!1}}function Zb(o,a,c,d){const h=Iy(a);null===c?h.push(d):(h.push(c),o.firstCreatePass&&DS(o).push(d,h.length-1))}function zb(o,a,c){for(let d in o)if(o.hasOwnProperty(d)){const h=o[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(a,h):c[d]=[a,h]}return c}function Gb(o,a){const d=a.directiveEnd,h=o.data,p=a.attrs,y=[];let w=null,D=null;for(let T=a.directiveStart;T<d;T++){const x=h[T],F=x.inputs,q=null===p||Uh(a)?null:Kh(F,p);y.push(q),w=zb(F,T,w),D=zb(x.outputs,T,D)}null!==w&&(w.hasOwnProperty("class")&&(a.flags|=16),w.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=y,a.inputs=w,a.outputs=D}function cs(o,a,c,d,h,p,y,w){const D=pr(a,c);let x,T=a.inputs;!w&&null!=T&&(x=T[d])?(n0(o,c,x,d,h),cc(a)&&vy(c,a.index)):3&a.type&&(d=function _S(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),h=null!=y?y(h,a.value||"",d):h,p.setProperty(D,d,h))}function vy(o,a){const c=nn(a,o);16&c[2]||(c[2]|=32)}function Wh(o,a,c,d){let h=!1;if(Ks()){const p=function Xo(o,a,c){const d=o.directiveRegistry;let h=null;if(d)for(let p=0;p<d.length;p++){const y=d[p];Rl(c,y.selectors,!1)&&(h||(h=[]),Qs(ns(c,a),o,y.type),Hr(y)?(wy(o,c),h.unshift(y)):h.push(y))}return h}(o,a,c),y=null===d?null:{"":-1};if(null!==p){h=!0,by(c,o.data.length,p.length);for(let x=0;x<p.length;x++){const F=p[x];F.providersResolver&&F.providersResolver(F)}let w=!1,D=!1,T=qc(o,a,p.length,null);for(let x=0;x<p.length;x++){const F=p[x];c.mergedAttrs=Sa(c.mergedAttrs,F.hostAttrs),dg(o,c,a,T,F),ug(T,F,y),null!==F.contentQueries&&(c.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(c.flags|=128);const q=F.type.prototype;!w&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(c.index),w=!0),!D&&(q.ngOnChanges||q.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(c.index),D=!0),T++}Gb(o,c)}y&&function CS(o,a,c){if(a){const d=o.localNames=[];for(let h=0;h<a.length;h+=2){const p=c[a[h+1]];if(null==p)throw new Ie(-301,!1);d.push(a[h],p)}}}(c,d,y)}return c.mergedAttrs=Sa(c.mergedAttrs,c.attrs),h}function Qo(o,a,c,d,h,p){const y=p.hostBindings;if(y){let w=o.hostBindingOpCodes;null===w&&(w=o.hostBindingOpCodes=[]);const D=~a.index;(function od(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(w)!=D&&w.push(D),w.push(d,h,y)}}function Yb(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function wy(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function ug(o,a,c){if(c){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)c[a.exportAs[d]]=o;Hr(a)&&(c[""]=o)}}function by(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}function dg(o,a,c,d,h){o.data[d]=h;const p=h.factory||(h.factory=fr(h.type)),y=new ii(p,Hr(h),ed);o.blueprint[d]=y,c[d]=y,Qo(o,a,0,d,qc(o,c,h.hostVars,kt),h)}function Kb(o,a,c){const d=pr(a,o),h=$b(c),p=o[10],y=jl(o,og(o,h,null,c.onPush?32:16,d,a,p,p.createRenderer(d,c),null,null,null));o[a.index]=y}function Rs(o,a,c,d,h,p){const y=pr(o,a);!function Yh(o,a,c,d,h,p,y){if(null==p)o.removeAttribute(a,h,c);else{const w=null==y?ve(p):y(p,d||"",h);o.setAttribute(a,h,w,c)}}(a[11],y,p,o.value,c,d,h)}function wS(o,a,c,d,h,p){const y=p[a];if(null!==y){const w=d.setInput;for(let D=0;D<y.length;){const T=y[D++],x=y[D++],F=y[D++];null!==w?d.setInput(c,F,T,x):c[x]=F}}}function Kh(o,a){let c=null,d=0;for(;d<a.length;){const h=a[d];if(0!==h)if(5!==h){if("number"==typeof h)break;o.hasOwnProperty(h)&&(null===c&&(c=[]),c.push(h,o[h],a[d+1])),d+=2}else d+=2;else d+=4}return c}function Jb(o,a,c,d){return new Array(o,!0,!1,a,null,0,d,c,null,null)}function Xb(o,a){const c=nn(a,o);if(vs(c)){const d=c[1];48&c[2]?Os(d,c,d.template,c[8]):c[5]>0&&hg(c)}}function hg(o){for(let d=z_(o);null!==d;d=Qu(d))for(let h=10;h<d.length;h++){const p=d[h];if(vs(p))if(512&p[2]){const y=p[1];Os(y,p,y.template,p[8])}else p[5]>0&&hg(p)}const c=o[1].components;if(null!==c)for(let d=0;d<c.length;d++){const h=nn(c[d],o);vs(h)&&h[5]>0&&hg(h)}}function e0(o,a){const c=nn(a,o),d=c[1];(function bS(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])})(d,c),ag(d,c,c[8])}function jl(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function ad(o){for(;o;){o[2]|=32;const a=Nh(o);if(uc(o)&&!a)return o;o=a}return null}function Wc(o,a,c,d=!0){const h=a[10];h.begin&&h.begin();try{Os(o,a,o.template,c)}catch(y){throw d&&IS(a,y),y}finally{h.end&&h.end()}}function Ey(o,a,c){vc(0),a(o,c)}function Iy(o){return o[7]||(o[7]=[])}function DS(o){return o.cleanup||(o.cleanup=[])}function IS(o,a){const c=o[9],d=c?c.get(xl,null):null;d&&d.handleError(a)}function n0(o,a,c,d,h){for(let p=0;p<c.length;){const y=c[p++],w=c[p++],D=a[y],T=o.data[y];null!==T.setInput?T.setInput(D,h,d,w):D[w]=h}}function ao(o,a,c){const d=mi(a,o);!function LI(o,a,c){o.setValue(a,c)}(o[11],d,c)}function fg(o,a,c){let d=c?o.styles:null,h=c?o.classes:null,p=0;if(null!==a)for(let y=0;y<a.length;y++){const w=a[y];"number"==typeof w?p=w:1==p?h=he(h,w):2==p&&(d=he(d,w+": "+a[++y]+";"))}c?o.styles=d:o.stylesWithoutHost=d,c?o.classes=h:o.classesWithoutHost=h}function pg(o,a,c,d,h=!1){for(;null!==c;){const p=a[c.index];if(null!==p&&d.push(Rn(p)),Xr(p))for(let w=10;w<p.length;w++){const D=p[w],T=D[1].firstChild;null!==T&&pg(D[1],D,T,d)}const y=c.type;if(8&y)pg(o,a,c.child,d);else if(32&y){const w=cb(c,a);let D;for(;D=w();)d.push(D)}else if(16&y){const w=yb(a,c);if(Array.isArray(w))d.push(...w);else{const D=Nh(a[16]);pg(D[1],D,w,d,!0)}}c=h?c.projectionNext:c.next}return d}class Jh{constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,c=a[1];return pg(c,a,c.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Xr(a)){const c=a[8],d=c?c.indexOf(this):-1;d>-1&&(fb(a,d),Es(c,d))}this._attachedToViewContainer=!1}UI(this._lView[1],this._lView)}onDestroy(a){Zb(this._lView[1],this._lView,null,a)}markForCheck(){ad(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Wc(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function G_(o,a){Lh(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=a}}class Sy extends Jh{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Wc(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class Fi extends Zp{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=O(a);return new Xh(c,this.ngModule)}}function Ty(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}class SS{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,d){const h=this.injector.get(a,Sr,d);return h!==Sr||c===Sr?h:this.parentInjector.get(a,c,d)}}class Xh extends pI{constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function KI(o){return o.map(YI).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return Ty(this.componentDef.inputs)}get outputs(){return Ty(this.componentDef.outputs)}create(a,c,d,h){let p=(h=h||this.ngModule)instanceof jc?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new SS(a,p):a,w=y.get(F_,null);if(null===w)throw new Ie(407,!1);const D=y.get(mI,null),T=w.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",F=d?function gS(o,a,c){return o.selectRootElement(a,c===mt.ShadowDom)}(T,d,this.componentDef.encapsulation):hb(w.createRenderer(null,this.componentDef),x,function Qh(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(x)),q=this.componentDef.onPush?288:272,te=yy(0,null,null,1,0,null,null,null,null,null),Ee=og(null,te,null,q,null,null,w,T,D,y,null);let Be,Ge;Mo(Ee);try{const ft=function ld(o,a,c,d,h,p){const y=c[1];c[22]=o;const D=Ul(y,22,2,"#host",null),T=D.mergedAttrs=a.hostAttrs;null!==T&&(fg(D,T,!0),null!==o&&(ts(h,o,T),null!==D.classes&&Cb(h,o,D.classes),null!==D.styles&&vb(h,o,D.styles)));const x=d.createRenderer(o,a),F=og(c,$b(a),null,a.onPush?32:16,c[22],D,d,x,p||null,null,null);return y.firstCreatePass&&(Qs(ns(D,c),y,a.type),wy(y,D),by(D,c.length,1)),jl(c,F),c[22]=F}(F,this.componentDef,Ee,w,T);if(F)if(d)ts(T,F,["ng-version",ur.full]);else{const{attrs:et,classes:Oe}=function JI(o){const a=[],c=[];let d=1,h=2;for(;d<o.length;){let p=o[d];if("string"==typeof p)2===h?""!==p&&a.push(p,o[++d]):8===h&&c.push(p);else{if(!so(h))break;h=p}d++}return{attrs:a,classes:c}}(this.componentDef.selectors[0]);et&&ts(T,F,et),Oe&&Oe.length>0&&Cb(T,F,Oe.join(" "))}if(Ge=Ys(te,22),void 0!==c){const et=Ge.projection=[];for(let Oe=0;Oe<this.ngContentSelectors.length;Oe++){const At=c[Oe];et.push(null!=At?Array.from(At):null)}}Be=function ef(o,a,c,d){const h=c[1],p=function Cy(o,a,c){const d=Jn();o.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),dg(o,d,a,qc(o,a,1,null),c),Gb(o,d));const h=ki(a,o,d.directiveStart,d);dr(h,a);const p=pr(d,a);return p&&dr(p,a),h}(h,c,a);if(o[8]=c[8]=p,null!==d)for(const w of d)w(p,a);if(a.contentQueries){const w=Jn();a.contentQueries(1,p,w.directiveStart)}const y=Jn();return!h.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(es(y.index),Qo(c[1],y,0,y.directiveStart,y.directiveEnd,a),Yb(a,p)),p}(ft,this.componentDef,Ee,[AS]),ag(te,Ee,null)}finally{Cs()}return new TS(this.componentType,Be,kh(Ge,Ee),Ee,Ge)}}class TS extends class N_{}{constructor(a,c,d,h,p){super(),this.location=d,this._rootLView=h,this._tNode=p,this.instance=c,this.hostView=this.changeDetectorRef=new Sy(h),this.componentType=a}setInput(a,c){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[a])){const p=this._rootLView;n0(p[1],p,h,a,c),vy(p,this._tNode.index)}}get injector(){return new Vo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function AS(){const o=Jn();gl(ke()[1],o)}function Yc(o){let a=function s0(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const d=[o];for(;a;){let h;if(Hr(o))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ie(903,!1);h=a.\u0275dir}if(h){if(c){d.push(h);const y=o;y.inputs=My(o.inputs),y.declaredInputs=My(o.declaredInputs),y.outputs=My(o.outputs);const w=h.hostBindings;w&&xS(o,w);const D=h.viewQuery,T=h.contentQueries;if(D&&MS(o,D),T&&kS(o,T),se(o.inputs,h.inputs),se(o.declaredInputs,h.declaredInputs),se(o.outputs,h.outputs),Hr(h)&&h.data.animation){const x=o.data;x.animation=(x.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const w=p[y];w&&w.ngInherit&&w(o),w===Yc&&(c=!1)}}a=Object.getPrototypeOf(a)}!function tf(o){let a=0,c=null;for(let d=o.length-1;d>=0;d--){const h=o[d];h.hostVars=a+=h.hostVars,h.hostAttrs=Sa(h.hostAttrs,c=Sa(c,h.hostAttrs))}}(d)}function My(o){return o===Dr?{}:o===Dt?[]:o}function MS(o,a){const c=o.viewQuery;o.viewQuery=c?(d,h)=>{a(d,h),c(d,h)}:a}function kS(o,a){const c=o.contentQueries;o.contentQueries=c?(d,h,p)=>{a(d,h,p),c(d,h,p)}:a}function xS(o,a){const c=o.hostBindings;o.hostBindings=c?(d,h)=>{a(d,h),c(d,h)}:a}let gg=null;function za(){if(!gg){const o=It.Symbol;if(o&&o.iterator)gg=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<a.length;++c){const d=a[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(gg=d)}}}return gg}function ea(o){return!!xy(o)&&(Array.isArray(o)||!(o instanceof Map)&&za()in o)}function xy(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function li(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function Oy(o,a,c,d){const h=ke();return li(h,wa(),a)&&(zt(),Rs(An(),h,o,a,c,d)),Oy}function Jc(o,a,c,d){return li(o,wa(),c)?a+ve(c)+d:kt}function $l(o,a,c,d,h,p){const w=function Kc(o,a,c,d){const h=li(o,a,c);return li(o,a+1,d)||h}(o,function Mi(){return Mt.lFrame.bindingIndex}(),c,h);return Xi(2),w?a+ve(c)+d+ve(h)+p:kt}function l0(o,a,c,d,h,p,y,w){const D=ke(),T=zt(),x=o+22,F=T.firstCreatePass?function VS(o,a,c,d,h,p,y,w,D){const T=a.consts,x=Ul(a,o,4,y||null,ri(T,w));Wh(a,c,x,ri(T,D)),gl(a,x);const F=x.tViews=yy(2,x,d,h,p,a.directiveRegistry,a.pipeRegistry,null,a.schemas,T);return null!==a.queries&&(a.queries.template(a,x),F.queries=a.queries.embeddedTView(x)),x}(x,T,D,a,c,d,h,p,y):T.data[x];Pr(F,!1);const q=D[11].createComment("");Kp(T,D,q,F),dr(q,D),jl(D,D[x]=Jb(q,D,q,F)),ua(F)&&sd(T,D,F),null!=y&&cg(D,F,w)}function c0(o){return Ai(function va(){return Mt.lFrame.contextLView}(),22+o)}function Ly(o,a,c){const d=ke();return li(d,wa(),a)&&cs(zt(),An(),d,o,a,d[11],c,!1),Ly}function Vy(o,a,c,d,h){const y=h?"class":"style";n0(o,c,a.inputs[y],y,d)}function yg(o,a,c,d){const h=ke(),p=zt(),y=22+o,w=h[11],D=h[y]=hb(w,a,function bc(){return Mt.lFrame.currentNamespace}()),T=p.firstCreatePass?function US(o,a,c,d,h,p,y){const w=a.consts,T=Ul(a,o,2,h,ri(w,p));return Wh(a,c,T,ri(w,y)),null!==T.attrs&&fg(T,T.attrs,!1),null!==T.mergedAttrs&&fg(T,T.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,T),T}(y,p,h,0,a,c,d):p.data[y];Pr(T,!0);const x=T.mergedAttrs;null!==x&&ts(w,D,x);const F=T.classes;null!==F&&Cb(w,D,F);const q=T.styles;return null!==q&&vb(w,D,q),64!=(64&T.flags)&&Kp(p,h,D,T),0===function ma(){return Mt.lFrame.elementDepthCount}()&&dr(D,h),function Iu(){Mt.lFrame.elementDepthCount++}(),ua(T)&&(sd(p,h,T),Bl(p,T,h)),null!==d&&cg(h,T),yg}function vg(){let o=Jn();pl()?To():(o=o.parent,Pr(o,!1));const a=o;!function _a(){Mt.lFrame.elementDepthCount--}();const c=zt();return c.firstCreatePass&&(gl(c,o),yo(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function _l(o){return 0!=(16&o.flags)}(a)&&Vy(c,a,ke(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function yl(o){return 0!=(32&o.flags)}(a)&&Vy(c,a,ke(),a.stylesWithoutHost,!1),vg}function Uy(o,a,c,d){return yg(o,a,c,d),vg(),Uy}function Cg(o,a,c){const d=ke(),h=zt(),p=o+22,y=h.firstCreatePass?function u0(o,a,c,d,h){const p=a.consts,y=ri(p,d),w=Ul(a,o,8,"ng-container",y);return null!==y&&fg(w,y,!0),Wh(a,c,w,ri(p,h)),null!==a.queries&&a.queries.elementStart(a,w),w}(p,h,d,a,c):h.data[p];Pr(y,!0);const w=d[p]=d[11].createComment("");return Kp(h,d,w,y),dr(w,d),ua(y)&&(sd(h,d,y),Bl(h,y,d)),null!=c&&cg(d,y),Cg}function af(){let o=Jn();const a=zt();return pl()?To():(o=o.parent,Pr(o,!1)),a.firstCreatePass&&(gl(a,o),yo(o)&&a.queries.elementEnd(o)),af}function wg(o,a,c){return Cg(o,a,c),af(),wg}function By(){return ke()}function bg(o){return!!o&&"function"==typeof o.then}function jy(o){return!!o&&"function"==typeof o.subscribe}const d0=jy;function Hy(o,a,c,d){const h=ke(),p=zt(),y=Jn();return function f0(o,a,c,d,h,p,y,w){const D=ua(d),x=o.firstCreatePass&&DS(o),F=a[8],q=Iy(a);let te=!0;if(3&d.type||w){const Ge=pr(d,a),ft=w?w(Ge):Ge,et=q.length,Oe=w?_n=>w(Rn(_n[d.index])):d.index;let At=null;if(!w&&D&&(At=function BS(o,a,c,d){const h=o.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===c&&h[p+1]===d){const w=a[7],D=h[p+2];return w.length>D?w[D]:null}"string"==typeof y&&(p+=2)}return null}(o,a,h,d.index)),null!==At)(At.__ngLastListenerFn__||At).__ngNextListenerFn__=p,At.__ngLastListenerFn__=p,te=!1;else{p=$y(d,a,F,p,!1);const _n=c.listen(ft,h,p);q.push(p,_n),x&&x.push(h,Oe,et,et+1)}}else p=$y(d,a,F,p,!1);const Ee=d.outputs;let Be;if(te&&null!==Ee&&(Be=Ee[h])){const Ge=Be.length;if(Ge)for(let ft=0;ft<Ge;ft+=2){const Gn=a[Be[ft]][Be[ft+1]].subscribe(p),Kl=q.length;q.push(p,Gn),x&&x.push(h,d.index,Kl,-(Kl+1))}}}(p,h,h[11],y,o,a,0,d),Hy}function p0(o,a,c,d){try{return!1!==c(d)}catch(h){return IS(o,h),!1}}function $y(o,a,c,d,h){return function p(y){if(y===Function)return d;ad(2&o.flags?nn(o.index,a):a);let D=p0(a,0,d,y),T=p.__ngNextListenerFn__;for(;T;)D=p0(a,0,T,y)&&D,T=T.__ngNextListenerFn__;return h&&!1===D&&(y.preventDefault(),y.returnValue=!1),D}}function Dg(o=1){return function ws(o){return(Mt.lFrame.contextLView=function ku(o,a){for(;o>0;)a=a[15],o--;return a}(o,Mt.lFrame.contextLView))[8]}(o)}function g0(o,a){let c=null;const d=function Db(o){const a=o.attrs;if(null!=a){const c=a.indexOf(5);if(0==(1&c))return a[c+1]}return null}(o);for(let h=0;h<a.length;h++){const p=a[h];if("*"!==p){if(null===d?Rl(o,p,!0):WI(d,p))return h}else c=h}return c}function Zy(o){const a=ke()[16][6];if(!a.projection){const d=a.projection=eo(o?o.length:1,null),h=d.slice();let p=a.child;for(;null!==p;){const y=o?g0(p,o):0;null!==y&&(h[y]?h[y].projectionNext=p:d[y]=p,h[y]=p),p=p.next}}}function jS(o,a=0,c){const d=ke(),h=zt(),p=Ul(h,22+o,16,null,c||null);null===p.projection&&(p.projection=a),To(),64!=(64&p.flags)&&function $I(o,a,c){Vh(a[11],0,a,c,Wp(o,c,a),jI(c.parent||a[6],c,a))}(h,d,p)}function zy(o,a,c){return Eg(o,"",a,"",c),zy}function Eg(o,a,c,d,h){const p=ke(),y=Jc(p,a,c,d);return y!==kt&&cs(zt(),An(),p,o,y,p[11],h,!1),Eg}function C0(o,a,c,d,h){const p=o[c+1],y=null===a;let w=d?ks(p):xs(p),D=!1;for(;0!==w&&(!1===D||y);){const x=o[w+1];ZS(o[w],a)&&(D=!0,o[w+1]=d?zc(x):ng(x)),w=d?ks(x):xs(x)}D&&(o[c+1]=d?ng(p):zc(p))}function ZS(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&ze(o,a)>=0}const Tr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Wy(o){return o.substring(Tr.key,Tr.keyEnd)}function Yy(o,a){const c=Tr.textEnd;return c===a?-1:(a=Tr.keyEnd=function b0(o,a,c){for(;a<c&&o.charCodeAt(a)>32;)a++;return a}(o,Tr.key=a,c),gd(o,a,c))}function gd(o,a,c){for(;a<c&&o.charCodeAt(a)<=32;)a++;return a}function md(o,a,c){return Ps(o,a,c,!1),md}function D0(o,a){return Ps(o,a,null,!0),D0}function Mg(o){!function Ns(o,a,c,d){const h=zt(),p=Xi(2);h.firstUpdatePass&&E0(h,null,p,d);const y=ke();if(c!==kt&&li(y,p,c)){const w=h.data[Tn()];if(A0(w,d)&&!kg(h,p)){let D=d?w.classesWithoutHost:w.stylesWithoutHost;null!==D&&(c=he(D,c||"")),Vy(h,w,y,c,d)}else!function QS(o,a,c,d,h,p,y,w){h===kt&&(h=Dt);let D=0,T=0,x=0<h.length?h[0]:null,F=0<p.length?p[0]:null;for(;null!==x||null!==F;){const q=D<h.length?h[D+1]:void 0,te=T<p.length?p[T+1]:void 0;let Be,Ee=null;x===F?(D+=2,T+=2,q!==te&&(Ee=F,Be=te)):null===F||null!==x&&x<F?(D+=2,Ee=x):(T+=2,Ee=F,Be=te),null!==Ee&&T0(o,a,c,d,Ee,Be,y,w),x=D<h.length?h[D]:null,F=T<p.length?p[T]:null}}(h,w,y,y[11],y[p+1],y[p+1]=function QO(o,a,c){if(null==c||""===c)return Dt;const d=[],h=Fa(c);if(Array.isArray(h))for(let p=0;p<h.length;p++)o(d,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&o(d,p,h[p]);else"string"==typeof h&&a(d,h);return d}(o,a,c),d,p)}}(zn,Wa,o,!0)}function Wa(o,a){for(let c=function zS(o){return function w0(o){Tr.key=0,Tr.keyEnd=0,Tr.value=0,Tr.valueEnd=0,Tr.textEnd=o.length}(o),Yy(o,gd(o,0,Tr.textEnd))}(a);c>=0;c=Yy(a,c))zn(o,Wy(a),!0)}function Ps(o,a,c,d){const h=ke(),p=zt(),y=Xi(2);p.firstUpdatePass&&E0(p,o,y,d),a!==kt&&li(h,y,a)&&T0(p,p.data[Tn()],h,h[11],o,h[y+1]=function XS(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=ae(Fa(o)))),o}(a,c),d,y)}function kg(o,a){return a>=o.expandoStartIndex}function E0(o,a,c,d){const h=o.data;if(null===h[c+1]){const p=h[Tn()],y=kg(o,c);A0(p,d)&&null===a&&!y&&(a=!1),a=function YS(o,a,c,d){const h=function yc(o){const a=Mt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let p=d?a.residualClasses:a.residualStyles;if(null===h)0===(d?a.classBindings:a.styleBindings)&&(c=Zl(c=S0(null,o,a,c,d),a.attrs,d),p=null);else{const y=a.directiveStylingLast;if(-1===y||o[y]!==h)if(c=S0(h,o,a,c,d),null===p){let D=function KS(o,a,c){const d=c?a.classBindings:a.styleBindings;if(0!==xs(d))return o[ks(d)]}(o,a,d);void 0!==D&&Array.isArray(D)&&(D=S0(null,o,a,D[1],d),D=Zl(D,a.attrs,d),function I0(o,a,c,d){o[ks(c?a.classBindings:a.styleBindings)]=d}(o,a,d,D))}else p=function JS(o,a,c){let d;const h=a.directiveEnd;for(let p=1+a.directiveStylingLast;p<h;p++)d=Zl(d,o[p].hostAttrs,c);return Zl(d,a.attrs,c)}(o,a,d)}return void 0!==p&&(d?a.residualClasses=p:a.residualStyles=p),c}(h,p,a,d),function HS(o,a,c,d,h,p){let y=p?a.classBindings:a.styleBindings,w=ks(y),D=xs(y);o[d]=c;let x,T=!1;if(Array.isArray(c)){const F=c;x=F[1],(null===x||ze(F,x)>0)&&(T=!0)}else x=c;if(h)if(0!==D){const q=ks(o[w+1]);o[d+1]=tg(q,w),0!==q&&(o[q+1]=Za(o[q+1],d)),o[w+1]=function Nb(o,a){return 131071&o|a<<17}(o[w+1],d)}else o[d+1]=tg(w,0),0!==w&&(o[w+1]=Za(o[w+1],d)),w=d;else o[d+1]=tg(D,0),0===w?w=d:o[D+1]=Za(o[D+1],d),D=d;T&&(o[d+1]=ng(o[d+1])),C0(o,x,d,!0),C0(o,x,d,!1),function $S(o,a,c,d,h){const p=h?o.residualClasses:o.residualStyles;null!=p&&"string"==typeof a&&ze(p,a)>=0&&(c[d+1]=zc(c[d+1]))}(a,x,o,d,p),y=tg(w,D),p?a.classBindings=y:a.styleBindings=y}(h,p,a,c,y,d)}}function S0(o,a,c,d,h){let p=null;const y=c.directiveEnd;let w=c.directiveStylingLast;for(-1===w?w=c.directiveStart:w++;w<y&&(p=a[w],d=Zl(d,p.hostAttrs,h),p!==o);)w++;return null!==o&&(c.directiveStylingLast=w),d}function Zl(o,a,c){const d=c?1:2;let h=-1;if(null!==a)for(let p=0;p<a.length;p++){const y=a[p];"number"==typeof y?h=y:h===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),zn(o,y,!!c||a[++p]))}return void 0===o?null:o}function T0(o,a,c,d,h,p,y,w){if(!(3&a.type))return;const D=o.data,T=D[w+1];xg(function Jt(o){return 1==(1&o)}(T)?Ya(D,a,c,h,xs(T),y):void 0)||(xg(p)||function Pb(o){return 2==(2&o)}(T)&&(p=Ya(D,null,c,h,w,y)),function RO(o,a,c,d,h){if(a)h?o.addClass(c,d):o.removeClass(c,d);else{let p=-1===d.indexOf("-")?void 0:Ua.DashCase;null==h?o.removeStyle(c,d,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=Ua.Important),o.setStyle(c,d,h,p))}}(d,y,mi(Tn(),c),h,p))}function Ya(o,a,c,d,h,p){const y=null===a;let w;for(;h>0;){const D=o[h],T=Array.isArray(D),x=T?D[1]:D,F=null===x;let q=c[h+1];q===kt&&(q=F?Dt:void 0);let te=F?rn(q,d):x===d?q:void 0;if(T&&!xg(te)&&(te=rn(D,d)),xg(te)&&(w=te,y))return w;const Ee=o[h+1];h=y?ks(Ee):xs(Ee)}if(null!==a){let D=p?a.residualClasses:a.residualStyles;null!=D&&(w=rn(D,d))}return w}function xg(o){return void 0!==o}function A0(o,a){return 0!=(o.flags&(a?16:32))}function M0(o,a=""){const c=ke(),d=zt(),h=o+22,p=d.firstCreatePass?Ul(d,h,1,a,null):d.data[h],y=c[h]=function db(o,a){return o.createText(a)}(c[11],a);Kp(d,c,y,p),Pr(p,!1)}function Jy(o){return cf("",o,""),Jy}function cf(o,a,c){const d=ke(),h=Jc(d,o,a,c);return h!==kt&&ao(d,Tn(),h),cf}function Qy(o,a,c,d,h){const p=ke(),y=$l(p,o,a,c,d,h);return y!==kt&&ao(p,Tn(),y),Qy}function F0(o,a,c){const d=ke();return li(d,wa(),a)&&cs(zt(),An(),d,o,a,d[11],c,!0),F0}const yd=void 0;var tR=["en",[["a","p"],["AM","PM"],yd],[["AM","PM"],yd,yd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yd,"{1} 'at' {0}",yd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function eR(o){const c=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let df={};function av(o){const a=function lv(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=Fg(a);if(c)return c;const d=a.split("-")[0];if(c=Fg(d),c)return c;if("en"===d)return tR;throw new Ie(701,!1)}function Ng(o){return av(o)[Et.PluralCase]}function Fg(o){return o in df||(df[o]=It.ng&&It.ng.common&&It.ng.common.locales&&It.ng.common.locales[o]),df[o]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const hf="en-US";let Lg=hf;function Wl(o,a,c,d,h){if(o=Q(o),Array.isArray(o))for(let p=0;p<o.length;p++)Wl(o[p],a,c,d,h);else{const p=zt(),y=ke();let w=Uc(o)?o:Q(o.provide),D=$p(o);const T=Jn(),x=1048575&T.providerIndexes,F=T.directiveStart,q=T.providerIndexes>>20;if(Uc(o)||!o.multi){const te=new ii(D,h,ed),Ee=Iv(w,a,h?x:x+q,F);-1===Ee?(Qs(ns(T,y),p,w),Gg(p,o,a.length),a.push(w),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),c.push(te),y.push(te)):(c[Ee]=te,y[Ee]=te)}else{const te=Iv(w,a,x+q,F),Ee=Iv(w,a,x,x+q),Be=te>=0&&c[te],Ge=Ee>=0&&c[Ee];if(h&&!Ge||!h&&!Be){Qs(ns(T,y),p,w);const ft=function PT(o,a,c,d,h){const p=new ii(o,c,ed);return p.multi=[],p.index=a,p.componentProviders=0,eD(p,h,d&&!c),p}(h?RT:OT,c.length,h,d,D);!h&&Ge&&(c[Ee].providerFactory=ft),Gg(p,o,a.length,0),a.push(w),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),c.push(ft),y.push(ft)}else Gg(p,o,te>-1?te:Ee,eD(c[h?Ee:te],D,!h&&d));!h&&d&&Ge&&c[Ee].componentProviders++}}}function Gg(o,a,c,d){const h=Uc(a),p=function cI(o){return!!o.useClass}(a);if(h||p){const D=(p?Q(a.useClass):a).prototype.ngOnDestroy;if(D){const T=o.destroyHooks||(o.destroyHooks=[]);if(!h&&a.multi){const x=T.indexOf(c);-1===x?T.push(c,[d,D]):T[x+1].push(d,D)}else T.push(c,D)}}}function eD(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function Iv(o,a,c,d){for(let h=c;h<d;h++)if(a[h]===o)return h;return-1}function OT(o,a,c,d){return Sv(this.multi,[])}function RT(o,a,c,d){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=ki(c,c[1],this.providerFactory.index,d);p=w.slice(0,y),Sv(h,p);for(let D=y;D<w.length;D++)p.push(w[D])}else p=[],Sv(h,p);return p}function Sv(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function tD(o,a=[]){return c=>{c.providersResolver=(d,h)=>function X0(o,a,c){const d=zt();if(d.firstCreatePass){const h=Hr(o);Wl(c,d.data,d.blueprint,h,!0),Wl(a,d.data,d.blueprint,h,!1)}}(d,h?h(o):o,a)}}class wd{}class nD{}function qg(o,a){return new Tv(o,a??null)}class Tv extends wd{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Fi(this);const d=ot(a);this._bootstrapComponents=La(d.bootstrap),this._r3Injector=Mb(a,c,[{provide:wd,useValue:this},{provide:Zp,useValue:this.componentFactoryResolver}],ae(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class vf extends nD{constructor(a){super(),this.moduleType=a}create(a){return new Tv(this.moduleType,a)}}class FT extends wd{constructor(a,c,d){super(),this.componentFactoryResolver=new Fi(this),this.instance=null;const h=new Kw([...a,{provide:wd,useValue:this},{provide:Zp,useValue:this.componentFactoryResolver}],c||kl(),d,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Av(o,a,c=null){return new FT(o,a,c).injector}let LT=(()=>{class o{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const d=lI(0,c.type),h=d.length>0?Av([d],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,h)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=Qt({token:o,providedIn:"environment",factory:()=>new o(k(jc))}),o})();function Mv(o){o.getStandaloneInjector=a=>a.get(LT).getOrCreateStandaloneInjector(o)}function sD(o,a,c,d){return zT(ke(),Qn(),o,a,c,d)}function zT(o,a,c,d,h,p){const y=a+c;return li(o,y,h)?function ta(o,a,c){return o[a]=c}(o,y+1,p?d.call(p,h):d(h)):function Kg(o,a){const c=o[a];return c===kt?void 0:c}(o,y+1)}function qT(o,a){const c=zt();let d;const h=o+22;c.firstCreatePass?(d=function Vv(o,a){if(a)for(let c=a.length-1;c>=0;c--){const d=a[c];if(o===d.name)return d}}(a,c.pipeRegistry),c.data[h]=d,d.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(h,d.onDestroy)):d=c.data[h];const p=d.factory||(d.factory=fr(d.type)),y=yn(ed);try{const w=Ta(!1),D=p();return Ta(w),function _g(o,a,c,d){c>=o.data.length&&(o.data[c]=null,o.blueprint[c]=null),a[c]=d}(c,ke(),h,D),D}finally{yn(y)}}function oD(o,a,c){const d=o+22,h=ke(),p=Ai(h,d);return function Qg(o,a){return o[1].data[a].pure}(h,d)?zT(h,Qn(),a,p.transform,c,p):p.transform(c)}function aD(o){return a=>{setTimeout(o,void 0,a)}}const Xa=class DR extends s.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,d){let h=a,p=c||(()=>null),y=d;if(a&&"object"==typeof a){const D=a;h=D.next?.bind(D),p=D.error?.bind(D),y=D.complete?.bind(D)}this.__isAsync&&(p=aD(p),h&&(h=aD(h)),y&&(y=aD(y)));const w=super.subscribe({next:h,error:p,complete:y});return a instanceof j.w0&&a.add(w),w}};function ER(){return this._results[za()]()}class Uv{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=za(),d=Uv.prototype;d[c]||(d[c]=ER)}get changes(){return this._changes||(this._changes=new Xa)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const d=this;d.dirty=!1;const h=Fr(a);(this._changesDetected=!function xc(o,a,c){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let h=o[d],p=a[d];if(c&&(h=c(h),p=c(p)),p!==h)return!1}return!0}(d._results,h,c))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Xg=(()=>{class o{}return o.__NG_ELEMENT_ID__=TR,o})();const IR=Xg,SR=class extends IR{constructor(a,c,d){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(a,c){const d=this._declarationTContainer.tViews,h=og(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,c||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(d)),ag(d,h,a),new Jh(h)}};function TR(){return Bv(Jn(),ke())}function Bv(o,a){return 4&o.type?new SR(a,o,kh(o,a)):null}let jv=(()=>{class o{}return o.__NG_ELEMENT_ID__=QT,o})();function QT(){return tA(Jn(),ke())}const AR=jv,XT=class extends AR{constructor(a,c,d){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=d}get element(){return kh(this._hostTNode,this._hostLView)}get injector(){return new Vo(this._hostTNode,this._hostLView)}get parentInjector(){const a=Aa(this._hostTNode,this._hostLView);if(ch(a)){const c=bs(a,this._hostLView),d=Xn(a);return new Vo(c[1].data[d+8],c)}return new Vo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=eA(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,c,d){let h,p;"number"==typeof d?h=d:null!=d&&(h=d.index,p=d.injector);const y=a.createEmbeddedView(c||{},p);return this.insert(y,h),y}createComponent(a,c,d,h,p){const y=a&&!ct(a);let w;if(y)w=c;else{const F=c||{};w=F.index,d=F.injector,h=F.projectableNodes,p=F.environmentInjector||F.ngModuleRef}const D=y?a:new Xh(O(a)),T=d||this.parentInjector;if(!p&&null==D.ngModule){const q=(y?T:this.parentInjector).get(jc,null);q&&(p=q)}const x=D.create(T,h,void 0,p);return this.insert(x.hostView,w),x}insert(a,c){const d=a._lView,h=d[1];if(function mc(o){return Xr(o[3])}(d)){const x=this.indexOf(a);if(-1!==x)this.detach(x);else{const F=d[3],q=new XT(F,F[6],F[3]);q.detach(q.indexOf(a))}}const p=this._adjustIndex(c),y=this._lContainer;!function MO(o,a,c,d){const h=10+d,p=c.length;d>0&&(c[h-1][4]=a),d<p-10?(a[4]=c[h],Il(c,10+d,a)):(c.push(a),a[4]=null),a[3]=c;const y=a[17];null!==y&&c!==y&&function kO(o,a){const c=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===c?o[9]=[a]:c.push(a)}(y,a);const w=a[19];null!==w&&w.insertView(o),a[2]|=64}(h,d,y,p);const w=Jp(p,y),D=d[11],T=K_(D,y[7]);return null!==T&&function AO(o,a,c,d,h,p){d[0]=h,d[6]=a,Lh(o,d,c,1,h,p)}(h,y[6],D,d,T,w),a.attachToViewContainerRef(),Il(lD(y),p,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=eA(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),d=fb(this._lContainer,c);d&&(Es(lD(this._lContainer),c),UI(d[1],d))}detach(a){const c=this._adjustIndex(a,-1),d=fb(this._lContainer,c);return d&&null!=Es(lD(this._lContainer),c)?new Jh(d):null}_adjustIndex(a,c=0){return a??this.length+c}};function eA(o){return o[8]}function lD(o){return o[8]||(o[8]=[])}function tA(o,a){let c;const d=a[o.index];if(Xr(d))c=d;else{let h;if(8&o.type)h=Rn(d);else{const p=a[11];h=p.createComment("");const y=pr(o,a);Ba(p,K_(p,y),h,function _b(o,a){return o.nextSibling(a)}(p,y),!1)}a[o.index]=c=Jb(d,a,h,o),jl(a,c)}return new XT(c,o,a)}class cD{constructor(a){this.queryList=a,this.matches=null}clone(){return new cD(this.queryList)}setDirty(){this.queryList.setDirty()}}class uD{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const d=null!==a.contentQueries?a.contentQueries[0]:c.length,h=[];for(let p=0;p<d;p++){const y=c.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new uD(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==uA(a,c).matches&&this.queries[c].setDirty()}}class nA{constructor(a,c,d=null){this.predicate=a,this.flags=c,this.read=d}}class dD{constructor(a=[]){this.queries=a}elementStart(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let d=0;d<this.length;d++){const h=null!==c?c.length:0,p=this.getByIndex(d).embeddedTView(a,h);p&&(p.indexInDeclarationView=d,null!==c?c.push(p):c=[p])}return null!==c?new dD(c):null}template(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class hD{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new hD(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const p=d[h];this.matchTNodeWithReadOption(a,c,xR(c,p)),this.matchTNodeWithReadOption(a,c,ka(c,a,p,!1,!1))}else d===Xg?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,ka(c,a,d,!1,!1))}matchTNodeWithReadOption(a,c,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===zp||h===jv||h===Xg&&4&c.type)this.addMatch(c.index,-2);else{const p=ka(c,a,h,!1,!1);null!==p&&this.addMatch(c.index,p)}else this.addMatch(c.index,d)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function xR(o,a){const c=o.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===a)return c[d+1];return null}function RR(o,a,c,d){return-1===c?function OR(o,a){return 11&o.type?kh(o,a):4&o.type?Bv(o,a):null}(a,o):-2===c?function PR(o,a,c){return c===zp?kh(a,o):c===Xg?Bv(a,o):c===jv?tA(a,o):void 0}(o,a,d):ki(o,o[1],c,a)}function rA(o,a,c,d){const h=a[19].queries[d];if(null===h.matches){const p=o.data,y=c.matches,w=[];for(let D=0;D<y.length;D+=2){const T=y[D];w.push(T<0?null:RR(a,p[T],y[D+1],c.metadata.read))}h.matches=w}return h.matches}function fD(o,a,c,d){const h=o.queries.getByIndex(c),p=h.matches;if(null!==p){const y=rA(o,a,h,c);for(let w=0;w<p.length;w+=2){const D=p[w];if(D>0)d.push(y[w/2]);else{const T=p[w+1],x=a[-D];for(let F=10;F<x.length;F++){const q=x[F];q[17]===q[3]&&fD(q[1],q,T,d)}if(null!==x[9]){const F=x[9];for(let q=0;q<F.length;q++){const te=F[q];fD(te[1],te,T,d)}}}}}return d}function iA(o){const a=ke(),c=zt(),d=ba();vc(d+1);const h=uA(c,d);if(o.dirty&&function gc(o){return 4==(4&o[2])}(a)===(2==(2&h.metadata.flags))){if(null===h.matches)o.reset([]);else{const p=h.crossesNgTemplate?fD(c,a,d,[]):rA(c,a,h,d);o.reset(p,Qw),o.notifyOnChanges()}return!0}return!1}function sA(o,a,c){const d=zt();d.firstCreatePass&&(cA(d,new nA(o,a,c),-1),2==(2&a)&&(d.staticViewQueries=!0)),lA(d,ke(),a)}function oA(o,a,c,d){const h=zt();if(h.firstCreatePass){const p=Jn();cA(h,new nA(a,c,d),p.index),function FR(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(h,o),2==(2&c)&&(h.staticContentQueries=!0)}lA(h,ke(),c)}function aA(){return function NR(o,a){return o[19].queries[a].queryList}(ke(),ba())}function lA(o,a,c){const d=new Uv(4==(4&c));Zb(o,a,d,d.destroy),null===a[19]&&(a[19]=new uD),a[19].queries.push(new cD(d))}function cA(o,a,c){null===o.queries&&(o.queries=new dD),o.queries.track(new hD(a,c))}function uA(o,a){return o.queries.getByIndex(a)}function dA(o,a){return Bv(o,a)}function Dd(...o){}const bD=new Dn("Application Initializer");let rl=(()=>{class o{constructor(c){this.appInits=c,this.resolve=Dd,this.reject=Dd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(bg(p))c.push(p);else if(d0(p)){const y=new Promise((w,D)=>{p.subscribe({complete:w,error:D})});c.push(y)}}Promise.all(c).then(()=>{d()}).catch(h=>{this.reject(h)}),0===c.length&&d(),this.initialized=!0}}return o.\u0275fac=function(c){return new(c||o)(k(bD,8))},o.\u0275prov=Qt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Jv=new Dn("AppId",{providedIn:"root",factory:function im(){return`${Qv()}${Qv()}${Qv()}`}});function Qv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Xv=new Dn("Platform Initializer"),sm=new Dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),om=new Dn("appBootstrapListener"),eC=new Dn("AnimationModuleType");let SA=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=Qt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Ed=new Dn("LocaleId",{providedIn:"root",factory:()=>W(Ed,Je.Optional|Je.SkipSelf)||function TA(){return typeof $localize<"u"&&$localize.locale||hf}()}),ED=new Dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class If{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let AA=(()=>{class o{compileModuleSync(c){return new vf(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),p=La(ot(c).declarations).reduce((y,w)=>{const D=O(w);return D&&y.push(new Xh(D)),y},[]);return new If(d,p)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=Qt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const sC=(()=>Promise.resolve(0))();function Sf(o){typeof Zone>"u"?sC.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Ui{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xa(!1),this.onMicrotaskEmpty=new Xa(!1),this.onStable=new Xa(!1),this.onError=new Xa(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&c,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function oC(){let o=It.requestAnimationFrame,a=It.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function SD(o){const a=()=>{!function xA(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(It,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,cm(o),o.isCheckStableRunning=!0,lm(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),cm(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,h,p,y,w)=>{try{return um(o),c.invokeTask(h,p,y,w)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||o.shouldCoalesceRunChangeDetection)&&a(),aC(o)}},onInvoke:(c,d,h,p,y,w,D)=>{try{return um(o),c.invoke(h,p,y,w,D)}finally{o.shouldCoalesceRunChangeDetection&&a(),aC(o)}},onHasTask:(c,d,h,p)=>{c.hasTask(h,p),d===h&&("microTask"==p.change?(o._hasPendingMicrotasks=p.microTask,cm(o),lm(o)):"macroTask"==p.change&&(o.hasPendingMacrotasks=p.macroTask))},onHandleError:(c,d,h,p)=>(c.handleError(h,p),o.runOutsideAngular(()=>o.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ui.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(Ui.isInAngularZone())throw new Ie(909,!1)}run(a,c,d){return this._inner.run(a,c,d)}runTask(a,c,d,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,a,ID,Dd,Dd);try{return p.runTask(y,c,d)}finally{p.cancelTask(y)}}runGuarded(a,c,d){return this._inner.runGuarded(a,c,d)}runOutsideAngular(a){return this._outer.run(a)}}const ID={};function lm(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function cm(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function um(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function aC(o){o._nesting--,lm(o)}class OA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xa,this.onMicrotaskEmpty=new Xa,this.onStable=new Xa,this.onError=new Xa}run(a,c,d){return a.apply(c,d)}runGuarded(a,c,d){return a.apply(c,d)}runOutsideAngular(a){return a()}runTask(a,c,d,h){return a.apply(c,d)}}const dm=new Dn(""),hm=new Dn("");let Id,lC=(()=>{class o{constructor(c,d,h){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Id||(function qr(o){Id=o}(h),h.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ui.assertNotInAngularZone(),Sf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Sf(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,h){let p=-1;d&&d>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:p,updateCb:h})}whenStable(c,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,h){return[]}}return o.\u0275fac=function(c){return new(c||o)(k(Ui),k(Ar),k(hm))},o.\u0275prov=Qt({token:o,factory:o.\u0275fac}),o})(),Ar=(()=>{class o{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return Id?.findTestabilityInTree(this,c,d)??null}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=Qt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),ra=null;const TD=new Dn("AllowMultipleToken"),cC=new Dn("PlatformDestroyListeners");class uC{constructor(a,c){this.name=a,this.token=c}}function Tf(o,a,c=[]){const d=`Platform: ${a}`,h=new Dn(d);return(p=[])=>{let y=pC();if(!y||y.injector.get(TD,!1)){const w=[...c,...p,{provide:h,useValue:!0}];o?o(w):function PA(o){if(ra&&!ra.get(TD,!1))throw new Ie(400,!1);ra=o;const a=o.get(Sd);(function hC(o){const a=o.get(Xv,null);a&&a.forEach(c=>c())})(o)}(function fm(o=[],a){return Pl.create({name:a,providers:[{provide:O_,useValue:"platform"},{provide:cC,useValue:new Set([()=>ra=null])},...o]})}(w,d))}return function fC(o){const a=pC();if(!a)throw new Ie(401,!1);return a}()}}function pC(){return ra?.get(Sd)??null}let Sd=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const h=function mC(o,a){let c;return c="noop"===o?new OA:("zone.js"===o?void 0:o)||new Ui(a),c}(d?.ngZone,function gC(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(d)),p=[{provide:Ui,useValue:h}];return h.run(()=>{const y=Pl.create({providers:p,parent:this.injector,name:c.moduleType.name}),w=c.create(y),D=w.injector.get(xl,null);if(!D)throw new Ie(402,!1);return h.runOutsideAngular(()=>{const T=h.onError.subscribe({next:x=>{D.handleError(x)}});w.onDestroy(()=>{gm(this._modules,w),T.unsubscribe()})}),function _C(o,a,c){try{const d=c();return bg(d)?d.catch(h=>{throw a.runOutsideAngular(()=>o.handleError(h)),h}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(D,h,()=>{const T=w.injector.get(rl);return T.runInitializers(),T.donePromise.then(()=>(function sn(o){Bt(o,"Expected localeId to be defined"),"string"==typeof o&&(Lg=o.toLowerCase().replace(/_/g,"-"))}(w.injector.get(Ed,hf)||hf),this._moduleDoBootstrap(w),w))})})}bootstrapModule(c,d=[]){const h=Af({},d);return function RA(o,a,c){const d=new vf(c);return Promise.resolve(d)}(0,0,c).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(c){const d=c.injector.get(pm);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!c.instance.ngDoBootstrap)throw new Ie(403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(cC,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(c){return new(c||o)(k(Pl))},o.\u0275prov=Qt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function Af(o,a){return Array.isArray(a)?a.reduce(Af,o):{...o,...a}}let pm=(()=>{class o{constructor(c,d,h){this._zone=c,this._injector=d,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new R.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),y=new R.y(w=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Ui.assertNotInAngularZone(),Sf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Ui.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{D.unsubscribe(),T.unsubscribe()}});this.isStable=(0,re.T)(p,y.pipe((0,le.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,d){const h=c instanceof pI;if(!this._injector.get(rl).done)throw!h&&Ne(c),new Ie(405,false);let y;y=h?c:this._injector.get(Zp).resolveComponentFactory(c),this.componentTypes.push(y.componentType);const w=function AD(o){return o.isBoundToModule}(y)?void 0:this._injector.get(wd),T=y.create(Pl.NULL,[],d||y.selector,w),x=T.location.nativeElement,F=T.injector.get(dm,null);return F?.registerApplication(x),T.onDestroy(()=>{this.detachView(T.hostView),gm(this.components,T),F?.unregisterApplication(x)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;gm(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(om,[]).concat(this._bootstrapListeners).forEach(h=>h(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>gm(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new Ie(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(c){return new(c||o)(k(Ui),k(jc),k(xl))},o.\u0275prov=Qt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function gm(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}let MD=!0,Yl=!1;function kD(){return Yl=!0,MD}function mm(){if(Yl)throw new Error("Cannot enable prod mode after platform setup.");MD=!1}let bi=(()=>{class o{}return o.__NG_ELEMENT_ID__=xD,o})();function xD(o){return function Mf(o,a,c){if(cc(o)&&!c){const d=nn(o.index,a);return new Jh(d,d)}return 47&o.type?new Jh(a[16],a):null}(Jn(),ke(),16==(16&o))}class Nf{constructor(){}supports(a){return ea(a)}create(a){return new nu(a)}}const Ff=(o,a)=>a;class nu{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Ff}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,d=this._removalsHead,h=0,p=null;for(;c||d;){const y=!d||c&&c.currentIndex<IC(d,h,p)?c:d,w=IC(y,h,p),D=y.currentIndex;if(y===d)h--,d=d._nextRemoved;else if(c=c._next,null==y.previousIndex)h++;else{p||(p=[]);const T=w-h,x=D-h;if(T!=x){for(let q=0;q<T;q++){const te=q<p.length?p[q]:p[q]=0,Ee=te+q;x<=Ee&&Ee<T&&(p[q]=te+1)}p[y.previousIndex]=x-T}}w!==D&&a(y,w,D)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!ea(a))throw new Ie(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,p,y,c=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let w=0;w<this.length;w++)p=a[w],y=this._trackByFn(w,p),null!==c&&Object.is(c.trackById,y)?(d&&(c=this._verifyReinsertion(c,p,y,w)),Object.is(c.item,p)||this._addIdentityChange(c,p)):(c=this._mismatch(c,p,y,w),d=!0),c=c._next}else h=0,function NS(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[za()]();let d;for(;!(d=c.next()).done;)a(d.value)}}(a,w=>{y=this._trackByFn(h,w),null!==c&&Object.is(c.trackById,y)?(d&&(c=this._verifyReinsertion(c,w,y,h)),Object.is(c.item,w)||this._addIdentityChange(c,w)):(c=this._mismatch(c,w,y,h),d=!0),c=c._next,h++}),this.length=h;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,d,h){let p;return null===a?p=this._itTail:(p=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,p,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,p,h)):a=this._addAfter(new EC(c,d),p,h),a}_verifyReinsertion(a,c,d,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==p?a=this._reinsertAfter(p,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,p=a._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(a,c,d),this._addToMoves(a,d),a}_moveAfter(a,c,d){return this._unlink(a),this._insertAfter(a,c,d),this._addToMoves(a,d),a}_addAfter(a,c,d){return this._insertAfter(a,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,d){const h=null===c?this._itHead:c._next;return a._next=h,a._prev=c,null===h?this._itTail=a:h._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new RD),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,d=a._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new RD),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class EC{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $A{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const c=a._prevDup,d=a._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class RD{constructor(){this.map=new Map}put(a){const c=a.trackById;let d=this.map.get(c);d||(d=new $A,this.map.set(c,d)),d.add(a)}get(a,c){const h=this.map.get(a);return h?h.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function IC(o,a,c){const d=o.previousIndex;if(null===d)return d;let h=0;return c&&d<c.length&&(h=c[d]),d+a+h}class SC{constructor(){}supports(a){return a instanceof Map||xy(a)}create(){return new ZA}}class ZA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||xy(a)))throw new Ie(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,h)=>{if(c&&c.key===h)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const p=this._getOrCreateRecordForKey(h,d);c=this._insertBeforeOrAppend(c,p)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const d=a._prev;return c._next=a,c._prev=d,a._prev=c,d&&(d._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,c);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const d=new ru(a);return this._records.set(a,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(d=>c(a[d],d))}}class ru{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sa(){return new Ad([new Nf])}let Ad=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(null!=d){const h=d.factories.slice();c=c.concat(h)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||sa()),deps:[[o,new Nn,new dt]]}}find(c){const d=this.factories.find(h=>h.supports(c));if(null!=d)return d;throw new Ie(901,!1)}}return o.\u0275prov=Qt({token:o,providedIn:"root",factory:sa}),o})();function AC(){return new Fn([new SC])}let Fn=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(d){const h=d.factories.slice();c=c.concat(h)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||AC()),deps:[[o,new Nn,new dt]]}}find(c){const d=this.factories.find(h=>h.supports(c));if(d)return d;throw new Ie(901,!1)}}return o.\u0275prov=Qt({token:o,providedIn:"root",factory:AC}),o})();const PD=Tf(null,"core",[]);let zA=(()=>{class o{constructor(c){}}return o.\u0275fac=function(c){return new(c||o)(k(pm))},o.\u0275mod=Kt({type:o}),o.\u0275inj=Vt({}),o})();function GA(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}const qA=!0},3942:(ht,Se,N)=>{N.d(Se,{Z:()=>Ie});var s=N(2090),j=N(4859),R=N(9681),re=N(1877);class le{constructor(ve,pe){this._delegate=ve,this.firebase=pe,(0,R._addComponent)(ve,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this._delegate.automaticDataCollectionEnabled=ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ve=>{this._delegate.checkDestroyed(),ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(ve,pe=R._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const Ke=this._delegate.container.getProvider(ve);return!Ke.isInitialized()&&"EXPLICIT"===(null===(Xe=Ke.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&Ke.initialize(),Ke.getImmediate({identifier:pe})}_removeServiceInstance(ve,pe=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ve).clearInstance(pe)}_addComponent(ve){(0,R._addComponent)(this._delegate,ve)}_addOrOverwriteComponent(ve){(0,R._addOrOverwriteComponent)(this._delegate,ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new s.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function he(){const st=function ae(st){const ve={},pe={__esModule:!0,initializeApp:function Pe(ie,ue={}){const ye=R.initializeApp(ie,ue);if((0,s.r3)(ve,ye.name))return ve[ye.name];const J=new st(ye,pe);return ve[ye.name]=J,J},app:Ke,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function De(ie){const ue=ie.name,ye=ue.replace("-compat","");if(R._registerComponent(ie)&&"PUBLIC"===ie.type){const J=(X=Ke())=>{if("function"!=typeof X[ye])throw se.create("invalid-app-argument",{appName:ue});return X[ye]()};void 0!==ie.serviceProps&&(0,s.ZB)(J,ie.serviceProps),pe[ye]=J,st.prototype[ye]=function(...X){return this._getService.bind(this,ue).apply(this,ie.multipleInstances?X:[])}}return"PUBLIC"===ie.type?pe[ye]:null},removeApp:function Xe(ie){delete ve[ie]},useAsService:function $e(ie,ue){return"serverAuth"===ue?null:ue},modularAPIs:R}};function Ke(ie){if(!(0,s.r3)(ve,ie=ie||R._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:ie});return ve[ie]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function xe(){return Object.keys(ve).map(ie=>ve[ie])}}),Ke.App=st,pe}(le);return st.INTERNAL=Object.assign(Object.assign({},st.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function ve(pe){(0,s.ZB)(st,pe)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),st}(),z=new re.Yd("@firebase/app-compat");if((0,s.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const st=self.firebase.SDK_VERSION;st&&st.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=Z;!function Re(st){(0,R.registerVersion)("@firebase/app-compat","0.1.36",st)}()},9681:(ht,Se,N)=>{N.r(Se),N.d(Se,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>Gi,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>en,_addOrOverwriteComponent:()=>Qt,_apps:()=>ln,_clearComponents:()=>Ti,_components:()=>vn,_getProvider:()=>Vt,_registerComponent:()=>Ht,_removeServiceInstance:()=>br,deleteApp:()=>qi,getApp:()=>jn,getApps:()=>gi,initializeApp:()=>Or,onLog:()=>Hn,registerVersion:()=>Wn,setLogLevel:()=>yn});var s=N(5861),j=N(4859),R=N(1877),re=N(2090),le=N(8766);class ge{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(rt=>{if(function se(nt){return"VERSION"===nt.getComponent()?.type}(rt)){const Ct=rt.getImmediate();return`${Ct.library}/${Ct.version}`}return null}).filter(rt=>rt).join(" ")}}const ae="@firebase/app",Z=new R.Yd("@firebase/app"),Bt="[DEFAULT]",qe={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ln=new Map,vn=new Map;function en(nt,Ae){try{nt.container.addComponent(Ae)}catch(rt){Z.debug(`Component ${Ae.name} failed to register with FirebaseApp ${nt.name}`,rt)}}function Qt(nt,Ae){nt.container.addOrOverwriteComponent(Ae)}function Ht(nt){const Ae=nt.name;if(vn.has(Ae))return Z.debug(`There were multiple attempts to register component ${Ae}.`),!1;vn.set(Ae,nt);for(const rt of ln.values())en(rt,nt);return!0}function Vt(nt,Ae){const rt=nt.container.getProvider("heartbeat").getImmediate({optional:!0});return rt&&rt.triggerHeartbeat(),nt.container.getProvider(Ae)}function br(nt,Ae,rt=Bt){Vt(nt,Ae).clearInstance(rt)}function Ti(){vn.clear()}const xn=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class zi{constructor(Ae,rt,Ct){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},rt),this._name=rt.name,this._automaticDataCollectionEnabled=rt.automaticDataCollectionEnabled,this._container=Ct,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw xn.create("app-deleted",{appName:this._name})}}const Gi="9.12.0";function Or(nt,Ae={}){let rt=nt;"object"!=typeof Ae&&(Ae={name:Ae});const Ct=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},Ae),wt=Ct.name;if("string"!=typeof wt||!wt)throw xn.create("bad-app-name",{appName:String(wt)});if(rt||(rt=(0,re.aH)()),!rt)throw xn.create("no-options");const Kt=ln.get(wt);if(Kt){if((0,re.vZ)(rt,Kt.options)&&(0,re.vZ)(Ct,Kt.config))return Kt;throw xn.create("duplicate-app",{appName:wt})}const G=new j.H0(wt);for(const Y of vn.values())G.addComponent(Y);const H=new zi(rt,Ct,G);return ln.set(wt,H),H}function jn(nt=Bt){const Ae=ln.get(nt);if(!Ae&&nt===Bt)return Or();if(!Ae)throw xn.create("no-app",{appName:nt});return Ae}function gi(){return Array.from(ln.values())}function qi(nt){return Je.apply(this,arguments)}function Je(){return(Je=(0,s.Z)(function*(nt){const Ae=nt.name;ln.has(Ae)&&(ln.delete(Ae),yield Promise.all(nt.container.getProviders().map(rt=>rt.delete())),nt.isDeleted=!0)})).apply(this,arguments)}function Wn(nt,Ae,rt){var Ct;let wt=null!==(Ct=qe[nt])&&void 0!==Ct?Ct:nt;rt&&(wt+=`-${rt}`);const Kt=wt.match(/\s|\//),G=Ae.match(/\s|\//);if(Kt||G){const H=[`Unable to register library "${wt}" with version "${Ae}":`];return Kt&&H.push(`library name "${wt}" contains illegal characters (whitespace or "/")`),Kt&&G&&H.push("and"),G&&H.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void Z.warn(H.join(" "))}Ht(new j.wA(`${wt}-version`,()=>({library:wt,version:Ae}),"VERSION"))}function Hn(nt,Ae){if(null!==nt&&"function"!=typeof nt)throw xn.create("invalid-log-argument");(0,R.Am)(nt,Ae)}function yn(nt){(0,R.Ub)(nt)}const Cn="firebase-heartbeat-store";let wn=null;function mn(){return wn||(wn=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(nt,Ae)=>{0===Ae&&nt.createObjectStore(Cn)}}).catch(nt=>{throw xn.create("idb-open",{originalErrorMessage:nt.message})})),wn}function mt(){return(mt=(0,s.Z)(function*(nt){var Ae;try{return(yield mn()).transaction(Cn).objectStore(Cn).get(Yn(nt))}catch(rt){if(rt instanceof re.ZR)Z.warn(rt.message);else{const Ct=xn.create("idb-get",{originalErrorMessage:null===(Ae=rt)||void 0===Ae?void 0:Ae.message});Z.warn(Ct.message)}}})).apply(this,arguments)}function It(nt,Ae){return Br.apply(this,arguments)}function Br(){return(Br=(0,s.Z)(function*(nt,Ae){var rt;try{const wt=(yield mn()).transaction(Cn,"readwrite");return yield wt.objectStore(Cn).put(Ae,Yn(nt)),wt.done}catch(Ct){if(Ct instanceof re.ZR)Z.warn(Ct.message);else{const wt=xn.create("idb-set",{originalErrorMessage:null===(rt=Ct)||void 0===rt?void 0:rt.message});Z.warn(wt.message)}}})).apply(this,arguments)}function Yn(nt){return`${nt.name}!${nt.options.appId}`}class Rr{constructor(Ae){this.container=Ae,this._heartbeatsCache=null;const rt=this.container.getProvider("app").getImmediate();this._storage=new Gt(rt),this._heartbeatsCachePromise=this._storage.read().then(Ct=>(this._heartbeatsCache=Ct,Ct))}triggerHeartbeat(){var Ae=this;return(0,s.Z)(function*(){const Ct=Ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),wt=Lt();if(null===Ae._heartbeatsCache&&(Ae._heartbeatsCache=yield Ae._heartbeatsCachePromise),Ae._heartbeatsCache.lastSentHeartbeatDate!==wt&&!Ae._heartbeatsCache.heartbeats.some(Kt=>Kt.date===wt))return Ae._heartbeatsCache.heartbeats.push({date:wt,agent:Ct}),Ae._heartbeatsCache.heartbeats=Ae._heartbeatsCache.heartbeats.filter(Kt=>{const G=new Date(Kt.date).valueOf();return Date.now()-G<=2592e6}),Ae._storage.overwrite(Ae._heartbeatsCache)})()}getHeartbeatsHeader(){var Ae=this;return(0,s.Z)(function*(){if(null===Ae._heartbeatsCache&&(yield Ae._heartbeatsCachePromise),null===Ae._heartbeatsCache||0===Ae._heartbeatsCache.heartbeats.length)return"";const rt=Lt(),{heartbeatsToSend:Ct,unsentEntries:wt}=function Jr(nt,Ae=1024){const rt=[];let Ct=nt.slice();for(const wt of nt){const Kt=rt.find(G=>G.agent===wt.agent);if(Kt){if(Kt.dates.push(wt.date),ir(rt)>Ae){Kt.dates.pop();break}}else if(rt.push({agent:wt.agent,dates:[wt.date]}),ir(rt)>Ae){rt.pop();break}Ct=Ct.slice(1)}return{heartbeatsToSend:rt,unsentEntries:Ct}}(Ae._heartbeatsCache.heartbeats),Kt=(0,re.L)(JSON.stringify({version:2,heartbeats:Ct}));return Ae._heartbeatsCache.lastSentHeartbeatDate=rt,wt.length>0?(Ae._heartbeatsCache.heartbeats=wt,yield Ae._storage.overwrite(Ae._heartbeatsCache)):(Ae._heartbeatsCache.heartbeats=[],Ae._storage.overwrite(Ae._heartbeatsCache)),Kt})()}}function Lt(){return(new Date).toISOString().substring(0,10)}class Gt{constructor(Ae){this.app=Ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,s.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ae=this;return(0,s.Z)(function*(){return(yield Ae._canUseIndexedDBPromise)&&(yield function gt(nt){return mt.apply(this,arguments)}(Ae.app))||{heartbeats:[]}})()}overwrite(Ae){var rt=this;return(0,s.Z)(function*(){var Ct;if(yield rt._canUseIndexedDBPromise){const Kt=yield rt.read();return It(rt.app,{lastSentHeartbeatDate:null!==(Ct=Ae.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Kt.lastSentHeartbeatDate,heartbeats:Ae.heartbeats})}})()}add(Ae){var rt=this;return(0,s.Z)(function*(){var Ct;if(yield rt._canUseIndexedDBPromise){const Kt=yield rt.read();return It(rt.app,{lastSentHeartbeatDate:null!==(Ct=Ae.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Kt.lastSentHeartbeatDate,heartbeats:[...Kt.heartbeats,...Ae.heartbeats]})}})()}}function ir(nt){return(0,re.L)(JSON.stringify({version:2,heartbeats:nt})).length}!function In(nt){Ht(new j.wA("platform-logger",Ae=>new ge(Ae),"PRIVATE")),Ht(new j.wA("heartbeat",Ae=>new Rr(Ae),"PRIVATE")),Wn(ae,"0.8.1",nt),Wn(ae,"0.8.1","esm2017"),Wn("fire-js","")}("")},4859:(ht,Se,N)=>{N.d(Se,{H0:()=>ae,wA:()=>R});var s=N(5861),j=N(2090);class R{constructor(Z,z,Q){this.name=Z,this.instanceFactory=z,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const re="[DEFAULT]";class le{constructor(Z,z){this.name=Z,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const z=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(z)){const Q=new j.BH;if(this.instancesDeferred.set(z,Q),this.isInitialized(z)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:z});je&&Q.resolve(je)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(Z){var z;const Q=this.normalizeInstanceIdentifier(Z?.identifier),je=null!==(z=Z?.optional)&&void 0!==z&&z;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Re){if(je)return null;throw Re}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function se(he){return"EAGER"===he.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[z,Q]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(z);try{const Re=this.getOrInitializeService({instanceIdentifier:je});Q.resolve(Re)}catch{}}}}clearInstance(Z=re){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,s.Z)(function*(){const z=Array.from(Z.instances.values());yield Promise.all([...z.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...z.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=re){return this.instances.has(Z)}getOptions(Z=re){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:z={}}=Z,Q=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:Q,options:z});for(const[Re,Ie]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Re)&&Ie.resolve(je);return je}onInit(Z,z){var Q;const je=this.normalizeInstanceIdentifier(z),Re=null!==(Q=this.onInitCallbacks.get(je))&&void 0!==Q?Q:new Set;Re.add(Z),this.onInitCallbacks.set(je,Re);const Ie=this.instances.get(je);return Ie&&Z(Ie,je),()=>{Re.delete(Z)}}invokeOnInitCallbacks(Z,z){const Q=this.onInitCallbacks.get(z);if(Q)for(const je of Q)try{je(Z,z)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:z={}}){let Q=this.instances.get(Z);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(he=Z,he===re?void 0:he),options:z}),this.instances.set(Z,Q),this.instancesOptions.set(Z,z),this.invokeOnInitCallbacks(Q,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,Q)}catch{}var he;return Q||null}normalizeInstanceIdentifier(Z=re){return this.component?this.component.multipleInstances?Z:re:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const z=this.getProvider(Z.name);if(z.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);z.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const z=new le(Z,this);return this.providers.set(Z,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(ht,Se,N)=>{N.d(Se,{Am:()=>he,Ub:()=>ae,Yd:()=>se,in:()=>j});const s=[];var j=(()=>{return(Z=j||(j={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",j;var Z})();const R={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},re=j.INFO,le={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},ge=(Z,z,...Q)=>{if(z<Z.logLevel)return;const je=(new Date).toISOString(),Re=le[z];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Re](`[${je}]  ${Z.name}:`,...Q)};class se{constructor(z){this.name=z,this._logLevel=re,this._logHandler=ge,this._userLogHandler=null,s.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in j))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?R[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...z),this._logHandler(this,j.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...z),this._logHandler(this,j.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,j.INFO,...z),this._logHandler(this,j.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,j.WARN,...z),this._logHandler(this,j.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...z),this._logHandler(this,j.ERROR,...z)}}function ae(Z){s.forEach(z=>{z.setLogLevel(Z)})}function he(Z,z){for(const Q of s){let je=null;z&&z.level&&(je=R[z.level]),Q.userLogHandler=null===Z?null:(Re,Ie,...st)=>{const ve=st.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch{return null}}).filter(pe=>pe).join(" ");Ie>=(je??Re.logLevel)&&Z({level:j[Ie].toLowerCase(),message:ve,args:st,type:Re.name})}}}},8766:(ht,Se,N)=>{N.d(Se,{Lj:()=>Pe,X3:()=>Ke});var s=N(5861);let R,re;const se=new WeakMap,ae=new WeakMap,he=new WeakMap,Z=new WeakMap,z=new WeakMap;let Re={get(ue,ye,J){if(ue instanceof IDBTransaction){if("done"===ye)return ae.get(ue);if("objectStoreNames"===ye)return ue.objectStoreNames||he.get(ue);if("store"===ye)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return pe(ue[ye])},set:(ue,ye,J)=>(ue[ye]=J,!0),has:(ue,ye)=>ue instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in ue};function ve(ue){return"function"==typeof ue?function st(ue){return ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ue)?function(...ye){return ue.apply(Xe(this),ye),pe(se.get(this))}:function(...ye){return pe(ue.apply(Xe(this),ye))}:function(ye,...J){const X=ue.call(Xe(this),ye,...J);return he.set(X,ye.sort?ye.sort():[ye]),pe(X)}}(ue):(ue instanceof IDBTransaction&&function je(ue){if(ae.has(ue))return;const ye=new Promise((J,X)=>{const fe=()=>{ue.removeEventListener("complete",oe),ue.removeEventListener("error",Ve),ue.removeEventListener("abort",Ve)},oe=()=>{J(),fe()},Ve=()=>{X(ue.error||new DOMException("AbortError","AbortError")),fe()};ue.addEventListener("complete",oe),ue.addEventListener("error",Ve),ue.addEventListener("abort",Ve)});ae.set(ue,ye)}(ue),((ue,ye)=>ye.some(J=>ue instanceof J))(ue,function le(){return R||(R=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ue,Re):ue)}function pe(ue){if(ue instanceof IDBRequest)return function Q(ue){const ye=new Promise((J,X)=>{const fe=()=>{ue.removeEventListener("success",oe),ue.removeEventListener("error",Ve)},oe=()=>{J(pe(ue.result)),fe()},Ve=()=>{X(ue.error),fe()};ue.addEventListener("success",oe),ue.addEventListener("error",Ve)});return ye.then(J=>{J instanceof IDBCursor&&se.set(J,ue)}).catch(()=>{}),z.set(ye,ue),ye}(ue);if(Z.has(ue))return Z.get(ue);const ye=ve(ue);return ye!==ue&&(Z.set(ue,ye),z.set(ye,ue)),ye}const Xe=ue=>z.get(ue);function Ke(ue,ye,{blocked:J,upgrade:X,blocking:fe,terminated:oe}={}){const Ve=indexedDB.open(ue,ye),Ue=pe(Ve);return X&&Ve.addEventListener("upgradeneeded",yt=>{X(pe(Ve.result),yt.oldVersion,yt.newVersion,pe(Ve.transaction))}),J&&Ve.addEventListener("blocked",()=>J()),Ue.then(yt=>{oe&&yt.addEventListener("close",()=>oe()),fe&&yt.addEventListener("versionchange",()=>fe())}).catch(()=>{}),Ue}function Pe(ue,{blocked:ye}={}){const J=indexedDB.deleteDatabase(ue);return ye&&J.addEventListener("blocked",()=>ye()),pe(J).then(()=>{})}const xe=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],$e=new Map;function ie(ue,ye){if(!(ue instanceof IDBDatabase)||ye in ue||"string"!=typeof ye)return;if($e.get(ye))return $e.get(ye);const J=ye.replace(/FromIndex$/,""),X=ye!==J,fe=De.includes(J);if(!(J in(X?IDBIndex:IDBObjectStore).prototype)||!fe&&!xe.includes(J))return;const oe=function(){var Ve=(0,s.Z)(function*(Ue,...yt){const tn=this.transaction(Ue,fe?"readwrite":"readonly");let Bt=tn.store;return X&&(Bt=Bt.index(yt.shift())),(yield Promise.all([Bt[J](...yt),fe&&tn.done]))[0]});return function(yt){return Ve.apply(this,arguments)}}();return $e.set(ye,oe),oe}!function Ie(ue){Re=ue(Re)}(ue=>({...ue,get:(ye,J,X)=>ie(ye,J)||ue.get(ye,J,X),has:(ye,J)=>!!ie(ye,J)||ue.has(ye,J)}))},5861:(ht,Se,N)=>{function s(R,re,le,ge,se,ae,he){try{var Z=R[ae](he),z=Z.value}catch(Q){return void le(Q)}Z.done?re(z):Promise.resolve(z).then(ge,se)}function j(R){return function(){var re=this,le=arguments;return new Promise(function(ge,se){var ae=R.apply(re,le);function he(z){s(ae,ge,se,he,Z,"next",z)}function Z(z){s(ae,ge,se,he,Z,"throw",z)}he(void 0)})}}N.d(Se,{Z:()=>j})}},ht=>{ht(ht.s=4588)}]);